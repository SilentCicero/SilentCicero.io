//////////////////////////////////////////////////////////////////////////
//                                                                      //
// This is a generated file. You can view the original                  //
// source in your browser if your browser supports source maps.         //
//                                                                      //
// If you are using Chrome, open the Developer Tools and click the gear //
// icon in its lower right corner. In the General Settings panel, turn  //
// on 'Enable source maps'.                                             //
//                                                                      //
// If you are using Firefox 23, go to `about:config` and set the        //
// `devtools.debugger.source-maps-enabled` preference to true.          //
// (The preference should be on by default in Firefox 24; versions      //
// older than 23 do not support source maps.)                           //
//                                                                      //
//////////////////////////////////////////////////////////////////////////


(function () {

/* Imports */
var Meteor = Package.meteor.Meteor;
var Template = Package.templating.Template;
var ShareJSConnector = Package['mizzao:sharejs'].ShareJSConnector;
var Blaze = Package.blaze.Blaze;
var UI = Package.blaze.UI;
var Handlebars = Package.blaze.Handlebars;
var HTML = Package.htmljs.HTML;

/* Package-scope variables */
var __coffeescriptShare;

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/mizzao:sharejs-ace/ace-builds/src/ace.js                                                                   //
// This file is in bare mode and is not in its own closure.                                                            //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
/* ***** BEGIN LICENSE BLOCK *****                                                                                     // 1
 * Distributed under the BSD license:                                                                                  // 2
 *                                                                                                                     // 3
 * Copyright (c) 2010, Ajax.org B.V.                                                                                   // 4
 * All rights reserved.                                                                                                // 5
 *                                                                                                                     // 6
 * Redistribution and use in source and binary forms, with or without                                                  // 7
 * modification, are permitted provided that the following conditions are met:                                         // 8
 *     * Redistributions of source code must retain the above copyright                                                // 9
 *       notice, this list of conditions and the following disclaimer.                                                 // 10
 *     * Redistributions in binary form must reproduce the above copyright                                             // 11
 *       notice, this list of conditions and the following disclaimer in the                                           // 12
 *       documentation and/or other materials provided with the distribution.                                          // 13
 *     * Neither the name of Ajax.org B.V. nor the                                                                     // 14
 *       names of its contributors may be used to endorse or promote products                                          // 15
 *       derived from this software without specific prior written permission.                                         // 16
 *                                                                                                                     // 17
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND                                     // 18
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED                                       // 19
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE                                              // 20
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY                                                       // 21
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES                                          // 22
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;                                        // 23
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND                                         // 24
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT                                          // 25
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS                                       // 26
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.                                                        // 27
 *                                                                                                                     // 28
 * ***** END LICENSE BLOCK ***** */                                                                                    // 29
                                                                                                                       // 30
/**                                                                                                                    // 31
 * Define a module along with a payload                                                                                // 32
 * @param module a name for the payload                                                                                // 33
 * @param payload a function to call with (require, exports, module) params                                            // 34
 */                                                                                                                    // 35
                                                                                                                       // 36
(function() {                                                                                                          // 37
                                                                                                                       // 38
var ACE_NAMESPACE = "";                                                                                                // 39
                                                                                                                       // 40
var global = (function() {                                                                                             // 41
    return this;                                                                                                       // 42
})();                                                                                                                  // 43
                                                                                                                       // 44
                                                                                                                       // 45
if (!ACE_NAMESPACE && typeof requirejs !== "undefined")                                                                // 46
    return;                                                                                                            // 47
                                                                                                                       // 48
                                                                                                                       // 49
var _define = function(module, deps, payload) {                                                                        // 50
    if (typeof module !== 'string') {                                                                                  // 51
        if (_define.original)                                                                                          // 52
            _define.original.apply(window, arguments);                                                                 // 53
        else {                                                                                                         // 54
            console.error('dropping module because define wasn\'t a string.');                                         // 55
            console.trace();                                                                                           // 56
        }                                                                                                              // 57
        return;                                                                                                        // 58
    }                                                                                                                  // 59
                                                                                                                       // 60
    if (arguments.length == 2)                                                                                         // 61
        payload = deps;                                                                                                // 62
                                                                                                                       // 63
    if (!_define.modules) {                                                                                            // 64
        _define.modules = {};                                                                                          // 65
        _define.payloads = {};                                                                                         // 66
    }                                                                                                                  // 67
                                                                                                                       // 68
    _define.payloads[module] = payload;                                                                                // 69
    _define.modules[module] = null;                                                                                    // 70
};                                                                                                                     // 71
                                                                                                                       // 72
/**                                                                                                                    // 73
 * Get at functionality define()ed using the function above                                                            // 74
 */                                                                                                                    // 75
var _require = function(parentId, module, callback) {                                                                  // 76
    if (Object.prototype.toString.call(module) === "[object Array]") {                                                 // 77
        var params = [];                                                                                               // 78
        for (var i = 0, l = module.length; i < l; ++i) {                                                               // 79
            var dep = lookup(parentId, module[i]);                                                                     // 80
            if (!dep && _require.original)                                                                             // 81
                return _require.original.apply(window, arguments);                                                     // 82
            params.push(dep);                                                                                          // 83
        }                                                                                                              // 84
        if (callback) {                                                                                                // 85
            callback.apply(null, params);                                                                              // 86
        }                                                                                                              // 87
    }                                                                                                                  // 88
    else if (typeof module === 'string') {                                                                             // 89
        var payload = lookup(parentId, module);                                                                        // 90
        if (!payload && _require.original)                                                                             // 91
            return _require.original.apply(window, arguments);                                                         // 92
                                                                                                                       // 93
        if (callback) {                                                                                                // 94
            callback();                                                                                                // 95
        }                                                                                                              // 96
                                                                                                                       // 97
        return payload;                                                                                                // 98
    }                                                                                                                  // 99
    else {                                                                                                             // 100
        if (_require.original)                                                                                         // 101
            return _require.original.apply(window, arguments);                                                         // 102
    }                                                                                                                  // 103
};                                                                                                                     // 104
                                                                                                                       // 105
var normalizeModule = function(parentId, moduleName) {                                                                 // 106
    // normalize plugin requires                                                                                       // 107
    if (moduleName.indexOf("!") !== -1) {                                                                              // 108
        var chunks = moduleName.split("!");                                                                            // 109
        return normalizeModule(parentId, chunks[0]) + "!" + normalizeModule(parentId, chunks[1]);                      // 110
    }                                                                                                                  // 111
    // normalize relative requires                                                                                     // 112
    if (moduleName.charAt(0) == ".") {                                                                                 // 113
        var base = parentId.split("/").slice(0, -1).join("/");                                                         // 114
        moduleName = base + "/" + moduleName;                                                                          // 115
                                                                                                                       // 116
        while(moduleName.indexOf(".") !== -1 && previous != moduleName) {                                              // 117
            var previous = moduleName;                                                                                 // 118
            moduleName = moduleName.replace(/\/\.\//, "/").replace(/[^\/]+\/\.\.\//, "");                              // 119
        }                                                                                                              // 120
    }                                                                                                                  // 121
                                                                                                                       // 122
    return moduleName;                                                                                                 // 123
};                                                                                                                     // 124
                                                                                                                       // 125
/**                                                                                                                    // 126
 * Internal function to lookup moduleNames and resolve them by calling the                                             // 127
 * definition function if needed.                                                                                      // 128
 */                                                                                                                    // 129
var lookup = function(parentId, moduleName) {                                                                          // 130
                                                                                                                       // 131
    moduleName = normalizeModule(parentId, moduleName);                                                                // 132
                                                                                                                       // 133
    var module = _define.modules[moduleName];                                                                          // 134
    if (!module) {                                                                                                     // 135
        module = _define.payloads[moduleName];                                                                         // 136
        if (typeof module === 'function') {                                                                            // 137
            var exports = {};                                                                                          // 138
            var mod = {                                                                                                // 139
                id: moduleName,                                                                                        // 140
                uri: '',                                                                                               // 141
                exports: exports,                                                                                      // 142
                packaged: true                                                                                         // 143
            };                                                                                                         // 144
                                                                                                                       // 145
            var req = function(module, callback) {                                                                     // 146
                return _require(moduleName, module, callback);                                                         // 147
            };                                                                                                         // 148
                                                                                                                       // 149
            var returnValue = module(req, exports, mod);                                                               // 150
            exports = returnValue || mod.exports;                                                                      // 151
            _define.modules[moduleName] = exports;                                                                     // 152
            delete _define.payloads[moduleName];                                                                       // 153
        }                                                                                                              // 154
        module = _define.modules[moduleName] = exports || module;                                                      // 155
    }                                                                                                                  // 156
    return module;                                                                                                     // 157
};                                                                                                                     // 158
                                                                                                                       // 159
function exportAce(ns) {                                                                                               // 160
    var require = function(module, callback) {                                                                         // 161
        return _require("", module, callback);                                                                         // 162
    };                                                                                                                 // 163
                                                                                                                       // 164
    var root = global;                                                                                                 // 165
    if (ns) {                                                                                                          // 166
        if (!global[ns])                                                                                               // 167
            global[ns] = {};                                                                                           // 168
        root = global[ns];                                                                                             // 169
    }                                                                                                                  // 170
                                                                                                                       // 171
    if (!root.define || !root.define.packaged) {                                                                       // 172
        _define.original = root.define;                                                                                // 173
        root.define = _define;                                                                                         // 174
        root.define.packaged = true;                                                                                   // 175
    }                                                                                                                  // 176
                                                                                                                       // 177
    if (!root.require || !root.require.packaged) {                                                                     // 178
        _require.original = root.require;                                                                              // 179
        root.require = require;                                                                                        // 180
        root.require.packaged = true;                                                                                  // 181
    }                                                                                                                  // 182
}                                                                                                                      // 183
                                                                                                                       // 184
exportAce(ACE_NAMESPACE);                                                                                              // 185
                                                                                                                       // 186
})();                                                                                                                  // 187
                                                                                                                       // 188
define("ace/lib/regexp",["require","exports","module"], function(require, exports, module) {                           // 189
"use strict";                                                                                                          // 190
                                                                                                                       // 191
    var real = {                                                                                                       // 192
            exec: RegExp.prototype.exec,                                                                               // 193
            test: RegExp.prototype.test,                                                                               // 194
            match: String.prototype.match,                                                                             // 195
            replace: String.prototype.replace,                                                                         // 196
            split: String.prototype.split                                                                              // 197
        },                                                                                                             // 198
        compliantExecNpcg = real.exec.call(/()??/, "")[1] === undefined, // check `exec` handling of nonparticipating capturing groups
        compliantLastIndexIncrement = function () {                                                                    // 200
            var x = /^/g;                                                                                              // 201
            real.test.call(x, "");                                                                                     // 202
            return !x.lastIndex;                                                                                       // 203
        }();                                                                                                           // 204
                                                                                                                       // 205
    if (compliantLastIndexIncrement && compliantExecNpcg)                                                              // 206
        return;                                                                                                        // 207
    RegExp.prototype.exec = function (str) {                                                                           // 208
        var match = real.exec.apply(this, arguments),                                                                  // 209
            name, r2;                                                                                                  // 210
        if ( typeof(str) == 'string' && match) {                                                                       // 211
            if (!compliantExecNpcg && match.length > 1 && indexOf(match, "") > -1) {                                   // 212
                r2 = RegExp(this.source, real.replace.call(getNativeFlags(this), "g", ""));                            // 213
                real.replace.call(str.slice(match.index), r2, function () {                                            // 214
                    for (var i = 1; i < arguments.length - 2; i++) {                                                   // 215
                        if (arguments[i] === undefined)                                                                // 216
                            match[i] = undefined;                                                                      // 217
                    }                                                                                                  // 218
                });                                                                                                    // 219
            }                                                                                                          // 220
            if (this._xregexp && this._xregexp.captureNames) {                                                         // 221
                for (var i = 1; i < match.length; i++) {                                                               // 222
                    name = this._xregexp.captureNames[i - 1];                                                          // 223
                    if (name)                                                                                          // 224
                       match[name] = match[i];                                                                         // 225
                }                                                                                                      // 226
            }                                                                                                          // 227
            if (!compliantLastIndexIncrement && this.global && !match[0].length && (this.lastIndex > match.index))     // 228
                this.lastIndex--;                                                                                      // 229
        }                                                                                                              // 230
        return match;                                                                                                  // 231
    };                                                                                                                 // 232
    if (!compliantLastIndexIncrement) {                                                                                // 233
        RegExp.prototype.test = function (str) {                                                                       // 234
            var match = real.exec.call(this, str);                                                                     // 235
            if (match && this.global && !match[0].length && (this.lastIndex > match.index))                            // 236
                this.lastIndex--;                                                                                      // 237
            return !!match;                                                                                            // 238
        };                                                                                                             // 239
    }                                                                                                                  // 240
                                                                                                                       // 241
    function getNativeFlags (regex) {                                                                                  // 242
        return (regex.global     ? "g" : "") +                                                                         // 243
               (regex.ignoreCase ? "i" : "") +                                                                         // 244
               (regex.multiline  ? "m" : "") +                                                                         // 245
               (regex.extended   ? "x" : "") + // Proposed for ES4; included in AS3                                    // 246
               (regex.sticky     ? "y" : "");                                                                          // 247
    }                                                                                                                  // 248
                                                                                                                       // 249
    function indexOf (array, item, from) {                                                                             // 250
        if (Array.prototype.indexOf) // Use the native array method if available                                       // 251
            return array.indexOf(item, from);                                                                          // 252
        for (var i = from || 0; i < array.length; i++) {                                                               // 253
            if (array[i] === item)                                                                                     // 254
                return i;                                                                                              // 255
        }                                                                                                              // 256
        return -1;                                                                                                     // 257
    }                                                                                                                  // 258
                                                                                                                       // 259
});                                                                                                                    // 260
                                                                                                                       // 261
define("ace/lib/es5-shim",["require","exports","module"], function(require, exports, module) {                         // 262
                                                                                                                       // 263
function Empty() {}                                                                                                    // 264
                                                                                                                       // 265
if (!Function.prototype.bind) {                                                                                        // 266
    Function.prototype.bind = function bind(that) { // .length is 1                                                    // 267
        var target = this;                                                                                             // 268
        if (typeof target != "function") {                                                                             // 269
            throw new TypeError("Function.prototype.bind called on incompatible " + target);                           // 270
        }                                                                                                              // 271
        var args = slice.call(arguments, 1); // for normal call                                                        // 272
        var bound = function () {                                                                                      // 273
                                                                                                                       // 274
            if (this instanceof bound) {                                                                               // 275
                                                                                                                       // 276
                var result = target.apply(                                                                             // 277
                    this,                                                                                              // 278
                    args.concat(slice.call(arguments))                                                                 // 279
                );                                                                                                     // 280
                if (Object(result) === result) {                                                                       // 281
                    return result;                                                                                     // 282
                }                                                                                                      // 283
                return this;                                                                                           // 284
                                                                                                                       // 285
            } else {                                                                                                   // 286
                return target.apply(                                                                                   // 287
                    that,                                                                                              // 288
                    args.concat(slice.call(arguments))                                                                 // 289
                );                                                                                                     // 290
                                                                                                                       // 291
            }                                                                                                          // 292
                                                                                                                       // 293
        };                                                                                                             // 294
        if(target.prototype) {                                                                                         // 295
            Empty.prototype = target.prototype;                                                                        // 296
            bound.prototype = new Empty();                                                                             // 297
            Empty.prototype = null;                                                                                    // 298
        }                                                                                                              // 299
        return bound;                                                                                                  // 300
    };                                                                                                                 // 301
}                                                                                                                      // 302
var call = Function.prototype.call;                                                                                    // 303
var prototypeOfArray = Array.prototype;                                                                                // 304
var prototypeOfObject = Object.prototype;                                                                              // 305
var slice = prototypeOfArray.slice;                                                                                    // 306
var _toString = call.bind(prototypeOfObject.toString);                                                                 // 307
var owns = call.bind(prototypeOfObject.hasOwnProperty);                                                                // 308
var defineGetter;                                                                                                      // 309
var defineSetter;                                                                                                      // 310
var lookupGetter;                                                                                                      // 311
var lookupSetter;                                                                                                      // 312
var supportsAccessors;                                                                                                 // 313
if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__"))) {                                               // 314
    defineGetter = call.bind(prototypeOfObject.__defineGetter__);                                                      // 315
    defineSetter = call.bind(prototypeOfObject.__defineSetter__);                                                      // 316
    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);                                                      // 317
    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);                                                      // 318
}                                                                                                                      // 319
if ([1,2].splice(0).length != 2) {                                                                                     // 320
    if(function() { // test IE < 9 to splice bug - see issue #138                                                      // 321
        function makeArray(l) {                                                                                        // 322
            var a = new Array(l+2);                                                                                    // 323
            a[0] = a[1] = 0;                                                                                           // 324
            return a;                                                                                                  // 325
        }                                                                                                              // 326
        var array = [], lengthBefore;                                                                                  // 327
                                                                                                                       // 328
        array.splice.apply(array, makeArray(20));                                                                      // 329
        array.splice.apply(array, makeArray(26));                                                                      // 330
                                                                                                                       // 331
        lengthBefore = array.length; //46                                                                              // 332
        array.splice(5, 0, "XXX"); // add one element                                                                  // 333
                                                                                                                       // 334
        lengthBefore + 1 == array.length                                                                               // 335
                                                                                                                       // 336
        if (lengthBefore + 1 == array.length) {                                                                        // 337
            return true;// has right splice implementation without bugs                                                // 338
        }                                                                                                              // 339
    }()) {//IE 6/7                                                                                                     // 340
        var array_splice = Array.prototype.splice;                                                                     // 341
        Array.prototype.splice = function(start, deleteCount) {                                                        // 342
            if (!arguments.length) {                                                                                   // 343
                return [];                                                                                             // 344
            } else {                                                                                                   // 345
                return array_splice.apply(this, [                                                                      // 346
                    start === void 0 ? 0 : start,                                                                      // 347
                    deleteCount === void 0 ? (this.length - start) : deleteCount                                       // 348
                ].concat(slice.call(arguments, 2)))                                                                    // 349
            }                                                                                                          // 350
        };                                                                                                             // 351
    } else {//IE8                                                                                                      // 352
        Array.prototype.splice = function(pos, removeCount){                                                           // 353
            var length = this.length;                                                                                  // 354
            if (pos > 0) {                                                                                             // 355
                if (pos > length)                                                                                      // 356
                    pos = length;                                                                                      // 357
            } else if (pos == void 0) {                                                                                // 358
                pos = 0;                                                                                               // 359
            } else if (pos < 0) {                                                                                      // 360
                pos = Math.max(length + pos, 0);                                                                       // 361
            }                                                                                                          // 362
                                                                                                                       // 363
            if (!(pos+removeCount < length))                                                                           // 364
                removeCount = length - pos;                                                                            // 365
                                                                                                                       // 366
            var removed = this.slice(pos, pos+removeCount);                                                            // 367
            var insert = slice.call(arguments, 2);                                                                     // 368
            var add = insert.length;                                                                                   // 369
            if (pos === length) {                                                                                      // 370
                if (add) {                                                                                             // 371
                    this.push.apply(this, insert);                                                                     // 372
                }                                                                                                      // 373
            } else {                                                                                                   // 374
                var remove = Math.min(removeCount, length - pos);                                                      // 375
                var tailOldPos = pos + remove;                                                                         // 376
                var tailNewPos = tailOldPos + add - remove;                                                            // 377
                var tailCount = length - tailOldPos;                                                                   // 378
                var lengthAfterRemove = length - remove;                                                               // 379
                                                                                                                       // 380
                if (tailNewPos < tailOldPos) { // case A                                                               // 381
                    for (var i = 0; i < tailCount; ++i) {                                                              // 382
                        this[tailNewPos+i] = this[tailOldPos+i];                                                       // 383
                    }                                                                                                  // 384
                } else if (tailNewPos > tailOldPos) { // case B                                                        // 385
                    for (i = tailCount; i--; ) {                                                                       // 386
                        this[tailNewPos+i] = this[tailOldPos+i];                                                       // 387
                    }                                                                                                  // 388
                } // else, add == remove (nothing to do)                                                               // 389
                                                                                                                       // 390
                if (add && pos === lengthAfterRemove) {                                                                // 391
                    this.length = lengthAfterRemove; // truncate array                                                 // 392
                    this.push.apply(this, insert);                                                                     // 393
                } else {                                                                                               // 394
                    this.length = lengthAfterRemove + add; // reserves space                                           // 395
                    for (i = 0; i < add; ++i) {                                                                        // 396
                        this[pos+i] = insert[i];                                                                       // 397
                    }                                                                                                  // 398
                }                                                                                                      // 399
            }                                                                                                          // 400
            return removed;                                                                                            // 401
        };                                                                                                             // 402
    }                                                                                                                  // 403
}                                                                                                                      // 404
if (!Array.isArray) {                                                                                                  // 405
    Array.isArray = function isArray(obj) {                                                                            // 406
        return _toString(obj) == "[object Array]";                                                                     // 407
    };                                                                                                                 // 408
}                                                                                                                      // 409
var boxedString = Object("a"),                                                                                         // 410
    splitString = boxedString[0] != "a" || !(0 in boxedString);                                                        // 411
                                                                                                                       // 412
if (!Array.prototype.forEach) {                                                                                        // 413
    Array.prototype.forEach = function forEach(fun /*, thisp*/) {                                                      // 414
        var object = toObject(this),                                                                                   // 415
            self = splitString && _toString(this) == "[object String]" ?                                               // 416
                this.split("") :                                                                                       // 417
                object,                                                                                                // 418
            thisp = arguments[1],                                                                                      // 419
            i = -1,                                                                                                    // 420
            length = self.length >>> 0;                                                                                // 421
        if (_toString(fun) != "[object Function]") {                                                                   // 422
            throw new TypeError(); // TODO message                                                                     // 423
        }                                                                                                              // 424
                                                                                                                       // 425
        while (++i < length) {                                                                                         // 426
            if (i in self) {                                                                                           // 427
                fun.call(thisp, self[i], i, object);                                                                   // 428
            }                                                                                                          // 429
        }                                                                                                              // 430
    };                                                                                                                 // 431
}                                                                                                                      // 432
if (!Array.prototype.map) {                                                                                            // 433
    Array.prototype.map = function map(fun /*, thisp*/) {                                                              // 434
        var object = toObject(this),                                                                                   // 435
            self = splitString && _toString(this) == "[object String]" ?                                               // 436
                this.split("") :                                                                                       // 437
                object,                                                                                                // 438
            length = self.length >>> 0,                                                                                // 439
            result = Array(length),                                                                                    // 440
            thisp = arguments[1];                                                                                      // 441
        if (_toString(fun) != "[object Function]") {                                                                   // 442
            throw new TypeError(fun + " is not a function");                                                           // 443
        }                                                                                                              // 444
                                                                                                                       // 445
        for (var i = 0; i < length; i++) {                                                                             // 446
            if (i in self)                                                                                             // 447
                result[i] = fun.call(thisp, self[i], i, object);                                                       // 448
        }                                                                                                              // 449
        return result;                                                                                                 // 450
    };                                                                                                                 // 451
}                                                                                                                      // 452
if (!Array.prototype.filter) {                                                                                         // 453
    Array.prototype.filter = function filter(fun /*, thisp */) {                                                       // 454
        var object = toObject(this),                                                                                   // 455
            self = splitString && _toString(this) == "[object String]" ?                                               // 456
                this.split("") :                                                                                       // 457
                    object,                                                                                            // 458
            length = self.length >>> 0,                                                                                // 459
            result = [],                                                                                               // 460
            value,                                                                                                     // 461
            thisp = arguments[1];                                                                                      // 462
        if (_toString(fun) != "[object Function]") {                                                                   // 463
            throw new TypeError(fun + " is not a function");                                                           // 464
        }                                                                                                              // 465
                                                                                                                       // 466
        for (var i = 0; i < length; i++) {                                                                             // 467
            if (i in self) {                                                                                           // 468
                value = self[i];                                                                                       // 469
                if (fun.call(thisp, value, i, object)) {                                                               // 470
                    result.push(value);                                                                                // 471
                }                                                                                                      // 472
            }                                                                                                          // 473
        }                                                                                                              // 474
        return result;                                                                                                 // 475
    };                                                                                                                 // 476
}                                                                                                                      // 477
if (!Array.prototype.every) {                                                                                          // 478
    Array.prototype.every = function every(fun /*, thisp */) {                                                         // 479
        var object = toObject(this),                                                                                   // 480
            self = splitString && _toString(this) == "[object String]" ?                                               // 481
                this.split("") :                                                                                       // 482
                object,                                                                                                // 483
            length = self.length >>> 0,                                                                                // 484
            thisp = arguments[1];                                                                                      // 485
        if (_toString(fun) != "[object Function]") {                                                                   // 486
            throw new TypeError(fun + " is not a function");                                                           // 487
        }                                                                                                              // 488
                                                                                                                       // 489
        for (var i = 0; i < length; i++) {                                                                             // 490
            if (i in self && !fun.call(thisp, self[i], i, object)) {                                                   // 491
                return false;                                                                                          // 492
            }                                                                                                          // 493
        }                                                                                                              // 494
        return true;                                                                                                   // 495
    };                                                                                                                 // 496
}                                                                                                                      // 497
if (!Array.prototype.some) {                                                                                           // 498
    Array.prototype.some = function some(fun /*, thisp */) {                                                           // 499
        var object = toObject(this),                                                                                   // 500
            self = splitString && _toString(this) == "[object String]" ?                                               // 501
                this.split("") :                                                                                       // 502
                object,                                                                                                // 503
            length = self.length >>> 0,                                                                                // 504
            thisp = arguments[1];                                                                                      // 505
        if (_toString(fun) != "[object Function]") {                                                                   // 506
            throw new TypeError(fun + " is not a function");                                                           // 507
        }                                                                                                              // 508
                                                                                                                       // 509
        for (var i = 0; i < length; i++) {                                                                             // 510
            if (i in self && fun.call(thisp, self[i], i, object)) {                                                    // 511
                return true;                                                                                           // 512
            }                                                                                                          // 513
        }                                                                                                              // 514
        return false;                                                                                                  // 515
    };                                                                                                                 // 516
}                                                                                                                      // 517
if (!Array.prototype.reduce) {                                                                                         // 518
    Array.prototype.reduce = function reduce(fun /*, initial*/) {                                                      // 519
        var object = toObject(this),                                                                                   // 520
            self = splitString && _toString(this) == "[object String]" ?                                               // 521
                this.split("") :                                                                                       // 522
                object,                                                                                                // 523
            length = self.length >>> 0;                                                                                // 524
        if (_toString(fun) != "[object Function]") {                                                                   // 525
            throw new TypeError(fun + " is not a function");                                                           // 526
        }                                                                                                              // 527
        if (!length && arguments.length == 1) {                                                                        // 528
            throw new TypeError("reduce of empty array with no initial value");                                        // 529
        }                                                                                                              // 530
                                                                                                                       // 531
        var i = 0;                                                                                                     // 532
        var result;                                                                                                    // 533
        if (arguments.length >= 2) {                                                                                   // 534
            result = arguments[1];                                                                                     // 535
        } else {                                                                                                       // 536
            do {                                                                                                       // 537
                if (i in self) {                                                                                       // 538
                    result = self[i++];                                                                                // 539
                    break;                                                                                             // 540
                }                                                                                                      // 541
                if (++i >= length) {                                                                                   // 542
                    throw new TypeError("reduce of empty array with no initial value");                                // 543
                }                                                                                                      // 544
            } while (true);                                                                                            // 545
        }                                                                                                              // 546
                                                                                                                       // 547
        for (; i < length; i++) {                                                                                      // 548
            if (i in self) {                                                                                           // 549
                result = fun.call(void 0, result, self[i], i, object);                                                 // 550
            }                                                                                                          // 551
        }                                                                                                              // 552
                                                                                                                       // 553
        return result;                                                                                                 // 554
    };                                                                                                                 // 555
}                                                                                                                      // 556
if (!Array.prototype.reduceRight) {                                                                                    // 557
    Array.prototype.reduceRight = function reduceRight(fun /*, initial*/) {                                            // 558
        var object = toObject(this),                                                                                   // 559
            self = splitString && _toString(this) == "[object String]" ?                                               // 560
                this.split("") :                                                                                       // 561
                object,                                                                                                // 562
            length = self.length >>> 0;                                                                                // 563
        if (_toString(fun) != "[object Function]") {                                                                   // 564
            throw new TypeError(fun + " is not a function");                                                           // 565
        }                                                                                                              // 566
        if (!length && arguments.length == 1) {                                                                        // 567
            throw new TypeError("reduceRight of empty array with no initial value");                                   // 568
        }                                                                                                              // 569
                                                                                                                       // 570
        var result, i = length - 1;                                                                                    // 571
        if (arguments.length >= 2) {                                                                                   // 572
            result = arguments[1];                                                                                     // 573
        } else {                                                                                                       // 574
            do {                                                                                                       // 575
                if (i in self) {                                                                                       // 576
                    result = self[i--];                                                                                // 577
                    break;                                                                                             // 578
                }                                                                                                      // 579
                if (--i < 0) {                                                                                         // 580
                    throw new TypeError("reduceRight of empty array with no initial value");                           // 581
                }                                                                                                      // 582
            } while (true);                                                                                            // 583
        }                                                                                                              // 584
                                                                                                                       // 585
        do {                                                                                                           // 586
            if (i in this) {                                                                                           // 587
                result = fun.call(void 0, result, self[i], i, object);                                                 // 588
            }                                                                                                          // 589
        } while (i--);                                                                                                 // 590
                                                                                                                       // 591
        return result;                                                                                                 // 592
    };                                                                                                                 // 593
}                                                                                                                      // 594
if (!Array.prototype.indexOf || ([0, 1].indexOf(1, 2) != -1)) {                                                        // 595
    Array.prototype.indexOf = function indexOf(sought /*, fromIndex */ ) {                                             // 596
        var self = splitString && _toString(this) == "[object String]" ?                                               // 597
                this.split("") :                                                                                       // 598
                toObject(this),                                                                                        // 599
            length = self.length >>> 0;                                                                                // 600
                                                                                                                       // 601
        if (!length) {                                                                                                 // 602
            return -1;                                                                                                 // 603
        }                                                                                                              // 604
                                                                                                                       // 605
        var i = 0;                                                                                                     // 606
        if (arguments.length > 1) {                                                                                    // 607
            i = toInteger(arguments[1]);                                                                               // 608
        }                                                                                                              // 609
        i = i >= 0 ? i : Math.max(0, length + i);                                                                      // 610
        for (; i < length; i++) {                                                                                      // 611
            if (i in self && self[i] === sought) {                                                                     // 612
                return i;                                                                                              // 613
            }                                                                                                          // 614
        }                                                                                                              // 615
        return -1;                                                                                                     // 616
    };                                                                                                                 // 617
}                                                                                                                      // 618
if (!Array.prototype.lastIndexOf || ([0, 1].lastIndexOf(0, -3) != -1)) {                                               // 619
    Array.prototype.lastIndexOf = function lastIndexOf(sought /*, fromIndex */) {                                      // 620
        var self = splitString && _toString(this) == "[object String]" ?                                               // 621
                this.split("") :                                                                                       // 622
                toObject(this),                                                                                        // 623
            length = self.length >>> 0;                                                                                // 624
                                                                                                                       // 625
        if (!length) {                                                                                                 // 626
            return -1;                                                                                                 // 627
        }                                                                                                              // 628
        var i = length - 1;                                                                                            // 629
        if (arguments.length > 1) {                                                                                    // 630
            i = Math.min(i, toInteger(arguments[1]));                                                                  // 631
        }                                                                                                              // 632
        i = i >= 0 ? i : length - Math.abs(i);                                                                         // 633
        for (; i >= 0; i--) {                                                                                          // 634
            if (i in self && sought === self[i]) {                                                                     // 635
                return i;                                                                                              // 636
            }                                                                                                          // 637
        }                                                                                                              // 638
        return -1;                                                                                                     // 639
    };                                                                                                                 // 640
}                                                                                                                      // 641
if (!Object.getPrototypeOf) {                                                                                          // 642
    Object.getPrototypeOf = function getPrototypeOf(object) {                                                          // 643
        return object.__proto__ || (                                                                                   // 644
            object.constructor ?                                                                                       // 645
            object.constructor.prototype :                                                                             // 646
            prototypeOfObject                                                                                          // 647
        );                                                                                                             // 648
    };                                                                                                                 // 649
}                                                                                                                      // 650
if (!Object.getOwnPropertyDescriptor) {                                                                                // 651
    var ERR_NON_OBJECT = "Object.getOwnPropertyDescriptor called on a " +                                              // 652
                         "non-object: ";                                                                               // 653
    Object.getOwnPropertyDescriptor = function getOwnPropertyDescriptor(object, property) {                            // 654
        if ((typeof object != "object" && typeof object != "function") || object === null)                             // 655
            throw new TypeError(ERR_NON_OBJECT + object);                                                              // 656
        if (!owns(object, property))                                                                                   // 657
            return;                                                                                                    // 658
                                                                                                                       // 659
        var descriptor, getter, setter;                                                                                // 660
        descriptor =  { enumerable: true, configurable: true };                                                        // 661
        if (supportsAccessors) {                                                                                       // 662
            var prototype = object.__proto__;                                                                          // 663
            object.__proto__ = prototypeOfObject;                                                                      // 664
                                                                                                                       // 665
            var getter = lookupGetter(object, property);                                                               // 666
            var setter = lookupSetter(object, property);                                                               // 667
            object.__proto__ = prototype;                                                                              // 668
                                                                                                                       // 669
            if (getter || setter) {                                                                                    // 670
                if (getter) descriptor.get = getter;                                                                   // 671
                if (setter) descriptor.set = setter;                                                                   // 672
                return descriptor;                                                                                     // 673
            }                                                                                                          // 674
        }                                                                                                              // 675
        descriptor.value = object[property];                                                                           // 676
        return descriptor;                                                                                             // 677
    };                                                                                                                 // 678
}                                                                                                                      // 679
if (!Object.getOwnPropertyNames) {                                                                                     // 680
    Object.getOwnPropertyNames = function getOwnPropertyNames(object) {                                                // 681
        return Object.keys(object);                                                                                    // 682
    };                                                                                                                 // 683
}                                                                                                                      // 684
if (!Object.create) {                                                                                                  // 685
    var createEmpty;                                                                                                   // 686
    if (Object.prototype.__proto__ === null) {                                                                         // 687
        createEmpty = function () {                                                                                    // 688
            return { "__proto__": null };                                                                              // 689
        };                                                                                                             // 690
    } else {                                                                                                           // 691
        createEmpty = function () {                                                                                    // 692
            var empty = {};                                                                                            // 693
            for (var i in empty)                                                                                       // 694
                empty[i] = null;                                                                                       // 695
            empty.constructor =                                                                                        // 696
            empty.hasOwnProperty =                                                                                     // 697
            empty.propertyIsEnumerable =                                                                               // 698
            empty.isPrototypeOf =                                                                                      // 699
            empty.toLocaleString =                                                                                     // 700
            empty.toString =                                                                                           // 701
            empty.valueOf =                                                                                            // 702
            empty.__proto__ = null;                                                                                    // 703
            return empty;                                                                                              // 704
        }                                                                                                              // 705
    }                                                                                                                  // 706
                                                                                                                       // 707
    Object.create = function create(prototype, properties) {                                                           // 708
        var object;                                                                                                    // 709
        if (prototype === null) {                                                                                      // 710
            object = createEmpty();                                                                                    // 711
        } else {                                                                                                       // 712
            if (typeof prototype != "object")                                                                          // 713
                throw new TypeError("typeof prototype["+(typeof prototype)+"] != 'object'");                           // 714
            var Type = function () {};                                                                                 // 715
            Type.prototype = prototype;                                                                                // 716
            object = new Type();                                                                                       // 717
            object.__proto__ = prototype;                                                                              // 718
        }                                                                                                              // 719
        if (properties !== void 0)                                                                                     // 720
            Object.defineProperties(object, properties);                                                               // 721
        return object;                                                                                                 // 722
    };                                                                                                                 // 723
}                                                                                                                      // 724
                                                                                                                       // 725
function doesDefinePropertyWork(object) {                                                                              // 726
    try {                                                                                                              // 727
        Object.defineProperty(object, "sentinel", {});                                                                 // 728
        return "sentinel" in object;                                                                                   // 729
    } catch (exception) {                                                                                              // 730
    }                                                                                                                  // 731
}                                                                                                                      // 732
if (Object.defineProperty) {                                                                                           // 733
    var definePropertyWorksOnObject = doesDefinePropertyWork({});                                                      // 734
    var definePropertyWorksOnDom = typeof document == "undefined" ||                                                   // 735
        doesDefinePropertyWork(document.createElement("div"));                                                         // 736
    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) {                                                   // 737
        var definePropertyFallback = Object.defineProperty;                                                            // 738
    }                                                                                                                  // 739
}                                                                                                                      // 740
                                                                                                                       // 741
if (!Object.defineProperty || definePropertyFallback) {                                                                // 742
    var ERR_NON_OBJECT_DESCRIPTOR = "Property description must be an object: ";                                        // 743
    var ERR_NON_OBJECT_TARGET = "Object.defineProperty called on non-object: "                                         // 744
    var ERR_ACCESSORS_NOT_SUPPORTED = "getters & setters can not be defined " +                                        // 745
                                      "on this javascript engine";                                                     // 746
                                                                                                                       // 747
    Object.defineProperty = function defineProperty(object, property, descriptor) {                                    // 748
        if ((typeof object != "object" && typeof object != "function") || object === null)                             // 749
            throw new TypeError(ERR_NON_OBJECT_TARGET + object);                                                       // 750
        if ((typeof descriptor != "object" && typeof descriptor != "function") || descriptor === null)                 // 751
            throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);                                               // 752
        if (definePropertyFallback) {                                                                                  // 753
            try {                                                                                                      // 754
                return definePropertyFallback.call(Object, object, property, descriptor);                              // 755
            } catch (exception) {                                                                                      // 756
            }                                                                                                          // 757
        }                                                                                                              // 758
        if (owns(descriptor, "value")) {                                                                               // 759
                                                                                                                       // 760
            if (supportsAccessors && (lookupGetter(object, property) ||                                                // 761
                                      lookupSetter(object, property)))                                                 // 762
            {                                                                                                          // 763
                var prototype = object.__proto__;                                                                      // 764
                object.__proto__ = prototypeOfObject;                                                                  // 765
                delete object[property];                                                                               // 766
                object[property] = descriptor.value;                                                                   // 767
                object.__proto__ = prototype;                                                                          // 768
            } else {                                                                                                   // 769
                object[property] = descriptor.value;                                                                   // 770
            }                                                                                                          // 771
        } else {                                                                                                       // 772
            if (!supportsAccessors)                                                                                    // 773
                throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);                                                      // 774
            if (owns(descriptor, "get"))                                                                               // 775
                defineGetter(object, property, descriptor.get);                                                        // 776
            if (owns(descriptor, "set"))                                                                               // 777
                defineSetter(object, property, descriptor.set);                                                        // 778
        }                                                                                                              // 779
                                                                                                                       // 780
        return object;                                                                                                 // 781
    };                                                                                                                 // 782
}                                                                                                                      // 783
if (!Object.defineProperties) {                                                                                        // 784
    Object.defineProperties = function defineProperties(object, properties) {                                          // 785
        for (var property in properties) {                                                                             // 786
            if (owns(properties, property))                                                                            // 787
                Object.defineProperty(object, property, properties[property]);                                         // 788
        }                                                                                                              // 789
        return object;                                                                                                 // 790
    };                                                                                                                 // 791
}                                                                                                                      // 792
if (!Object.seal) {                                                                                                    // 793
    Object.seal = function seal(object) {                                                                              // 794
        return object;                                                                                                 // 795
    };                                                                                                                 // 796
}                                                                                                                      // 797
if (!Object.freeze) {                                                                                                  // 798
    Object.freeze = function freeze(object) {                                                                          // 799
        return object;                                                                                                 // 800
    };                                                                                                                 // 801
}                                                                                                                      // 802
try {                                                                                                                  // 803
    Object.freeze(function () {});                                                                                     // 804
} catch (exception) {                                                                                                  // 805
    Object.freeze = (function freeze(freezeObject) {                                                                   // 806
        return function freeze(object) {                                                                               // 807
            if (typeof object == "function") {                                                                         // 808
                return object;                                                                                         // 809
            } else {                                                                                                   // 810
                return freezeObject(object);                                                                           // 811
            }                                                                                                          // 812
        };                                                                                                             // 813
    })(Object.freeze);                                                                                                 // 814
}                                                                                                                      // 815
if (!Object.preventExtensions) {                                                                                       // 816
    Object.preventExtensions = function preventExtensions(object) {                                                    // 817
        return object;                                                                                                 // 818
    };                                                                                                                 // 819
}                                                                                                                      // 820
if (!Object.isSealed) {                                                                                                // 821
    Object.isSealed = function isSealed(object) {                                                                      // 822
        return false;                                                                                                  // 823
    };                                                                                                                 // 824
}                                                                                                                      // 825
if (!Object.isFrozen) {                                                                                                // 826
    Object.isFrozen = function isFrozen(object) {                                                                      // 827
        return false;                                                                                                  // 828
    };                                                                                                                 // 829
}                                                                                                                      // 830
if (!Object.isExtensible) {                                                                                            // 831
    Object.isExtensible = function isExtensible(object) {                                                              // 832
        if (Object(object) === object) {                                                                               // 833
            throw new TypeError(); // TODO message                                                                     // 834
        }                                                                                                              // 835
        var name = '';                                                                                                 // 836
        while (owns(object, name)) {                                                                                   // 837
            name += '?';                                                                                               // 838
        }                                                                                                              // 839
        object[name] = true;                                                                                           // 840
        var returnValue = owns(object, name);                                                                          // 841
        delete object[name];                                                                                           // 842
        return returnValue;                                                                                            // 843
    };                                                                                                                 // 844
}                                                                                                                      // 845
if (!Object.keys) {                                                                                                    // 846
    var hasDontEnumBug = true,                                                                                         // 847
        dontEnums = [                                                                                                  // 848
            "toString",                                                                                                // 849
            "toLocaleString",                                                                                          // 850
            "valueOf",                                                                                                 // 851
            "hasOwnProperty",                                                                                          // 852
            "isPrototypeOf",                                                                                           // 853
            "propertyIsEnumerable",                                                                                    // 854
            "constructor"                                                                                              // 855
        ],                                                                                                             // 856
        dontEnumsLength = dontEnums.length;                                                                            // 857
                                                                                                                       // 858
    for (var key in {"toString": null}) {                                                                              // 859
        hasDontEnumBug = false;                                                                                        // 860
    }                                                                                                                  // 861
                                                                                                                       // 862
    Object.keys = function keys(object) {                                                                              // 863
                                                                                                                       // 864
        if (                                                                                                           // 865
            (typeof object != "object" && typeof object != "function") ||                                              // 866
            object === null                                                                                            // 867
        ) {                                                                                                            // 868
            throw new TypeError("Object.keys called on a non-object");                                                 // 869
        }                                                                                                              // 870
                                                                                                                       // 871
        var keys = [];                                                                                                 // 872
        for (var name in object) {                                                                                     // 873
            if (owns(object, name)) {                                                                                  // 874
                keys.push(name);                                                                                       // 875
            }                                                                                                          // 876
        }                                                                                                              // 877
                                                                                                                       // 878
        if (hasDontEnumBug) {                                                                                          // 879
            for (var i = 0, ii = dontEnumsLength; i < ii; i++) {                                                       // 880
                var dontEnum = dontEnums[i];                                                                           // 881
                if (owns(object, dontEnum)) {                                                                          // 882
                    keys.push(dontEnum);                                                                               // 883
                }                                                                                                      // 884
            }                                                                                                          // 885
        }                                                                                                              // 886
        return keys;                                                                                                   // 887
    };                                                                                                                 // 888
                                                                                                                       // 889
}                                                                                                                      // 890
if (!Date.now) {                                                                                                       // 891
    Date.now = function now() {                                                                                        // 892
        return new Date().getTime();                                                                                   // 893
    };                                                                                                                 // 894
}                                                                                                                      // 895
var ws = "\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003" +                                          // 896
    "\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028" +                                             // 897
    "\u2029\uFEFF";                                                                                                    // 898
if (!String.prototype.trim || ws.trim()) {                                                                             // 899
    ws = "[" + ws + "]";                                                                                               // 900
    var trimBeginRegexp = new RegExp("^" + ws + ws + "*"),                                                             // 901
        trimEndRegexp = new RegExp(ws + ws + "*$");                                                                    // 902
    String.prototype.trim = function trim() {                                                                          // 903
        return String(this).replace(trimBeginRegexp, "").replace(trimEndRegexp, "");                                   // 904
    };                                                                                                                 // 905
}                                                                                                                      // 906
                                                                                                                       // 907
function toInteger(n) {                                                                                                // 908
    n = +n;                                                                                                            // 909
    if (n !== n) { // isNaN                                                                                            // 910
        n = 0;                                                                                                         // 911
    } else if (n !== 0 && n !== (1/0) && n !== -(1/0)) {                                                               // 912
        n = (n > 0 || -1) * Math.floor(Math.abs(n));                                                                   // 913
    }                                                                                                                  // 914
    return n;                                                                                                          // 915
}                                                                                                                      // 916
                                                                                                                       // 917
function isPrimitive(input) {                                                                                          // 918
    var type = typeof input;                                                                                           // 919
    return (                                                                                                           // 920
        input === null ||                                                                                              // 921
        type === "undefined" ||                                                                                        // 922
        type === "boolean" ||                                                                                          // 923
        type === "number" ||                                                                                           // 924
        type === "string"                                                                                              // 925
    );                                                                                                                 // 926
}                                                                                                                      // 927
                                                                                                                       // 928
function toPrimitive(input) {                                                                                          // 929
    var val, valueOf, toString;                                                                                        // 930
    if (isPrimitive(input)) {                                                                                          // 931
        return input;                                                                                                  // 932
    }                                                                                                                  // 933
    valueOf = input.valueOf;                                                                                           // 934
    if (typeof valueOf === "function") {                                                                               // 935
        val = valueOf.call(input);                                                                                     // 936
        if (isPrimitive(val)) {                                                                                        // 937
            return val;                                                                                                // 938
        }                                                                                                              // 939
    }                                                                                                                  // 940
    toString = input.toString;                                                                                         // 941
    if (typeof toString === "function") {                                                                              // 942
        val = toString.call(input);                                                                                    // 943
        if (isPrimitive(val)) {                                                                                        // 944
            return val;                                                                                                // 945
        }                                                                                                              // 946
    }                                                                                                                  // 947
    throw new TypeError();                                                                                             // 948
}                                                                                                                      // 949
var toObject = function (o) {                                                                                          // 950
    if (o == null) { // this matches both null and undefined                                                           // 951
        throw new TypeError("can't convert "+o+" to object");                                                          // 952
    }                                                                                                                  // 953
    return Object(o);                                                                                                  // 954
};                                                                                                                     // 955
                                                                                                                       // 956
});                                                                                                                    // 957
                                                                                                                       // 958
define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"], function(require, exports, module) {
"use strict";                                                                                                          // 960
                                                                                                                       // 961
require("./regexp");                                                                                                   // 962
require("./es5-shim");                                                                                                 // 963
                                                                                                                       // 964
});                                                                                                                    // 965
                                                                                                                       // 966
define("ace/lib/dom",["require","exports","module"], function(require, exports, module) {                              // 967
"use strict";                                                                                                          // 968
                                                                                                                       // 969
if (typeof document == "undefined")                                                                                    // 970
    return;                                                                                                            // 971
                                                                                                                       // 972
var XHTML_NS = "http://www.w3.org/1999/xhtml";                                                                         // 973
                                                                                                                       // 974
exports.getDocumentHead = function(doc) {                                                                              // 975
    if (!doc)                                                                                                          // 976
        doc = document;                                                                                                // 977
    return doc.head || doc.getElementsByTagName("head")[0] || doc.documentElement;                                     // 978
}                                                                                                                      // 979
                                                                                                                       // 980
exports.createElement = function(tag, ns) {                                                                            // 981
    return document.createElementNS ?                                                                                  // 982
           document.createElementNS(ns || XHTML_NS, tag) :                                                             // 983
           document.createElement(tag);                                                                                // 984
};                                                                                                                     // 985
                                                                                                                       // 986
exports.hasCssClass = function(el, name) {                                                                             // 987
    var classes = (el.className || "").split(/\s+/g);                                                                  // 988
    return classes.indexOf(name) !== -1;                                                                               // 989
};                                                                                                                     // 990
exports.addCssClass = function(el, name) {                                                                             // 991
    if (!exports.hasCssClass(el, name)) {                                                                              // 992
        el.className += " " + name;                                                                                    // 993
    }                                                                                                                  // 994
};                                                                                                                     // 995
exports.removeCssClass = function(el, name) {                                                                          // 996
    var classes = el.className.split(/\s+/g);                                                                          // 997
    while (true) {                                                                                                     // 998
        var index = classes.indexOf(name);                                                                             // 999
        if (index == -1) {                                                                                             // 1000
            break;                                                                                                     // 1001
        }                                                                                                              // 1002
        classes.splice(index, 1);                                                                                      // 1003
    }                                                                                                                  // 1004
    el.className = classes.join(" ");                                                                                  // 1005
};                                                                                                                     // 1006
                                                                                                                       // 1007
exports.toggleCssClass = function(el, name) {                                                                          // 1008
    var classes = el.className.split(/\s+/g), add = true;                                                              // 1009
    while (true) {                                                                                                     // 1010
        var index = classes.indexOf(name);                                                                             // 1011
        if (index == -1) {                                                                                             // 1012
            break;                                                                                                     // 1013
        }                                                                                                              // 1014
        add = false;                                                                                                   // 1015
        classes.splice(index, 1);                                                                                      // 1016
    }                                                                                                                  // 1017
    if(add)                                                                                                            // 1018
        classes.push(name);                                                                                            // 1019
                                                                                                                       // 1020
    el.className = classes.join(" ");                                                                                  // 1021
    return add;                                                                                                        // 1022
};                                                                                                                     // 1023
exports.setCssClass = function(node, className, include) {                                                             // 1024
    if (include) {                                                                                                     // 1025
        exports.addCssClass(node, className);                                                                          // 1026
    } else {                                                                                                           // 1027
        exports.removeCssClass(node, className);                                                                       // 1028
    }                                                                                                                  // 1029
};                                                                                                                     // 1030
                                                                                                                       // 1031
exports.hasCssString = function(id, doc) {                                                                             // 1032
    var index = 0, sheets;                                                                                             // 1033
    doc = doc || document;                                                                                             // 1034
                                                                                                                       // 1035
    if (doc.createStyleSheet && (sheets = doc.styleSheets)) {                                                          // 1036
        while (index < sheets.length)                                                                                  // 1037
            if (sheets[index++].owningElement.id === id) return true;                                                  // 1038
    } else if ((sheets = doc.getElementsByTagName("style"))) {                                                         // 1039
        while (index < sheets.length)                                                                                  // 1040
            if (sheets[index++].id === id) return true;                                                                // 1041
    }                                                                                                                  // 1042
                                                                                                                       // 1043
    return false;                                                                                                      // 1044
};                                                                                                                     // 1045
                                                                                                                       // 1046
exports.importCssString = function importCssString(cssText, id, doc) {                                                 // 1047
    doc = doc || document;                                                                                             // 1048
    if (id && exports.hasCssString(id, doc))                                                                           // 1049
        return null;                                                                                                   // 1050
                                                                                                                       // 1051
    var style;                                                                                                         // 1052
                                                                                                                       // 1053
    if (doc.createStyleSheet) {                                                                                        // 1054
        style = doc.createStyleSheet();                                                                                // 1055
        style.cssText = cssText;                                                                                       // 1056
        if (id)                                                                                                        // 1057
            style.owningElement.id = id;                                                                               // 1058
    } else {                                                                                                           // 1059
        style = doc.createElementNS                                                                                    // 1060
            ? doc.createElementNS(XHTML_NS, "style")                                                                   // 1061
            : doc.createElement("style");                                                                              // 1062
                                                                                                                       // 1063
        style.appendChild(doc.createTextNode(cssText));                                                                // 1064
        if (id)                                                                                                        // 1065
            style.id = id;                                                                                             // 1066
                                                                                                                       // 1067
        exports.getDocumentHead(doc).appendChild(style);                                                               // 1068
    }                                                                                                                  // 1069
};                                                                                                                     // 1070
                                                                                                                       // 1071
exports.importCssStylsheet = function(uri, doc) {                                                                      // 1072
    if (doc.createStyleSheet) {                                                                                        // 1073
        doc.createStyleSheet(uri);                                                                                     // 1074
    } else {                                                                                                           // 1075
        var link = exports.createElement('link');                                                                      // 1076
        link.rel = 'stylesheet';                                                                                       // 1077
        link.href = uri;                                                                                               // 1078
                                                                                                                       // 1079
        exports.getDocumentHead(doc).appendChild(link);                                                                // 1080
    }                                                                                                                  // 1081
};                                                                                                                     // 1082
                                                                                                                       // 1083
exports.getInnerWidth = function(element) {                                                                            // 1084
    return (                                                                                                           // 1085
        parseInt(exports.computedStyle(element, "paddingLeft"), 10) +                                                  // 1086
        parseInt(exports.computedStyle(element, "paddingRight"), 10) +                                                 // 1087
        element.clientWidth                                                                                            // 1088
    );                                                                                                                 // 1089
};                                                                                                                     // 1090
                                                                                                                       // 1091
exports.getInnerHeight = function(element) {                                                                           // 1092
    return (                                                                                                           // 1093
        parseInt(exports.computedStyle(element, "paddingTop"), 10) +                                                   // 1094
        parseInt(exports.computedStyle(element, "paddingBottom"), 10) +                                                // 1095
        element.clientHeight                                                                                           // 1096
    );                                                                                                                 // 1097
};                                                                                                                     // 1098
                                                                                                                       // 1099
if (window.pageYOffset !== undefined) {                                                                                // 1100
    exports.getPageScrollTop = function() {                                                                            // 1101
        return window.pageYOffset;                                                                                     // 1102
    };                                                                                                                 // 1103
                                                                                                                       // 1104
    exports.getPageScrollLeft = function() {                                                                           // 1105
        return window.pageXOffset;                                                                                     // 1106
    };                                                                                                                 // 1107
}                                                                                                                      // 1108
else {                                                                                                                 // 1109
    exports.getPageScrollTop = function() {                                                                            // 1110
        return document.body.scrollTop;                                                                                // 1111
    };                                                                                                                 // 1112
                                                                                                                       // 1113
    exports.getPageScrollLeft = function() {                                                                           // 1114
        return document.body.scrollLeft;                                                                               // 1115
    };                                                                                                                 // 1116
}                                                                                                                      // 1117
                                                                                                                       // 1118
if (window.getComputedStyle)                                                                                           // 1119
    exports.computedStyle = function(element, style) {                                                                 // 1120
        if (style)                                                                                                     // 1121
            return (window.getComputedStyle(element, "") || {})[style] || "";                                          // 1122
        return window.getComputedStyle(element, "") || {};                                                             // 1123
    };                                                                                                                 // 1124
else                                                                                                                   // 1125
    exports.computedStyle = function(element, style) {                                                                 // 1126
        if (style)                                                                                                     // 1127
            return element.currentStyle[style];                                                                        // 1128
        return element.currentStyle;                                                                                   // 1129
    };                                                                                                                 // 1130
                                                                                                                       // 1131
exports.scrollbarWidth = function(document) {                                                                          // 1132
    var inner = exports.createElement("ace_inner");                                                                    // 1133
    inner.style.width = "100%";                                                                                        // 1134
    inner.style.minWidth = "0px";                                                                                      // 1135
    inner.style.height = "200px";                                                                                      // 1136
    inner.style.display = "block";                                                                                     // 1137
                                                                                                                       // 1138
    var outer = exports.createElement("ace_outer");                                                                    // 1139
    var style = outer.style;                                                                                           // 1140
                                                                                                                       // 1141
    style.position = "absolute";                                                                                       // 1142
    style.left = "-10000px";                                                                                           // 1143
    style.overflow = "hidden";                                                                                         // 1144
    style.width = "200px";                                                                                             // 1145
    style.minWidth = "0px";                                                                                            // 1146
    style.height = "150px";                                                                                            // 1147
    style.display = "block";                                                                                           // 1148
                                                                                                                       // 1149
    outer.appendChild(inner);                                                                                          // 1150
                                                                                                                       // 1151
    var body = document.documentElement;                                                                               // 1152
    body.appendChild(outer);                                                                                           // 1153
                                                                                                                       // 1154
    var noScrollbar = inner.offsetWidth;                                                                               // 1155
                                                                                                                       // 1156
    style.overflow = "scroll";                                                                                         // 1157
    var withScrollbar = inner.offsetWidth;                                                                             // 1158
                                                                                                                       // 1159
    if (noScrollbar == withScrollbar) {                                                                                // 1160
        withScrollbar = outer.clientWidth;                                                                             // 1161
    }                                                                                                                  // 1162
                                                                                                                       // 1163
    body.removeChild(outer);                                                                                           // 1164
                                                                                                                       // 1165
    return noScrollbar-withScrollbar;                                                                                  // 1166
};                                                                                                                     // 1167
exports.setInnerHtml = function(el, innerHtml) {                                                                       // 1168
    var element = el.cloneNode(false);//document.createElement("div");                                                 // 1169
    element.innerHTML = innerHtml;                                                                                     // 1170
    el.parentNode.replaceChild(element, el);                                                                           // 1171
    return element;                                                                                                    // 1172
};                                                                                                                     // 1173
                                                                                                                       // 1174
if ("textContent" in document.documentElement) {                                                                       // 1175
    exports.setInnerText = function(el, innerText) {                                                                   // 1176
        el.textContent = innerText;                                                                                    // 1177
    };                                                                                                                 // 1178
                                                                                                                       // 1179
    exports.getInnerText = function(el) {                                                                              // 1180
        return el.textContent;                                                                                         // 1181
    };                                                                                                                 // 1182
}                                                                                                                      // 1183
else {                                                                                                                 // 1184
    exports.setInnerText = function(el, innerText) {                                                                   // 1185
        el.innerText = innerText;                                                                                      // 1186
    };                                                                                                                 // 1187
                                                                                                                       // 1188
    exports.getInnerText = function(el) {                                                                              // 1189
        return el.innerText;                                                                                           // 1190
    };                                                                                                                 // 1191
}                                                                                                                      // 1192
                                                                                                                       // 1193
exports.getParentWindow = function(document) {                                                                         // 1194
    return document.defaultView || document.parentWindow;                                                              // 1195
};                                                                                                                     // 1196
                                                                                                                       // 1197
});                                                                                                                    // 1198
                                                                                                                       // 1199
define("ace/lib/oop",["require","exports","module"], function(require, exports, module) {                              // 1200
"use strict";                                                                                                          // 1201
                                                                                                                       // 1202
exports.inherits = function(ctor, superCtor) {                                                                         // 1203
    ctor.super_ = superCtor;                                                                                           // 1204
    ctor.prototype = Object.create(superCtor.prototype, {                                                              // 1205
        constructor: {                                                                                                 // 1206
            value: ctor,                                                                                               // 1207
            enumerable: false,                                                                                         // 1208
            writable: true,                                                                                            // 1209
            configurable: true                                                                                         // 1210
        }                                                                                                              // 1211
    });                                                                                                                // 1212
};                                                                                                                     // 1213
                                                                                                                       // 1214
exports.mixin = function(obj, mixin) {                                                                                 // 1215
    for (var key in mixin) {                                                                                           // 1216
        obj[key] = mixin[key];                                                                                         // 1217
    }                                                                                                                  // 1218
    return obj;                                                                                                        // 1219
};                                                                                                                     // 1220
                                                                                                                       // 1221
exports.implement = function(proto, mixin) {                                                                           // 1222
    exports.mixin(proto, mixin);                                                                                       // 1223
};                                                                                                                     // 1224
                                                                                                                       // 1225
});                                                                                                                    // 1226
                                                                                                                       // 1227
define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"], function(require, exports, module) {
"use strict";                                                                                                          // 1229
                                                                                                                       // 1230
require("./fixoldbrowsers");                                                                                           // 1231
                                                                                                                       // 1232
var oop = require("./oop");                                                                                            // 1233
var Keys = (function() {                                                                                               // 1234
    var ret = {                                                                                                        // 1235
        MODIFIER_KEYS: {                                                                                               // 1236
            16: 'Shift', 17: 'Ctrl', 18: 'Alt', 224: 'Meta'                                                            // 1237
        },                                                                                                             // 1238
                                                                                                                       // 1239
        KEY_MODS: {                                                                                                    // 1240
            "ctrl": 1, "alt": 2, "option" : 2, "shift": 4,                                                             // 1241
            "super": 8, "meta": 8, "command": 8, "cmd": 8                                                              // 1242
        },                                                                                                             // 1243
                                                                                                                       // 1244
        FUNCTION_KEYS : {                                                                                              // 1245
            8  : "Backspace",                                                                                          // 1246
            9  : "Tab",                                                                                                // 1247
            13 : "Return",                                                                                             // 1248
            19 : "Pause",                                                                                              // 1249
            27 : "Esc",                                                                                                // 1250
            32 : "Space",                                                                                              // 1251
            33 : "PageUp",                                                                                             // 1252
            34 : "PageDown",                                                                                           // 1253
            35 : "End",                                                                                                // 1254
            36 : "Home",                                                                                               // 1255
            37 : "Left",                                                                                               // 1256
            38 : "Up",                                                                                                 // 1257
            39 : "Right",                                                                                              // 1258
            40 : "Down",                                                                                               // 1259
            44 : "Print",                                                                                              // 1260
            45 : "Insert",                                                                                             // 1261
            46 : "Delete",                                                                                             // 1262
            96 : "Numpad0",                                                                                            // 1263
            97 : "Numpad1",                                                                                            // 1264
            98 : "Numpad2",                                                                                            // 1265
            99 : "Numpad3",                                                                                            // 1266
            100: "Numpad4",                                                                                            // 1267
            101: "Numpad5",                                                                                            // 1268
            102: "Numpad6",                                                                                            // 1269
            103: "Numpad7",                                                                                            // 1270
            104: "Numpad8",                                                                                            // 1271
            105: "Numpad9",                                                                                            // 1272
            '-13': "NumpadEnter",                                                                                      // 1273
            112: "F1",                                                                                                 // 1274
            113: "F2",                                                                                                 // 1275
            114: "F3",                                                                                                 // 1276
            115: "F4",                                                                                                 // 1277
            116: "F5",                                                                                                 // 1278
            117: "F6",                                                                                                 // 1279
            118: "F7",                                                                                                 // 1280
            119: "F8",                                                                                                 // 1281
            120: "F9",                                                                                                 // 1282
            121: "F10",                                                                                                // 1283
            122: "F11",                                                                                                // 1284
            123: "F12",                                                                                                // 1285
            144: "Numlock",                                                                                            // 1286
            145: "Scrolllock"                                                                                          // 1287
        },                                                                                                             // 1288
                                                                                                                       // 1289
        PRINTABLE_KEYS: {                                                                                              // 1290
           32: ' ',  48: '0',  49: '1',  50: '2',  51: '3',  52: '4', 53:  '5',                                        // 1291
           54: '6',  55: '7',  56: '8',  57: '9',  59: ';',  61: '=', 65:  'a',                                        // 1292
           66: 'b',  67: 'c',  68: 'd',  69: 'e',  70: 'f',  71: 'g', 72:  'h',                                        // 1293
           73: 'i',  74: 'j',  75: 'k',  76: 'l',  77: 'm',  78: 'n', 79:  'o',                                        // 1294
           80: 'p',  81: 'q',  82: 'r',  83: 's',  84: 't',  85: 'u', 86:  'v',                                        // 1295
           87: 'w',  88: 'x',  89: 'y',  90: 'z', 107: '+', 109: '-', 110: '.',                                        // 1296
          187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`', 219: '[',                                        // 1297
          220: '\\',221: ']', 222: '\''                                                                                // 1298
        }                                                                                                              // 1299
    };                                                                                                                 // 1300
    var name, i;                                                                                                       // 1301
    for (i in ret.FUNCTION_KEYS) {                                                                                     // 1302
        name = ret.FUNCTION_KEYS[i].toLowerCase();                                                                     // 1303
        ret[name] = parseInt(i, 10);                                                                                   // 1304
    }                                                                                                                  // 1305
    for (i in ret.PRINTABLE_KEYS) {                                                                                    // 1306
        name = ret.PRINTABLE_KEYS[i].toLowerCase();                                                                    // 1307
        ret[name] = parseInt(i, 10);                                                                                   // 1308
    }                                                                                                                  // 1309
    oop.mixin(ret, ret.MODIFIER_KEYS);                                                                                 // 1310
    oop.mixin(ret, ret.PRINTABLE_KEYS);                                                                                // 1311
    oop.mixin(ret, ret.FUNCTION_KEYS);                                                                                 // 1312
    ret.enter = ret["return"];                                                                                         // 1313
    ret.escape = ret.esc;                                                                                              // 1314
    ret.del = ret["delete"];                                                                                           // 1315
    ret[173] = '-';                                                                                                    // 1316
                                                                                                                       // 1317
    (function() {                                                                                                      // 1318
        var mods = ["cmd", "ctrl", "alt", "shift"];                                                                    // 1319
        for (var i = Math.pow(2, mods.length); i--;) {                                                                 // 1320
            ret.KEY_MODS[i] = mods.filter(function(x) {                                                                // 1321
                return i & ret.KEY_MODS[x];                                                                            // 1322
            }).join("-") + "-";                                                                                        // 1323
        }                                                                                                              // 1324
    })();                                                                                                              // 1325
                                                                                                                       // 1326
    ret.KEY_MODS[0] = "";                                                                                              // 1327
    ret.KEY_MODS[-1] = "input";                                                                                        // 1328
                                                                                                                       // 1329
    return ret;                                                                                                        // 1330
})();                                                                                                                  // 1331
oop.mixin(exports, Keys);                                                                                              // 1332
                                                                                                                       // 1333
exports.keyCodeToString = function(keyCode) {                                                                          // 1334
    var keyString = Keys[keyCode];                                                                                     // 1335
    if (typeof keyString != "string")                                                                                  // 1336
        keyString = String.fromCharCode(keyCode);                                                                      // 1337
    return keyString.toLowerCase();                                                                                    // 1338
};                                                                                                                     // 1339
                                                                                                                       // 1340
});                                                                                                                    // 1341
                                                                                                                       // 1342
define("ace/lib/useragent",["require","exports","module"], function(require, exports, module) {                        // 1343
"use strict";                                                                                                          // 1344
exports.OS = {                                                                                                         // 1345
    LINUX: "LINUX",                                                                                                    // 1346
    MAC: "MAC",                                                                                                        // 1347
    WINDOWS: "WINDOWS"                                                                                                 // 1348
};                                                                                                                     // 1349
exports.getOS = function() {                                                                                           // 1350
    if (exports.isMac) {                                                                                               // 1351
        return exports.OS.MAC;                                                                                         // 1352
    } else if (exports.isLinux) {                                                                                      // 1353
        return exports.OS.LINUX;                                                                                       // 1354
    } else {                                                                                                           // 1355
        return exports.OS.WINDOWS;                                                                                     // 1356
    }                                                                                                                  // 1357
};                                                                                                                     // 1358
if (typeof navigator != "object")                                                                                      // 1359
    return;                                                                                                            // 1360
                                                                                                                       // 1361
var os = (navigator.platform.match(/mac|win|linux/i) || ["other"])[0].toLowerCase();                                   // 1362
var ua = navigator.userAgent;                                                                                          // 1363
exports.isWin = (os == "win");                                                                                         // 1364
exports.isMac = (os == "mac");                                                                                         // 1365
exports.isLinux = (os == "linux");                                                                                     // 1366
exports.isIE =                                                                                                         // 1367
    (navigator.appName == "Microsoft Internet Explorer" || navigator.appName.indexOf("MSAppHost") >= 0)                // 1368
    ? parseFloat((ua.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1])                         // 1369
    : parseFloat((ua.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]); // for ie                    // 1370
                                                                                                                       // 1371
exports.isOldIE = exports.isIE && exports.isIE < 9;                                                                    // 1372
exports.isGecko = exports.isMozilla = (window.Controllers || window.controllers) && window.navigator.product === "Gecko";
exports.isOldGecko = exports.isGecko && parseInt((ua.match(/rv\:(\d+)/)||[])[1], 10) < 4;                              // 1374
exports.isOpera = window.opera && Object.prototype.toString.call(window.opera) == "[object Opera]";                    // 1375
exports.isWebKit = parseFloat(ua.split("WebKit/")[1]) || undefined;                                                    // 1376
                                                                                                                       // 1377
exports.isChrome = parseFloat(ua.split(" Chrome/")[1]) || undefined;                                                   // 1378
                                                                                                                       // 1379
exports.isAIR = ua.indexOf("AdobeAIR") >= 0;                                                                           // 1380
                                                                                                                       // 1381
exports.isIPad = ua.indexOf("iPad") >= 0;                                                                              // 1382
                                                                                                                       // 1383
exports.isTouchPad = ua.indexOf("TouchPad") >= 0;                                                                      // 1384
                                                                                                                       // 1385
exports.isChromeOS = ua.indexOf(" CrOS ") >= 0;                                                                        // 1386
                                                                                                                       // 1387
});                                                                                                                    // 1388
                                                                                                                       // 1389
define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"], function(require, exports, module) {
"use strict";                                                                                                          // 1391
                                                                                                                       // 1392
var keys = require("./keys");                                                                                          // 1393
var useragent = require("./useragent");                                                                                // 1394
                                                                                                                       // 1395
exports.addListener = function(elem, type, callback) {                                                                 // 1396
    if (elem.addEventListener) {                                                                                       // 1397
        return elem.addEventListener(type, callback, false);                                                           // 1398
    }                                                                                                                  // 1399
    if (elem.attachEvent) {                                                                                            // 1400
        var wrapper = function() {                                                                                     // 1401
            callback.call(elem, window.event);                                                                         // 1402
        };                                                                                                             // 1403
        callback._wrapper = wrapper;                                                                                   // 1404
        elem.attachEvent("on" + type, wrapper);                                                                        // 1405
    }                                                                                                                  // 1406
};                                                                                                                     // 1407
                                                                                                                       // 1408
exports.removeListener = function(elem, type, callback) {                                                              // 1409
    if (elem.removeEventListener) {                                                                                    // 1410
        return elem.removeEventListener(type, callback, false);                                                        // 1411
    }                                                                                                                  // 1412
    if (elem.detachEvent) {                                                                                            // 1413
        elem.detachEvent("on" + type, callback._wrapper || callback);                                                  // 1414
    }                                                                                                                  // 1415
};                                                                                                                     // 1416
exports.stopEvent = function(e) {                                                                                      // 1417
    exports.stopPropagation(e);                                                                                        // 1418
    exports.preventDefault(e);                                                                                         // 1419
    return false;                                                                                                      // 1420
};                                                                                                                     // 1421
                                                                                                                       // 1422
exports.stopPropagation = function(e) {                                                                                // 1423
    if (e.stopPropagation)                                                                                             // 1424
        e.stopPropagation();                                                                                           // 1425
    else                                                                                                               // 1426
        e.cancelBubble = true;                                                                                         // 1427
};                                                                                                                     // 1428
                                                                                                                       // 1429
exports.preventDefault = function(e) {                                                                                 // 1430
    if (e.preventDefault)                                                                                              // 1431
        e.preventDefault();                                                                                            // 1432
    else                                                                                                               // 1433
        e.returnValue = false;                                                                                         // 1434
};                                                                                                                     // 1435
exports.getButton = function(e) {                                                                                      // 1436
    if (e.type == "dblclick")                                                                                          // 1437
        return 0;                                                                                                      // 1438
    if (e.type == "contextmenu" || (useragent.isMac && (e.ctrlKey && !e.altKey && !e.shiftKey)))                       // 1439
        return 2;                                                                                                      // 1440
    if (e.preventDefault) {                                                                                            // 1441
        return e.button;                                                                                               // 1442
    }                                                                                                                  // 1443
    else {                                                                                                             // 1444
        return {1:0, 2:2, 4:1}[e.button];                                                                              // 1445
    }                                                                                                                  // 1446
};                                                                                                                     // 1447
                                                                                                                       // 1448
exports.capture = function(el, eventHandler, releaseCaptureHandler) {                                                  // 1449
    function onMouseUp(e) {                                                                                            // 1450
        eventHandler && eventHandler(e);                                                                               // 1451
        releaseCaptureHandler && releaseCaptureHandler(e);                                                             // 1452
                                                                                                                       // 1453
        exports.removeListener(document, "mousemove", eventHandler, true);                                             // 1454
        exports.removeListener(document, "mouseup", onMouseUp, true);                                                  // 1455
        exports.removeListener(document, "dragstart", onMouseUp, true);                                                // 1456
    }                                                                                                                  // 1457
                                                                                                                       // 1458
    exports.addListener(document, "mousemove", eventHandler, true);                                                    // 1459
    exports.addListener(document, "mouseup", onMouseUp, true);                                                         // 1460
    exports.addListener(document, "dragstart", onMouseUp, true);                                                       // 1461
                                                                                                                       // 1462
    return onMouseUp;                                                                                                  // 1463
};                                                                                                                     // 1464
                                                                                                                       // 1465
exports.addMouseWheelListener = function(el, callback) {                                                               // 1466
    if ("onmousewheel" in el) {                                                                                        // 1467
        exports.addListener(el, "mousewheel", function(e) {                                                            // 1468
            var factor = 8;                                                                                            // 1469
            if (e.wheelDeltaX !== undefined) {                                                                         // 1470
                e.wheelX = -e.wheelDeltaX / factor;                                                                    // 1471
                e.wheelY = -e.wheelDeltaY / factor;                                                                    // 1472
            } else {                                                                                                   // 1473
                e.wheelX = 0;                                                                                          // 1474
                e.wheelY = -e.wheelDelta / factor;                                                                     // 1475
            }                                                                                                          // 1476
            callback(e);                                                                                               // 1477
        });                                                                                                            // 1478
    } else if ("onwheel" in el) {                                                                                      // 1479
        exports.addListener(el, "wheel",  function(e) {                                                                // 1480
            var factor = 0.35;                                                                                         // 1481
            switch (e.deltaMode) {                                                                                     // 1482
                case e.DOM_DELTA_PIXEL:                                                                                // 1483
                    e.wheelX = e.deltaX * factor || 0;                                                                 // 1484
                    e.wheelY = e.deltaY * factor || 0;                                                                 // 1485
                    break;                                                                                             // 1486
                case e.DOM_DELTA_LINE:                                                                                 // 1487
                case e.DOM_DELTA_PAGE:                                                                                 // 1488
                    e.wheelX = (e.deltaX || 0) * 5;                                                                    // 1489
                    e.wheelY = (e.deltaY || 0) * 5;                                                                    // 1490
                    break;                                                                                             // 1491
            }                                                                                                          // 1492
                                                                                                                       // 1493
            callback(e);                                                                                               // 1494
        });                                                                                                            // 1495
    } else {                                                                                                           // 1496
        exports.addListener(el, "DOMMouseScroll", function(e) {                                                        // 1497
            if (e.axis && e.axis == e.HORIZONTAL_AXIS) {                                                               // 1498
                e.wheelX = (e.detail || 0) * 5;                                                                        // 1499
                e.wheelY = 0;                                                                                          // 1500
            } else {                                                                                                   // 1501
                e.wheelX = 0;                                                                                          // 1502
                e.wheelY = (e.detail || 0) * 5;                                                                        // 1503
            }                                                                                                          // 1504
            callback(e);                                                                                               // 1505
        });                                                                                                            // 1506
    }                                                                                                                  // 1507
};                                                                                                                     // 1508
                                                                                                                       // 1509
exports.addMultiMouseDownListener = function(el, timeouts, eventHandler, callbackName) {                               // 1510
    var clicks = 0;                                                                                                    // 1511
    var startX, startY, timer;                                                                                         // 1512
    var eventNames = {                                                                                                 // 1513
        2: "dblclick",                                                                                                 // 1514
        3: "tripleclick",                                                                                              // 1515
        4: "quadclick"                                                                                                 // 1516
    };                                                                                                                 // 1517
                                                                                                                       // 1518
    exports.addListener(el, "mousedown", function(e) {                                                                 // 1519
        if (exports.getButton(e) !== 0) {                                                                              // 1520
            clicks = 0;                                                                                                // 1521
        } else if (e.detail > 1) {                                                                                     // 1522
            clicks++;                                                                                                  // 1523
            if (clicks > 4)                                                                                            // 1524
                clicks = 1;                                                                                            // 1525
        } else {                                                                                                       // 1526
            clicks = 1;                                                                                                // 1527
        }                                                                                                              // 1528
        if (useragent.isIE) {                                                                                          // 1529
            var isNewClick = Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5;                     // 1530
            if (!timer || isNewClick)                                                                                  // 1531
                clicks = 1;                                                                                            // 1532
            if (timer)                                                                                                 // 1533
                clearTimeout(timer);                                                                                   // 1534
            timer = setTimeout(function() {timer = null}, timeouts[clicks - 1] || 600);                                // 1535
                                                                                                                       // 1536
            if (clicks == 1) {                                                                                         // 1537
                startX = e.clientX;                                                                                    // 1538
                startY = e.clientY;                                                                                    // 1539
            }                                                                                                          // 1540
        }                                                                                                              // 1541
                                                                                                                       // 1542
        e._clicks = clicks;                                                                                            // 1543
                                                                                                                       // 1544
        eventHandler[callbackName]("mousedown", e);                                                                    // 1545
                                                                                                                       // 1546
        if (clicks > 4)                                                                                                // 1547
            clicks = 0;                                                                                                // 1548
        else if (clicks > 1)                                                                                           // 1549
            return eventHandler[callbackName](eventNames[clicks], e);                                                  // 1550
    });                                                                                                                // 1551
                                                                                                                       // 1552
    if (useragent.isOldIE) {                                                                                           // 1553
        exports.addListener(el, "dblclick", function(e) {                                                              // 1554
            clicks = 2;                                                                                                // 1555
            if (timer)                                                                                                 // 1556
                clearTimeout(timer);                                                                                   // 1557
            timer = setTimeout(function() {timer = null}, timeouts[clicks - 1] || 600);                                // 1558
            eventHandler[callbackName]("mousedown", e);                                                                // 1559
            eventHandler[callbackName](eventNames[clicks], e);                                                         // 1560
        });                                                                                                            // 1561
    }                                                                                                                  // 1562
};                                                                                                                     // 1563
                                                                                                                       // 1564
var getModifierHash = useragent.isMac && useragent.isOpera && !("KeyboardEvent" in window)                             // 1565
    ? function(e) {                                                                                                    // 1566
        return 0 | (e.metaKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.ctrlKey ? 8 : 0);              // 1567
    }                                                                                                                  // 1568
    : function(e) {                                                                                                    // 1569
        return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);              // 1570
    };                                                                                                                 // 1571
                                                                                                                       // 1572
exports.getModifierString = function(e) {                                                                              // 1573
    return keys.KEY_MODS[getModifierHash(e)];                                                                          // 1574
};                                                                                                                     // 1575
                                                                                                                       // 1576
function normalizeCommandKeys(callback, e, keyCode) {                                                                  // 1577
    var hashId = getModifierHash(e);                                                                                   // 1578
                                                                                                                       // 1579
    if (!useragent.isMac && pressedKeys) {                                                                             // 1580
        if (pressedKeys[91] || pressedKeys[92])                                                                        // 1581
            hashId |= 8;                                                                                               // 1582
        if (pressedKeys.altGr) {                                                                                       // 1583
            if ((3 & hashId) != 3)                                                                                     // 1584
                pressedKeys.altGr = 0;                                                                                 // 1585
            else                                                                                                       // 1586
                return;                                                                                                // 1587
        }                                                                                                              // 1588
        if (keyCode === 18 || keyCode === 17) {                                                                        // 1589
            var location = "location" in e ? e.location : e.keyLocation;                                               // 1590
            if (keyCode === 17 && location === 1) {                                                                    // 1591
                ts = e.timeStamp;                                                                                      // 1592
            } else if (keyCode === 18 && hashId === 3 && location === 2) {                                             // 1593
                var dt = -ts;                                                                                          // 1594
                ts = e.timeStamp;                                                                                      // 1595
                dt += ts;                                                                                              // 1596
                if (dt < 3)                                                                                            // 1597
                    pressedKeys.altGr = true;                                                                          // 1598
            }                                                                                                          // 1599
        }                                                                                                              // 1600
    }                                                                                                                  // 1601
                                                                                                                       // 1602
    if (keyCode in keys.MODIFIER_KEYS) {                                                                               // 1603
        switch (keys.MODIFIER_KEYS[keyCode]) {                                                                         // 1604
            case "Alt":                                                                                                // 1605
                hashId = 2;                                                                                            // 1606
                break;                                                                                                 // 1607
            case "Shift":                                                                                              // 1608
                hashId = 4;                                                                                            // 1609
                break;                                                                                                 // 1610
            case "Ctrl":                                                                                               // 1611
                hashId = 1;                                                                                            // 1612
                break;                                                                                                 // 1613
            default:                                                                                                   // 1614
                hashId = 8;                                                                                            // 1615
                break;                                                                                                 // 1616
        }                                                                                                              // 1617
        keyCode = -1;                                                                                                  // 1618
    }                                                                                                                  // 1619
                                                                                                                       // 1620
    if (hashId & 8 && (keyCode === 91 || keyCode === 93)) {                                                            // 1621
        keyCode = -1;                                                                                                  // 1622
    }                                                                                                                  // 1623
                                                                                                                       // 1624
    if (!hashId && keyCode === 13) {                                                                                   // 1625
        var location = "location" in e ? e.location : e.keyLocation;                                                   // 1626
        if (location === 3) {                                                                                          // 1627
            callback(e, hashId, -keyCode);                                                                             // 1628
            if (e.defaultPrevented)                                                                                    // 1629
                return;                                                                                                // 1630
        }                                                                                                              // 1631
    }                                                                                                                  // 1632
                                                                                                                       // 1633
    if (useragent.isChromeOS && hashId & 8) {                                                                          // 1634
        callback(e, hashId, keyCode);                                                                                  // 1635
        if (e.defaultPrevented)                                                                                        // 1636
            return;                                                                                                    // 1637
        else                                                                                                           // 1638
            hashId &= ~8;                                                                                              // 1639
    }                                                                                                                  // 1640
    if (!hashId && !(keyCode in keys.FUNCTION_KEYS) && !(keyCode in keys.PRINTABLE_KEYS)) {                            // 1641
        return false;                                                                                                  // 1642
    }                                                                                                                  // 1643
                                                                                                                       // 1644
    return callback(e, hashId, keyCode);                                                                               // 1645
}                                                                                                                      // 1646
                                                                                                                       // 1647
var pressedKeys = null;                                                                                                // 1648
var ts = 0;                                                                                                            // 1649
exports.addCommandKeyListener = function(el, callback) {                                                               // 1650
    var addListener = exports.addListener;                                                                             // 1651
    if (useragent.isOldGecko || (useragent.isOpera && !("KeyboardEvent" in window))) {                                 // 1652
        var lastKeyDownKeyCode = null;                                                                                 // 1653
        addListener(el, "keydown", function(e) {                                                                       // 1654
            lastKeyDownKeyCode = e.keyCode;                                                                            // 1655
        });                                                                                                            // 1656
        addListener(el, "keypress", function(e) {                                                                      // 1657
            return normalizeCommandKeys(callback, e, lastKeyDownKeyCode);                                              // 1658
        });                                                                                                            // 1659
    } else {                                                                                                           // 1660
        var lastDefaultPrevented = null;                                                                               // 1661
                                                                                                                       // 1662
        addListener(el, "keydown", function(e) {                                                                       // 1663
            pressedKeys[e.keyCode] = true;                                                                             // 1664
            var result = normalizeCommandKeys(callback, e, e.keyCode);                                                 // 1665
            lastDefaultPrevented = e.defaultPrevented;                                                                 // 1666
            return result;                                                                                             // 1667
        });                                                                                                            // 1668
                                                                                                                       // 1669
        addListener(el, "keypress", function(e) {                                                                      // 1670
            if (lastDefaultPrevented && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) {                          // 1671
                exports.stopEvent(e);                                                                                  // 1672
                lastDefaultPrevented = null;                                                                           // 1673
            }                                                                                                          // 1674
        });                                                                                                            // 1675
                                                                                                                       // 1676
        addListener(el, "keyup", function(e) {                                                                         // 1677
            pressedKeys[e.keyCode] = null;                                                                             // 1678
        });                                                                                                            // 1679
                                                                                                                       // 1680
        if (!pressedKeys) {                                                                                            // 1681
            pressedKeys = Object.create(null);                                                                         // 1682
            addListener(window, "focus", function(e) {                                                                 // 1683
                pressedKeys = Object.create(null);                                                                     // 1684
            });                                                                                                        // 1685
        }                                                                                                              // 1686
    }                                                                                                                  // 1687
};                                                                                                                     // 1688
                                                                                                                       // 1689
if (window.postMessage && !useragent.isOldIE) {                                                                        // 1690
    var postMessageId = 1;                                                                                             // 1691
    exports.nextTick = function(callback, win) {                                                                       // 1692
        win = win || window;                                                                                           // 1693
        var messageName = "zero-timeout-message-" + postMessageId;                                                     // 1694
        exports.addListener(win, "message", function listener(e) {                                                     // 1695
            if (e.data == messageName) {                                                                               // 1696
                exports.stopPropagation(e);                                                                            // 1697
                exports.removeListener(win, "message", listener);                                                      // 1698
                callback();                                                                                            // 1699
            }                                                                                                          // 1700
        });                                                                                                            // 1701
        win.postMessage(messageName, "*");                                                                             // 1702
    };                                                                                                                 // 1703
}                                                                                                                      // 1704
                                                                                                                       // 1705
                                                                                                                       // 1706
exports.nextFrame = window.requestAnimationFrame ||                                                                    // 1707
    window.mozRequestAnimationFrame ||                                                                                 // 1708
    window.webkitRequestAnimationFrame ||                                                                              // 1709
    window.msRequestAnimationFrame ||                                                                                  // 1710
    window.oRequestAnimationFrame;                                                                                     // 1711
                                                                                                                       // 1712
if (exports.nextFrame)                                                                                                 // 1713
    exports.nextFrame = exports.nextFrame.bind(window);                                                                // 1714
else                                                                                                                   // 1715
    exports.nextFrame = function(callback) {                                                                           // 1716
        setTimeout(callback, 17);                                                                                      // 1717
    };                                                                                                                 // 1718
});                                                                                                                    // 1719
                                                                                                                       // 1720
define("ace/lib/lang",["require","exports","module"], function(require, exports, module) {                             // 1721
"use strict";                                                                                                          // 1722
                                                                                                                       // 1723
exports.last = function(a) {                                                                                           // 1724
    return a[a.length - 1];                                                                                            // 1725
};                                                                                                                     // 1726
                                                                                                                       // 1727
exports.stringReverse = function(string) {                                                                             // 1728
    return string.split("").reverse().join("");                                                                        // 1729
};                                                                                                                     // 1730
                                                                                                                       // 1731
exports.stringRepeat = function (string, count) {                                                                      // 1732
    var result = '';                                                                                                   // 1733
    while (count > 0) {                                                                                                // 1734
        if (count & 1)                                                                                                 // 1735
            result += string;                                                                                          // 1736
                                                                                                                       // 1737
        if (count >>= 1)                                                                                               // 1738
            string += string;                                                                                          // 1739
    }                                                                                                                  // 1740
    return result;                                                                                                     // 1741
};                                                                                                                     // 1742
                                                                                                                       // 1743
var trimBeginRegexp = /^\s\s*/;                                                                                        // 1744
var trimEndRegexp = /\s\s*$/;                                                                                          // 1745
                                                                                                                       // 1746
exports.stringTrimLeft = function (string) {                                                                           // 1747
    return string.replace(trimBeginRegexp, '');                                                                        // 1748
};                                                                                                                     // 1749
                                                                                                                       // 1750
exports.stringTrimRight = function (string) {                                                                          // 1751
    return string.replace(trimEndRegexp, '');                                                                          // 1752
};                                                                                                                     // 1753
                                                                                                                       // 1754
exports.copyObject = function(obj) {                                                                                   // 1755
    var copy = {};                                                                                                     // 1756
    for (var key in obj) {                                                                                             // 1757
        copy[key] = obj[key];                                                                                          // 1758
    }                                                                                                                  // 1759
    return copy;                                                                                                       // 1760
};                                                                                                                     // 1761
                                                                                                                       // 1762
exports.copyArray = function(array){                                                                                   // 1763
    var copy = [];                                                                                                     // 1764
    for (var i=0, l=array.length; i<l; i++) {                                                                          // 1765
        if (array[i] && typeof array[i] == "object")                                                                   // 1766
            copy[i] = this.copyObject( array[i] );                                                                     // 1767
        else                                                                                                           // 1768
            copy[i] = array[i];                                                                                        // 1769
    }                                                                                                                  // 1770
    return copy;                                                                                                       // 1771
};                                                                                                                     // 1772
                                                                                                                       // 1773
exports.deepCopy = function (obj) {                                                                                    // 1774
    if (typeof obj !== "object" || !obj)                                                                               // 1775
        return obj;                                                                                                    // 1776
    var cons = obj.constructor;                                                                                        // 1777
    if (cons === RegExp)                                                                                               // 1778
        return obj;                                                                                                    // 1779
                                                                                                                       // 1780
    var copy = cons();                                                                                                 // 1781
    for (var key in obj) {                                                                                             // 1782
        if (typeof obj[key] === "object") {                                                                            // 1783
            copy[key] = exports.deepCopy(obj[key]);                                                                    // 1784
        } else {                                                                                                       // 1785
            copy[key] = obj[key];                                                                                      // 1786
        }                                                                                                              // 1787
    }                                                                                                                  // 1788
    return copy;                                                                                                       // 1789
};                                                                                                                     // 1790
                                                                                                                       // 1791
exports.arrayToMap = function(arr) {                                                                                   // 1792
    var map = {};                                                                                                      // 1793
    for (var i=0; i<arr.length; i++) {                                                                                 // 1794
        map[arr[i]] = 1;                                                                                               // 1795
    }                                                                                                                  // 1796
    return map;                                                                                                        // 1797
                                                                                                                       // 1798
};                                                                                                                     // 1799
                                                                                                                       // 1800
exports.createMap = function(props) {                                                                                  // 1801
    var map = Object.create(null);                                                                                     // 1802
    for (var i in props) {                                                                                             // 1803
        map[i] = props[i];                                                                                             // 1804
    }                                                                                                                  // 1805
    return map;                                                                                                        // 1806
};                                                                                                                     // 1807
exports.arrayRemove = function(array, value) {                                                                         // 1808
  for (var i = 0; i <= array.length; i++) {                                                                            // 1809
    if (value === array[i]) {                                                                                          // 1810
      array.splice(i, 1);                                                                                              // 1811
    }                                                                                                                  // 1812
  }                                                                                                                    // 1813
};                                                                                                                     // 1814
                                                                                                                       // 1815
exports.escapeRegExp = function(str) {                                                                                 // 1816
    return str.replace(/([.*+?^${}()|[\]\/\\])/g, '\\$1');                                                             // 1817
};                                                                                                                     // 1818
                                                                                                                       // 1819
exports.escapeHTML = function(str) {                                                                                   // 1820
    return str.replace(/&/g, "&#38;").replace(/"/g, "&#34;").replace(/'/g, "&#39;").replace(/</g, "&#60;");            // 1821
};                                                                                                                     // 1822
                                                                                                                       // 1823
exports.getMatchOffsets = function(string, regExp) {                                                                   // 1824
    var matches = [];                                                                                                  // 1825
                                                                                                                       // 1826
    string.replace(regExp, function(str) {                                                                             // 1827
        matches.push({                                                                                                 // 1828
            offset: arguments[arguments.length-2],                                                                     // 1829
            length: str.length                                                                                         // 1830
        });                                                                                                            // 1831
    });                                                                                                                // 1832
                                                                                                                       // 1833
    return matches;                                                                                                    // 1834
};                                                                                                                     // 1835
exports.deferredCall = function(fcn) {                                                                                 // 1836
    var timer = null;                                                                                                  // 1837
    var callback = function() {                                                                                        // 1838
        timer = null;                                                                                                  // 1839
        fcn();                                                                                                         // 1840
    };                                                                                                                 // 1841
                                                                                                                       // 1842
    var deferred = function(timeout) {                                                                                 // 1843
        deferred.cancel();                                                                                             // 1844
        timer = setTimeout(callback, timeout || 0);                                                                    // 1845
        return deferred;                                                                                               // 1846
    };                                                                                                                 // 1847
                                                                                                                       // 1848
    deferred.schedule = deferred;                                                                                      // 1849
                                                                                                                       // 1850
    deferred.call = function() {                                                                                       // 1851
        this.cancel();                                                                                                 // 1852
        fcn();                                                                                                         // 1853
        return deferred;                                                                                               // 1854
    };                                                                                                                 // 1855
                                                                                                                       // 1856
    deferred.cancel = function() {                                                                                     // 1857
        clearTimeout(timer);                                                                                           // 1858
        timer = null;                                                                                                  // 1859
        return deferred;                                                                                               // 1860
    };                                                                                                                 // 1861
                                                                                                                       // 1862
    deferred.isPending = function() {                                                                                  // 1863
        return timer;                                                                                                  // 1864
    };                                                                                                                 // 1865
                                                                                                                       // 1866
    return deferred;                                                                                                   // 1867
};                                                                                                                     // 1868
                                                                                                                       // 1869
                                                                                                                       // 1870
exports.delayedCall = function(fcn, defaultTimeout) {                                                                  // 1871
    var timer = null;                                                                                                  // 1872
    var callback = function() {                                                                                        // 1873
        timer = null;                                                                                                  // 1874
        fcn();                                                                                                         // 1875
    };                                                                                                                 // 1876
                                                                                                                       // 1877
    var _self = function(timeout) {                                                                                    // 1878
        if (timer == null)                                                                                             // 1879
            timer = setTimeout(callback, timeout || defaultTimeout);                                                   // 1880
    };                                                                                                                 // 1881
                                                                                                                       // 1882
    _self.delay = function(timeout) {                                                                                  // 1883
        timer && clearTimeout(timer);                                                                                  // 1884
        timer = setTimeout(callback, timeout || defaultTimeout);                                                       // 1885
    };                                                                                                                 // 1886
    _self.schedule = _self;                                                                                            // 1887
                                                                                                                       // 1888
    _self.call = function() {                                                                                          // 1889
        this.cancel();                                                                                                 // 1890
        fcn();                                                                                                         // 1891
    };                                                                                                                 // 1892
                                                                                                                       // 1893
    _self.cancel = function() {                                                                                        // 1894
        timer && clearTimeout(timer);                                                                                  // 1895
        timer = null;                                                                                                  // 1896
    };                                                                                                                 // 1897
                                                                                                                       // 1898
    _self.isPending = function() {                                                                                     // 1899
        return timer;                                                                                                  // 1900
    };                                                                                                                 // 1901
                                                                                                                       // 1902
    return _self;                                                                                                      // 1903
};                                                                                                                     // 1904
});                                                                                                                    // 1905
                                                                                                                       // 1906
define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"], function(require, exports, module) {
"use strict";                                                                                                          // 1908
                                                                                                                       // 1909
var event = require("../lib/event");                                                                                   // 1910
var useragent = require("../lib/useragent");                                                                           // 1911
var dom = require("../lib/dom");                                                                                       // 1912
var lang = require("../lib/lang");                                                                                     // 1913
var BROKEN_SETDATA = useragent.isChrome < 18;                                                                          // 1914
var USE_IE_MIME_TYPE =  useragent.isIE;                                                                                // 1915
                                                                                                                       // 1916
var TextInput = function(parentNode, host) {                                                                           // 1917
    var text = dom.createElement("textarea");                                                                          // 1918
    text.className = "ace_text-input";                                                                                 // 1919
                                                                                                                       // 1920
    if (useragent.isTouchPad)                                                                                          // 1921
        text.setAttribute("x-palm-disable-auto-cap", true);                                                            // 1922
                                                                                                                       // 1923
    text.wrap = "off";                                                                                                 // 1924
    text.autocorrect = "off";                                                                                          // 1925
    text.autocapitalize = "off";                                                                                       // 1926
    text.spellcheck = false;                                                                                           // 1927
                                                                                                                       // 1928
    text.style.opacity = "0";                                                                                          // 1929
    if (useragent.isOldIE) text.style.top = "-100px";                                                                  // 1930
    parentNode.insertBefore(text, parentNode.firstChild);                                                              // 1931
                                                                                                                       // 1932
    var PLACEHOLDER = "\x01\x01";                                                                                      // 1933
                                                                                                                       // 1934
    var copied = false;                                                                                                // 1935
    var pasted = false;                                                                                                // 1936
    var inComposition = false;                                                                                         // 1937
    var tempStyle = '';                                                                                                // 1938
    var isSelectionEmpty = true;                                                                                       // 1939
    try { var isFocused = document.activeElement === text; } catch(e) {}                                               // 1940
                                                                                                                       // 1941
    event.addListener(text, "blur", function(e) {                                                                      // 1942
        host.onBlur(e);                                                                                                // 1943
        isFocused = false;                                                                                             // 1944
    });                                                                                                                // 1945
    event.addListener(text, "focus", function(e) {                                                                     // 1946
        isFocused = true;                                                                                              // 1947
        host.onFocus(e);                                                                                               // 1948
        resetSelection();                                                                                              // 1949
    });                                                                                                                // 1950
    this.focus = function() { text.focus(); };                                                                         // 1951
    this.blur = function() { text.blur(); };                                                                           // 1952
    this.isFocused = function() {                                                                                      // 1953
        return isFocused;                                                                                              // 1954
    };                                                                                                                 // 1955
    var syncSelection = lang.delayedCall(function() {                                                                  // 1956
        isFocused && resetSelection(isSelectionEmpty);                                                                 // 1957
    });                                                                                                                // 1958
    var syncValue = lang.delayedCall(function() {                                                                      // 1959
         if (!inComposition) {                                                                                         // 1960
            text.value = PLACEHOLDER;                                                                                  // 1961
            isFocused && resetSelection();                                                                             // 1962
         }                                                                                                             // 1963
    });                                                                                                                // 1964
                                                                                                                       // 1965
    function resetSelection(isEmpty) {                                                                                 // 1966
        if (inComposition)                                                                                             // 1967
            return;                                                                                                    // 1968
        if (inputHandler) {                                                                                            // 1969
            selectionStart = 0;                                                                                        // 1970
            selectionEnd = isEmpty ? 0 : text.value.length - 1;                                                        // 1971
        } else {                                                                                                       // 1972
            var selectionStart = isEmpty ? 2 : 1;                                                                      // 1973
            var selectionEnd = 2;                                                                                      // 1974
        }                                                                                                              // 1975
        try {                                                                                                          // 1976
            text.setSelectionRange(selectionStart, selectionEnd);                                                      // 1977
        } catch(e){}                                                                                                   // 1978
    }                                                                                                                  // 1979
                                                                                                                       // 1980
    function resetValue() {                                                                                            // 1981
        if (inComposition)                                                                                             // 1982
            return;                                                                                                    // 1983
        text.value = PLACEHOLDER;                                                                                      // 1984
        if (useragent.isWebKit)                                                                                        // 1985
            syncValue.schedule();                                                                                      // 1986
    }                                                                                                                  // 1987
                                                                                                                       // 1988
    useragent.isWebKit || host.addEventListener('changeSelection', function() {                                        // 1989
        if (host.selection.isEmpty() != isSelectionEmpty) {                                                            // 1990
            isSelectionEmpty = !isSelectionEmpty;                                                                      // 1991
            syncSelection.schedule();                                                                                  // 1992
        }                                                                                                              // 1993
    });                                                                                                                // 1994
                                                                                                                       // 1995
    resetValue();                                                                                                      // 1996
    if (isFocused)                                                                                                     // 1997
        host.onFocus();                                                                                                // 1998
                                                                                                                       // 1999
                                                                                                                       // 2000
    var isAllSelected = function(text) {                                                                               // 2001
        return text.selectionStart === 0 && text.selectionEnd === text.value.length;                                   // 2002
    };                                                                                                                 // 2003
    if (!text.setSelectionRange && text.createTextRange) {                                                             // 2004
        text.setSelectionRange = function(selectionStart, selectionEnd) {                                              // 2005
            var range = this.createTextRange();                                                                        // 2006
            range.collapse(true);                                                                                      // 2007
            range.moveStart('character', selectionStart);                                                              // 2008
            range.moveEnd('character', selectionEnd);                                                                  // 2009
            range.select();                                                                                            // 2010
        };                                                                                                             // 2011
        isAllSelected = function(text) {                                                                               // 2012
            try {                                                                                                      // 2013
                var range = text.ownerDocument.selection.createRange();                                                // 2014
            }catch(e) {}                                                                                               // 2015
            if (!range || range.parentElement() != text) return false;                                                 // 2016
                return range.text == text.value;                                                                       // 2017
        }                                                                                                              // 2018
    }                                                                                                                  // 2019
    if (useragent.isOldIE) {                                                                                           // 2020
        var inPropertyChange = false;                                                                                  // 2021
        var onPropertyChange = function(e){                                                                            // 2022
            if (inPropertyChange)                                                                                      // 2023
                return;                                                                                                // 2024
            var data = text.value;                                                                                     // 2025
            if (inComposition || !data || data == PLACEHOLDER)                                                         // 2026
                return;                                                                                                // 2027
            if (e && data == PLACEHOLDER[0])                                                                           // 2028
                return syncProperty.schedule();                                                                        // 2029
                                                                                                                       // 2030
            sendText(data);                                                                                            // 2031
            inPropertyChange = true;                                                                                   // 2032
            resetValue();                                                                                              // 2033
            inPropertyChange = false;                                                                                  // 2034
        };                                                                                                             // 2035
        var syncProperty = lang.delayedCall(onPropertyChange);                                                         // 2036
        event.addListener(text, "propertychange", onPropertyChange);                                                   // 2037
                                                                                                                       // 2038
        var keytable = { 13:1, 27:1 };                                                                                 // 2039
        event.addListener(text, "keyup", function (e) {                                                                // 2040
            if (inComposition && (!text.value || keytable[e.keyCode]))                                                 // 2041
                setTimeout(onCompositionEnd, 0);                                                                       // 2042
            if ((text.value.charCodeAt(0)||0) < 129) {                                                                 // 2043
                return syncProperty.call();                                                                            // 2044
            }                                                                                                          // 2045
            inComposition ? onCompositionUpdate() : onCompositionStart();                                              // 2046
        });                                                                                                            // 2047
        event.addListener(text, "keydown", function (e) {                                                              // 2048
            syncProperty.schedule(50);                                                                                 // 2049
        });                                                                                                            // 2050
    }                                                                                                                  // 2051
                                                                                                                       // 2052
    var onSelect = function(e) {                                                                                       // 2053
        if (copied) {                                                                                                  // 2054
            copied = false;                                                                                            // 2055
        } else if (isAllSelected(text)) {                                                                              // 2056
            host.selectAll();                                                                                          // 2057
            resetSelection();                                                                                          // 2058
        } else if (inputHandler) {                                                                                     // 2059
            resetSelection(host.selection.isEmpty());                                                                  // 2060
        }                                                                                                              // 2061
    };                                                                                                                 // 2062
                                                                                                                       // 2063
    var inputHandler = null;                                                                                           // 2064
    this.setInputHandler = function(cb) {inputHandler = cb};                                                           // 2065
    this.getInputHandler = function() {return inputHandler};                                                           // 2066
    var afterContextMenu = false;                                                                                      // 2067
                                                                                                                       // 2068
    var sendText = function(data) {                                                                                    // 2069
        if (inputHandler) {                                                                                            // 2070
            data = inputHandler(data);                                                                                 // 2071
            inputHandler = null;                                                                                       // 2072
        }                                                                                                              // 2073
        if (pasted) {                                                                                                  // 2074
            resetSelection();                                                                                          // 2075
            if (data)                                                                                                  // 2076
                host.onPaste(data);                                                                                    // 2077
            pasted = false;                                                                                            // 2078
        } else if (data == PLACEHOLDER.charAt(0)) {                                                                    // 2079
            if (afterContextMenu)                                                                                      // 2080
                host.execCommand("del", {source: "ace"});                                                              // 2081
            else // some versions of android do not fire keydown when pressing backspace                               // 2082
                host.execCommand("backspace", {source: "ace"});                                                        // 2083
        } else {                                                                                                       // 2084
            if (data.substring(0, 2) == PLACEHOLDER)                                                                   // 2085
                data = data.substr(2);                                                                                 // 2086
            else if (data.charAt(0) == PLACEHOLDER.charAt(0))                                                          // 2087
                data = data.substr(1);                                                                                 // 2088
            else if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))                                            // 2089
                data = data.slice(0, -1);                                                                              // 2090
            if (data.charAt(data.length - 1) == PLACEHOLDER.charAt(0))                                                 // 2091
                data = data.slice(0, -1);                                                                              // 2092
                                                                                                                       // 2093
            if (data)                                                                                                  // 2094
                host.onTextInput(data);                                                                                // 2095
        }                                                                                                              // 2096
        if (afterContextMenu)                                                                                          // 2097
            afterContextMenu = false;                                                                                  // 2098
    };                                                                                                                 // 2099
    var onInput = function(e) {                                                                                        // 2100
        if (inComposition)                                                                                             // 2101
            return;                                                                                                    // 2102
        var data = text.value;                                                                                         // 2103
        sendText(data);                                                                                                // 2104
        resetValue();                                                                                                  // 2105
    };                                                                                                                 // 2106
                                                                                                                       // 2107
    var handleClipboardData = function(e, data) {                                                                      // 2108
        var clipboardData = e.clipboardData || window.clipboardData;                                                   // 2109
        if (!clipboardData || BROKEN_SETDATA)                                                                          // 2110
            return;                                                                                                    // 2111
        var mime = USE_IE_MIME_TYPE ? "Text" : "text/plain";                                                           // 2112
        if (data) {                                                                                                    // 2113
            return clipboardData.setData(mime, data) !== false;                                                        // 2114
        } else {                                                                                                       // 2115
            return clipboardData.getData(mime);                                                                        // 2116
        }                                                                                                              // 2117
    };                                                                                                                 // 2118
                                                                                                                       // 2119
    var doCopy = function(e, isCut) {                                                                                  // 2120
        var data = host.getCopyText();                                                                                 // 2121
        if (!data)                                                                                                     // 2122
            return event.preventDefault(e);                                                                            // 2123
                                                                                                                       // 2124
        if (handleClipboardData(e, data)) {                                                                            // 2125
            isCut ? host.onCut() : host.onCopy();                                                                      // 2126
            event.preventDefault(e);                                                                                   // 2127
        } else {                                                                                                       // 2128
            copied = true;                                                                                             // 2129
            text.value = data;                                                                                         // 2130
            text.select();                                                                                             // 2131
            setTimeout(function(){                                                                                     // 2132
                copied = false;                                                                                        // 2133
                resetValue();                                                                                          // 2134
                resetSelection();                                                                                      // 2135
                isCut ? host.onCut() : host.onCopy();                                                                  // 2136
            });                                                                                                        // 2137
        }                                                                                                              // 2138
    };                                                                                                                 // 2139
                                                                                                                       // 2140
    var onCut = function(e) {                                                                                          // 2141
        doCopy(e, true);                                                                                               // 2142
    };                                                                                                                 // 2143
                                                                                                                       // 2144
    var onCopy = function(e) {                                                                                         // 2145
        doCopy(e, false);                                                                                              // 2146
    };                                                                                                                 // 2147
                                                                                                                       // 2148
    var onPaste = function(e) {                                                                                        // 2149
        var data = handleClipboardData(e);                                                                             // 2150
        if (typeof data == "string") {                                                                                 // 2151
            if (data)                                                                                                  // 2152
                host.onPaste(data);                                                                                    // 2153
            if (useragent.isIE)                                                                                        // 2154
                setTimeout(resetSelection);                                                                            // 2155
            event.preventDefault(e);                                                                                   // 2156
        }                                                                                                              // 2157
        else {                                                                                                         // 2158
            text.value = "";                                                                                           // 2159
            pasted = true;                                                                                             // 2160
        }                                                                                                              // 2161
    };                                                                                                                 // 2162
                                                                                                                       // 2163
    event.addCommandKeyListener(text, host.onCommandKey.bind(host));                                                   // 2164
                                                                                                                       // 2165
    event.addListener(text, "select", onSelect);                                                                       // 2166
                                                                                                                       // 2167
    event.addListener(text, "input", onInput);                                                                         // 2168
                                                                                                                       // 2169
    event.addListener(text, "cut", onCut);                                                                             // 2170
    event.addListener(text, "copy", onCopy);                                                                           // 2171
    event.addListener(text, "paste", onPaste);                                                                         // 2172
    if (!('oncut' in text) || !('oncopy' in text) || !('onpaste' in text)){                                            // 2173
        event.addListener(parentNode, "keydown", function(e) {                                                         // 2174
            if ((useragent.isMac && !e.metaKey) || !e.ctrlKey)                                                         // 2175
                return;                                                                                                // 2176
                                                                                                                       // 2177
            switch (e.keyCode) {                                                                                       // 2178
                case 67:                                                                                               // 2179
                    onCopy(e);                                                                                         // 2180
                    break;                                                                                             // 2181
                case 86:                                                                                               // 2182
                    onPaste(e);                                                                                        // 2183
                    break;                                                                                             // 2184
                case 88:                                                                                               // 2185
                    onCut(e);                                                                                          // 2186
                    break;                                                                                             // 2187
            }                                                                                                          // 2188
        });                                                                                                            // 2189
    }                                                                                                                  // 2190
    var onCompositionStart = function(e) {                                                                             // 2191
        if (inComposition || !host.onCompositionStart || host.$readOnly)                                               // 2192
            return;                                                                                                    // 2193
        inComposition = {};                                                                                            // 2194
        host.onCompositionStart();                                                                                     // 2195
        setTimeout(onCompositionUpdate, 0);                                                                            // 2196
        host.on("mousedown", onCompositionEnd);                                                                        // 2197
        if (!host.selection.isEmpty()) {                                                                               // 2198
            host.insert("");                                                                                           // 2199
            host.session.markUndoGroup();                                                                              // 2200
            host.selection.clearSelection();                                                                           // 2201
        }                                                                                                              // 2202
        host.session.markUndoGroup();                                                                                  // 2203
    };                                                                                                                 // 2204
                                                                                                                       // 2205
    var onCompositionUpdate = function() {                                                                             // 2206
        if (!inComposition || !host.onCompositionUpdate || host.$readOnly)                                             // 2207
            return;                                                                                                    // 2208
        var val = text.value.replace(/\x01/g, "");                                                                     // 2209
        if (inComposition.lastValue === val) return;                                                                   // 2210
                                                                                                                       // 2211
        host.onCompositionUpdate(val);                                                                                 // 2212
        if (inComposition.lastValue)                                                                                   // 2213
            host.undo();                                                                                               // 2214
        inComposition.lastValue = val;                                                                                 // 2215
        if (inComposition.lastValue) {                                                                                 // 2216
            var r = host.selection.getRange();                                                                         // 2217
            host.insert(inComposition.lastValue);                                                                      // 2218
            host.session.markUndoGroup();                                                                              // 2219
            inComposition.range = host.selection.getRange();                                                           // 2220
            host.selection.setRange(r);                                                                                // 2221
            host.selection.clearSelection();                                                                           // 2222
        }                                                                                                              // 2223
    };                                                                                                                 // 2224
                                                                                                                       // 2225
    var onCompositionEnd = function(e) {                                                                               // 2226
        if (!host.onCompositionEnd || host.$readOnly) return;                                                          // 2227
        var c = inComposition;                                                                                         // 2228
        inComposition = false;                                                                                         // 2229
        var timer = setTimeout(function() {                                                                            // 2230
            timer = null;                                                                                              // 2231
            var str = text.value.replace(/\x01/g, "");                                                                 // 2232
            if (inComposition)                                                                                         // 2233
                return;                                                                                                // 2234
            else if (str == c.lastValue)                                                                               // 2235
                resetValue();                                                                                          // 2236
            else if (!c.lastValue && str) {                                                                            // 2237
                resetValue();                                                                                          // 2238
                sendText(str);                                                                                         // 2239
            }                                                                                                          // 2240
        });                                                                                                            // 2241
        inputHandler = function compositionInputHandler(str) {                                                         // 2242
            if (timer)                                                                                                 // 2243
                clearTimeout(timer);                                                                                   // 2244
            str = str.replace(/\x01/g, "");                                                                            // 2245
            if (str == c.lastValue)                                                                                    // 2246
                return "";                                                                                             // 2247
            if (c.lastValue && timer)                                                                                  // 2248
                host.undo();                                                                                           // 2249
            return str;                                                                                                // 2250
        };                                                                                                             // 2251
        host.onCompositionEnd();                                                                                       // 2252
        host.removeListener("mousedown", onCompositionEnd);                                                            // 2253
        if (e.type == "compositionend" && c.range) {                                                                   // 2254
            host.selection.setRange(c.range);                                                                          // 2255
        }                                                                                                              // 2256
    };                                                                                                                 // 2257
                                                                                                                       // 2258
                                                                                                                       // 2259
                                                                                                                       // 2260
    var syncComposition = lang.delayedCall(onCompositionUpdate, 50);                                                   // 2261
                                                                                                                       // 2262
    event.addListener(text, "compositionstart", onCompositionStart);                                                   // 2263
    if (useragent.isGecko) {                                                                                           // 2264
        event.addListener(text, "text", function(){syncComposition.schedule()});                                       // 2265
    } else {                                                                                                           // 2266
        event.addListener(text, "keyup", function(){syncComposition.schedule()});                                      // 2267
        event.addListener(text, "keydown", function(){syncComposition.schedule()});                                    // 2268
    }                                                                                                                  // 2269
    event.addListener(text, "compositionend", onCompositionEnd);                                                       // 2270
                                                                                                                       // 2271
    this.getElement = function() {                                                                                     // 2272
        return text;                                                                                                   // 2273
    };                                                                                                                 // 2274
                                                                                                                       // 2275
    this.setReadOnly = function(readOnly) {                                                                            // 2276
       text.readOnly = readOnly;                                                                                       // 2277
    };                                                                                                                 // 2278
                                                                                                                       // 2279
    this.onContextMenu = function(e) {                                                                                 // 2280
        afterContextMenu = true;                                                                                       // 2281
        resetSelection(host.selection.isEmpty());                                                                      // 2282
        host._emit("nativecontextmenu", {target: host, domEvent: e});                                                  // 2283
        this.moveToMouse(e, true);                                                                                     // 2284
    };                                                                                                                 // 2285
                                                                                                                       // 2286
    this.moveToMouse = function(e, bringToFront) {                                                                     // 2287
        if (!bringToFront && useragent.isOldIE)                                                                        // 2288
            return;                                                                                                    // 2289
        if (!tempStyle)                                                                                                // 2290
            tempStyle = text.style.cssText;                                                                            // 2291
        text.style.cssText = (bringToFront ? "z-index:100000;" : "")                                                   // 2292
            + "height:" + text.style.height + ";"                                                                      // 2293
            + (useragent.isIE ? "opacity:0.1;" : "");                                                                  // 2294
                                                                                                                       // 2295
        var rect = host.container.getBoundingClientRect();                                                             // 2296
        var style = dom.computedStyle(host.container);                                                                 // 2297
        var top = rect.top + (parseInt(style.borderTopWidth) || 0);                                                    // 2298
        var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);                                                  // 2299
        var maxTop = rect.bottom - top - text.clientHeight -2;                                                         // 2300
        var move = function(e) {                                                                                       // 2301
            text.style.left = e.clientX - left - 2 + "px";                                                             // 2302
            text.style.top = Math.min(e.clientY - top - 2, maxTop) + "px";                                             // 2303
        };                                                                                                             // 2304
        move(e);                                                                                                       // 2305
                                                                                                                       // 2306
        if (e.type != "mousedown")                                                                                     // 2307
            return;                                                                                                    // 2308
                                                                                                                       // 2309
        if (host.renderer.$keepTextAreaAtCursor)                                                                       // 2310
            host.renderer.$keepTextAreaAtCursor = null;                                                                // 2311
        if (useragent.isWin && !useragent.isOldIE)                                                                     // 2312
            event.capture(host.container, move, onContextMenuClose);                                                   // 2313
    };                                                                                                                 // 2314
                                                                                                                       // 2315
    this.onContextMenuClose = onContextMenuClose;                                                                      // 2316
    var closeTimeout;                                                                                                  // 2317
    function onContextMenuClose() {                                                                                    // 2318
        clearTimeout(closeTimeout)                                                                                     // 2319
        closeTimeout = setTimeout(function () {                                                                        // 2320
            if (tempStyle) {                                                                                           // 2321
                text.style.cssText = tempStyle;                                                                        // 2322
                tempStyle = '';                                                                                        // 2323
            }                                                                                                          // 2324
            if (host.renderer.$keepTextAreaAtCursor == null) {                                                         // 2325
                host.renderer.$keepTextAreaAtCursor = true;                                                            // 2326
                host.renderer.$moveTextAreaToCursor();                                                                 // 2327
            }                                                                                                          // 2328
        }, useragent.isOldIE ? 200 : 0);                                                                               // 2329
    }                                                                                                                  // 2330
                                                                                                                       // 2331
    var onContextMenu = function(e) {                                                                                  // 2332
        host.textInput.onContextMenu(e);                                                                               // 2333
        onContextMenuClose();                                                                                          // 2334
    };                                                                                                                 // 2335
    event.addListener(host.renderer.scroller, "contextmenu", onContextMenu);                                           // 2336
    event.addListener(text, "contextmenu", onContextMenu);                                                             // 2337
};                                                                                                                     // 2338
                                                                                                                       // 2339
exports.TextInput = TextInput;                                                                                         // 2340
});                                                                                                                    // 2341
                                                                                                                       // 2342
define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"], function(require, exports, module) {
"use strict";                                                                                                          // 2344
                                                                                                                       // 2345
var dom = require("../lib/dom");                                                                                       // 2346
var event = require("../lib/event");                                                                                   // 2347
var useragent = require("../lib/useragent");                                                                           // 2348
                                                                                                                       // 2349
var DRAG_OFFSET = 0; // pixels                                                                                         // 2350
                                                                                                                       // 2351
function DefaultHandlers(mouseHandler) {                                                                               // 2352
    mouseHandler.$clickSelection = null;                                                                               // 2353
                                                                                                                       // 2354
    var editor = mouseHandler.editor;                                                                                  // 2355
    editor.setDefaultHandler("mousedown", this.onMouseDown.bind(mouseHandler));                                        // 2356
    editor.setDefaultHandler("dblclick", this.onDoubleClick.bind(mouseHandler));                                       // 2357
    editor.setDefaultHandler("tripleclick", this.onTripleClick.bind(mouseHandler));                                    // 2358
    editor.setDefaultHandler("quadclick", this.onQuadClick.bind(mouseHandler));                                        // 2359
    editor.setDefaultHandler("mousewheel", this.onMouseWheel.bind(mouseHandler));                                      // 2360
                                                                                                                       // 2361
    var exports = ["select", "startSelect", "selectEnd", "selectAllEnd", "selectByWordsEnd",                           // 2362
        "selectByLinesEnd", "dragWait", "dragWaitEnd", "focusWait"];                                                   // 2363
                                                                                                                       // 2364
    exports.forEach(function(x) {                                                                                      // 2365
        mouseHandler[x] = this[x];                                                                                     // 2366
    }, this);                                                                                                          // 2367
                                                                                                                       // 2368
    mouseHandler.selectByLines = this.extendSelectionBy.bind(mouseHandler, "getLineRange");                            // 2369
    mouseHandler.selectByWords = this.extendSelectionBy.bind(mouseHandler, "getWordRange");                            // 2370
}                                                                                                                      // 2371
                                                                                                                       // 2372
(function() {                                                                                                          // 2373
                                                                                                                       // 2374
    this.onMouseDown = function(ev) {                                                                                  // 2375
        var inSelection = ev.inSelection();                                                                            // 2376
        var pos = ev.getDocumentPosition();                                                                            // 2377
        this.mousedownEvent = ev;                                                                                      // 2378
        var editor = this.editor;                                                                                      // 2379
                                                                                                                       // 2380
        var button = ev.getButton();                                                                                   // 2381
        if (button !== 0) {                                                                                            // 2382
            var selectionRange = editor.getSelectionRange();                                                           // 2383
            var selectionEmpty = selectionRange.isEmpty();                                                             // 2384
                                                                                                                       // 2385
            if (selectionEmpty)                                                                                        // 2386
                editor.selection.moveToPosition(pos);                                                                  // 2387
            editor.textInput.onContextMenu(ev.domEvent);                                                               // 2388
            return; // stopping event here breaks contextmenu on ff mac                                                // 2389
        }                                                                                                              // 2390
                                                                                                                       // 2391
        this.mousedownEvent.time = Date.now();                                                                         // 2392
        if (inSelection && !editor.isFocused()) {                                                                      // 2393
            editor.focus();                                                                                            // 2394
            if (this.$focusTimout && !this.$clickSelection && !editor.inMultiSelectMode) {                             // 2395
                this.setState("focusWait");                                                                            // 2396
                this.captureMouse(ev);                                                                                 // 2397
                return;                                                                                                // 2398
            }                                                                                                          // 2399
        }                                                                                                              // 2400
                                                                                                                       // 2401
        this.captureMouse(ev);                                                                                         // 2402
        this.startSelect(pos, ev.domEvent._clicks > 1);                                                                // 2403
        return ev.preventDefault();                                                                                    // 2404
    };                                                                                                                 // 2405
                                                                                                                       // 2406
    this.startSelect = function(pos, waitForClickSelection) {                                                          // 2407
        pos = pos || this.editor.renderer.screenToTextCoordinates(this.x, this.y);                                     // 2408
        var editor = this.editor;                                                                                      // 2409
                                                                                                                       // 2410
        if (this.mousedownEvent.getShiftKey())                                                                         // 2411
            editor.selection.selectToPosition(pos);                                                                    // 2412
        else if (!waitForClickSelection)                                                                               // 2413
            editor.selection.moveToPosition(pos);                                                                      // 2414
        if (!waitForClickSelection)                                                                                    // 2415
            this.select();                                                                                             // 2416
        if (editor.renderer.scroller.setCapture) {                                                                     // 2417
            editor.renderer.scroller.setCapture();                                                                     // 2418
        }                                                                                                              // 2419
        editor.setStyle("ace_selecting");                                                                              // 2420
        this.setState("select");                                                                                       // 2421
    };                                                                                                                 // 2422
                                                                                                                       // 2423
    this.select = function() {                                                                                         // 2424
        var anchor, editor = this.editor;                                                                              // 2425
        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);                                          // 2426
                                                                                                                       // 2427
        if (this.$clickSelection) {                                                                                    // 2428
            var cmp = this.$clickSelection.comparePoint(cursor);                                                       // 2429
                                                                                                                       // 2430
            if (cmp == -1) {                                                                                           // 2431
                anchor = this.$clickSelection.end;                                                                     // 2432
            } else if (cmp == 1) {                                                                                     // 2433
                anchor = this.$clickSelection.start;                                                                   // 2434
            } else {                                                                                                   // 2435
                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);                                // 2436
                cursor = orientedRange.cursor;                                                                         // 2437
                anchor = orientedRange.anchor;                                                                         // 2438
            }                                                                                                          // 2439
            editor.selection.setSelectionAnchor(anchor.row, anchor.column);                                            // 2440
        }                                                                                                              // 2441
        editor.selection.selectToPosition(cursor);                                                                     // 2442
                                                                                                                       // 2443
        editor.renderer.scrollCursorIntoView();                                                                        // 2444
    };                                                                                                                 // 2445
                                                                                                                       // 2446
    this.extendSelectionBy = function(unitName) {                                                                      // 2447
        var anchor, editor = this.editor;                                                                              // 2448
        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);                                          // 2449
        var range = editor.selection[unitName](cursor.row, cursor.column);                                             // 2450
                                                                                                                       // 2451
        if (this.$clickSelection) {                                                                                    // 2452
            var cmpStart = this.$clickSelection.comparePoint(range.start);                                             // 2453
            var cmpEnd = this.$clickSelection.comparePoint(range.end);                                                 // 2454
                                                                                                                       // 2455
            if (cmpStart == -1 && cmpEnd <= 0) {                                                                       // 2456
                anchor = this.$clickSelection.end;                                                                     // 2457
                if (range.end.row != cursor.row || range.end.column != cursor.column)                                  // 2458
                    cursor = range.start;                                                                              // 2459
            } else if (cmpEnd == 1 && cmpStart >= 0) {                                                                 // 2460
                anchor = this.$clickSelection.start;                                                                   // 2461
                if (range.start.row != cursor.row || range.start.column != cursor.column)                              // 2462
                    cursor = range.end;                                                                                // 2463
            } else if (cmpStart == -1 && cmpEnd == 1) {                                                                // 2464
                cursor = range.end;                                                                                    // 2465
                anchor = range.start;                                                                                  // 2466
            } else {                                                                                                   // 2467
                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);                                // 2468
                cursor = orientedRange.cursor;                                                                         // 2469
                anchor = orientedRange.anchor;                                                                         // 2470
            }                                                                                                          // 2471
            editor.selection.setSelectionAnchor(anchor.row, anchor.column);                                            // 2472
        }                                                                                                              // 2473
        editor.selection.selectToPosition(cursor);                                                                     // 2474
                                                                                                                       // 2475
        editor.renderer.scrollCursorIntoView();                                                                        // 2476
    };                                                                                                                 // 2477
                                                                                                                       // 2478
    this.selectEnd =                                                                                                   // 2479
    this.selectAllEnd =                                                                                                // 2480
    this.selectByWordsEnd =                                                                                            // 2481
    this.selectByLinesEnd = function() {                                                                               // 2482
        this.$clickSelection = null;                                                                                   // 2483
        this.editor.unsetStyle("ace_selecting");                                                                       // 2484
        if (this.editor.renderer.scroller.releaseCapture) {                                                            // 2485
            this.editor.renderer.scroller.releaseCapture();                                                            // 2486
        }                                                                                                              // 2487
    };                                                                                                                 // 2488
                                                                                                                       // 2489
    this.focusWait = function() {                                                                                      // 2490
        var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);                     // 2491
        var time = Date.now();                                                                                         // 2492
                                                                                                                       // 2493
        if (distance > DRAG_OFFSET || time - this.mousedownEvent.time > this.$focusTimout)                             // 2494
            this.startSelect(this.mousedownEvent.getDocumentPosition());                                               // 2495
    };                                                                                                                 // 2496
                                                                                                                       // 2497
    this.onDoubleClick = function(ev) {                                                                                // 2498
        var pos = ev.getDocumentPosition();                                                                            // 2499
        var editor = this.editor;                                                                                      // 2500
        var session = editor.session;                                                                                  // 2501
                                                                                                                       // 2502
        var range = session.getBracketRange(pos);                                                                      // 2503
        if (range) {                                                                                                   // 2504
            if (range.isEmpty()) {                                                                                     // 2505
                range.start.column--;                                                                                  // 2506
                range.end.column++;                                                                                    // 2507
            }                                                                                                          // 2508
            this.setState("select");                                                                                   // 2509
        } else {                                                                                                       // 2510
            range = editor.selection.getWordRange(pos.row, pos.column);                                                // 2511
            this.setState("selectByWords");                                                                            // 2512
        }                                                                                                              // 2513
        this.$clickSelection = range;                                                                                  // 2514
        this.select();                                                                                                 // 2515
    };                                                                                                                 // 2516
                                                                                                                       // 2517
    this.onTripleClick = function(ev) {                                                                                // 2518
        var pos = ev.getDocumentPosition();                                                                            // 2519
        var editor = this.editor;                                                                                      // 2520
                                                                                                                       // 2521
        this.setState("selectByLines");                                                                                // 2522
        var range = editor.getSelectionRange();                                                                        // 2523
        if (range.isMultiLine() && range.contains(pos.row, pos.column)) {                                              // 2524
            this.$clickSelection = editor.selection.getLineRange(range.start.row);                                     // 2525
            this.$clickSelection.end = editor.selection.getLineRange(range.end.row).end;                               // 2526
        } else {                                                                                                       // 2527
            this.$clickSelection = editor.selection.getLineRange(pos.row);                                             // 2528
        }                                                                                                              // 2529
        this.select();                                                                                                 // 2530
    };                                                                                                                 // 2531
                                                                                                                       // 2532
    this.onQuadClick = function(ev) {                                                                                  // 2533
        var editor = this.editor;                                                                                      // 2534
                                                                                                                       // 2535
        editor.selectAll();                                                                                            // 2536
        this.$clickSelection = editor.getSelectionRange();                                                             // 2537
        this.setState("selectAll");                                                                                    // 2538
    };                                                                                                                 // 2539
                                                                                                                       // 2540
    this.onMouseWheel = function(ev) {                                                                                 // 2541
        if (ev.getAccelKey())                                                                                          // 2542
            return;                                                                                                    // 2543
        if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {                                                             // 2544
            ev.wheelX = ev.wheelY;                                                                                     // 2545
            ev.wheelY = 0;                                                                                             // 2546
        }                                                                                                              // 2547
                                                                                                                       // 2548
        var t = ev.domEvent.timeStamp;                                                                                 // 2549
        var dt = t - (this.$lastScrollTime||0);                                                                        // 2550
                                                                                                                       // 2551
        var editor = this.editor;                                                                                      // 2552
        var isScrolable = editor.renderer.isScrollableBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);                  // 2553
        if (isScrolable || dt < 200) {                                                                                 // 2554
            this.$lastScrollTime = t;                                                                                  // 2555
            editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);                                      // 2556
            return ev.stop();                                                                                          // 2557
        }                                                                                                              // 2558
    };                                                                                                                 // 2559
                                                                                                                       // 2560
}).call(DefaultHandlers.prototype);                                                                                    // 2561
                                                                                                                       // 2562
exports.DefaultHandlers = DefaultHandlers;                                                                             // 2563
                                                                                                                       // 2564
function calcDistance(ax, ay, bx, by) {                                                                                // 2565
    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));                                                     // 2566
}                                                                                                                      // 2567
                                                                                                                       // 2568
function calcRangeOrientation(range, cursor) {                                                                         // 2569
    if (range.start.row == range.end.row)                                                                              // 2570
        var cmp = 2 * cursor.column - range.start.column - range.end.column;                                           // 2571
    else if (range.start.row == range.end.row - 1 && !range.start.column && !range.end.column)                         // 2572
        var cmp = cursor.column - 4;                                                                                   // 2573
    else                                                                                                               // 2574
        var cmp = 2 * cursor.row - range.start.row - range.end.row;                                                    // 2575
                                                                                                                       // 2576
    if (cmp < 0)                                                                                                       // 2577
        return {cursor: range.start, anchor: range.end};                                                               // 2578
    else                                                                                                               // 2579
        return {cursor: range.end, anchor: range.start};                                                               // 2580
}                                                                                                                      // 2581
                                                                                                                       // 2582
});                                                                                                                    // 2583
                                                                                                                       // 2584
define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"], function(require, exports, module) {  // 2585
"use strict";                                                                                                          // 2586
                                                                                                                       // 2587
var oop = require("./lib/oop");                                                                                        // 2588
var dom = require("./lib/dom");                                                                                        // 2589
function Tooltip (parentNode) {                                                                                        // 2590
    this.isOpen = false;                                                                                               // 2591
    this.$element = null;                                                                                              // 2592
    this.$parentNode = parentNode;                                                                                     // 2593
}                                                                                                                      // 2594
                                                                                                                       // 2595
(function() {                                                                                                          // 2596
    this.$init = function() {                                                                                          // 2597
        this.$element = dom.createElement("div");                                                                      // 2598
        this.$element.className = "ace_tooltip";                                                                       // 2599
        this.$element.style.display = "none";                                                                          // 2600
        this.$parentNode.appendChild(this.$element);                                                                   // 2601
        return this.$element;                                                                                          // 2602
    };                                                                                                                 // 2603
    this.getElement = function() {                                                                                     // 2604
        return this.$element || this.$init();                                                                          // 2605
    };                                                                                                                 // 2606
    this.setText = function(text) {                                                                                    // 2607
        dom.setInnerText(this.getElement(), text);                                                                     // 2608
    };                                                                                                                 // 2609
    this.setHtml = function(html) {                                                                                    // 2610
        this.getElement().innerHTML = html;                                                                            // 2611
    };                                                                                                                 // 2612
    this.setPosition = function(x, y) {                                                                                // 2613
        this.getElement().style.left = x + "px";                                                                       // 2614
        this.getElement().style.top = y + "px";                                                                        // 2615
    };                                                                                                                 // 2616
    this.setClassName = function(className) {                                                                          // 2617
        dom.addCssClass(this.getElement(), className);                                                                 // 2618
    };                                                                                                                 // 2619
    this.show = function(text, x, y) {                                                                                 // 2620
        if (text != null)                                                                                              // 2621
            this.setText(text);                                                                                        // 2622
        if (x != null && y != null)                                                                                    // 2623
            this.setPosition(x, y);                                                                                    // 2624
        if (!this.isOpen) {                                                                                            // 2625
            this.getElement().style.display = "block";                                                                 // 2626
            this.isOpen = true;                                                                                        // 2627
        }                                                                                                              // 2628
    };                                                                                                                 // 2629
                                                                                                                       // 2630
    this.hide = function() {                                                                                           // 2631
        if (this.isOpen) {                                                                                             // 2632
            this.getElement().style.display = "none";                                                                  // 2633
            this.isOpen = false;                                                                                       // 2634
        }                                                                                                              // 2635
    };                                                                                                                 // 2636
    this.getHeight = function() {                                                                                      // 2637
        return this.getElement().offsetHeight;                                                                         // 2638
    };                                                                                                                 // 2639
    this.getWidth = function() {                                                                                       // 2640
        return this.getElement().offsetWidth;                                                                          // 2641
    };                                                                                                                 // 2642
                                                                                                                       // 2643
}).call(Tooltip.prototype);                                                                                            // 2644
                                                                                                                       // 2645
exports.Tooltip = Tooltip;                                                                                             // 2646
});                                                                                                                    // 2647
                                                                                                                       // 2648
define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"], function(require, exports, module) {
"use strict";                                                                                                          // 2650
var dom = require("../lib/dom");                                                                                       // 2651
var oop = require("../lib/oop");                                                                                       // 2652
var event = require("../lib/event");                                                                                   // 2653
var Tooltip = require("../tooltip").Tooltip;                                                                           // 2654
                                                                                                                       // 2655
function GutterHandler(mouseHandler) {                                                                                 // 2656
    var editor = mouseHandler.editor;                                                                                  // 2657
    var gutter = editor.renderer.$gutterLayer;                                                                         // 2658
    var tooltip = new GutterTooltip(editor.container);                                                                 // 2659
                                                                                                                       // 2660
    mouseHandler.editor.setDefaultHandler("guttermousedown", function(e) {                                             // 2661
        if (!editor.isFocused() || e.getButton() != 0)                                                                 // 2662
            return;                                                                                                    // 2663
        var gutterRegion = gutter.getRegion(e);                                                                        // 2664
                                                                                                                       // 2665
        if (gutterRegion == "foldWidgets")                                                                             // 2666
            return;                                                                                                    // 2667
                                                                                                                       // 2668
        var row = e.getDocumentPosition().row;                                                                         // 2669
        var selection = editor.session.selection;                                                                      // 2670
                                                                                                                       // 2671
        if (e.getShiftKey())                                                                                           // 2672
            selection.selectTo(row, 0);                                                                                // 2673
        else {                                                                                                         // 2674
            if (e.domEvent.detail == 2) {                                                                              // 2675
                editor.selectAll();                                                                                    // 2676
                return e.preventDefault();                                                                             // 2677
            }                                                                                                          // 2678
            mouseHandler.$clickSelection = editor.selection.getLineRange(row);                                         // 2679
        }                                                                                                              // 2680
        mouseHandler.setState("selectByLines");                                                                        // 2681
        mouseHandler.captureMouse(e);                                                                                  // 2682
        return e.preventDefault();                                                                                     // 2683
    });                                                                                                                // 2684
                                                                                                                       // 2685
                                                                                                                       // 2686
    var tooltipTimeout, mouseEvent, tooltipAnnotation;                                                                 // 2687
                                                                                                                       // 2688
    function showTooltip() {                                                                                           // 2689
        var row = mouseEvent.getDocumentPosition().row;                                                                // 2690
        var annotation = gutter.$annotations[row];                                                                     // 2691
        if (!annotation)                                                                                               // 2692
            return hideTooltip();                                                                                      // 2693
                                                                                                                       // 2694
        var maxRow = editor.session.getLength();                                                                       // 2695
        if (row == maxRow) {                                                                                           // 2696
            var screenRow = editor.renderer.pixelToScreenCoordinates(0, mouseEvent.y).row;                             // 2697
            var pos = mouseEvent.$pos;                                                                                 // 2698
            if (screenRow > editor.session.documentToScreenRow(pos.row, pos.column))                                   // 2699
                return hideTooltip();                                                                                  // 2700
        }                                                                                                              // 2701
                                                                                                                       // 2702
        if (tooltipAnnotation == annotation)                                                                           // 2703
            return;                                                                                                    // 2704
        tooltipAnnotation = annotation.text.join("<br/>");                                                             // 2705
                                                                                                                       // 2706
        tooltip.setHtml(tooltipAnnotation);                                                                            // 2707
        tooltip.show();                                                                                                // 2708
        editor.on("mousewheel", hideTooltip);                                                                          // 2709
                                                                                                                       // 2710
        if (mouseHandler.$tooltipFollowsMouse) {                                                                       // 2711
            moveTooltip(mouseEvent);                                                                                   // 2712
        } else {                                                                                                       // 2713
            var gutterElement = gutter.$cells[editor.session.documentToScreenRow(row, 0)].element;                     // 2714
            var rect = gutterElement.getBoundingClientRect();                                                          // 2715
            var style = tooltip.getElement().style;                                                                    // 2716
            style.left = rect.right + "px";                                                                            // 2717
            style.top = rect.bottom + "px";                                                                            // 2718
        }                                                                                                              // 2719
    }                                                                                                                  // 2720
                                                                                                                       // 2721
    function hideTooltip() {                                                                                           // 2722
        if (tooltipTimeout)                                                                                            // 2723
            tooltipTimeout = clearTimeout(tooltipTimeout);                                                             // 2724
        if (tooltipAnnotation) {                                                                                       // 2725
            tooltip.hide();                                                                                            // 2726
            tooltipAnnotation = null;                                                                                  // 2727
            editor.removeEventListener("mousewheel", hideTooltip);                                                     // 2728
        }                                                                                                              // 2729
    }                                                                                                                  // 2730
                                                                                                                       // 2731
    function moveTooltip(e) {                                                                                          // 2732
        tooltip.setPosition(e.x, e.y);                                                                                 // 2733
    }                                                                                                                  // 2734
                                                                                                                       // 2735
    mouseHandler.editor.setDefaultHandler("guttermousemove", function(e) {                                             // 2736
        var target = e.domEvent.target || e.domEvent.srcElement;                                                       // 2737
        if (dom.hasCssClass(target, "ace_fold-widget"))                                                                // 2738
            return hideTooltip();                                                                                      // 2739
                                                                                                                       // 2740
        if (tooltipAnnotation && mouseHandler.$tooltipFollowsMouse)                                                    // 2741
            moveTooltip(e);                                                                                            // 2742
                                                                                                                       // 2743
        mouseEvent = e;                                                                                                // 2744
        if (tooltipTimeout)                                                                                            // 2745
            return;                                                                                                    // 2746
        tooltipTimeout = setTimeout(function() {                                                                       // 2747
            tooltipTimeout = null;                                                                                     // 2748
            if (mouseEvent && !mouseHandler.isMousePressed)                                                            // 2749
                showTooltip();                                                                                         // 2750
            else                                                                                                       // 2751
                hideTooltip();                                                                                         // 2752
        }, 50);                                                                                                        // 2753
    });                                                                                                                // 2754
                                                                                                                       // 2755
    event.addListener(editor.renderer.$gutter, "mouseout", function(e) {                                               // 2756
        mouseEvent = null;                                                                                             // 2757
        if (!tooltipAnnotation || tooltipTimeout)                                                                      // 2758
            return;                                                                                                    // 2759
                                                                                                                       // 2760
        tooltipTimeout = setTimeout(function() {                                                                       // 2761
            tooltipTimeout = null;                                                                                     // 2762
            hideTooltip();                                                                                             // 2763
        }, 50);                                                                                                        // 2764
    });                                                                                                                // 2765
                                                                                                                       // 2766
    editor.on("changeSession", hideTooltip);                                                                           // 2767
}                                                                                                                      // 2768
                                                                                                                       // 2769
function GutterTooltip(parentNode) {                                                                                   // 2770
    Tooltip.call(this, parentNode);                                                                                    // 2771
}                                                                                                                      // 2772
                                                                                                                       // 2773
oop.inherits(GutterTooltip, Tooltip);                                                                                  // 2774
                                                                                                                       // 2775
(function(){                                                                                                           // 2776
    this.setPosition = function(x, y) {                                                                                // 2777
        var windowWidth = window.innerWidth || document.documentElement.clientWidth;                                   // 2778
        var windowHeight = window.innerHeight || document.documentElement.clientHeight;                                // 2779
        var width = this.getWidth();                                                                                   // 2780
        var height = this.getHeight();                                                                                 // 2781
        x += 15;                                                                                                       // 2782
        y += 15;                                                                                                       // 2783
        if (x + width > windowWidth) {                                                                                 // 2784
            x -= (x + width) - windowWidth;                                                                            // 2785
        }                                                                                                              // 2786
        if (y + height > windowHeight) {                                                                               // 2787
            y -= 20 + height;                                                                                          // 2788
        }                                                                                                              // 2789
        Tooltip.prototype.setPosition.call(this, x, y);                                                                // 2790
    };                                                                                                                 // 2791
                                                                                                                       // 2792
}).call(GutterTooltip.prototype);                                                                                      // 2793
                                                                                                                       // 2794
                                                                                                                       // 2795
                                                                                                                       // 2796
exports.GutterHandler = GutterHandler;                                                                                 // 2797
                                                                                                                       // 2798
});                                                                                                                    // 2799
                                                                                                                       // 2800
define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"], function(require, exports, module) {
"use strict";                                                                                                          // 2802
                                                                                                                       // 2803
var event = require("../lib/event");                                                                                   // 2804
var useragent = require("../lib/useragent");                                                                           // 2805
var MouseEvent = exports.MouseEvent = function(domEvent, editor) {                                                     // 2806
    this.domEvent = domEvent;                                                                                          // 2807
    this.editor = editor;                                                                                              // 2808
                                                                                                                       // 2809
    this.x = this.clientX = domEvent.clientX;                                                                          // 2810
    this.y = this.clientY = domEvent.clientY;                                                                          // 2811
                                                                                                                       // 2812
    this.$pos = null;                                                                                                  // 2813
    this.$inSelection = null;                                                                                          // 2814
                                                                                                                       // 2815
    this.propagationStopped = false;                                                                                   // 2816
    this.defaultPrevented = false;                                                                                     // 2817
};                                                                                                                     // 2818
                                                                                                                       // 2819
(function() {                                                                                                          // 2820
                                                                                                                       // 2821
    this.stopPropagation = function() {                                                                                // 2822
        event.stopPropagation(this.domEvent);                                                                          // 2823
        this.propagationStopped = true;                                                                                // 2824
    };                                                                                                                 // 2825
                                                                                                                       // 2826
    this.preventDefault = function() {                                                                                 // 2827
        event.preventDefault(this.domEvent);                                                                           // 2828
        this.defaultPrevented = true;                                                                                  // 2829
    };                                                                                                                 // 2830
                                                                                                                       // 2831
    this.stop = function() {                                                                                           // 2832
        this.stopPropagation();                                                                                        // 2833
        this.preventDefault();                                                                                         // 2834
    };                                                                                                                 // 2835
    this.getDocumentPosition = function() {                                                                            // 2836
        if (this.$pos)                                                                                                 // 2837
            return this.$pos;                                                                                          // 2838
                                                                                                                       // 2839
        this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);                          // 2840
        return this.$pos;                                                                                              // 2841
    };                                                                                                                 // 2842
    this.inSelection = function() {                                                                                    // 2843
        if (this.$inSelection !== null)                                                                                // 2844
            return this.$inSelection;                                                                                  // 2845
                                                                                                                       // 2846
        var editor = this.editor;                                                                                      // 2847
                                                                                                                       // 2848
                                                                                                                       // 2849
        var selectionRange = editor.getSelectionRange();                                                               // 2850
        if (selectionRange.isEmpty())                                                                                  // 2851
            this.$inSelection = false;                                                                                 // 2852
        else {                                                                                                         // 2853
            var pos = this.getDocumentPosition();                                                                      // 2854
            this.$inSelection = selectionRange.contains(pos.row, pos.column);                                          // 2855
        }                                                                                                              // 2856
                                                                                                                       // 2857
        return this.$inSelection;                                                                                      // 2858
    };                                                                                                                 // 2859
    this.getButton = function() {                                                                                      // 2860
        return event.getButton(this.domEvent);                                                                         // 2861
    };                                                                                                                 // 2862
    this.getShiftKey = function() {                                                                                    // 2863
        return this.domEvent.shiftKey;                                                                                 // 2864
    };                                                                                                                 // 2865
                                                                                                                       // 2866
    this.getAccelKey = useragent.isMac                                                                                 // 2867
        ? function() { return this.domEvent.metaKey; }                                                                 // 2868
        : function() { return this.domEvent.ctrlKey; };                                                                // 2869
                                                                                                                       // 2870
}).call(MouseEvent.prototype);                                                                                         // 2871
                                                                                                                       // 2872
});                                                                                                                    // 2873
                                                                                                                       // 2874
define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"], function(require, exports, module) {
"use strict";                                                                                                          // 2876
                                                                                                                       // 2877
var dom = require("../lib/dom");                                                                                       // 2878
var event = require("../lib/event");                                                                                   // 2879
var useragent = require("../lib/useragent");                                                                           // 2880
                                                                                                                       // 2881
var AUTOSCROLL_DELAY = 200;                                                                                            // 2882
var SCROLL_CURSOR_DELAY = 200;                                                                                         // 2883
var SCROLL_CURSOR_HYSTERESIS = 5;                                                                                      // 2884
                                                                                                                       // 2885
function DragdropHandler(mouseHandler) {                                                                               // 2886
                                                                                                                       // 2887
    var editor = mouseHandler.editor;                                                                                  // 2888
                                                                                                                       // 2889
    var blankImage = dom.createElement("img");                                                                         // 2890
    blankImage.src = "data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";                     // 2891
    if (useragent.isOpera)                                                                                             // 2892
        blankImage.style.cssText = "width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;";   // 2893
                                                                                                                       // 2894
    var exports = ["dragWait", "dragWaitEnd", "startDrag", "dragReadyEnd", "onMouseDrag"];                             // 2895
                                                                                                                       // 2896
     exports.forEach(function(x) {                                                                                     // 2897
         mouseHandler[x] = this[x];                                                                                    // 2898
    }, this);                                                                                                          // 2899
    editor.addEventListener("mousedown", this.onMouseDown.bind(mouseHandler));                                         // 2900
                                                                                                                       // 2901
                                                                                                                       // 2902
    var mouseTarget = editor.container;                                                                                // 2903
    var dragSelectionMarker, x, y;                                                                                     // 2904
    var timerId, range;                                                                                                // 2905
    var dragCursor, counter = 0;                                                                                       // 2906
    var dragOperation;                                                                                                 // 2907
    var isInternal;                                                                                                    // 2908
    var autoScrollStartTime;                                                                                           // 2909
    var cursorMovedTime;                                                                                               // 2910
    var cursorPointOnCaretMoved;                                                                                       // 2911
                                                                                                                       // 2912
    this.onDragStart = function(e) {                                                                                   // 2913
        if (this.cancelDrag || !mouseTarget.draggable) {                                                               // 2914
            var self = this;                                                                                           // 2915
            setTimeout(function(){                                                                                     // 2916
                self.startSelect();                                                                                    // 2917
                self.captureMouse(e);                                                                                  // 2918
            }, 0);                                                                                                     // 2919
            return e.preventDefault();                                                                                 // 2920
        }                                                                                                              // 2921
        range = editor.getSelectionRange();                                                                            // 2922
                                                                                                                       // 2923
        var dataTransfer = e.dataTransfer;                                                                             // 2924
        dataTransfer.effectAllowed = editor.getReadOnly() ? "copy" : "copyMove";                                       // 2925
        if (useragent.isOpera) {                                                                                       // 2926
            editor.container.appendChild(blankImage);                                                                  // 2927
            blankImage.scrollTop = 0;                                                                                  // 2928
        }                                                                                                              // 2929
        dataTransfer.setDragImage && dataTransfer.setDragImage(blankImage, 0, 0);                                      // 2930
        if (useragent.isOpera) {                                                                                       // 2931
            editor.container.removeChild(blankImage);                                                                  // 2932
        }                                                                                                              // 2933
        dataTransfer.clearData();                                                                                      // 2934
        dataTransfer.setData("Text", editor.session.getTextRange());                                                   // 2935
                                                                                                                       // 2936
        isInternal = true;                                                                                             // 2937
        this.setState("drag");                                                                                         // 2938
    };                                                                                                                 // 2939
                                                                                                                       // 2940
    this.onDragEnd = function(e) {                                                                                     // 2941
        mouseTarget.draggable = false;                                                                                 // 2942
        isInternal = false;                                                                                            // 2943
        this.setState(null);                                                                                           // 2944
        if (!editor.getReadOnly()) {                                                                                   // 2945
            var dropEffect = e.dataTransfer.dropEffect;                                                                // 2946
            if (!dragOperation && dropEffect == "move")                                                                // 2947
                editor.session.remove(editor.getSelectionRange());                                                     // 2948
            editor.renderer.$cursorLayer.setBlinking(true);                                                            // 2949
        }                                                                                                              // 2950
        this.editor.unsetStyle("ace_dragging");                                                                        // 2951
        this.editor.renderer.setCursorStyle("");                                                                       // 2952
    };                                                                                                                 // 2953
                                                                                                                       // 2954
    this.onDragEnter = function(e) {                                                                                   // 2955
        if (editor.getReadOnly() || !canAccept(e.dataTransfer))                                                        // 2956
            return;                                                                                                    // 2957
        x = e.clientX;                                                                                                 // 2958
        y = e.clientY;                                                                                                 // 2959
        if (!dragSelectionMarker)                                                                                      // 2960
            addDragMarker();                                                                                           // 2961
        counter++;                                                                                                     // 2962
        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);                                                  // 2963
        return event.preventDefault(e);                                                                                // 2964
    };                                                                                                                 // 2965
                                                                                                                       // 2966
    this.onDragOver = function(e) {                                                                                    // 2967
        if (editor.getReadOnly() || !canAccept(e.dataTransfer))                                                        // 2968
            return;                                                                                                    // 2969
        x = e.clientX;                                                                                                 // 2970
        y = e.clientY;                                                                                                 // 2971
        if (!dragSelectionMarker) {                                                                                    // 2972
            addDragMarker();                                                                                           // 2973
            counter++;                                                                                                 // 2974
        }                                                                                                              // 2975
        if (onMouseMoveTimer !== null)                                                                                 // 2976
            onMouseMoveTimer = null;                                                                                   // 2977
                                                                                                                       // 2978
        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);                                                  // 2979
        return event.preventDefault(e);                                                                                // 2980
    };                                                                                                                 // 2981
                                                                                                                       // 2982
    this.onDragLeave = function(e) {                                                                                   // 2983
        counter--;                                                                                                     // 2984
        if (counter <= 0 && dragSelectionMarker) {                                                                     // 2985
            clearDragMarker();                                                                                         // 2986
            dragOperation = null;                                                                                      // 2987
            return event.preventDefault(e);                                                                            // 2988
        }                                                                                                              // 2989
    };                                                                                                                 // 2990
                                                                                                                       // 2991
    this.onDrop = function(e) {                                                                                        // 2992
        if (!dragCursor)                                                                                               // 2993
            return;                                                                                                    // 2994
        var dataTransfer = e.dataTransfer;                                                                             // 2995
        if (isInternal) {                                                                                              // 2996
            switch (dragOperation) {                                                                                   // 2997
                case "move":                                                                                           // 2998
                    if (range.contains(dragCursor.row, dragCursor.column)) {                                           // 2999
                        range = {                                                                                      // 3000
                            start: dragCursor,                                                                         // 3001
                            end: dragCursor                                                                            // 3002
                        };                                                                                             // 3003
                    } else {                                                                                           // 3004
                        range = editor.moveText(range, dragCursor);                                                    // 3005
                    }                                                                                                  // 3006
                    break;                                                                                             // 3007
                case "copy":                                                                                           // 3008
                    range = editor.moveText(range, dragCursor, true);                                                  // 3009
                    break;                                                                                             // 3010
            }                                                                                                          // 3011
        } else {                                                                                                       // 3012
            var dropData = dataTransfer.getData('Text');                                                               // 3013
            range = {                                                                                                  // 3014
                start: dragCursor,                                                                                     // 3015
                end: editor.session.insert(dragCursor, dropData)                                                       // 3016
            };                                                                                                         // 3017
            editor.focus();                                                                                            // 3018
            dragOperation = null;                                                                                      // 3019
        }                                                                                                              // 3020
        clearDragMarker();                                                                                             // 3021
        return event.preventDefault(e);                                                                                // 3022
    };                                                                                                                 // 3023
                                                                                                                       // 3024
    event.addListener(mouseTarget, "dragstart", this.onDragStart.bind(mouseHandler));                                  // 3025
    event.addListener(mouseTarget, "dragend", this.onDragEnd.bind(mouseHandler));                                      // 3026
    event.addListener(mouseTarget, "dragenter", this.onDragEnter.bind(mouseHandler));                                  // 3027
    event.addListener(mouseTarget, "dragover", this.onDragOver.bind(mouseHandler));                                    // 3028
    event.addListener(mouseTarget, "dragleave", this.onDragLeave.bind(mouseHandler));                                  // 3029
    event.addListener(mouseTarget, "drop", this.onDrop.bind(mouseHandler));                                            // 3030
                                                                                                                       // 3031
    function scrollCursorIntoView(cursor, prevCursor) {                                                                // 3032
        var now = Date.now();                                                                                          // 3033
        var vMovement = !prevCursor || cursor.row != prevCursor.row;                                                   // 3034
        var hMovement = !prevCursor || cursor.column != prevCursor.column;                                             // 3035
        if (!cursorMovedTime || vMovement || hMovement) {                                                              // 3036
            editor.$blockScrolling += 1;                                                                               // 3037
            editor.moveCursorToPosition(cursor);                                                                       // 3038
            editor.$blockScrolling -= 1;                                                                               // 3039
            cursorMovedTime = now;                                                                                     // 3040
            cursorPointOnCaretMoved = {x: x, y: y};                                                                    // 3041
        } else {                                                                                                       // 3042
            var distance = calcDistance(cursorPointOnCaretMoved.x, cursorPointOnCaretMoved.y, x, y);                   // 3043
            if (distance > SCROLL_CURSOR_HYSTERESIS) {                                                                 // 3044
                cursorMovedTime = null;                                                                                // 3045
            } else if (now - cursorMovedTime >= SCROLL_CURSOR_DELAY) {                                                 // 3046
                editor.renderer.scrollCursorIntoView();                                                                // 3047
                cursorMovedTime = null;                                                                                // 3048
            }                                                                                                          // 3049
        }                                                                                                              // 3050
    }                                                                                                                  // 3051
                                                                                                                       // 3052
    function autoScroll(cursor, prevCursor) {                                                                          // 3053
        var now = Date.now();                                                                                          // 3054
        var lineHeight = editor.renderer.layerConfig.lineHeight;                                                       // 3055
        var characterWidth = editor.renderer.layerConfig.characterWidth;                                               // 3056
        var editorRect = editor.renderer.scroller.getBoundingClientRect();                                             // 3057
        var offsets = {                                                                                                // 3058
           x: {                                                                                                        // 3059
               left: x - editorRect.left,                                                                              // 3060
               right: editorRect.right - x                                                                             // 3061
           },                                                                                                          // 3062
           y: {                                                                                                        // 3063
               top: y - editorRect.top,                                                                                // 3064
               bottom: editorRect.bottom - y                                                                           // 3065
           }                                                                                                           // 3066
        };                                                                                                             // 3067
        var nearestXOffset = Math.min(offsets.x.left, offsets.x.right);                                                // 3068
        var nearestYOffset = Math.min(offsets.y.top, offsets.y.bottom);                                                // 3069
        var scrollCursor = {row: cursor.row, column: cursor.column};                                                   // 3070
        if (nearestXOffset / characterWidth <= 2) {                                                                    // 3071
            scrollCursor.column += (offsets.x.left < offsets.x.right ? -3 : +2);                                       // 3072
        }                                                                                                              // 3073
        if (nearestYOffset / lineHeight <= 1) {                                                                        // 3074
            scrollCursor.row += (offsets.y.top < offsets.y.bottom ? -1 : +1);                                          // 3075
        }                                                                                                              // 3076
        var vScroll = cursor.row != scrollCursor.row;                                                                  // 3077
        var hScroll = cursor.column != scrollCursor.column;                                                            // 3078
        var vMovement = !prevCursor || cursor.row != prevCursor.row;                                                   // 3079
        if (vScroll || (hScroll && !vMovement)) {                                                                      // 3080
            if (!autoScrollStartTime)                                                                                  // 3081
                autoScrollStartTime = now;                                                                             // 3082
            else if (now - autoScrollStartTime >= AUTOSCROLL_DELAY)                                                    // 3083
                editor.renderer.scrollCursorIntoView(scrollCursor);                                                    // 3084
        } else {                                                                                                       // 3085
            autoScrollStartTime = null;                                                                                // 3086
        }                                                                                                              // 3087
    }                                                                                                                  // 3088
                                                                                                                       // 3089
    function onDragInterval() {                                                                                        // 3090
        var prevCursor = dragCursor;                                                                                   // 3091
        dragCursor = editor.renderer.screenToTextCoordinates(x, y);                                                    // 3092
        scrollCursorIntoView(dragCursor, prevCursor);                                                                  // 3093
        autoScroll(dragCursor, prevCursor);                                                                            // 3094
    }                                                                                                                  // 3095
                                                                                                                       // 3096
    function addDragMarker() {                                                                                         // 3097
        range = editor.selection.toOrientedRange();                                                                    // 3098
        dragSelectionMarker = editor.session.addMarker(range, "ace_selection", editor.getSelectionStyle());            // 3099
        editor.clearSelection();                                                                                       // 3100
        if (editor.isFocused())                                                                                        // 3101
            editor.renderer.$cursorLayer.setBlinking(false);                                                           // 3102
        clearInterval(timerId);                                                                                        // 3103
        onDragInterval();                                                                                              // 3104
        timerId = setInterval(onDragInterval, 20);                                                                     // 3105
        counter = 0;                                                                                                   // 3106
        event.addListener(document, "mousemove", onMouseMove);                                                         // 3107
    }                                                                                                                  // 3108
                                                                                                                       // 3109
    function clearDragMarker() {                                                                                       // 3110
        clearInterval(timerId);                                                                                        // 3111
        editor.session.removeMarker(dragSelectionMarker);                                                              // 3112
        dragSelectionMarker = null;                                                                                    // 3113
        editor.$blockScrolling += 1;                                                                                   // 3114
        editor.selection.fromOrientedRange(range);                                                                     // 3115
        editor.$blockScrolling -= 1;                                                                                   // 3116
        if (editor.isFocused() && !isInternal)                                                                         // 3117
            editor.renderer.$cursorLayer.setBlinking(!editor.getReadOnly());                                           // 3118
        range = null;                                                                                                  // 3119
        dragCursor = null;                                                                                             // 3120
        counter = 0;                                                                                                   // 3121
        autoScrollStartTime = null;                                                                                    // 3122
        cursorMovedTime = null;                                                                                        // 3123
        event.removeListener(document, "mousemove", onMouseMove);                                                      // 3124
    }                                                                                                                  // 3125
    var onMouseMoveTimer = null;                                                                                       // 3126
    function onMouseMove() {                                                                                           // 3127
        if (onMouseMoveTimer == null) {                                                                                // 3128
            onMouseMoveTimer = setTimeout(function() {                                                                 // 3129
                if (onMouseMoveTimer != null && dragSelectionMarker)                                                   // 3130
                    clearDragMarker();                                                                                 // 3131
            }, 20);                                                                                                    // 3132
        }                                                                                                              // 3133
    }                                                                                                                  // 3134
                                                                                                                       // 3135
    function canAccept(dataTransfer) {                                                                                 // 3136
        var types = dataTransfer.types;                                                                                // 3137
        return !types || Array.prototype.some.call(types, function(type) {                                             // 3138
            return type == 'text/plain' || type == 'Text';                                                             // 3139
        });                                                                                                            // 3140
    }                                                                                                                  // 3141
                                                                                                                       // 3142
    function getDropEffect(e) {                                                                                        // 3143
        var copyAllowed = ['copy', 'copymove', 'all', 'uninitialized'];                                                // 3144
        var moveAllowed = ['move', 'copymove', 'linkmove', 'all', 'uninitialized'];                                    // 3145
                                                                                                                       // 3146
        var copyModifierState = useragent.isMac ? e.altKey : e.ctrlKey;                                                // 3147
        var effectAllowed = "uninitialized";                                                                           // 3148
        try {                                                                                                          // 3149
            effectAllowed = e.dataTransfer.effectAllowed.toLowerCase();                                                // 3150
        } catch (e) {}                                                                                                 // 3151
        var dropEffect = "none";                                                                                       // 3152
                                                                                                                       // 3153
        if (copyModifierState && copyAllowed.indexOf(effectAllowed) >= 0)                                              // 3154
            dropEffect = "copy";                                                                                       // 3155
        else if (moveAllowed.indexOf(effectAllowed) >= 0)                                                              // 3156
            dropEffect = "move";                                                                                       // 3157
        else if (copyAllowed.indexOf(effectAllowed) >= 0)                                                              // 3158
            dropEffect = "copy";                                                                                       // 3159
                                                                                                                       // 3160
        return dropEffect;                                                                                             // 3161
    }                                                                                                                  // 3162
}                                                                                                                      // 3163
                                                                                                                       // 3164
(function() {                                                                                                          // 3165
                                                                                                                       // 3166
    this.dragWait = function() {                                                                                       // 3167
        var interval = Date.now() - this.mousedownEvent.time;                                                          // 3168
        if (interval > this.editor.getDragDelay())                                                                     // 3169
            this.startDrag();                                                                                          // 3170
    };                                                                                                                 // 3171
                                                                                                                       // 3172
    this.dragWaitEnd = function() {                                                                                    // 3173
        var target = this.editor.container;                                                                            // 3174
        target.draggable = false;                                                                                      // 3175
        this.startSelect(this.mousedownEvent.getDocumentPosition());                                                   // 3176
        this.selectEnd();                                                                                              // 3177
    };                                                                                                                 // 3178
                                                                                                                       // 3179
    this.dragReadyEnd = function(e) {                                                                                  // 3180
        this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly());                                     // 3181
        this.editor.unsetStyle("ace_dragging");                                                                        // 3182
        this.editor.renderer.setCursorStyle("");                                                                       // 3183
        this.dragWaitEnd();                                                                                            // 3184
    };                                                                                                                 // 3185
                                                                                                                       // 3186
    this.startDrag = function(){                                                                                       // 3187
        this.cancelDrag = false;                                                                                       // 3188
        var editor = this.editor;                                                                                      // 3189
        var target = editor.container;                                                                                 // 3190
        target.draggable = true;                                                                                       // 3191
        editor.renderer.$cursorLayer.setBlinking(false);                                                               // 3192
        editor.setStyle("ace_dragging");                                                                               // 3193
        var cursorStyle = useragent.isWin ? "default" : "move";                                                        // 3194
        editor.renderer.setCursorStyle(cursorStyle);                                                                   // 3195
        this.setState("dragReady");                                                                                    // 3196
    };                                                                                                                 // 3197
                                                                                                                       // 3198
    this.onMouseDrag = function(e) {                                                                                   // 3199
        var target = this.editor.container;                                                                            // 3200
        if (useragent.isIE && this.state == "dragReady") {                                                             // 3201
            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);                 // 3202
            if (distance > 3)                                                                                          // 3203
                target.dragDrop();                                                                                     // 3204
        }                                                                                                              // 3205
        if (this.state === "dragWait") {                                                                               // 3206
            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);                 // 3207
            if (distance > 0) {                                                                                        // 3208
                target.draggable = false;                                                                              // 3209
                this.startSelect(this.mousedownEvent.getDocumentPosition());                                           // 3210
            }                                                                                                          // 3211
        }                                                                                                              // 3212
    };                                                                                                                 // 3213
                                                                                                                       // 3214
    this.onMouseDown = function(e) {                                                                                   // 3215
        if (!this.$dragEnabled)                                                                                        // 3216
            return;                                                                                                    // 3217
        this.mousedownEvent = e;                                                                                       // 3218
        var editor = this.editor;                                                                                      // 3219
                                                                                                                       // 3220
        var inSelection = e.inSelection();                                                                             // 3221
        var button = e.getButton();                                                                                    // 3222
        var clickCount = e.domEvent.detail || 1;                                                                       // 3223
        if (clickCount === 1 && button === 0 && inSelection) {                                                         // 3224
            if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey()))                                    // 3225
                return;                                                                                                // 3226
            this.mousedownEvent.time = Date.now();                                                                     // 3227
            var eventTarget = e.domEvent.target || e.domEvent.srcElement;                                              // 3228
            if ("unselectable" in eventTarget)                                                                         // 3229
                eventTarget.unselectable = "on";                                                                       // 3230
            if (editor.getDragDelay()) {                                                                               // 3231
                if (useragent.isWebKit) {                                                                              // 3232
                    this.cancelDrag = true;                                                                            // 3233
                    var mouseTarget = editor.container;                                                                // 3234
                    mouseTarget.draggable = true;                                                                      // 3235
                }                                                                                                      // 3236
                this.setState("dragWait");                                                                             // 3237
            } else {                                                                                                   // 3238
                this.startDrag();                                                                                      // 3239
            }                                                                                                          // 3240
            this.captureMouse(e, this.onMouseDrag.bind(this));                                                         // 3241
            e.defaultPrevented = true;                                                                                 // 3242
        }                                                                                                              // 3243
    };                                                                                                                 // 3244
                                                                                                                       // 3245
}).call(DragdropHandler.prototype);                                                                                    // 3246
                                                                                                                       // 3247
                                                                                                                       // 3248
function calcDistance(ax, ay, bx, by) {                                                                                // 3249
    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));                                                     // 3250
}                                                                                                                      // 3251
                                                                                                                       // 3252
exports.DragdropHandler = DragdropHandler;                                                                             // 3253
                                                                                                                       // 3254
});                                                                                                                    // 3255
                                                                                                                       // 3256
define("ace/lib/net",["require","exports","module","ace/lib/dom"], function(require, exports, module) {                // 3257
"use strict";                                                                                                          // 3258
var dom = require("./dom");                                                                                            // 3259
                                                                                                                       // 3260
exports.get = function (url, callback) {                                                                               // 3261
    var xhr = new XMLHttpRequest();                                                                                    // 3262
    xhr.open('GET', url, true);                                                                                        // 3263
    xhr.onreadystatechange = function () {                                                                             // 3264
        if (xhr.readyState === 4) {                                                                                    // 3265
            callback(xhr.responseText);                                                                                // 3266
        }                                                                                                              // 3267
    };                                                                                                                 // 3268
    xhr.send(null);                                                                                                    // 3269
};                                                                                                                     // 3270
                                                                                                                       // 3271
exports.loadScript = function(path, callback) {                                                                        // 3272
    var head = dom.getDocumentHead();                                                                                  // 3273
    var s = document.createElement('script');                                                                          // 3274
                                                                                                                       // 3275
    s.src = path;                                                                                                      // 3276
    head.appendChild(s);                                                                                               // 3277
                                                                                                                       // 3278
    s.onload = s.onreadystatechange = function(_, isAbort) {                                                           // 3279
        if (isAbort || !s.readyState || s.readyState == "loaded" || s.readyState == "complete") {                      // 3280
            s = s.onload = s.onreadystatechange = null;                                                                // 3281
            if (!isAbort)                                                                                              // 3282
                callback();                                                                                            // 3283
        }                                                                                                              // 3284
    };                                                                                                                 // 3285
};                                                                                                                     // 3286
exports.qualifyURL = function(url) {                                                                                   // 3287
    var a = document.createElement('a');                                                                               // 3288
    a.href = url;                                                                                                      // 3289
    return a.href;                                                                                                     // 3290
}                                                                                                                      // 3291
                                                                                                                       // 3292
});                                                                                                                    // 3293
                                                                                                                       // 3294
define("ace/lib/event_emitter",["require","exports","module"], function(require, exports, module) {                    // 3295
"use strict";                                                                                                          // 3296
                                                                                                                       // 3297
var EventEmitter = {};                                                                                                 // 3298
var stopPropagation = function() { this.propagationStopped = true; };                                                  // 3299
var preventDefault = function() { this.defaultPrevented = true; };                                                     // 3300
                                                                                                                       // 3301
EventEmitter._emit =                                                                                                   // 3302
EventEmitter._dispatchEvent = function(eventName, e) {                                                                 // 3303
    this._eventRegistry || (this._eventRegistry = {});                                                                 // 3304
    this._defaultHandlers || (this._defaultHandlers = {});                                                             // 3305
                                                                                                                       // 3306
    var listeners = this._eventRegistry[eventName] || [];                                                              // 3307
    var defaultHandler = this._defaultHandlers[eventName];                                                             // 3308
    if (!listeners.length && !defaultHandler)                                                                          // 3309
        return;                                                                                                        // 3310
                                                                                                                       // 3311
    if (typeof e != "object" || !e)                                                                                    // 3312
        e = {};                                                                                                        // 3313
                                                                                                                       // 3314
    if (!e.type)                                                                                                       // 3315
        e.type = eventName;                                                                                            // 3316
    if (!e.stopPropagation)                                                                                            // 3317
        e.stopPropagation = stopPropagation;                                                                           // 3318
    if (!e.preventDefault)                                                                                             // 3319
        e.preventDefault = preventDefault;                                                                             // 3320
                                                                                                                       // 3321
    listeners = listeners.slice();                                                                                     // 3322
    for (var i=0; i<listeners.length; i++) {                                                                           // 3323
        listeners[i](e, this);                                                                                         // 3324
        if (e.propagationStopped)                                                                                      // 3325
            break;                                                                                                     // 3326
    }                                                                                                                  // 3327
                                                                                                                       // 3328
    if (defaultHandler && !e.defaultPrevented)                                                                         // 3329
        return defaultHandler(e, this);                                                                                // 3330
};                                                                                                                     // 3331
                                                                                                                       // 3332
                                                                                                                       // 3333
EventEmitter._signal = function(eventName, e) {                                                                        // 3334
    var listeners = (this._eventRegistry || {})[eventName];                                                            // 3335
    if (!listeners)                                                                                                    // 3336
        return;                                                                                                        // 3337
    listeners = listeners.slice();                                                                                     // 3338
    for (var i=0; i<listeners.length; i++)                                                                             // 3339
        listeners[i](e, this);                                                                                         // 3340
};                                                                                                                     // 3341
                                                                                                                       // 3342
EventEmitter.once = function(eventName, callback) {                                                                    // 3343
    var _self = this;                                                                                                  // 3344
    callback && this.addEventListener(eventName, function newCallback() {                                              // 3345
        _self.removeEventListener(eventName, newCallback);                                                             // 3346
        callback.apply(null, arguments);                                                                               // 3347
    });                                                                                                                // 3348
};                                                                                                                     // 3349
                                                                                                                       // 3350
                                                                                                                       // 3351
EventEmitter.setDefaultHandler = function(eventName, callback) {                                                       // 3352
    var handlers = this._defaultHandlers                                                                               // 3353
    if (!handlers)                                                                                                     // 3354
        handlers = this._defaultHandlers = {_disabled_: {}};                                                           // 3355
                                                                                                                       // 3356
    if (handlers[eventName]) {                                                                                         // 3357
        var old = handlers[eventName];                                                                                 // 3358
        var disabled = handlers._disabled_[eventName];                                                                 // 3359
        if (!disabled)                                                                                                 // 3360
            handlers._disabled_[eventName] = disabled = [];                                                            // 3361
        disabled.push(old);                                                                                            // 3362
        var i = disabled.indexOf(callback);                                                                            // 3363
        if (i != -1)                                                                                                   // 3364
            disabled.splice(i, 1);                                                                                     // 3365
    }                                                                                                                  // 3366
    handlers[eventName] = callback;                                                                                    // 3367
};                                                                                                                     // 3368
EventEmitter.removeDefaultHandler = function(eventName, callback) {                                                    // 3369
    var handlers = this._defaultHandlers                                                                               // 3370
    if (!handlers)                                                                                                     // 3371
        return;                                                                                                        // 3372
    var disabled = handlers._disabled_[eventName];                                                                     // 3373
                                                                                                                       // 3374
    if (handlers[eventName] == callback) {                                                                             // 3375
        var old = handlers[eventName];                                                                                 // 3376
        if (disabled)                                                                                                  // 3377
            this.setDefaultHandler(eventName, disabled.pop());                                                         // 3378
    } else if (disabled) {                                                                                             // 3379
        var i = disabled.indexOf(callback);                                                                            // 3380
        if (i != -1)                                                                                                   // 3381
            disabled.splice(i, 1);                                                                                     // 3382
    }                                                                                                                  // 3383
};                                                                                                                     // 3384
                                                                                                                       // 3385
EventEmitter.on =                                                                                                      // 3386
EventEmitter.addEventListener = function(eventName, callback, capturing) {                                             // 3387
    this._eventRegistry = this._eventRegistry || {};                                                                   // 3388
                                                                                                                       // 3389
    var listeners = this._eventRegistry[eventName];                                                                    // 3390
    if (!listeners)                                                                                                    // 3391
        listeners = this._eventRegistry[eventName] = [];                                                               // 3392
                                                                                                                       // 3393
    if (listeners.indexOf(callback) == -1)                                                                             // 3394
        listeners[capturing ? "unshift" : "push"](callback);                                                           // 3395
    return callback;                                                                                                   // 3396
};                                                                                                                     // 3397
                                                                                                                       // 3398
EventEmitter.off =                                                                                                     // 3399
EventEmitter.removeListener =                                                                                          // 3400
EventEmitter.removeEventListener = function(eventName, callback) {                                                     // 3401
    this._eventRegistry = this._eventRegistry || {};                                                                   // 3402
                                                                                                                       // 3403
    var listeners = this._eventRegistry[eventName];                                                                    // 3404
    if (!listeners)                                                                                                    // 3405
        return;                                                                                                        // 3406
                                                                                                                       // 3407
    var index = listeners.indexOf(callback);                                                                           // 3408
    if (index !== -1)                                                                                                  // 3409
        listeners.splice(index, 1);                                                                                    // 3410
};                                                                                                                     // 3411
                                                                                                                       // 3412
EventEmitter.removeAllListeners = function(eventName) {                                                                // 3413
    if (this._eventRegistry) this._eventRegistry[eventName] = [];                                                      // 3414
};                                                                                                                     // 3415
                                                                                                                       // 3416
exports.EventEmitter = EventEmitter;                                                                                   // 3417
                                                                                                                       // 3418
});                                                                                                                    // 3419
                                                                                                                       // 3420
define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/event_emitter"], function(require, exports, module) {
"no use strict";                                                                                                       // 3422
                                                                                                                       // 3423
var lang = require("./lib/lang");                                                                                      // 3424
var oop = require("./lib/oop");                                                                                        // 3425
var net = require("./lib/net");                                                                                        // 3426
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 3427
                                                                                                                       // 3428
var global = (function() {                                                                                             // 3429
    return this;                                                                                                       // 3430
})();                                                                                                                  // 3431
                                                                                                                       // 3432
var options = {                                                                                                        // 3433
    packaged: false,                                                                                                   // 3434
    workerPath: null,                                                                                                  // 3435
    modePath: null,                                                                                                    // 3436
    themePath: null,                                                                                                   // 3437
    basePath: "",                                                                                                      // 3438
    suffix: ".js",                                                                                                     // 3439
    $moduleUrls: {}                                                                                                    // 3440
};                                                                                                                     // 3441
                                                                                                                       // 3442
exports.get = function(key) {                                                                                          // 3443
    if (!options.hasOwnProperty(key))                                                                                  // 3444
        throw new Error("Unknown config key: " + key);                                                                 // 3445
                                                                                                                       // 3446
    return options[key];                                                                                               // 3447
};                                                                                                                     // 3448
                                                                                                                       // 3449
exports.set = function(key, value) {                                                                                   // 3450
    if (!options.hasOwnProperty(key))                                                                                  // 3451
        throw new Error("Unknown config key: " + key);                                                                 // 3452
                                                                                                                       // 3453
    options[key] = value;                                                                                              // 3454
};                                                                                                                     // 3455
                                                                                                                       // 3456
exports.all = function() {                                                                                             // 3457
    return lang.copyObject(options);                                                                                   // 3458
};                                                                                                                     // 3459
oop.implement(exports, EventEmitter);                                                                                  // 3460
                                                                                                                       // 3461
exports.moduleUrl = function(name, component) {                                                                        // 3462
    if (options.$moduleUrls[name])                                                                                     // 3463
        return options.$moduleUrls[name];                                                                              // 3464
                                                                                                                       // 3465
    var parts = name.split("/");                                                                                       // 3466
    component = component || parts[parts.length - 2] || "";                                                            // 3467
    var sep = component == "snippets" ? "/" : "-";                                                                     // 3468
    var base = parts[parts.length - 1];                                                                                // 3469
    if (component == "worker" && sep == "-") {                                                                         // 3470
        var re = new RegExp("^" + component + "[\\-_]|[\\-_]" + component + "$", "g");                                 // 3471
        base = base.replace(re, "");                                                                                   // 3472
    }                                                                                                                  // 3473
                                                                                                                       // 3474
    if ((!base || base == component) && parts.length > 1)                                                              // 3475
        base = parts[parts.length - 2];                                                                                // 3476
    var path = options[component + "Path"];                                                                            // 3477
    if (path == null) {                                                                                                // 3478
        path = options.basePath;                                                                                       // 3479
    } else if (sep == "/") {                                                                                           // 3480
        component = sep = "";                                                                                          // 3481
    }                                                                                                                  // 3482
    if (path && path.slice(-1) != "/")                                                                                 // 3483
        path += "/";                                                                                                   // 3484
    return path + component + sep + base + this.get("suffix");                                                         // 3485
};                                                                                                                     // 3486
                                                                                                                       // 3487
exports.setModuleUrl = function(name, subst) {                                                                         // 3488
    return options.$moduleUrls[name] = subst;                                                                          // 3489
};                                                                                                                     // 3490
                                                                                                                       // 3491
exports.$loading = {};                                                                                                 // 3492
exports.loadModule = function(moduleName, onLoad) {                                                                    // 3493
    var module, moduleType;                                                                                            // 3494
    if (Array.isArray(moduleName)) {                                                                                   // 3495
        moduleType = moduleName[0];                                                                                    // 3496
        moduleName = moduleName[1];                                                                                    // 3497
    }                                                                                                                  // 3498
                                                                                                                       // 3499
    try {                                                                                                              // 3500
        module = require(moduleName);                                                                                  // 3501
    } catch (e) {}                                                                                                     // 3502
    if (module && !exports.$loading[moduleName])                                                                       // 3503
        return onLoad && onLoad(module);                                                                               // 3504
                                                                                                                       // 3505
    if (!exports.$loading[moduleName])                                                                                 // 3506
        exports.$loading[moduleName] = [];                                                                             // 3507
                                                                                                                       // 3508
    exports.$loading[moduleName].push(onLoad);                                                                         // 3509
                                                                                                                       // 3510
    if (exports.$loading[moduleName].length > 1)                                                                       // 3511
        return;                                                                                                        // 3512
                                                                                                                       // 3513
    var afterLoad = function() {                                                                                       // 3514
        require([moduleName], function(module) {                                                                       // 3515
            exports._emit("load.module", {name: moduleName, module: module});                                          // 3516
            var listeners = exports.$loading[moduleName];                                                              // 3517
            exports.$loading[moduleName] = null;                                                                       // 3518
            listeners.forEach(function(onLoad) {                                                                       // 3519
                onLoad && onLoad(module);                                                                              // 3520
            });                                                                                                        // 3521
        });                                                                                                            // 3522
    };                                                                                                                 // 3523
                                                                                                                       // 3524
    if (!exports.get("packaged"))                                                                                      // 3525
        return afterLoad();                                                                                            // 3526
    net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);                                              // 3527
};                                                                                                                     // 3528
init(true);function init(packaged) {                                                                                   // 3529
                                                                                                                       // 3530
    options.packaged = packaged || require.packaged || module.packaged || (global.define && define.packaged);          // 3531
                                                                                                                       // 3532
    if (!global.document)                                                                                              // 3533
        return "";                                                                                                     // 3534
                                                                                                                       // 3535
    var scriptOptions = {};                                                                                            // 3536
    var scriptUrl = "";                                                                                                // 3537
    var currentScript = (document.currentScript || document._currentScript ); // native or polyfill                    // 3538
    var currentDocument = currentScript && currentScript.ownerDocument || document;                                    // 3539
                                                                                                                       // 3540
    var scripts = currentDocument.getElementsByTagName("script");                                                      // 3541
    for (var i=0; i<scripts.length; i++) {                                                                             // 3542
        var script = scripts[i];                                                                                       // 3543
                                                                                                                       // 3544
        var src = script.src || script.getAttribute("src");                                                            // 3545
        if (!src)                                                                                                      // 3546
            continue;                                                                                                  // 3547
                                                                                                                       // 3548
        var attributes = script.attributes;                                                                            // 3549
        for (var j=0, l=attributes.length; j < l; j++) {                                                               // 3550
            var attr = attributes[j];                                                                                  // 3551
            if (attr.name.indexOf("data-ace-") === 0) {                                                                // 3552
                scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/, ""))] = attr.value;                          // 3553
            }                                                                                                          // 3554
        }                                                                                                              // 3555
                                                                                                                       // 3556
        var m = src.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);                                                             // 3557
        if (m)                                                                                                         // 3558
            scriptUrl = m[1];                                                                                          // 3559
    }                                                                                                                  // 3560
                                                                                                                       // 3561
    if (scriptUrl) {                                                                                                   // 3562
        scriptOptions.base = scriptOptions.base || scriptUrl;                                                          // 3563
        scriptOptions.packaged = true;                                                                                 // 3564
    }                                                                                                                  // 3565
                                                                                                                       // 3566
    scriptOptions.basePath = scriptOptions.base;                                                                       // 3567
    scriptOptions.workerPath = scriptOptions.workerPath || scriptOptions.base;                                         // 3568
    scriptOptions.modePath = scriptOptions.modePath || scriptOptions.base;                                             // 3569
    scriptOptions.themePath = scriptOptions.themePath || scriptOptions.base;                                           // 3570
    delete scriptOptions.base;                                                                                         // 3571
                                                                                                                       // 3572
    for (var key in scriptOptions)                                                                                     // 3573
        if (typeof scriptOptions[key] !== "undefined")                                                                 // 3574
            exports.set(key, scriptOptions[key]);                                                                      // 3575
};                                                                                                                     // 3576
                                                                                                                       // 3577
exports.init = init;                                                                                                   // 3578
                                                                                                                       // 3579
function deHyphenate(str) {                                                                                            // 3580
    return str.replace(/-(.)/g, function(m, m1) { return m1.toUpperCase(); });                                         // 3581
}                                                                                                                      // 3582
                                                                                                                       // 3583
var optionsProvider = {                                                                                                // 3584
    setOptions: function(optList) {                                                                                    // 3585
        Object.keys(optList).forEach(function(key) {                                                                   // 3586
            this.setOption(key, optList[key]);                                                                         // 3587
        }, this);                                                                                                      // 3588
    },                                                                                                                 // 3589
    getOptions: function(optionNames) {                                                                                // 3590
        var result = {};                                                                                               // 3591
        if (!optionNames) {                                                                                            // 3592
            optionNames = Object.keys(this.$options);                                                                  // 3593
        } else if (!Array.isArray(optionNames)) {                                                                      // 3594
            result = optionNames;                                                                                      // 3595
            optionNames = Object.keys(result);                                                                         // 3596
        }                                                                                                              // 3597
        optionNames.forEach(function(key) {                                                                            // 3598
            result[key] = this.getOption(key);                                                                         // 3599
        }, this);                                                                                                      // 3600
        return result;                                                                                                 // 3601
    },                                                                                                                 // 3602
    setOption: function(name, value) {                                                                                 // 3603
        if (this["$" + name] === value)                                                                                // 3604
            return;                                                                                                    // 3605
        var opt = this.$options[name];                                                                                 // 3606
        if (!opt) {                                                                                                    // 3607
            if (typeof console != "undefined" && console.warn)                                                         // 3608
                console.warn('misspelled option "' + name + '"');                                                      // 3609
            return undefined;                                                                                          // 3610
        }                                                                                                              // 3611
        if (opt.forwardTo)                                                                                             // 3612
            return this[opt.forwardTo] && this[opt.forwardTo].setOption(name, value);                                  // 3613
                                                                                                                       // 3614
        if (!opt.handlesSet)                                                                                           // 3615
            this["$" + name] = value;                                                                                  // 3616
        if (opt && opt.set)                                                                                            // 3617
            opt.set.call(this, value);                                                                                 // 3618
    },                                                                                                                 // 3619
    getOption: function(name) {                                                                                        // 3620
        var opt = this.$options[name];                                                                                 // 3621
        if (!opt) {                                                                                                    // 3622
            if (typeof console != "undefined" && console.warn)                                                         // 3623
                console.warn('misspelled option "' + name + '"');                                                      // 3624
            return undefined;                                                                                          // 3625
        }                                                                                                              // 3626
        if (opt.forwardTo)                                                                                             // 3627
            return this[opt.forwardTo] && this[opt.forwardTo].getOption(name);                                         // 3628
        return opt && opt.get ? opt.get.call(this) : this["$" + name];                                                 // 3629
    }                                                                                                                  // 3630
};                                                                                                                     // 3631
                                                                                                                       // 3632
var defaultOptions = {};                                                                                               // 3633
exports.defineOptions = function(obj, path, options) {                                                                 // 3634
    if (!obj.$options)                                                                                                 // 3635
        defaultOptions[path] = obj.$options = {};                                                                      // 3636
                                                                                                                       // 3637
    Object.keys(options).forEach(function(key) {                                                                       // 3638
        var opt = options[key];                                                                                        // 3639
        if (typeof opt == "string")                                                                                    // 3640
            opt = {forwardTo: opt};                                                                                    // 3641
                                                                                                                       // 3642
        opt.name || (opt.name = key);                                                                                  // 3643
        obj.$options[opt.name] = opt;                                                                                  // 3644
        if ("initialValue" in opt)                                                                                     // 3645
            obj["$" + opt.name] = opt.initialValue;                                                                    // 3646
    });                                                                                                                // 3647
    oop.implement(obj, optionsProvider);                                                                               // 3648
                                                                                                                       // 3649
    return this;                                                                                                       // 3650
};                                                                                                                     // 3651
                                                                                                                       // 3652
exports.resetOptions = function(obj) {                                                                                 // 3653
    Object.keys(obj.$options).forEach(function(key) {                                                                  // 3654
        var opt = obj.$options[key];                                                                                   // 3655
        if ("value" in opt)                                                                                            // 3656
            obj.setOption(key, opt.value);                                                                             // 3657
    });                                                                                                                // 3658
};                                                                                                                     // 3659
                                                                                                                       // 3660
exports.setDefaultValue = function(path, name, value) {                                                                // 3661
    var opts = defaultOptions[path] || (defaultOptions[path] = {});                                                    // 3662
    if (opts[name]) {                                                                                                  // 3663
        if (opts.forwardTo)                                                                                            // 3664
            exports.setDefaultValue(opts.forwardTo, name, value);                                                      // 3665
        else                                                                                                           // 3666
            opts[name].value = value;                                                                                  // 3667
    }                                                                                                                  // 3668
};                                                                                                                     // 3669
                                                                                                                       // 3670
exports.setDefaultValues = function(path, optionHash) {                                                                // 3671
    Object.keys(optionHash).forEach(function(key) {                                                                    // 3672
        exports.setDefaultValue(path, key, optionHash[key]);                                                           // 3673
    });                                                                                                                // 3674
};                                                                                                                     // 3675
                                                                                                                       // 3676
});                                                                                                                    // 3677
                                                                                                                       // 3678
define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"], function(require, exports, module) {
"use strict";                                                                                                          // 3680
                                                                                                                       // 3681
var event = require("../lib/event");                                                                                   // 3682
var useragent = require("../lib/useragent");                                                                           // 3683
var DefaultHandlers = require("./default_handlers").DefaultHandlers;                                                   // 3684
var DefaultGutterHandler = require("./default_gutter_handler").GutterHandler;                                          // 3685
var MouseEvent = require("./mouse_event").MouseEvent;                                                                  // 3686
var DragdropHandler = require("./dragdrop_handler").DragdropHandler;                                                   // 3687
var config = require("../config");                                                                                     // 3688
                                                                                                                       // 3689
var MouseHandler = function(editor) {                                                                                  // 3690
    var _self = this;                                                                                                  // 3691
    this.editor = editor;                                                                                              // 3692
                                                                                                                       // 3693
    new DefaultHandlers(this);                                                                                         // 3694
    new DefaultGutterHandler(this);                                                                                    // 3695
    new DragdropHandler(this);                                                                                         // 3696
                                                                                                                       // 3697
    var focusEditor = function(e) {                                                                                    // 3698
        if (!editor.isFocused() && editor.textInput)                                                                   // 3699
            editor.textInput.moveToMouse(e);                                                                           // 3700
        editor.focus()                                                                                                 // 3701
    };                                                                                                                 // 3702
                                                                                                                       // 3703
    var mouseTarget = editor.renderer.getMouseEventTarget();                                                           // 3704
    event.addListener(mouseTarget, "click", this.onMouseEvent.bind(this, "click"));                                    // 3705
    event.addListener(mouseTarget, "mousemove", this.onMouseMove.bind(this, "mousemove"));                             // 3706
    event.addMultiMouseDownListener(mouseTarget, [400, 300, 250], this, "onMouseEvent");                               // 3707
    if (editor.renderer.scrollBarV) {                                                                                  // 3708
        event.addMultiMouseDownListener(editor.renderer.scrollBarV.inner, [400, 300, 250], this, "onMouseEvent");      // 3709
        event.addMultiMouseDownListener(editor.renderer.scrollBarH.inner, [400, 300, 250], this, "onMouseEvent");      // 3710
        if (useragent.isIE) {                                                                                          // 3711
            event.addListener(editor.renderer.scrollBarV.element, "mousedown", focusEditor);                           // 3712
            event.addListener(editor.renderer.scrollBarH.element, "mousemove", focusEditor);                           // 3713
        }                                                                                                              // 3714
    }                                                                                                                  // 3715
    event.addMouseWheelListener(editor.container, this.onMouseWheel.bind(this, "mousewheel"));                         // 3716
                                                                                                                       // 3717
    var gutterEl = editor.renderer.$gutter;                                                                            // 3718
    event.addListener(gutterEl, "mousedown", this.onMouseEvent.bind(this, "guttermousedown"));                         // 3719
    event.addListener(gutterEl, "click", this.onMouseEvent.bind(this, "gutterclick"));                                 // 3720
    event.addListener(gutterEl, "dblclick", this.onMouseEvent.bind(this, "gutterdblclick"));                           // 3721
    event.addListener(gutterEl, "mousemove", this.onMouseEvent.bind(this, "guttermousemove"));                         // 3722
                                                                                                                       // 3723
    event.addListener(mouseTarget, "mousedown", focusEditor);                                                          // 3724
                                                                                                                       // 3725
    event.addListener(gutterEl, "mousedown", function(e) {                                                             // 3726
        editor.focus();                                                                                                // 3727
        return event.preventDefault(e);                                                                                // 3728
    });                                                                                                                // 3729
                                                                                                                       // 3730
    editor.on("mousemove", function(e){                                                                                // 3731
        if (_self.state || _self.$dragDelay || !_self.$dragEnabled)                                                    // 3732
            return;                                                                                                    // 3733
                                                                                                                       // 3734
        var char = editor.renderer.screenToTextCoordinates(e.x, e.y);                                                  // 3735
        var range = editor.session.selection.getRange();                                                               // 3736
        var renderer = editor.renderer;                                                                                // 3737
                                                                                                                       // 3738
        if (!range.isEmpty() && range.insideStart(char.row, char.column)) {                                            // 3739
            renderer.setCursorStyle("default");                                                                        // 3740
        } else {                                                                                                       // 3741
            renderer.setCursorStyle("");                                                                               // 3742
        }                                                                                                              // 3743
    });                                                                                                                // 3744
};                                                                                                                     // 3745
                                                                                                                       // 3746
(function() {                                                                                                          // 3747
    this.onMouseEvent = function(name, e) {                                                                            // 3748
        this.editor._emit(name, new MouseEvent(e, this.editor));                                                       // 3749
    };                                                                                                                 // 3750
                                                                                                                       // 3751
    this.onMouseMove = function(name, e) {                                                                             // 3752
        var listeners = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;                            // 3753
        if (!listeners || !listeners.length)                                                                           // 3754
            return;                                                                                                    // 3755
                                                                                                                       // 3756
        this.editor._emit(name, new MouseEvent(e, this.editor));                                                       // 3757
    };                                                                                                                 // 3758
                                                                                                                       // 3759
    this.onMouseWheel = function(name, e) {                                                                            // 3760
        var mouseEvent = new MouseEvent(e, this.editor);                                                               // 3761
        mouseEvent.speed = this.$scrollSpeed * 2;                                                                      // 3762
        mouseEvent.wheelX = e.wheelX;                                                                                  // 3763
        mouseEvent.wheelY = e.wheelY;                                                                                  // 3764
                                                                                                                       // 3765
        this.editor._emit(name, mouseEvent);                                                                           // 3766
    };                                                                                                                 // 3767
                                                                                                                       // 3768
    this.setState = function(state) {                                                                                  // 3769
        this.state = state;                                                                                            // 3770
    };                                                                                                                 // 3771
                                                                                                                       // 3772
    this.captureMouse = function(ev, mouseMoveHandler) {                                                               // 3773
        this.x = ev.x;                                                                                                 // 3774
        this.y = ev.y;                                                                                                 // 3775
                                                                                                                       // 3776
        this.isMousePressed = true;                                                                                    // 3777
        var renderer = this.editor.renderer;                                                                           // 3778
        if (renderer.$keepTextAreaAtCursor)                                                                            // 3779
            renderer.$keepTextAreaAtCursor = null;                                                                     // 3780
                                                                                                                       // 3781
        var self = this;                                                                                               // 3782
        var onMouseMove = function(e) {                                                                                // 3783
            if (!e) return;                                                                                            // 3784
            if (useragent.isWebKit && !e.which && self.releaseMouse)                                                   // 3785
                return self.releaseMouse();                                                                            // 3786
                                                                                                                       // 3787
            self.x = e.clientX;                                                                                        // 3788
            self.y = e.clientY;                                                                                        // 3789
            mouseMoveHandler && mouseMoveHandler(e);                                                                   // 3790
            self.mouseEvent = new MouseEvent(e, self.editor);                                                          // 3791
            self.$mouseMoved = true;                                                                                   // 3792
        };                                                                                                             // 3793
                                                                                                                       // 3794
        var onCaptureEnd = function(e) {                                                                               // 3795
            clearInterval(timerId);                                                                                    // 3796
            onCaptureInterval();                                                                                       // 3797
            self[self.state + "End"] && self[self.state + "End"](e);                                                   // 3798
            self.state = "";                                                                                           // 3799
            if (renderer.$keepTextAreaAtCursor == null) {                                                              // 3800
                renderer.$keepTextAreaAtCursor = true;                                                                 // 3801
                renderer.$moveTextAreaToCursor();                                                                      // 3802
            }                                                                                                          // 3803
            self.isMousePressed = false;                                                                               // 3804
            self.$onCaptureMouseMove = self.releaseMouse = null;                                                       // 3805
            e && self.onMouseEvent("mouseup", e);                                                                      // 3806
        };                                                                                                             // 3807
                                                                                                                       // 3808
        var onCaptureInterval = function() {                                                                           // 3809
            self[self.state] && self[self.state]();                                                                    // 3810
            self.$mouseMoved = false;                                                                                  // 3811
        };                                                                                                             // 3812
                                                                                                                       // 3813
        if (useragent.isOldIE && ev.domEvent.type == "dblclick") {                                                     // 3814
            return setTimeout(function() {onCaptureEnd(ev);});                                                         // 3815
        }                                                                                                              // 3816
                                                                                                                       // 3817
        self.$onCaptureMouseMove = onMouseMove;                                                                        // 3818
        self.releaseMouse = event.capture(this.editor.container, onMouseMove, onCaptureEnd);                           // 3819
        var timerId = setInterval(onCaptureInterval, 20);                                                              // 3820
    };                                                                                                                 // 3821
    this.releaseMouse = null;                                                                                          // 3822
    this.cancelContextMenu = function() {                                                                              // 3823
        var stop = function(e) {                                                                                       // 3824
            if (e && e.domEvent && e.domEvent.type != "contextmenu")                                                   // 3825
                return;                                                                                                // 3826
            this.editor.off("nativecontextmenu", stop);                                                                // 3827
            if (e && e.domEvent)                                                                                       // 3828
                event.stopEvent(e.domEvent);                                                                           // 3829
        }.bind(this);                                                                                                  // 3830
        setTimeout(stop, 10);                                                                                          // 3831
        this.editor.on("nativecontextmenu", stop);                                                                     // 3832
    };                                                                                                                 // 3833
}).call(MouseHandler.prototype);                                                                                       // 3834
                                                                                                                       // 3835
config.defineOptions(MouseHandler.prototype, "mouseHandler", {                                                         // 3836
    scrollSpeed: {initialValue: 2},                                                                                    // 3837
    dragDelay: {initialValue: (useragent.isMac ? 150 : 0)},                                                            // 3838
    dragEnabled: {initialValue: true},                                                                                 // 3839
    focusTimout: {initialValue: 0},                                                                                    // 3840
    tooltipFollowsMouse: {initialValue: true}                                                                          // 3841
});                                                                                                                    // 3842
                                                                                                                       // 3843
                                                                                                                       // 3844
exports.MouseHandler = MouseHandler;                                                                                   // 3845
});                                                                                                                    // 3846
                                                                                                                       // 3847
define("ace/mouse/fold_handler",["require","exports","module"], function(require, exports, module) {                   // 3848
"use strict";                                                                                                          // 3849
                                                                                                                       // 3850
function FoldHandler(editor) {                                                                                         // 3851
                                                                                                                       // 3852
    editor.on("click", function(e) {                                                                                   // 3853
        var position = e.getDocumentPosition();                                                                        // 3854
        var session = editor.session;                                                                                  // 3855
        var fold = session.getFoldAt(position.row, position.column, 1);                                                // 3856
        if (fold) {                                                                                                    // 3857
            if (e.getAccelKey())                                                                                       // 3858
                session.removeFold(fold);                                                                              // 3859
            else                                                                                                       // 3860
                session.expandFold(fold);                                                                              // 3861
                                                                                                                       // 3862
            e.stop();                                                                                                  // 3863
        }                                                                                                              // 3864
    });                                                                                                                // 3865
                                                                                                                       // 3866
    editor.on("gutterclick", function(e) {                                                                             // 3867
        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);                                                  // 3868
                                                                                                                       // 3869
        if (gutterRegion == "foldWidgets") {                                                                           // 3870
            var row = e.getDocumentPosition().row;                                                                     // 3871
            var session = editor.session;                                                                              // 3872
            if (session.foldWidgets && session.foldWidgets[row])                                                       // 3873
                editor.session.onFoldWidgetClick(row, e);                                                              // 3874
            if (!editor.isFocused())                                                                                   // 3875
                editor.focus();                                                                                        // 3876
            e.stop();                                                                                                  // 3877
        }                                                                                                              // 3878
    });                                                                                                                // 3879
                                                                                                                       // 3880
    editor.on("gutterdblclick", function(e) {                                                                          // 3881
        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);                                                  // 3882
                                                                                                                       // 3883
        if (gutterRegion == "foldWidgets") {                                                                           // 3884
            var row = e.getDocumentPosition().row;                                                                     // 3885
            var session = editor.session;                                                                              // 3886
            var data = session.getParentFoldRangeData(row, true);                                                      // 3887
            var range = data.range || data.firstRange;                                                                 // 3888
                                                                                                                       // 3889
            if (range) {                                                                                               // 3890
                row = range.start.row;                                                                                 // 3891
                var fold = session.getFoldAt(row, session.getLine(row).length, 1);                                     // 3892
                                                                                                                       // 3893
                if (fold) {                                                                                            // 3894
                    session.removeFold(fold);                                                                          // 3895
                } else {                                                                                               // 3896
                    session.addFold("...", range);                                                                     // 3897
                    editor.renderer.scrollCursorIntoView({row: range.start.row, column: 0});                           // 3898
                }                                                                                                      // 3899
            }                                                                                                          // 3900
            e.stop();                                                                                                  // 3901
        }                                                                                                              // 3902
    });                                                                                                                // 3903
}                                                                                                                      // 3904
                                                                                                                       // 3905
exports.FoldHandler = FoldHandler;                                                                                     // 3906
                                                                                                                       // 3907
});                                                                                                                    // 3908
                                                                                                                       // 3909
define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"], function(require, exports, module) {
"use strict";                                                                                                          // 3911
                                                                                                                       // 3912
var keyUtil  = require("../lib/keys");                                                                                 // 3913
var event = require("../lib/event");                                                                                   // 3914
                                                                                                                       // 3915
var KeyBinding = function(editor) {                                                                                    // 3916
    this.$editor = editor;                                                                                             // 3917
    this.$data = {editor: editor};                                                                                     // 3918
    this.$handlers = [];                                                                                               // 3919
    this.setDefaultHandler(editor.commands);                                                                           // 3920
};                                                                                                                     // 3921
                                                                                                                       // 3922
(function() {                                                                                                          // 3923
    this.setDefaultHandler = function(kb) {                                                                            // 3924
        this.removeKeyboardHandler(this.$defaultHandler);                                                              // 3925
        this.$defaultHandler = kb;                                                                                     // 3926
        this.addKeyboardHandler(kb, 0);                                                                                // 3927
    };                                                                                                                 // 3928
                                                                                                                       // 3929
    this.setKeyboardHandler = function(kb) {                                                                           // 3930
        var h = this.$handlers;                                                                                        // 3931
        if (h[h.length - 1] == kb)                                                                                     // 3932
            return;                                                                                                    // 3933
                                                                                                                       // 3934
        while (h[h.length - 1] && h[h.length - 1] != this.$defaultHandler)                                             // 3935
            this.removeKeyboardHandler(h[h.length - 1]);                                                               // 3936
                                                                                                                       // 3937
        this.addKeyboardHandler(kb, 1);                                                                                // 3938
    };                                                                                                                 // 3939
                                                                                                                       // 3940
    this.addKeyboardHandler = function(kb, pos) {                                                                      // 3941
        if (!kb)                                                                                                       // 3942
            return;                                                                                                    // 3943
        if (typeof kb == "function" && !kb.handleKeyboard)                                                             // 3944
            kb.handleKeyboard = kb;                                                                                    // 3945
        var i = this.$handlers.indexOf(kb);                                                                            // 3946
        if (i != -1)                                                                                                   // 3947
            this.$handlers.splice(i, 1);                                                                               // 3948
                                                                                                                       // 3949
        if (pos == undefined)                                                                                          // 3950
            this.$handlers.push(kb);                                                                                   // 3951
        else                                                                                                           // 3952
            this.$handlers.splice(pos, 0, kb);                                                                         // 3953
                                                                                                                       // 3954
        if (i == -1 && kb.attach)                                                                                      // 3955
            kb.attach(this.$editor);                                                                                   // 3956
    };                                                                                                                 // 3957
                                                                                                                       // 3958
    this.removeKeyboardHandler = function(kb) {                                                                        // 3959
        var i = this.$handlers.indexOf(kb);                                                                            // 3960
        if (i == -1)                                                                                                   // 3961
            return false;                                                                                              // 3962
        this.$handlers.splice(i, 1);                                                                                   // 3963
        kb.detach && kb.detach(this.$editor);                                                                          // 3964
        return true;                                                                                                   // 3965
    };                                                                                                                 // 3966
                                                                                                                       // 3967
    this.getKeyboardHandler = function() {                                                                             // 3968
        return this.$handlers[this.$handlers.length - 1];                                                              // 3969
    };                                                                                                                 // 3970
                                                                                                                       // 3971
    this.getStatusText = function() {                                                                                  // 3972
        var data = this.$data;                                                                                         // 3973
        var editor = data.editor;                                                                                      // 3974
        return this.$handlers.map(function(h) {                                                                        // 3975
            return h.getStatusText && h.getStatusText(editor, data) || "";                                             // 3976
        }).filter(Boolean).join(" ");                                                                                  // 3977
    };                                                                                                                 // 3978
                                                                                                                       // 3979
    this.$callKeyboardHandlers = function(hashId, keyString, keyCode, e) {                                             // 3980
        var toExecute;                                                                                                 // 3981
        var success = false;                                                                                           // 3982
        var commands = this.$editor.commands;                                                                          // 3983
                                                                                                                       // 3984
        for (var i = this.$handlers.length; i--;) {                                                                    // 3985
            toExecute = this.$handlers[i].handleKeyboard(                                                              // 3986
                this.$data, hashId, keyString, keyCode, e                                                              // 3987
            );                                                                                                         // 3988
            if (!toExecute || !toExecute.command)                                                                      // 3989
                continue;                                                                                              // 3990
            if (toExecute.command == "null") {                                                                         // 3991
                success = true;                                                                                        // 3992
            } else {                                                                                                   // 3993
                success = commands.exec(toExecute.command, this.$editor, toExecute.args, e);                           // 3994
            }                                                                                                          // 3995
            if (success && e && hashId != -1 &&                                                                        // 3996
                toExecute.passEvent != true && toExecute.command.passEvent != true                                     // 3997
            ) {                                                                                                        // 3998
                event.stopEvent(e);                                                                                    // 3999
            }                                                                                                          // 4000
            if (success)                                                                                               // 4001
                break;                                                                                                 // 4002
        }                                                                                                              // 4003
        return success;                                                                                                // 4004
    };                                                                                                                 // 4005
                                                                                                                       // 4006
    this.onCommandKey = function(e, hashId, keyCode) {                                                                 // 4007
        var keyString = keyUtil.keyCodeToString(keyCode);                                                              // 4008
        this.$callKeyboardHandlers(hashId, keyString, keyCode, e);                                                     // 4009
    };                                                                                                                 // 4010
                                                                                                                       // 4011
    this.onTextInput = function(text) {                                                                                // 4012
        var success = this.$callKeyboardHandlers(-1, text);                                                            // 4013
        if (!success)                                                                                                  // 4014
            this.$editor.commands.exec("insertstring", this.$editor, text);                                            // 4015
    };                                                                                                                 // 4016
                                                                                                                       // 4017
}).call(KeyBinding.prototype);                                                                                         // 4018
                                                                                                                       // 4019
exports.KeyBinding = KeyBinding;                                                                                       // 4020
});                                                                                                                    // 4021
                                                                                                                       // 4022
define("ace/range",["require","exports","module"], function(require, exports, module) {                                // 4023
"use strict";                                                                                                          // 4024
var comparePoints = function(p1, p2) {                                                                                 // 4025
    return p1.row - p2.row || p1.column - p2.column;                                                                   // 4026
};                                                                                                                     // 4027
var Range = function(startRow, startColumn, endRow, endColumn) {                                                       // 4028
    this.start = {                                                                                                     // 4029
        row: startRow,                                                                                                 // 4030
        column: startColumn                                                                                            // 4031
    };                                                                                                                 // 4032
                                                                                                                       // 4033
    this.end = {                                                                                                       // 4034
        row: endRow,                                                                                                   // 4035
        column: endColumn                                                                                              // 4036
    };                                                                                                                 // 4037
};                                                                                                                     // 4038
                                                                                                                       // 4039
(function() {                                                                                                          // 4040
    this.isEqual = function(range) {                                                                                   // 4041
        return this.start.row === range.start.row &&                                                                   // 4042
            this.end.row === range.end.row &&                                                                          // 4043
            this.start.column === range.start.column &&                                                                // 4044
            this.end.column === range.end.column;                                                                      // 4045
    };                                                                                                                 // 4046
    this.toString = function() {                                                                                       // 4047
        return ("Range: [" + this.start.row + "/" + this.start.column +                                                // 4048
            "] -> [" + this.end.row + "/" + this.end.column + "]");                                                    // 4049
    };                                                                                                                 // 4050
                                                                                                                       // 4051
    this.contains = function(row, column) {                                                                            // 4052
        return this.compare(row, column) == 0;                                                                         // 4053
    };                                                                                                                 // 4054
    this.compareRange = function(range) {                                                                              // 4055
        var cmp,                                                                                                       // 4056
            end = range.end,                                                                                           // 4057
            start = range.start;                                                                                       // 4058
                                                                                                                       // 4059
        cmp = this.compare(end.row, end.column);                                                                       // 4060
        if (cmp == 1) {                                                                                                // 4061
            cmp = this.compare(start.row, start.column);                                                               // 4062
            if (cmp == 1) {                                                                                            // 4063
                return 2;                                                                                              // 4064
            } else if (cmp == 0) {                                                                                     // 4065
                return 1;                                                                                              // 4066
            } else {                                                                                                   // 4067
                return 0;                                                                                              // 4068
            }                                                                                                          // 4069
        } else if (cmp == -1) {                                                                                        // 4070
            return -2;                                                                                                 // 4071
        } else {                                                                                                       // 4072
            cmp = this.compare(start.row, start.column);                                                               // 4073
            if (cmp == -1) {                                                                                           // 4074
                return -1;                                                                                             // 4075
            } else if (cmp == 1) {                                                                                     // 4076
                return 42;                                                                                             // 4077
            } else {                                                                                                   // 4078
                return 0;                                                                                              // 4079
            }                                                                                                          // 4080
        }                                                                                                              // 4081
    };                                                                                                                 // 4082
    this.comparePoint = function(p) {                                                                                  // 4083
        return this.compare(p.row, p.column);                                                                          // 4084
    };                                                                                                                 // 4085
    this.containsRange = function(range) {                                                                             // 4086
        return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;                               // 4087
    };                                                                                                                 // 4088
    this.intersects = function(range) {                                                                                // 4089
        var cmp = this.compareRange(range);                                                                            // 4090
        return (cmp == -1 || cmp == 0 || cmp == 1);                                                                    // 4091
    };                                                                                                                 // 4092
    this.isEnd = function(row, column) {                                                                               // 4093
        return this.end.row == row && this.end.column == column;                                                       // 4094
    };                                                                                                                 // 4095
    this.isStart = function(row, column) {                                                                             // 4096
        return this.start.row == row && this.start.column == column;                                                   // 4097
    };                                                                                                                 // 4098
    this.setStart = function(row, column) {                                                                            // 4099
        if (typeof row == "object") {                                                                                  // 4100
            this.start.column = row.column;                                                                            // 4101
            this.start.row = row.row;                                                                                  // 4102
        } else {                                                                                                       // 4103
            this.start.row = row;                                                                                      // 4104
            this.start.column = column;                                                                                // 4105
        }                                                                                                              // 4106
    };                                                                                                                 // 4107
    this.setEnd = function(row, column) {                                                                              // 4108
        if (typeof row == "object") {                                                                                  // 4109
            this.end.column = row.column;                                                                              // 4110
            this.end.row = row.row;                                                                                    // 4111
        } else {                                                                                                       // 4112
            this.end.row = row;                                                                                        // 4113
            this.end.column = column;                                                                                  // 4114
        }                                                                                                              // 4115
    };                                                                                                                 // 4116
    this.inside = function(row, column) {                                                                              // 4117
        if (this.compare(row, column) == 0) {                                                                          // 4118
            if (this.isEnd(row, column) || this.isStart(row, column)) {                                                // 4119
                return false;                                                                                          // 4120
            } else {                                                                                                   // 4121
                return true;                                                                                           // 4122
            }                                                                                                          // 4123
        }                                                                                                              // 4124
        return false;                                                                                                  // 4125
    };                                                                                                                 // 4126
    this.insideStart = function(row, column) {                                                                         // 4127
        if (this.compare(row, column) == 0) {                                                                          // 4128
            if (this.isEnd(row, column)) {                                                                             // 4129
                return false;                                                                                          // 4130
            } else {                                                                                                   // 4131
                return true;                                                                                           // 4132
            }                                                                                                          // 4133
        }                                                                                                              // 4134
        return false;                                                                                                  // 4135
    };                                                                                                                 // 4136
    this.insideEnd = function(row, column) {                                                                           // 4137
        if (this.compare(row, column) == 0) {                                                                          // 4138
            if (this.isStart(row, column)) {                                                                           // 4139
                return false;                                                                                          // 4140
            } else {                                                                                                   // 4141
                return true;                                                                                           // 4142
            }                                                                                                          // 4143
        }                                                                                                              // 4144
        return false;                                                                                                  // 4145
    };                                                                                                                 // 4146
    this.compare = function(row, column) {                                                                             // 4147
        if (!this.isMultiLine()) {                                                                                     // 4148
            if (row === this.start.row) {                                                                              // 4149
                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);                           // 4150
            };                                                                                                         // 4151
        }                                                                                                              // 4152
                                                                                                                       // 4153
        if (row < this.start.row)                                                                                      // 4154
            return -1;                                                                                                 // 4155
                                                                                                                       // 4156
        if (row > this.end.row)                                                                                        // 4157
            return 1;                                                                                                  // 4158
                                                                                                                       // 4159
        if (this.start.row === row)                                                                                    // 4160
            return column >= this.start.column ? 0 : -1;                                                               // 4161
                                                                                                                       // 4162
        if (this.end.row === row)                                                                                      // 4163
            return column <= this.end.column ? 0 : 1;                                                                  // 4164
                                                                                                                       // 4165
        return 0;                                                                                                      // 4166
    };                                                                                                                 // 4167
    this.compareStart = function(row, column) {                                                                        // 4168
        if (this.start.row == row && this.start.column == column) {                                                    // 4169
            return -1;                                                                                                 // 4170
        } else {                                                                                                       // 4171
            return this.compare(row, column);                                                                          // 4172
        }                                                                                                              // 4173
    };                                                                                                                 // 4174
    this.compareEnd = function(row, column) {                                                                          // 4175
        if (this.end.row == row && this.end.column == column) {                                                        // 4176
            return 1;                                                                                                  // 4177
        } else {                                                                                                       // 4178
            return this.compare(row, column);                                                                          // 4179
        }                                                                                                              // 4180
    };                                                                                                                 // 4181
    this.compareInside = function(row, column) {                                                                       // 4182
        if (this.end.row == row && this.end.column == column) {                                                        // 4183
            return 1;                                                                                                  // 4184
        } else if (this.start.row == row && this.start.column == column) {                                             // 4185
            return -1;                                                                                                 // 4186
        } else {                                                                                                       // 4187
            return this.compare(row, column);                                                                          // 4188
        }                                                                                                              // 4189
    };                                                                                                                 // 4190
    this.clipRows = function(firstRow, lastRow) {                                                                      // 4191
        if (this.end.row > lastRow)                                                                                    // 4192
            var end = {row: lastRow + 1, column: 0};                                                                   // 4193
        else if (this.end.row < firstRow)                                                                              // 4194
            var end = {row: firstRow, column: 0};                                                                      // 4195
                                                                                                                       // 4196
        if (this.start.row > lastRow)                                                                                  // 4197
            var start = {row: lastRow + 1, column: 0};                                                                 // 4198
        else if (this.start.row < firstRow)                                                                            // 4199
            var start = {row: firstRow, column: 0};                                                                    // 4200
                                                                                                                       // 4201
        return Range.fromPoints(start || this.start, end || this.end);                                                 // 4202
    };                                                                                                                 // 4203
    this.extend = function(row, column) {                                                                              // 4204
        var cmp = this.compare(row, column);                                                                           // 4205
                                                                                                                       // 4206
        if (cmp == 0)                                                                                                  // 4207
            return this;                                                                                               // 4208
        else if (cmp == -1)                                                                                            // 4209
            var start = {row: row, column: column};                                                                    // 4210
        else                                                                                                           // 4211
            var end = {row: row, column: column};                                                                      // 4212
                                                                                                                       // 4213
        return Range.fromPoints(start || this.start, end || this.end);                                                 // 4214
    };                                                                                                                 // 4215
                                                                                                                       // 4216
    this.isEmpty = function() {                                                                                        // 4217
        return (this.start.row === this.end.row && this.start.column === this.end.column);                             // 4218
    };                                                                                                                 // 4219
    this.isMultiLine = function() {                                                                                    // 4220
        return (this.start.row !== this.end.row);                                                                      // 4221
    };                                                                                                                 // 4222
    this.clone = function() {                                                                                          // 4223
        return Range.fromPoints(this.start, this.end);                                                                 // 4224
    };                                                                                                                 // 4225
    this.collapseRows = function() {                                                                                   // 4226
        if (this.end.column == 0)                                                                                      // 4227
            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row-1), 0)                           // 4228
        else                                                                                                           // 4229
            return new Range(this.start.row, 0, this.end.row, 0)                                                       // 4230
    };                                                                                                                 // 4231
    this.toScreenRange = function(session) {                                                                           // 4232
        var screenPosStart = session.documentToScreenPosition(this.start);                                             // 4233
        var screenPosEnd = session.documentToScreenPosition(this.end);                                                 // 4234
                                                                                                                       // 4235
        return new Range(                                                                                              // 4236
            screenPosStart.row, screenPosStart.column,                                                                 // 4237
            screenPosEnd.row, screenPosEnd.column                                                                      // 4238
        );                                                                                                             // 4239
    };                                                                                                                 // 4240
    this.moveBy = function(row, column) {                                                                              // 4241
        this.start.row += row;                                                                                         // 4242
        this.start.column += column;                                                                                   // 4243
        this.end.row += row;                                                                                           // 4244
        this.end.column += column;                                                                                     // 4245
    };                                                                                                                 // 4246
                                                                                                                       // 4247
}).call(Range.prototype);                                                                                              // 4248
Range.fromPoints = function(start, end) {                                                                              // 4249
    return new Range(start.row, start.column, end.row, end.column);                                                    // 4250
};                                                                                                                     // 4251
Range.comparePoints = comparePoints;                                                                                   // 4252
                                                                                                                       // 4253
Range.comparePoints = function(p1, p2) {                                                                               // 4254
    return p1.row - p2.row || p1.column - p2.column;                                                                   // 4255
};                                                                                                                     // 4256
                                                                                                                       // 4257
                                                                                                                       // 4258
exports.Range = Range;                                                                                                 // 4259
});                                                                                                                    // 4260
                                                                                                                       // 4261
define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 4263
                                                                                                                       // 4264
var oop = require("./lib/oop");                                                                                        // 4265
var lang = require("./lib/lang");                                                                                      // 4266
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 4267
var Range = require("./range").Range;                                                                                  // 4268
var Selection = function(session) {                                                                                    // 4269
    this.session = session;                                                                                            // 4270
    this.doc = session.getDocument();                                                                                  // 4271
                                                                                                                       // 4272
    this.clearSelection();                                                                                             // 4273
    this.lead = this.selectionLead = this.doc.createAnchor(0, 0);                                                      // 4274
    this.anchor = this.selectionAnchor = this.doc.createAnchor(0, 0);                                                  // 4275
                                                                                                                       // 4276
    var self = this;                                                                                                   // 4277
    this.lead.on("change", function(e) {                                                                               // 4278
        self._emit("changeCursor");                                                                                    // 4279
        if (!self.$isEmpty)                                                                                            // 4280
            self._emit("changeSelection");                                                                             // 4281
        if (!self.$keepDesiredColumnOnChange && e.old.column != e.value.column)                                        // 4282
            self.$desiredColumn = null;                                                                                // 4283
    });                                                                                                                // 4284
                                                                                                                       // 4285
    this.selectionAnchor.on("change", function() {                                                                     // 4286
        if (!self.$isEmpty)                                                                                            // 4287
            self._emit("changeSelection");                                                                             // 4288
    });                                                                                                                // 4289
};                                                                                                                     // 4290
                                                                                                                       // 4291
(function() {                                                                                                          // 4292
                                                                                                                       // 4293
    oop.implement(this, EventEmitter);                                                                                 // 4294
    this.isEmpty = function() {                                                                                        // 4295
        return (this.$isEmpty || (                                                                                     // 4296
            this.anchor.row == this.lead.row &&                                                                        // 4297
            this.anchor.column == this.lead.column                                                                     // 4298
        ));                                                                                                            // 4299
    };                                                                                                                 // 4300
    this.isMultiLine = function() {                                                                                    // 4301
        if (this.isEmpty()) {                                                                                          // 4302
            return false;                                                                                              // 4303
        }                                                                                                              // 4304
                                                                                                                       // 4305
        return this.getRange().isMultiLine();                                                                          // 4306
    };                                                                                                                 // 4307
    this.getCursor = function() {                                                                                      // 4308
        return this.lead.getPosition();                                                                                // 4309
    };                                                                                                                 // 4310
    this.setSelectionAnchor = function(row, column) {                                                                  // 4311
        this.anchor.setPosition(row, column);                                                                          // 4312
                                                                                                                       // 4313
        if (this.$isEmpty) {                                                                                           // 4314
            this.$isEmpty = false;                                                                                     // 4315
            this._emit("changeSelection");                                                                             // 4316
        }                                                                                                              // 4317
    };                                                                                                                 // 4318
    this.getSelectionAnchor = function() {                                                                             // 4319
        if (this.$isEmpty)                                                                                             // 4320
            return this.getSelectionLead();                                                                            // 4321
        else                                                                                                           // 4322
            return this.anchor.getPosition();                                                                          // 4323
    };                                                                                                                 // 4324
    this.getSelectionLead = function() {                                                                               // 4325
        return this.lead.getPosition();                                                                                // 4326
    };                                                                                                                 // 4327
    this.shiftSelection = function(columns) {                                                                          // 4328
        if (this.$isEmpty) {                                                                                           // 4329
            this.moveCursorTo(this.lead.row, this.lead.column + columns);                                              // 4330
            return;                                                                                                    // 4331
        }                                                                                                              // 4332
                                                                                                                       // 4333
        var anchor = this.getSelectionAnchor();                                                                        // 4334
        var lead = this.getSelectionLead();                                                                            // 4335
                                                                                                                       // 4336
        var isBackwards = this.isBackwards();                                                                          // 4337
                                                                                                                       // 4338
        if (!isBackwards || anchor.column !== 0)                                                                       // 4339
            this.setSelectionAnchor(anchor.row, anchor.column + columns);                                              // 4340
                                                                                                                       // 4341
        if (isBackwards || lead.column !== 0) {                                                                        // 4342
            this.$moveSelection(function() {                                                                           // 4343
                this.moveCursorTo(lead.row, lead.column + columns);                                                    // 4344
            });                                                                                                        // 4345
        }                                                                                                              // 4346
    };                                                                                                                 // 4347
    this.isBackwards = function() {                                                                                    // 4348
        var anchor = this.anchor;                                                                                      // 4349
        var lead = this.lead;                                                                                          // 4350
        return (anchor.row > lead.row || (anchor.row == lead.row && anchor.column > lead.column));                     // 4351
    };                                                                                                                 // 4352
    this.getRange = function() {                                                                                       // 4353
        var anchor = this.anchor;                                                                                      // 4354
        var lead = this.lead;                                                                                          // 4355
                                                                                                                       // 4356
        if (this.isEmpty())                                                                                            // 4357
            return Range.fromPoints(lead, lead);                                                                       // 4358
                                                                                                                       // 4359
        if (this.isBackwards()) {                                                                                      // 4360
            return Range.fromPoints(lead, anchor);                                                                     // 4361
        }                                                                                                              // 4362
        else {                                                                                                         // 4363
            return Range.fromPoints(anchor, lead);                                                                     // 4364
        }                                                                                                              // 4365
    };                                                                                                                 // 4366
    this.clearSelection = function() {                                                                                 // 4367
        if (!this.$isEmpty) {                                                                                          // 4368
            this.$isEmpty = true;                                                                                      // 4369
            this._emit("changeSelection");                                                                             // 4370
        }                                                                                                              // 4371
    };                                                                                                                 // 4372
    this.selectAll = function() {                                                                                      // 4373
        var lastRow = this.doc.getLength() - 1;                                                                        // 4374
        this.setSelectionAnchor(0, 0);                                                                                 // 4375
        this.moveCursorTo(lastRow, this.doc.getLine(lastRow).length);                                                  // 4376
    };                                                                                                                 // 4377
    this.setRange =                                                                                                    // 4378
    this.setSelectionRange = function(range, reverse) {                                                                // 4379
        if (reverse) {                                                                                                 // 4380
            this.setSelectionAnchor(range.end.row, range.end.column);                                                  // 4381
            this.selectTo(range.start.row, range.start.column);                                                        // 4382
        } else {                                                                                                       // 4383
            this.setSelectionAnchor(range.start.row, range.start.column);                                              // 4384
            this.selectTo(range.end.row, range.end.column);                                                            // 4385
        }                                                                                                              // 4386
        if (this.getRange().isEmpty())                                                                                 // 4387
            this.$isEmpty = true;                                                                                      // 4388
        this.$desiredColumn = null;                                                                                    // 4389
    };                                                                                                                 // 4390
                                                                                                                       // 4391
    this.$moveSelection = function(mover) {                                                                            // 4392
        var lead = this.lead;                                                                                          // 4393
        if (this.$isEmpty)                                                                                             // 4394
            this.setSelectionAnchor(lead.row, lead.column);                                                            // 4395
                                                                                                                       // 4396
        mover.call(this);                                                                                              // 4397
    };                                                                                                                 // 4398
    this.selectTo = function(row, column) {                                                                            // 4399
        this.$moveSelection(function() {                                                                               // 4400
            this.moveCursorTo(row, column);                                                                            // 4401
        });                                                                                                            // 4402
    };                                                                                                                 // 4403
    this.selectToPosition = function(pos) {                                                                            // 4404
        this.$moveSelection(function() {                                                                               // 4405
            this.moveCursorToPosition(pos);                                                                            // 4406
        });                                                                                                            // 4407
    };                                                                                                                 // 4408
    this.moveTo = function(row, column) {                                                                              // 4409
        this.clearSelection();                                                                                         // 4410
        this.moveCursorTo(row, column);                                                                                // 4411
    };                                                                                                                 // 4412
    this.moveToPosition = function(pos) {                                                                              // 4413
        this.clearSelection();                                                                                         // 4414
        this.moveCursorToPosition(pos);                                                                                // 4415
    };                                                                                                                 // 4416
    this.selectUp = function() {                                                                                       // 4417
        this.$moveSelection(this.moveCursorUp);                                                                        // 4418
    };                                                                                                                 // 4419
    this.selectDown = function() {                                                                                     // 4420
        this.$moveSelection(this.moveCursorDown);                                                                      // 4421
    };                                                                                                                 // 4422
    this.selectRight = function() {                                                                                    // 4423
        this.$moveSelection(this.moveCursorRight);                                                                     // 4424
    };                                                                                                                 // 4425
    this.selectLeft = function() {                                                                                     // 4426
        this.$moveSelection(this.moveCursorLeft);                                                                      // 4427
    };                                                                                                                 // 4428
    this.selectLineStart = function() {                                                                                // 4429
        this.$moveSelection(this.moveCursorLineStart);                                                                 // 4430
    };                                                                                                                 // 4431
    this.selectLineEnd = function() {                                                                                  // 4432
        this.$moveSelection(this.moveCursorLineEnd);                                                                   // 4433
    };                                                                                                                 // 4434
    this.selectFileEnd = function() {                                                                                  // 4435
        this.$moveSelection(this.moveCursorFileEnd);                                                                   // 4436
    };                                                                                                                 // 4437
    this.selectFileStart = function() {                                                                                // 4438
        this.$moveSelection(this.moveCursorFileStart);                                                                 // 4439
    };                                                                                                                 // 4440
    this.selectWordRight = function() {                                                                                // 4441
        this.$moveSelection(this.moveCursorWordRight);                                                                 // 4442
    };                                                                                                                 // 4443
    this.selectWordLeft = function() {                                                                                 // 4444
        this.$moveSelection(this.moveCursorWordLeft);                                                                  // 4445
    };                                                                                                                 // 4446
    this.getWordRange = function(row, column) {                                                                        // 4447
        if (typeof column == "undefined") {                                                                            // 4448
            var cursor = row || this.lead;                                                                             // 4449
            row = cursor.row;                                                                                          // 4450
            column = cursor.column;                                                                                    // 4451
        }                                                                                                              // 4452
        return this.session.getWordRange(row, column);                                                                 // 4453
    };                                                                                                                 // 4454
    this.selectWord = function() {                                                                                     // 4455
        this.setSelectionRange(this.getWordRange());                                                                   // 4456
    };                                                                                                                 // 4457
    this.selectAWord = function() {                                                                                    // 4458
        var cursor = this.getCursor();                                                                                 // 4459
        var range = this.session.getAWordRange(cursor.row, cursor.column);                                             // 4460
        this.setSelectionRange(range);                                                                                 // 4461
    };                                                                                                                 // 4462
                                                                                                                       // 4463
    this.getLineRange = function(row, excludeLastChar) {                                                               // 4464
        var rowStart = typeof row == "number" ? row : this.lead.row;                                                   // 4465
        var rowEnd;                                                                                                    // 4466
                                                                                                                       // 4467
        var foldLine = this.session.getFoldLine(rowStart);                                                             // 4468
        if (foldLine) {                                                                                                // 4469
            rowStart = foldLine.start.row;                                                                             // 4470
            rowEnd = foldLine.end.row;                                                                                 // 4471
        } else {                                                                                                       // 4472
            rowEnd = rowStart;                                                                                         // 4473
        }                                                                                                              // 4474
        if (excludeLastChar === true)                                                                                  // 4475
            return new Range(rowStart, 0, rowEnd, this.session.getLine(rowEnd).length);                                // 4476
        else                                                                                                           // 4477
            return new Range(rowStart, 0, rowEnd + 1, 0);                                                              // 4478
    };                                                                                                                 // 4479
    this.selectLine = function() {                                                                                     // 4480
        this.setSelectionRange(this.getLineRange());                                                                   // 4481
    };                                                                                                                 // 4482
    this.moveCursorUp = function() {                                                                                   // 4483
        this.moveCursorBy(-1, 0);                                                                                      // 4484
    };                                                                                                                 // 4485
    this.moveCursorDown = function() {                                                                                 // 4486
        this.moveCursorBy(1, 0);                                                                                       // 4487
    };                                                                                                                 // 4488
    this.moveCursorLeft = function() {                                                                                 // 4489
        var cursor = this.lead.getPosition(),                                                                          // 4490
            fold;                                                                                                      // 4491
                                                                                                                       // 4492
        if (fold = this.session.getFoldAt(cursor.row, cursor.column, -1)) {                                            // 4493
            this.moveCursorTo(fold.start.row, fold.start.column);                                                      // 4494
        } else if (cursor.column === 0) {                                                                              // 4495
            if (cursor.row > 0) {                                                                                      // 4496
                this.moveCursorTo(cursor.row - 1, this.doc.getLine(cursor.row - 1).length);                            // 4497
            }                                                                                                          // 4498
        }                                                                                                              // 4499
        else {                                                                                                         // 4500
            var tabSize = this.session.getTabSize();                                                                   // 4501
            if (this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(cursor.column-tabSize, cursor.column).split(" ").length-1 == tabSize)
                this.moveCursorBy(0, -tabSize);                                                                        // 4503
            else                                                                                                       // 4504
                this.moveCursorBy(0, -1);                                                                              // 4505
        }                                                                                                              // 4506
    };                                                                                                                 // 4507
    this.moveCursorRight = function() {                                                                                // 4508
        var cursor = this.lead.getPosition(),                                                                          // 4509
            fold;                                                                                                      // 4510
        if (fold = this.session.getFoldAt(cursor.row, cursor.column, 1)) {                                             // 4511
            this.moveCursorTo(fold.end.row, fold.end.column);                                                          // 4512
        }                                                                                                              // 4513
        else if (this.lead.column == this.doc.getLine(this.lead.row).length) {                                         // 4514
            if (this.lead.row < this.doc.getLength() - 1) {                                                            // 4515
                this.moveCursorTo(this.lead.row + 1, 0);                                                               // 4516
            }                                                                                                          // 4517
        }                                                                                                              // 4518
        else {                                                                                                         // 4519
            var tabSize = this.session.getTabSize();                                                                   // 4520
            var cursor = this.lead;                                                                                    // 4521
            if (this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(cursor.column, cursor.column+tabSize).split(" ").length-1 == tabSize)
                this.moveCursorBy(0, tabSize);                                                                         // 4523
            else                                                                                                       // 4524
                this.moveCursorBy(0, 1);                                                                               // 4525
        }                                                                                                              // 4526
    };                                                                                                                 // 4527
    this.moveCursorLineStart = function() {                                                                            // 4528
        var row = this.lead.row;                                                                                       // 4529
        var column = this.lead.column;                                                                                 // 4530
        var screenRow = this.session.documentToScreenRow(row, column);                                                 // 4531
        var firstColumnPosition = this.session.screenToDocumentPosition(screenRow, 0);                                 // 4532
        var beforeCursor = this.session.getDisplayLine(                                                                // 4533
            row, null, firstColumnPosition.row,                                                                        // 4534
            firstColumnPosition.column                                                                                 // 4535
        );                                                                                                             // 4536
                                                                                                                       // 4537
        var leadingSpace = beforeCursor.match(/^\s*/);                                                                 // 4538
        if (leadingSpace[0].length != column && !this.session.$useEmacsStyleLineStart)                                 // 4539
            firstColumnPosition.column += leadingSpace[0].length;                                                      // 4540
        this.moveCursorToPosition(firstColumnPosition);                                                                // 4541
    };                                                                                                                 // 4542
    this.moveCursorLineEnd = function() {                                                                              // 4543
        var lead = this.lead;                                                                                          // 4544
        var lineEnd = this.session.getDocumentLastRowColumnPosition(lead.row, lead.column);                            // 4545
        if (this.lead.column == lineEnd.column) {                                                                      // 4546
            var line = this.session.getLine(lineEnd.row);                                                              // 4547
            if (lineEnd.column == line.length) {                                                                       // 4548
                var textEnd = line.search(/\s+$/);                                                                     // 4549
                if (textEnd > 0)                                                                                       // 4550
                    lineEnd.column = textEnd;                                                                          // 4551
            }                                                                                                          // 4552
        }                                                                                                              // 4553
                                                                                                                       // 4554
        this.moveCursorTo(lineEnd.row, lineEnd.column);                                                                // 4555
    };                                                                                                                 // 4556
    this.moveCursorFileEnd = function() {                                                                              // 4557
        var row = this.doc.getLength() - 1;                                                                            // 4558
        var column = this.doc.getLine(row).length;                                                                     // 4559
        this.moveCursorTo(row, column);                                                                                // 4560
    };                                                                                                                 // 4561
    this.moveCursorFileStart = function() {                                                                            // 4562
        this.moveCursorTo(0, 0);                                                                                       // 4563
    };                                                                                                                 // 4564
    this.moveCursorLongWordRight = function() {                                                                        // 4565
        var row = this.lead.row;                                                                                       // 4566
        var column = this.lead.column;                                                                                 // 4567
        var line = this.doc.getLine(row);                                                                              // 4568
        var rightOfCursor = line.substring(column);                                                                    // 4569
                                                                                                                       // 4570
        var match;                                                                                                     // 4571
        this.session.nonTokenRe.lastIndex = 0;                                                                         // 4572
        this.session.tokenRe.lastIndex = 0;                                                                            // 4573
        var fold = this.session.getFoldAt(row, column, 1);                                                             // 4574
        if (fold) {                                                                                                    // 4575
            this.moveCursorTo(fold.end.row, fold.end.column);                                                          // 4576
            return;                                                                                                    // 4577
        }                                                                                                              // 4578
        if (match = this.session.nonTokenRe.exec(rightOfCursor)) {                                                     // 4579
            column += this.session.nonTokenRe.lastIndex;                                                               // 4580
            this.session.nonTokenRe.lastIndex = 0;                                                                     // 4581
            rightOfCursor = line.substring(column);                                                                    // 4582
        }                                                                                                              // 4583
        if (column >= line.length) {                                                                                   // 4584
            this.moveCursorTo(row, line.length);                                                                       // 4585
            this.moveCursorRight();                                                                                    // 4586
            if (row < this.doc.getLength() - 1)                                                                        // 4587
                this.moveCursorWordRight();                                                                            // 4588
            return;                                                                                                    // 4589
        }                                                                                                              // 4590
        if (match = this.session.tokenRe.exec(rightOfCursor)) {                                                        // 4591
            column += this.session.tokenRe.lastIndex;                                                                  // 4592
            this.session.tokenRe.lastIndex = 0;                                                                        // 4593
        }                                                                                                              // 4594
                                                                                                                       // 4595
        this.moveCursorTo(row, column);                                                                                // 4596
    };                                                                                                                 // 4597
    this.moveCursorLongWordLeft = function() {                                                                         // 4598
        var row = this.lead.row;                                                                                       // 4599
        var column = this.lead.column;                                                                                 // 4600
        var fold;                                                                                                      // 4601
        if (fold = this.session.getFoldAt(row, column, -1)) {                                                          // 4602
            this.moveCursorTo(fold.start.row, fold.start.column);                                                      // 4603
            return;                                                                                                    // 4604
        }                                                                                                              // 4605
                                                                                                                       // 4606
        var str = this.session.getFoldStringAt(row, column, -1);                                                       // 4607
        if (str == null) {                                                                                             // 4608
            str = this.doc.getLine(row).substring(0, column);                                                          // 4609
        }                                                                                                              // 4610
                                                                                                                       // 4611
        var leftOfCursor = lang.stringReverse(str);                                                                    // 4612
        var match;                                                                                                     // 4613
        this.session.nonTokenRe.lastIndex = 0;                                                                         // 4614
        this.session.tokenRe.lastIndex = 0;                                                                            // 4615
        if (match = this.session.nonTokenRe.exec(leftOfCursor)) {                                                      // 4616
            column -= this.session.nonTokenRe.lastIndex;                                                               // 4617
            leftOfCursor = leftOfCursor.slice(this.session.nonTokenRe.lastIndex);                                      // 4618
            this.session.nonTokenRe.lastIndex = 0;                                                                     // 4619
        }                                                                                                              // 4620
        if (column <= 0) {                                                                                             // 4621
            this.moveCursorTo(row, 0);                                                                                 // 4622
            this.moveCursorLeft();                                                                                     // 4623
            if (row > 0)                                                                                               // 4624
                this.moveCursorWordLeft();                                                                             // 4625
            return;                                                                                                    // 4626
        }                                                                                                              // 4627
        if (match = this.session.tokenRe.exec(leftOfCursor)) {                                                         // 4628
            column -= this.session.tokenRe.lastIndex;                                                                  // 4629
            this.session.tokenRe.lastIndex = 0;                                                                        // 4630
        }                                                                                                              // 4631
                                                                                                                       // 4632
        this.moveCursorTo(row, column);                                                                                // 4633
    };                                                                                                                 // 4634
                                                                                                                       // 4635
    this.$shortWordEndIndex = function(rightOfCursor) {                                                                // 4636
        var match, index = 0, ch;                                                                                      // 4637
        var whitespaceRe = /\s/;                                                                                       // 4638
        var tokenRe = this.session.tokenRe;                                                                            // 4639
                                                                                                                       // 4640
        tokenRe.lastIndex = 0;                                                                                         // 4641
        if (match = this.session.tokenRe.exec(rightOfCursor)) {                                                        // 4642
            index = this.session.tokenRe.lastIndex;                                                                    // 4643
        } else {                                                                                                       // 4644
            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))                                               // 4645
                index ++;                                                                                              // 4646
                                                                                                                       // 4647
            if (index < 1) {                                                                                           // 4648
                tokenRe.lastIndex = 0;                                                                                 // 4649
                 while ((ch = rightOfCursor[index]) && !tokenRe.test(ch)) {                                            // 4650
                    tokenRe.lastIndex = 0;                                                                             // 4651
                    index ++;                                                                                          // 4652
                    if (whitespaceRe.test(ch)) {                                                                       // 4653
                        if (index > 2) {                                                                               // 4654
                            index--;                                                                                   // 4655
                            break;                                                                                     // 4656
                        } else {                                                                                       // 4657
                            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))                               // 4658
                                index ++;                                                                              // 4659
                            if (index > 2)                                                                             // 4660
                                break;                                                                                 // 4661
                        }                                                                                              // 4662
                    }                                                                                                  // 4663
                }                                                                                                      // 4664
            }                                                                                                          // 4665
        }                                                                                                              // 4666
        tokenRe.lastIndex = 0;                                                                                         // 4667
                                                                                                                       // 4668
        return index;                                                                                                  // 4669
    };                                                                                                                 // 4670
                                                                                                                       // 4671
    this.moveCursorShortWordRight = function() {                                                                       // 4672
        var row = this.lead.row;                                                                                       // 4673
        var column = this.lead.column;                                                                                 // 4674
        var line = this.doc.getLine(row);                                                                              // 4675
        var rightOfCursor = line.substring(column);                                                                    // 4676
                                                                                                                       // 4677
        var fold = this.session.getFoldAt(row, column, 1);                                                             // 4678
        if (fold)                                                                                                      // 4679
            return this.moveCursorTo(fold.end.row, fold.end.column);                                                   // 4680
                                                                                                                       // 4681
        if (column == line.length) {                                                                                   // 4682
            var l = this.doc.getLength();                                                                              // 4683
            do {                                                                                                       // 4684
                row++;                                                                                                 // 4685
                rightOfCursor = this.doc.getLine(row);                                                                 // 4686
            } while (row < l && /^\s*$/.test(rightOfCursor));                                                          // 4687
                                                                                                                       // 4688
            if (!/^\s+/.test(rightOfCursor))                                                                           // 4689
                rightOfCursor = "";                                                                                    // 4690
            column = 0;                                                                                                // 4691
        }                                                                                                              // 4692
                                                                                                                       // 4693
        var index = this.$shortWordEndIndex(rightOfCursor);                                                            // 4694
                                                                                                                       // 4695
        this.moveCursorTo(row, column + index);                                                                        // 4696
    };                                                                                                                 // 4697
                                                                                                                       // 4698
    this.moveCursorShortWordLeft = function() {                                                                        // 4699
        var row = this.lead.row;                                                                                       // 4700
        var column = this.lead.column;                                                                                 // 4701
                                                                                                                       // 4702
        var fold;                                                                                                      // 4703
        if (fold = this.session.getFoldAt(row, column, -1))                                                            // 4704
            return this.moveCursorTo(fold.start.row, fold.start.column);                                               // 4705
                                                                                                                       // 4706
        var line = this.session.getLine(row).substring(0, column);                                                     // 4707
        if (column === 0) {                                                                                            // 4708
            do {                                                                                                       // 4709
                row--;                                                                                                 // 4710
                line = this.doc.getLine(row);                                                                          // 4711
            } while (row > 0 && /^\s*$/.test(line));                                                                   // 4712
                                                                                                                       // 4713
            column = line.length;                                                                                      // 4714
            if (!/\s+$/.test(line))                                                                                    // 4715
                line = "";                                                                                             // 4716
        }                                                                                                              // 4717
                                                                                                                       // 4718
        var leftOfCursor = lang.stringReverse(line);                                                                   // 4719
        var index = this.$shortWordEndIndex(leftOfCursor);                                                             // 4720
                                                                                                                       // 4721
        return this.moveCursorTo(row, column - index);                                                                 // 4722
    };                                                                                                                 // 4723
                                                                                                                       // 4724
    this.moveCursorWordRight = function() {                                                                            // 4725
        if (this.session.$selectLongWords)                                                                             // 4726
            this.moveCursorLongWordRight();                                                                            // 4727
        else                                                                                                           // 4728
            this.moveCursorShortWordRight();                                                                           // 4729
    };                                                                                                                 // 4730
                                                                                                                       // 4731
    this.moveCursorWordLeft = function() {                                                                             // 4732
        if (this.session.$selectLongWords)                                                                             // 4733
            this.moveCursorLongWordLeft();                                                                             // 4734
        else                                                                                                           // 4735
            this.moveCursorShortWordLeft();                                                                            // 4736
    };                                                                                                                 // 4737
    this.moveCursorBy = function(rows, chars) {                                                                        // 4738
        var screenPos = this.session.documentToScreenPosition(                                                         // 4739
            this.lead.row,                                                                                             // 4740
            this.lead.column                                                                                           // 4741
        );                                                                                                             // 4742
                                                                                                                       // 4743
        if (chars === 0) {                                                                                             // 4744
            if (this.$desiredColumn)                                                                                   // 4745
                screenPos.column = this.$desiredColumn;                                                                // 4746
            else                                                                                                       // 4747
                this.$desiredColumn = screenPos.column;                                                                // 4748
        }                                                                                                              // 4749
                                                                                                                       // 4750
        var docPos = this.session.screenToDocumentPosition(screenPos.row + rows, screenPos.column);                    // 4751
                                                                                                                       // 4752
        if (rows !== 0 && chars === 0 && docPos.row === this.lead.row && docPos.column === this.lead.column) {         // 4753
            if (this.session.lineWidgets && this.session.lineWidgets[docPos.row])                                      // 4754
                docPos.row++;                                                                                          // 4755
        }                                                                                                              // 4756
        this.moveCursorTo(docPos.row, docPos.column + chars, chars === 0);                                             // 4757
    };                                                                                                                 // 4758
    this.moveCursorToPosition = function(position) {                                                                   // 4759
        this.moveCursorTo(position.row, position.column);                                                              // 4760
    };                                                                                                                 // 4761
    this.moveCursorTo = function(row, column, keepDesiredColumn) {                                                     // 4762
        var fold = this.session.getFoldAt(row, column, 1);                                                             // 4763
        if (fold) {                                                                                                    // 4764
            row = fold.start.row;                                                                                      // 4765
            column = fold.start.column;                                                                                // 4766
        }                                                                                                              // 4767
                                                                                                                       // 4768
        this.$keepDesiredColumnOnChange = true;                                                                        // 4769
        this.lead.setPosition(row, column);                                                                            // 4770
        this.$keepDesiredColumnOnChange = false;                                                                       // 4771
                                                                                                                       // 4772
        if (!keepDesiredColumn)                                                                                        // 4773
            this.$desiredColumn = null;                                                                                // 4774
    };                                                                                                                 // 4775
    this.moveCursorToScreen = function(row, column, keepDesiredColumn) {                                               // 4776
        var pos = this.session.screenToDocumentPosition(row, column);                                                  // 4777
        this.moveCursorTo(pos.row, pos.column, keepDesiredColumn);                                                     // 4778
    };                                                                                                                 // 4779
    this.detach = function() {                                                                                         // 4780
        this.lead.detach();                                                                                            // 4781
        this.anchor.detach();                                                                                          // 4782
        this.session = this.doc = null;                                                                                // 4783
    };                                                                                                                 // 4784
                                                                                                                       // 4785
    this.fromOrientedRange = function(range) {                                                                         // 4786
        this.setSelectionRange(range, range.cursor == range.start);                                                    // 4787
        this.$desiredColumn = range.desiredColumn || this.$desiredColumn;                                              // 4788
    };                                                                                                                 // 4789
                                                                                                                       // 4790
    this.toOrientedRange = function(range) {                                                                           // 4791
        var r = this.getRange();                                                                                       // 4792
        if (range) {                                                                                                   // 4793
            range.start.column = r.start.column;                                                                       // 4794
            range.start.row = r.start.row;                                                                             // 4795
            range.end.column = r.end.column;                                                                           // 4796
            range.end.row = r.end.row;                                                                                 // 4797
        } else {                                                                                                       // 4798
            range = r;                                                                                                 // 4799
        }                                                                                                              // 4800
                                                                                                                       // 4801
        range.cursor = this.isBackwards() ? range.start : range.end;                                                   // 4802
        range.desiredColumn = this.$desiredColumn;                                                                     // 4803
        return range;                                                                                                  // 4804
    };                                                                                                                 // 4805
    this.getRangeOfMovements = function(func) {                                                                        // 4806
        var start = this.getCursor();                                                                                  // 4807
        try {                                                                                                          // 4808
            func.call(null, this);                                                                                     // 4809
            var end = this.getCursor();                                                                                // 4810
            return Range.fromPoints(start,end);                                                                        // 4811
        } catch(e) {                                                                                                   // 4812
            return Range.fromPoints(start,start);                                                                      // 4813
        } finally {                                                                                                    // 4814
            this.moveCursorToPosition(start);                                                                          // 4815
        }                                                                                                              // 4816
    };                                                                                                                 // 4817
                                                                                                                       // 4818
    this.toJSON = function() {                                                                                         // 4819
        if (this.rangeCount) {                                                                                         // 4820
            var data = this.ranges.map(function(r) {                                                                   // 4821
                var r1 = r.clone();                                                                                    // 4822
                r1.isBackwards = r.cursor == r.start;                                                                  // 4823
                return r1;                                                                                             // 4824
            });                                                                                                        // 4825
        } else {                                                                                                       // 4826
            var data = this.getRange();                                                                                // 4827
            data.isBackwards = this.isBackwards();                                                                     // 4828
        }                                                                                                              // 4829
        return data;                                                                                                   // 4830
    };                                                                                                                 // 4831
                                                                                                                       // 4832
    this.fromJSON = function(data) {                                                                                   // 4833
        if (data.start == undefined) {                                                                                 // 4834
            if (this.rangeList) {                                                                                      // 4835
                this.toSingleRange(data[0]);                                                                           // 4836
                for (var i = data.length; i--; ) {                                                                     // 4837
                    var r = Range.fromPoints(data[i].start, data[i].end);                                              // 4838
                    if (data.isBackwards)                                                                              // 4839
                        r.cursor = r.start;                                                                            // 4840
                    this.addRange(r, true);                                                                            // 4841
                }                                                                                                      // 4842
                return;                                                                                                // 4843
            } else                                                                                                     // 4844
                data = data[0];                                                                                        // 4845
        }                                                                                                              // 4846
        if (this.rangeList)                                                                                            // 4847
            this.toSingleRange(data);                                                                                  // 4848
        this.setSelectionRange(data, data.isBackwards);                                                                // 4849
    };                                                                                                                 // 4850
                                                                                                                       // 4851
    this.isEqual = function(data) {                                                                                    // 4852
        if ((data.length || this.rangeCount) && data.length != this.rangeCount)                                        // 4853
            return false;                                                                                              // 4854
        if (!data.length || !this.ranges)                                                                              // 4855
            return this.getRange().isEqual(data);                                                                      // 4856
                                                                                                                       // 4857
        for (var i = this.ranges.length; i--; ) {                                                                      // 4858
            if (!this.ranges[i].isEqual(data[i]))                                                                      // 4859
                return false;                                                                                          // 4860
        }                                                                                                              // 4861
        return true;                                                                                                   // 4862
    };                                                                                                                 // 4863
                                                                                                                       // 4864
}).call(Selection.prototype);                                                                                          // 4865
                                                                                                                       // 4866
exports.Selection = Selection;                                                                                         // 4867
});                                                                                                                    // 4868
                                                                                                                       // 4869
define("ace/tokenizer",["require","exports","module"], function(require, exports, module) {                            // 4870
"use strict";                                                                                                          // 4871
var MAX_TOKEN_COUNT = 2000;                                                                                            // 4872
var Tokenizer = function(rules) {                                                                                      // 4873
    this.states = rules;                                                                                               // 4874
                                                                                                                       // 4875
    this.regExps = {};                                                                                                 // 4876
    this.matchMappings = {};                                                                                           // 4877
    for (var key in this.states) {                                                                                     // 4878
        var state = this.states[key];                                                                                  // 4879
        var ruleRegExps = [];                                                                                          // 4880
        var matchTotal = 0;                                                                                            // 4881
        var mapping = this.matchMappings[key] = {defaultToken: "text"};                                                // 4882
        var flag = "g";                                                                                                // 4883
                                                                                                                       // 4884
        var splitterRurles = [];                                                                                       // 4885
        for (var i = 0; i < state.length; i++) {                                                                       // 4886
            var rule = state[i];                                                                                       // 4887
            if (rule.defaultToken)                                                                                     // 4888
                mapping.defaultToken = rule.defaultToken;                                                              // 4889
            if (rule.caseInsensitive)                                                                                  // 4890
                flag = "gi";                                                                                           // 4891
            if (rule.regex == null)                                                                                    // 4892
                continue;                                                                                              // 4893
                                                                                                                       // 4894
            if (rule.regex instanceof RegExp)                                                                          // 4895
                rule.regex = rule.regex.toString().slice(1, -1);                                                       // 4896
            var adjustedregex = rule.regex;                                                                            // 4897
            var matchcount = new RegExp("(?:(" + adjustedregex + ")|(.))").exec("a").length - 2;                       // 4898
            if (Array.isArray(rule.token)) {                                                                           // 4899
                if (rule.token.length == 1 || matchcount == 1) {                                                       // 4900
                    rule.token = rule.token[0];                                                                        // 4901
                } else if (matchcount - 1 != rule.token.length) {                                                      // 4902
                    this.reportError("number of classes and regexp groups doesn't match", {                            // 4903
                        rule: rule,                                                                                    // 4904
                        groupCount: matchcount - 1                                                                     // 4905
                    });                                                                                                // 4906
                    rule.token = rule.token[0];                                                                        // 4907
                } else {                                                                                               // 4908
                    rule.tokenArray = rule.token;                                                                      // 4909
                    rule.token = null;                                                                                 // 4910
                    rule.onMatch = this.$arrayTokens;                                                                  // 4911
                }                                                                                                      // 4912
            } else if (typeof rule.token == "function" && !rule.onMatch) {                                             // 4913
                if (matchcount > 1)                                                                                    // 4914
                    rule.onMatch = this.$applyToken;                                                                   // 4915
                else                                                                                                   // 4916
                    rule.onMatch = rule.token;                                                                         // 4917
            }                                                                                                          // 4918
                                                                                                                       // 4919
            if (matchcount > 1) {                                                                                      // 4920
                if (/\\\d/.test(rule.regex)) {                                                                         // 4921
                    adjustedregex = rule.regex.replace(/\\([0-9]+)/g, function(match, digit) {                         // 4922
                        return "\\" + (parseInt(digit, 10) + matchTotal + 1);                                          // 4923
                    });                                                                                                // 4924
                } else {                                                                                               // 4925
                    matchcount = 1;                                                                                    // 4926
                    adjustedregex = this.removeCapturingGroups(rule.regex);                                            // 4927
                }                                                                                                      // 4928
                if (!rule.splitRegex && typeof rule.token != "string")                                                 // 4929
                    splitterRurles.push(rule); // flag will be known only at the very end                              // 4930
            }                                                                                                          // 4931
                                                                                                                       // 4932
            mapping[matchTotal] = i;                                                                                   // 4933
            matchTotal += matchcount;                                                                                  // 4934
                                                                                                                       // 4935
            ruleRegExps.push(adjustedregex);                                                                           // 4936
            if (!rule.onMatch)                                                                                         // 4937
                rule.onMatch = null;                                                                                   // 4938
        }                                                                                                              // 4939
                                                                                                                       // 4940
        if (!ruleRegExps.length) {                                                                                     // 4941
            mapping[0] = 0;                                                                                            // 4942
            ruleRegExps.push("$");                                                                                     // 4943
        }                                                                                                              // 4944
                                                                                                                       // 4945
        splitterRurles.forEach(function(rule) {                                                                        // 4946
            rule.splitRegex = this.createSplitterRegexp(rule.regex, flag);                                             // 4947
        }, this);                                                                                                      // 4948
                                                                                                                       // 4949
        this.regExps[key] = new RegExp("(" + ruleRegExps.join(")|(") + ")|($)", flag);                                 // 4950
    }                                                                                                                  // 4951
};                                                                                                                     // 4952
                                                                                                                       // 4953
(function() {                                                                                                          // 4954
    this.$setMaxTokenCount = function(m) {                                                                             // 4955
        MAX_TOKEN_COUNT = m | 0;                                                                                       // 4956
    };                                                                                                                 // 4957
                                                                                                                       // 4958
    this.$applyToken = function(str) {                                                                                 // 4959
        var values = this.splitRegex.exec(str).slice(1);                                                               // 4960
        var types = this.token.apply(this, values);                                                                    // 4961
        if (typeof types === "string")                                                                                 // 4962
            return [{type: types, value: str}];                                                                        // 4963
                                                                                                                       // 4964
        var tokens = [];                                                                                               // 4965
        for (var i = 0, l = types.length; i < l; i++) {                                                                // 4966
            if (values[i])                                                                                             // 4967
                tokens[tokens.length] = {                                                                              // 4968
                    type: types[i],                                                                                    // 4969
                    value: values[i]                                                                                   // 4970
                };                                                                                                     // 4971
        }                                                                                                              // 4972
        return tokens;                                                                                                 // 4973
    },                                                                                                                 // 4974
                                                                                                                       // 4975
    this.$arrayTokens = function(str) {                                                                                // 4976
        if (!str)                                                                                                      // 4977
            return [];                                                                                                 // 4978
        var values = this.splitRegex.exec(str);                                                                        // 4979
        if (!values)                                                                                                   // 4980
            return "text";                                                                                             // 4981
        var tokens = [];                                                                                               // 4982
        var types = this.tokenArray;                                                                                   // 4983
        for (var i = 0, l = types.length; i < l; i++) {                                                                // 4984
            if (values[i + 1])                                                                                         // 4985
                tokens[tokens.length] = {                                                                              // 4986
                    type: types[i],                                                                                    // 4987
                    value: values[i + 1]                                                                               // 4988
                };                                                                                                     // 4989
        }                                                                                                              // 4990
        return tokens;                                                                                                 // 4991
    };                                                                                                                 // 4992
                                                                                                                       // 4993
    this.removeCapturingGroups = function(src) {                                                                       // 4994
        var r = src.replace(                                                                                           // 4995
            /\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,                                                                 // 4996
            function(x, y) {return y ? "(?:" : x;}                                                                     // 4997
        );                                                                                                             // 4998
        return r;                                                                                                      // 4999
    };                                                                                                                 // 5000
                                                                                                                       // 5001
    this.createSplitterRegexp = function(src, flag) {                                                                  // 5002
        if (src.indexOf("(?=") != -1) {                                                                                // 5003
            var stack = 0;                                                                                             // 5004
            var inChClass = false;                                                                                     // 5005
            var lastCapture = {};                                                                                      // 5006
            src.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g, function(                                              // 5007
                m, esc, parenOpen, parenClose, square, index                                                           // 5008
            ) {                                                                                                        // 5009
                if (inChClass) {                                                                                       // 5010
                    inChClass = square != "]";                                                                         // 5011
                } else if (square) {                                                                                   // 5012
                    inChClass = true;                                                                                  // 5013
                } else if (parenClose) {                                                                               // 5014
                    if (stack == lastCapture.stack) {                                                                  // 5015
                        lastCapture.end = index+1;                                                                     // 5016
                        lastCapture.stack = -1;                                                                        // 5017
                    }                                                                                                  // 5018
                    stack--;                                                                                           // 5019
                } else if (parenOpen) {                                                                                // 5020
                    stack++;                                                                                           // 5021
                    if (parenOpen.length != 1) {                                                                       // 5022
                        lastCapture.stack = stack                                                                      // 5023
                        lastCapture.start = index;                                                                     // 5024
                    }                                                                                                  // 5025
                }                                                                                                      // 5026
                return m;                                                                                              // 5027
            });                                                                                                        // 5028
                                                                                                                       // 5029
            if (lastCapture.end != null && /^\)*$/.test(src.substr(lastCapture.end)))                                  // 5030
                src = src.substring(0, lastCapture.start) + src.substr(lastCapture.end);                               // 5031
        }                                                                                                              // 5032
        return new RegExp(src, (flag||"").replace("g", ""));                                                           // 5033
    };                                                                                                                 // 5034
    this.getLineTokens = function(line, startState) {                                                                  // 5035
        if (startState && typeof startState != "string") {                                                             // 5036
            var stack = startState.slice(0);                                                                           // 5037
            startState = stack[0];                                                                                     // 5038
            if (startState === "#tmp") {                                                                               // 5039
                stack.shift()                                                                                          // 5040
                startState = stack.shift()                                                                             // 5041
            }                                                                                                          // 5042
        } else                                                                                                         // 5043
            var stack = [];                                                                                            // 5044
                                                                                                                       // 5045
        var currentState = startState || "start";                                                                      // 5046
        var state = this.states[currentState];                                                                         // 5047
        if (!state) {                                                                                                  // 5048
            currentState = "start";                                                                                    // 5049
            state = this.states[currentState];                                                                         // 5050
        }                                                                                                              // 5051
        var mapping = this.matchMappings[currentState];                                                                // 5052
        var re = this.regExps[currentState];                                                                           // 5053
        re.lastIndex = 0;                                                                                              // 5054
                                                                                                                       // 5055
        var match, tokens = [];                                                                                        // 5056
        var lastIndex = 0;                                                                                             // 5057
        var matchAttempts = 0;                                                                                         // 5058
                                                                                                                       // 5059
        var token = {type: null, value: ""};                                                                           // 5060
                                                                                                                       // 5061
        while (match = re.exec(line)) {                                                                                // 5062
            var type = mapping.defaultToken;                                                                           // 5063
            var rule = null;                                                                                           // 5064
            var value = match[0];                                                                                      // 5065
            var index = re.lastIndex;                                                                                  // 5066
                                                                                                                       // 5067
            if (index - value.length > lastIndex) {                                                                    // 5068
                var skipped = line.substring(lastIndex, index - value.length);                                         // 5069
                if (token.type == type) {                                                                              // 5070
                    token.value += skipped;                                                                            // 5071
                } else {                                                                                               // 5072
                    if (token.type)                                                                                    // 5073
                        tokens.push(token);                                                                            // 5074
                    token = {type: type, value: skipped};                                                              // 5075
                }                                                                                                      // 5076
            }                                                                                                          // 5077
                                                                                                                       // 5078
            for (var i = 0; i < match.length-2; i++) {                                                                 // 5079
                if (match[i + 1] === undefined)                                                                        // 5080
                    continue;                                                                                          // 5081
                                                                                                                       // 5082
                rule = state[mapping[i]];                                                                              // 5083
                                                                                                                       // 5084
                if (rule.onMatch)                                                                                      // 5085
                    type = rule.onMatch(value, currentState, stack);                                                   // 5086
                else                                                                                                   // 5087
                    type = rule.token;                                                                                 // 5088
                                                                                                                       // 5089
                if (rule.next) {                                                                                       // 5090
                    if (typeof rule.next == "string") {                                                                // 5091
                        currentState = rule.next;                                                                      // 5092
                    } else {                                                                                           // 5093
                        currentState = rule.next(currentState, stack);                                                 // 5094
                    }                                                                                                  // 5095
                                                                                                                       // 5096
                    state = this.states[currentState];                                                                 // 5097
                    if (!state) {                                                                                      // 5098
                        this.reportError("state doesn't exist", currentState);                                         // 5099
                        currentState = "start";                                                                        // 5100
                        state = this.states[currentState];                                                             // 5101
                    }                                                                                                  // 5102
                    mapping = this.matchMappings[currentState];                                                        // 5103
                    lastIndex = index;                                                                                 // 5104
                    re = this.regExps[currentState];                                                                   // 5105
                    re.lastIndex = index;                                                                              // 5106
                }                                                                                                      // 5107
                break;                                                                                                 // 5108
            }                                                                                                          // 5109
                                                                                                                       // 5110
            if (value) {                                                                                               // 5111
                if (typeof type === "string") {                                                                        // 5112
                    if ((!rule || rule.merge !== false) && token.type === type) {                                      // 5113
                        token.value += value;                                                                          // 5114
                    } else {                                                                                           // 5115
                        if (token.type)                                                                                // 5116
                            tokens.push(token);                                                                        // 5117
                        token = {type: type, value: value};                                                            // 5118
                    }                                                                                                  // 5119
                } else if (type) {                                                                                     // 5120
                    if (token.type)                                                                                    // 5121
                        tokens.push(token);                                                                            // 5122
                    token = {type: null, value: ""};                                                                   // 5123
                    for (var i = 0; i < type.length; i++)                                                              // 5124
                        tokens.push(type[i]);                                                                          // 5125
                }                                                                                                      // 5126
            }                                                                                                          // 5127
                                                                                                                       // 5128
            if (lastIndex == line.length)                                                                              // 5129
                break;                                                                                                 // 5130
                                                                                                                       // 5131
            lastIndex = index;                                                                                         // 5132
                                                                                                                       // 5133
            if (matchAttempts++ > MAX_TOKEN_COUNT) {                                                                   // 5134
                if (matchAttempts > 2 * line.length) {                                                                 // 5135
                    this.reportError("infinite loop with in ace tokenizer", {                                          // 5136
                        startState: startState,                                                                        // 5137
                        line: line                                                                                     // 5138
                    });                                                                                                // 5139
                }                                                                                                      // 5140
                while (lastIndex < line.length) {                                                                      // 5141
                    if (token.type)                                                                                    // 5142
                        tokens.push(token);                                                                            // 5143
                    token = {                                                                                          // 5144
                        value: line.substring(lastIndex, lastIndex += 2000),                                           // 5145
                        type: "overflow"                                                                               // 5146
                    };                                                                                                 // 5147
                }                                                                                                      // 5148
                currentState = "start";                                                                                // 5149
                stack = [];                                                                                            // 5150
                break;                                                                                                 // 5151
            }                                                                                                          // 5152
        }                                                                                                              // 5153
                                                                                                                       // 5154
        if (token.type)                                                                                                // 5155
            tokens.push(token);                                                                                        // 5156
                                                                                                                       // 5157
        if (stack.length > 1) {                                                                                        // 5158
            if (stack[0] !== currentState)                                                                             // 5159
                stack.unshift("#tmp", currentState);                                                                   // 5160
        }                                                                                                              // 5161
        return {                                                                                                       // 5162
            tokens : tokens,                                                                                           // 5163
            state : stack.length ? stack : currentState                                                                // 5164
        };                                                                                                             // 5165
    };                                                                                                                 // 5166
                                                                                                                       // 5167
    this.reportError = function(msg, data) {                                                                           // 5168
        var e = new Error(msg);                                                                                        // 5169
        e.data = data;                                                                                                 // 5170
        if (typeof console == "object" && console.error)                                                               // 5171
            console.error(e);                                                                                          // 5172
        setTimeout(function() { throw e; });                                                                           // 5173
    };                                                                                                                 // 5174
}).call(Tokenizer.prototype);                                                                                          // 5175
                                                                                                                       // 5176
exports.Tokenizer = Tokenizer;                                                                                         // 5177
});                                                                                                                    // 5178
                                                                                                                       // 5179
define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"], function(require, exports, module) {
"use strict";                                                                                                          // 5181
                                                                                                                       // 5182
var lang = require("../lib/lang");                                                                                     // 5183
                                                                                                                       // 5184
var TextHighlightRules = function() {                                                                                  // 5185
                                                                                                                       // 5186
    this.$rules = {                                                                                                    // 5187
        "start" : [{                                                                                                   // 5188
            token : "empty_line",                                                                                      // 5189
            regex : '^$'                                                                                               // 5190
        }, {                                                                                                           // 5191
            defaultToken : "text"                                                                                      // 5192
        }]                                                                                                             // 5193
    };                                                                                                                 // 5194
};                                                                                                                     // 5195
                                                                                                                       // 5196
(function() {                                                                                                          // 5197
                                                                                                                       // 5198
    this.addRules = function(rules, prefix) {                                                                          // 5199
        if (!prefix) {                                                                                                 // 5200
            for (var key in rules)                                                                                     // 5201
                this.$rules[key] = rules[key];                                                                         // 5202
            return;                                                                                                    // 5203
        }                                                                                                              // 5204
        for (var key in rules) {                                                                                       // 5205
            var state = rules[key];                                                                                    // 5206
            for (var i = 0; i < state.length; i++) {                                                                   // 5207
                var rule = state[i];                                                                                   // 5208
                if (rule.next || rule.onMatch) {                                                                       // 5209
                    if (typeof rule.next != "string") {                                                                // 5210
                        if (rule.nextState && rule.nextState.indexOf(prefix) !== 0)                                    // 5211
                            rule.nextState = prefix + rule.nextState;                                                  // 5212
                    } else {                                                                                           // 5213
                        if (rule.next.indexOf(prefix) !== 0)                                                           // 5214
                            rule.next = prefix + rule.next;                                                            // 5215
                    }                                                                                                  // 5216
                }                                                                                                      // 5217
            }                                                                                                          // 5218
            this.$rules[prefix + key] = state;                                                                         // 5219
        }                                                                                                              // 5220
    };                                                                                                                 // 5221
                                                                                                                       // 5222
    this.getRules = function() {                                                                                       // 5223
        return this.$rules;                                                                                            // 5224
    };                                                                                                                 // 5225
                                                                                                                       // 5226
    this.embedRules = function (HighlightRules, prefix, escapeRules, states, append) {                                 // 5227
        var embedRules = typeof HighlightRules == "function"                                                           // 5228
            ? new HighlightRules().getRules()                                                                          // 5229
            : HighlightRules;                                                                                          // 5230
        if (states) {                                                                                                  // 5231
            for (var i = 0; i < states.length; i++)                                                                    // 5232
                states[i] = prefix + states[i];                                                                        // 5233
        } else {                                                                                                       // 5234
            states = [];                                                                                               // 5235
            for (var key in embedRules)                                                                                // 5236
                states.push(prefix + key);                                                                             // 5237
        }                                                                                                              // 5238
                                                                                                                       // 5239
        this.addRules(embedRules, prefix);                                                                             // 5240
                                                                                                                       // 5241
        if (escapeRules) {                                                                                             // 5242
            var addRules = Array.prototype[append ? "push" : "unshift"];                                               // 5243
            for (var i = 0; i < states.length; i++)                                                                    // 5244
                addRules.apply(this.$rules[states[i]], lang.deepCopy(escapeRules));                                    // 5245
        }                                                                                                              // 5246
                                                                                                                       // 5247
        if (!this.$embeds)                                                                                             // 5248
            this.$embeds = [];                                                                                         // 5249
        this.$embeds.push(prefix);                                                                                     // 5250
    };                                                                                                                 // 5251
                                                                                                                       // 5252
    this.getEmbeds = function() {                                                                                      // 5253
        return this.$embeds;                                                                                           // 5254
    };                                                                                                                 // 5255
                                                                                                                       // 5256
    var pushState = function(currentState, stack) {                                                                    // 5257
        if (currentState != "start" || stack.length)                                                                   // 5258
            stack.unshift(this.nextState, currentState);                                                               // 5259
        return this.nextState;                                                                                         // 5260
    };                                                                                                                 // 5261
    var popState = function(currentState, stack) {                                                                     // 5262
        stack.shift();                                                                                                 // 5263
        return stack.shift() || "start";                                                                               // 5264
    };                                                                                                                 // 5265
                                                                                                                       // 5266
    this.normalizeRules = function() {                                                                                 // 5267
        var id = 0;                                                                                                    // 5268
        var rules = this.$rules;                                                                                       // 5269
        function processState(key) {                                                                                   // 5270
            var state = rules[key];                                                                                    // 5271
            state.processed = true;                                                                                    // 5272
            for (var i = 0; i < state.length; i++) {                                                                   // 5273
                var rule = state[i];                                                                                   // 5274
                if (!rule.regex && rule.start) {                                                                       // 5275
                    rule.regex = rule.start;                                                                           // 5276
                    if (!rule.next)                                                                                    // 5277
                        rule.next = [];                                                                                // 5278
                    rule.next.push({                                                                                   // 5279
                        defaultToken: rule.token                                                                       // 5280
                    }, {                                                                                               // 5281
                        token: rule.token + ".end",                                                                    // 5282
                        regex: rule.end || rule.start,                                                                 // 5283
                        next: "pop"                                                                                    // 5284
                    });                                                                                                // 5285
                    rule.token = rule.token + ".start";                                                                // 5286
                    rule.push = true;                                                                                  // 5287
                }                                                                                                      // 5288
                var next = rule.next || rule.push;                                                                     // 5289
                if (next && Array.isArray(next)) {                                                                     // 5290
                    var stateName = rule.stateName;                                                                    // 5291
                    if (!stateName)  {                                                                                 // 5292
                        stateName = rule.token;                                                                        // 5293
                        if (typeof stateName != "string")                                                              // 5294
                            stateName = stateName[0] || "";                                                            // 5295
                        if (rules[stateName])                                                                          // 5296
                            stateName += id++;                                                                         // 5297
                    }                                                                                                  // 5298
                    rules[stateName] = next;                                                                           // 5299
                    rule.next = stateName;                                                                             // 5300
                    processState(stateName);                                                                           // 5301
                } else if (next == "pop") {                                                                            // 5302
                    rule.next = popState;                                                                              // 5303
                }                                                                                                      // 5304
                                                                                                                       // 5305
                if (rule.push) {                                                                                       // 5306
                    rule.nextState = rule.next || rule.push;                                                           // 5307
                    rule.next = pushState;                                                                             // 5308
                    delete rule.push;                                                                                  // 5309
                }                                                                                                      // 5310
                                                                                                                       // 5311
                if (rule.rules) {                                                                                      // 5312
                    for (var r in rule.rules) {                                                                        // 5313
                        if (rules[r]) {                                                                                // 5314
                            if (rules[r].push)                                                                         // 5315
                                rules[r].push.apply(rules[r], rule.rules[r]);                                          // 5316
                        } else {                                                                                       // 5317
                            rules[r] = rule.rules[r];                                                                  // 5318
                        }                                                                                              // 5319
                    }                                                                                                  // 5320
                }                                                                                                      // 5321
                if (rule.include || typeof rule == "string") {                                                         // 5322
                    var includeName = rule.include || rule;                                                            // 5323
                    var toInsert = rules[includeName];                                                                 // 5324
                } else if (Array.isArray(rule))                                                                        // 5325
                    toInsert = rule;                                                                                   // 5326
                                                                                                                       // 5327
                if (toInsert) {                                                                                        // 5328
                    var args = [i, 1].concat(toInsert);                                                                // 5329
                    if (rule.noEscape)                                                                                 // 5330
                        args = args.filter(function(x) {return !x.next;});                                             // 5331
                    state.splice.apply(state, args);                                                                   // 5332
                    i--;                                                                                               // 5333
                    toInsert = null;                                                                                   // 5334
                }                                                                                                      // 5335
                                                                                                                       // 5336
                if (rule.keywordMap) {                                                                                 // 5337
                    rule.token = this.createKeywordMapper(                                                             // 5338
                        rule.keywordMap, rule.defaultToken || "text", rule.caseInsensitive                             // 5339
                    );                                                                                                 // 5340
                    delete rule.defaultToken;                                                                          // 5341
                }                                                                                                      // 5342
            }                                                                                                          // 5343
        }                                                                                                              // 5344
        Object.keys(rules).forEach(processState, this);                                                                // 5345
    };                                                                                                                 // 5346
                                                                                                                       // 5347
    this.createKeywordMapper = function(map, defaultToken, ignoreCase, splitChar) {                                    // 5348
        var keywords = Object.create(null);                                                                            // 5349
        Object.keys(map).forEach(function(className) {                                                                 // 5350
            var a = map[className];                                                                                    // 5351
            if (ignoreCase)                                                                                            // 5352
                a = a.toLowerCase();                                                                                   // 5353
            var list = a.split(splitChar || "|");                                                                      // 5354
            for (var i = list.length; i--; )                                                                           // 5355
                keywords[list[i]] = className;                                                                         // 5356
        });                                                                                                            // 5357
        if (Object.getPrototypeOf(keywords)) {                                                                         // 5358
            keywords.__proto__ = null;                                                                                 // 5359
        }                                                                                                              // 5360
        this.$keywordList = Object.keys(keywords);                                                                     // 5361
        map = null;                                                                                                    // 5362
        return ignoreCase                                                                                              // 5363
            ? function(value) {return keywords[value.toLowerCase()] || defaultToken }                                  // 5364
            : function(value) {return keywords[value] || defaultToken };                                               // 5365
    };                                                                                                                 // 5366
                                                                                                                       // 5367
    this.getKeywords = function() {                                                                                    // 5368
        return this.$keywords;                                                                                         // 5369
    };                                                                                                                 // 5370
                                                                                                                       // 5371
}).call(TextHighlightRules.prototype);                                                                                 // 5372
                                                                                                                       // 5373
exports.TextHighlightRules = TextHighlightRules;                                                                       // 5374
});                                                                                                                    // 5375
                                                                                                                       // 5376
define("ace/mode/behaviour",["require","exports","module"], function(require, exports, module) {                       // 5377
"use strict";                                                                                                          // 5378
                                                                                                                       // 5379
var Behaviour = function() {                                                                                           // 5380
   this.$behaviours = {};                                                                                              // 5381
};                                                                                                                     // 5382
                                                                                                                       // 5383
(function () {                                                                                                         // 5384
                                                                                                                       // 5385
    this.add = function (name, action, callback) {                                                                     // 5386
        switch (undefined) {                                                                                           // 5387
          case this.$behaviours:                                                                                       // 5388
              this.$behaviours = {};                                                                                   // 5389
          case this.$behaviours[name]:                                                                                 // 5390
              this.$behaviours[name] = {};                                                                             // 5391
        }                                                                                                              // 5392
        this.$behaviours[name][action] = callback;                                                                     // 5393
    }                                                                                                                  // 5394
                                                                                                                       // 5395
    this.addBehaviours = function (behaviours) {                                                                       // 5396
        for (var key in behaviours) {                                                                                  // 5397
            for (var action in behaviours[key]) {                                                                      // 5398
                this.add(key, action, behaviours[key][action]);                                                        // 5399
            }                                                                                                          // 5400
        }                                                                                                              // 5401
    }                                                                                                                  // 5402
                                                                                                                       // 5403
    this.remove = function (name) {                                                                                    // 5404
        if (this.$behaviours && this.$behaviours[name]) {                                                              // 5405
            delete this.$behaviours[name];                                                                             // 5406
        }                                                                                                              // 5407
    }                                                                                                                  // 5408
                                                                                                                       // 5409
    this.inherit = function (mode, filter) {                                                                           // 5410
        if (typeof mode === "function") {                                                                              // 5411
            var behaviours = new mode().getBehaviours(filter);                                                         // 5412
        } else {                                                                                                       // 5413
            var behaviours = mode.getBehaviours(filter);                                                               // 5414
        }                                                                                                              // 5415
        this.addBehaviours(behaviours);                                                                                // 5416
    }                                                                                                                  // 5417
                                                                                                                       // 5418
    this.getBehaviours = function (filter) {                                                                           // 5419
        if (!filter) {                                                                                                 // 5420
            return this.$behaviours;                                                                                   // 5421
        } else {                                                                                                       // 5422
            var ret = {}                                                                                               // 5423
            for (var i = 0; i < filter.length; i++) {                                                                  // 5424
                if (this.$behaviours[filter[i]]) {                                                                     // 5425
                    ret[filter[i]] = this.$behaviours[filter[i]];                                                      // 5426
                }                                                                                                      // 5427
            }                                                                                                          // 5428
            return ret;                                                                                                // 5429
        }                                                                                                              // 5430
    }                                                                                                                  // 5431
                                                                                                                       // 5432
}).call(Behaviour.prototype);                                                                                          // 5433
                                                                                                                       // 5434
exports.Behaviour = Behaviour;                                                                                         // 5435
});                                                                                                                    // 5436
                                                                                                                       // 5437
define("ace/unicode",["require","exports","module"], function(require, exports, module) {                              // 5438
"use strict";                                                                                                          // 5439
exports.packages = {};                                                                                                 // 5440
                                                                                                                       // 5441
addUnicodePackage({                                                                                                    // 5442
    L:  "0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
    Ll: "0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",
    Lu: "0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",
    Lt: "01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",                                                     // 5446
    Lm: "02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",
    Lo: "01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
    M:  "0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",
    Mn: "0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",
    Mc: "0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",
    Me: "0488048906DE20DD-20E020E2-20E4A670-A672",                                                                     // 5452
    N:  "0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
    Nd: "0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
    Nl: "16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",                                                  // 5455
    No: "00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",
    P:  "0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",
    Pd: "002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",                                       // 5458
    Ps: "0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",
    Pe: "0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",
    Pi: "00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",                                                            // 5461
    Pf: "00BB2019201D203A2E032E052E0A2E0D2E1D2E21",                                                                    // 5462
    Pc: "005F203F20402054FE33FE34FE4D-FE4FFF3F",                                                                       // 5463
    Po: "0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",
    S:  "0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",
    Sm: "002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",
    Sc: "002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",                      // 5467
    Sk: "005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",
    So: "00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",
    Z:  "002000A01680180E2000-200A20282029202F205F3000",                                                               // 5470
    Zs: "002000A01680180E2000-200A202F205F3000",                                                                       // 5471
    Zl: "2028",                                                                                                        // 5472
    Zp: "2029",                                                                                                        // 5473
    C:  "0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",
    Cc: "0000-001F007F-009F",                                                                                          // 5475
    Cf: "00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",                              // 5476
    Co: "E000-F8FF",                                                                                                   // 5477
    Cs: "D800-DFFF",                                                                                                   // 5478
    Cn: "03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"
});                                                                                                                    // 5480
                                                                                                                       // 5481
function addUnicodePackage (pack) {                                                                                    // 5482
    var codePoint = /\w{4}/g;                                                                                          // 5483
    for (var name in pack)                                                                                             // 5484
        exports.packages[name] = pack[name].replace(codePoint, "\\u$&");                                               // 5485
};                                                                                                                     // 5486
                                                                                                                       // 5487
});                                                                                                                    // 5488
                                                                                                                       // 5489
define("ace/token_iterator",["require","exports","module"], function(require, exports, module) {                       // 5490
"use strict";                                                                                                          // 5491
var TokenIterator = function(session, initialRow, initialColumn) {                                                     // 5492
    this.$session = session;                                                                                           // 5493
    this.$row = initialRow;                                                                                            // 5494
    this.$rowTokens = session.getTokens(initialRow);                                                                   // 5495
                                                                                                                       // 5496
    var token = session.getTokenAt(initialRow, initialColumn);                                                         // 5497
    this.$tokenIndex = token ? token.index : -1;                                                                       // 5498
};                                                                                                                     // 5499
                                                                                                                       // 5500
(function() {                                                                                                          // 5501
    this.stepBackward = function() {                                                                                   // 5502
        this.$tokenIndex -= 1;                                                                                         // 5503
                                                                                                                       // 5504
        while (this.$tokenIndex < 0) {                                                                                 // 5505
            this.$row -= 1;                                                                                            // 5506
            if (this.$row < 0) {                                                                                       // 5507
                this.$row = 0;                                                                                         // 5508
                return null;                                                                                           // 5509
            }                                                                                                          // 5510
                                                                                                                       // 5511
            this.$rowTokens = this.$session.getTokens(this.$row);                                                      // 5512
            this.$tokenIndex = this.$rowTokens.length - 1;                                                             // 5513
        }                                                                                                              // 5514
                                                                                                                       // 5515
        return this.$rowTokens[this.$tokenIndex];                                                                      // 5516
    };                                                                                                                 // 5517
    this.stepForward = function() {                                                                                    // 5518
        this.$tokenIndex += 1;                                                                                         // 5519
        var rowCount;                                                                                                  // 5520
        while (this.$tokenIndex >= this.$rowTokens.length) {                                                           // 5521
            this.$row += 1;                                                                                            // 5522
            if (!rowCount)                                                                                             // 5523
                rowCount = this.$session.getLength();                                                                  // 5524
            if (this.$row >= rowCount) {                                                                               // 5525
                this.$row = rowCount - 1;                                                                              // 5526
                return null;                                                                                           // 5527
            }                                                                                                          // 5528
                                                                                                                       // 5529
            this.$rowTokens = this.$session.getTokens(this.$row);                                                      // 5530
            this.$tokenIndex = 0;                                                                                      // 5531
        }                                                                                                              // 5532
                                                                                                                       // 5533
        return this.$rowTokens[this.$tokenIndex];                                                                      // 5534
    };                                                                                                                 // 5535
    this.getCurrentToken = function () {                                                                               // 5536
        return this.$rowTokens[this.$tokenIndex];                                                                      // 5537
    };                                                                                                                 // 5538
    this.getCurrentTokenRow = function () {                                                                            // 5539
        return this.$row;                                                                                              // 5540
    };                                                                                                                 // 5541
    this.getCurrentTokenColumn = function() {                                                                          // 5542
        var rowTokens = this.$rowTokens;                                                                               // 5543
        var tokenIndex = this.$tokenIndex;                                                                             // 5544
        var column = rowTokens[tokenIndex].start;                                                                      // 5545
        if (column !== undefined)                                                                                      // 5546
            return column;                                                                                             // 5547
                                                                                                                       // 5548
        column = 0;                                                                                                    // 5549
        while (tokenIndex > 0) {                                                                                       // 5550
            tokenIndex -= 1;                                                                                           // 5551
            column += rowTokens[tokenIndex].value.length;                                                              // 5552
        }                                                                                                              // 5553
                                                                                                                       // 5554
        return column;                                                                                                 // 5555
    };                                                                                                                 // 5556
                                                                                                                       // 5557
}).call(TokenIterator.prototype);                                                                                      // 5558
                                                                                                                       // 5559
exports.TokenIterator = TokenIterator;                                                                                 // 5560
});                                                                                                                    // 5561
                                                                                                                       // 5562
define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 5564
                                                                                                                       // 5565
var Tokenizer = require("../tokenizer").Tokenizer;                                                                     // 5566
var TextHighlightRules = require("./text_highlight_rules").TextHighlightRules;                                         // 5567
var Behaviour = require("./behaviour").Behaviour;                                                                      // 5568
var unicode = require("../unicode");                                                                                   // 5569
var lang = require("../lib/lang");                                                                                     // 5570
var TokenIterator = require("../token_iterator").TokenIterator;                                                        // 5571
var Range = require("../range").Range;                                                                                 // 5572
                                                                                                                       // 5573
var Mode = function() {                                                                                                // 5574
    this.HighlightRules = TextHighlightRules;                                                                          // 5575
    this.$behaviour = new Behaviour();                                                                                 // 5576
};                                                                                                                     // 5577
                                                                                                                       // 5578
(function() {                                                                                                          // 5579
                                                                                                                       // 5580
    this.tokenRe = new RegExp("^["                                                                                     // 5581
        + unicode.packages.L                                                                                           // 5582
        + unicode.packages.Mn + unicode.packages.Mc                                                                    // 5583
        + unicode.packages.Nd                                                                                          // 5584
        + unicode.packages.Pc + "\\$_]+", "g"                                                                          // 5585
    );                                                                                                                 // 5586
                                                                                                                       // 5587
    this.nonTokenRe = new RegExp("^(?:[^"                                                                              // 5588
        + unicode.packages.L                                                                                           // 5589
        + unicode.packages.Mn + unicode.packages.Mc                                                                    // 5590
        + unicode.packages.Nd                                                                                          // 5591
        + unicode.packages.Pc + "\\$_]|\\s])+", "g"                                                                    // 5592
    );                                                                                                                 // 5593
                                                                                                                       // 5594
    this.getTokenizer = function() {                                                                                   // 5595
        if (!this.$tokenizer) {                                                                                        // 5596
            this.$highlightRules = this.$highlightRules || new this.HighlightRules();                                  // 5597
            this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());                                          // 5598
        }                                                                                                              // 5599
        return this.$tokenizer;                                                                                        // 5600
    };                                                                                                                 // 5601
                                                                                                                       // 5602
    this.lineCommentStart = "";                                                                                        // 5603
    this.blockComment = "";                                                                                            // 5604
                                                                                                                       // 5605
    this.toggleCommentLines = function(state, session, startRow, endRow) {                                             // 5606
        var doc = session.doc;                                                                                         // 5607
                                                                                                                       // 5608
        var ignoreBlankLines = true;                                                                                   // 5609
        var shouldRemove = true;                                                                                       // 5610
        var minIndent = Infinity;                                                                                      // 5611
        var tabSize = session.getTabSize();                                                                            // 5612
        var insertAtTabStop = false;                                                                                   // 5613
                                                                                                                       // 5614
        if (!this.lineCommentStart) {                                                                                  // 5615
            if (!this.blockComment)                                                                                    // 5616
                return false;                                                                                          // 5617
            var lineCommentStart = this.blockComment.start;                                                            // 5618
            var lineCommentEnd = this.blockComment.end;                                                                // 5619
            var regexpStart = new RegExp("^(\\s*)(?:" + lang.escapeRegExp(lineCommentStart) + ")");                    // 5620
            var regexpEnd = new RegExp("(?:" + lang.escapeRegExp(lineCommentEnd) + ")\\s*$");                          // 5621
                                                                                                                       // 5622
            var comment = function(line, i) {                                                                          // 5623
                if (testRemove(line, i))                                                                               // 5624
                    return;                                                                                            // 5625
                if (!ignoreBlankLines || /\S/.test(line)) {                                                            // 5626
                    doc.insertInLine({row: i, column: line.length}, lineCommentEnd);                                   // 5627
                    doc.insertInLine({row: i, column: minIndent}, lineCommentStart);                                   // 5628
                }                                                                                                      // 5629
            };                                                                                                         // 5630
                                                                                                                       // 5631
            var uncomment = function(line, i) {                                                                        // 5632
                var m;                                                                                                 // 5633
                if (m = line.match(regexpEnd))                                                                         // 5634
                    doc.removeInLine(i, line.length - m[0].length, line.length);                                       // 5635
                if (m = line.match(regexpStart))                                                                       // 5636
                    doc.removeInLine(i, m[1].length, m[0].length);                                                     // 5637
            };                                                                                                         // 5638
                                                                                                                       // 5639
            var testRemove = function(line, row) {                                                                     // 5640
                if (regexpStart.test(line))                                                                            // 5641
                    return true;                                                                                       // 5642
                var tokens = session.getTokens(row);                                                                   // 5643
                for (var i = 0; i < tokens.length; i++) {                                                              // 5644
                    if (tokens[i].type === 'comment')                                                                  // 5645
                        return true;                                                                                   // 5646
                }                                                                                                      // 5647
            };                                                                                                         // 5648
        } else {                                                                                                       // 5649
            if (Array.isArray(this.lineCommentStart)) {                                                                // 5650
                var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join("|");                              // 5651
                var lineCommentStart = this.lineCommentStart[0];                                                       // 5652
            } else {                                                                                                   // 5653
                var regexpStart = lang.escapeRegExp(this.lineCommentStart);                                            // 5654
                var lineCommentStart = this.lineCommentStart;                                                          // 5655
            }                                                                                                          // 5656
            regexpStart = new RegExp("^(\\s*)(?:" + regexpStart + ") ?");                                              // 5657
                                                                                                                       // 5658
            insertAtTabStop = session.getUseSoftTabs();                                                                // 5659
                                                                                                                       // 5660
            var uncomment = function(line, i) {                                                                        // 5661
                var m = line.match(regexpStart);                                                                       // 5662
                if (!m) return;                                                                                        // 5663
                var start = m[1].length, end = m[0].length;                                                            // 5664
                if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == " ")                                      // 5665
                    end--;                                                                                             // 5666
                doc.removeInLine(i, start, end);                                                                       // 5667
            };                                                                                                         // 5668
            var commentWithSpace = lineCommentStart + " ";                                                             // 5669
            var comment = function(line, i) {                                                                          // 5670
                if (!ignoreBlankLines || /\S/.test(line)) {                                                            // 5671
                    if (shouldInsertSpace(line, minIndent, minIndent))                                                 // 5672
                        doc.insertInLine({row: i, column: minIndent}, commentWithSpace);                               // 5673
                    else                                                                                               // 5674
                        doc.insertInLine({row: i, column: minIndent}, lineCommentStart);                               // 5675
                }                                                                                                      // 5676
            };                                                                                                         // 5677
            var testRemove = function(line, i) {                                                                       // 5678
                return regexpStart.test(line);                                                                         // 5679
            };                                                                                                         // 5680
                                                                                                                       // 5681
            var shouldInsertSpace = function(line, before, after) {                                                    // 5682
                var spaces = 0;                                                                                        // 5683
                while (before-- && line.charAt(before) == " ")                                                         // 5684
                    spaces++;                                                                                          // 5685
                if (spaces % tabSize != 0)                                                                             // 5686
                    return false;                                                                                      // 5687
                var spaces = 0;                                                                                        // 5688
                while (line.charAt(after++) == " ")                                                                    // 5689
                    spaces++;                                                                                          // 5690
                if (tabSize > 2)                                                                                       // 5691
                    return spaces % tabSize != tabSize - 1;                                                            // 5692
                else                                                                                                   // 5693
                    return spaces % tabSize == 0;                                                                      // 5694
                return true;                                                                                           // 5695
            };                                                                                                         // 5696
        }                                                                                                              // 5697
                                                                                                                       // 5698
        function iter(fun) {                                                                                           // 5699
            for (var i = startRow; i <= endRow; i++)                                                                   // 5700
                fun(doc.getLine(i), i);                                                                                // 5701
        }                                                                                                              // 5702
                                                                                                                       // 5703
                                                                                                                       // 5704
        var minEmptyLength = Infinity;                                                                                 // 5705
        iter(function(line, i) {                                                                                       // 5706
            var indent = line.search(/\S/);                                                                            // 5707
            if (indent !== -1) {                                                                                       // 5708
                if (indent < minIndent)                                                                                // 5709
                    minIndent = indent;                                                                                // 5710
                if (shouldRemove && !testRemove(line, i))                                                              // 5711
                    shouldRemove = false;                                                                              // 5712
            } else if (minEmptyLength > line.length) {                                                                 // 5713
                minEmptyLength = line.length;                                                                          // 5714
            }                                                                                                          // 5715
        });                                                                                                            // 5716
                                                                                                                       // 5717
        if (minIndent == Infinity) {                                                                                   // 5718
            minIndent = minEmptyLength;                                                                                // 5719
            ignoreBlankLines = false;                                                                                  // 5720
            shouldRemove = false;                                                                                      // 5721
        }                                                                                                              // 5722
                                                                                                                       // 5723
        if (insertAtTabStop && minIndent % tabSize != 0)                                                               // 5724
            minIndent = Math.floor(minIndent / tabSize) * tabSize;                                                     // 5725
                                                                                                                       // 5726
        iter(shouldRemove ? uncomment : comment);                                                                      // 5727
    };                                                                                                                 // 5728
                                                                                                                       // 5729
    this.toggleBlockComment = function(state, session, range, cursor) {                                                // 5730
        var comment = this.blockComment;                                                                               // 5731
        if (!comment)                                                                                                  // 5732
            return;                                                                                                    // 5733
        if (!comment.start && comment[0])                                                                              // 5734
            comment = comment[0];                                                                                      // 5735
                                                                                                                       // 5736
        var iterator = new TokenIterator(session, cursor.row, cursor.column);                                          // 5737
        var token = iterator.getCurrentToken();                                                                        // 5738
                                                                                                                       // 5739
        var sel = session.selection;                                                                                   // 5740
        var initialRange = session.selection.toOrientedRange();                                                        // 5741
        var startRow, colDiff;                                                                                         // 5742
                                                                                                                       // 5743
        if (token && /comment/.test(token.type)) {                                                                     // 5744
            var startRange, endRange;                                                                                  // 5745
            while (token && /comment/.test(token.type)) {                                                              // 5746
                var i = token.value.indexOf(comment.start);                                                            // 5747
                if (i != -1) {                                                                                         // 5748
                    var row = iterator.getCurrentTokenRow();                                                           // 5749
                    var column = iterator.getCurrentTokenColumn() + i;                                                 // 5750
                    startRange = new Range(row, column, row, column + comment.start.length);                           // 5751
                    break;                                                                                             // 5752
                }                                                                                                      // 5753
                token = iterator.stepBackward();                                                                       // 5754
            }                                                                                                          // 5755
                                                                                                                       // 5756
            var iterator = new TokenIterator(session, cursor.row, cursor.column);                                      // 5757
            var token = iterator.getCurrentToken();                                                                    // 5758
            while (token && /comment/.test(token.type)) {                                                              // 5759
                var i = token.value.indexOf(comment.end);                                                              // 5760
                if (i != -1) {                                                                                         // 5761
                    var row = iterator.getCurrentTokenRow();                                                           // 5762
                    var column = iterator.getCurrentTokenColumn() + i;                                                 // 5763
                    endRange = new Range(row, column, row, column + comment.end.length);                               // 5764
                    break;                                                                                             // 5765
                }                                                                                                      // 5766
                token = iterator.stepForward();                                                                        // 5767
            }                                                                                                          // 5768
            if (endRange)                                                                                              // 5769
                session.remove(endRange);                                                                              // 5770
            if (startRange) {                                                                                          // 5771
                session.remove(startRange);                                                                            // 5772
                startRow = startRange.start.row;                                                                       // 5773
                colDiff = -comment.start.length;                                                                       // 5774
            }                                                                                                          // 5775
        } else {                                                                                                       // 5776
            colDiff = comment.start.length;                                                                            // 5777
            startRow = range.start.row;                                                                                // 5778
            session.insert(range.end, comment.end);                                                                    // 5779
            session.insert(range.start, comment.start);                                                                // 5780
        }                                                                                                              // 5781
        if (initialRange.start.row == startRow)                                                                        // 5782
            initialRange.start.column += colDiff;                                                                      // 5783
        if (initialRange.end.row == startRow)                                                                          // 5784
            initialRange.end.column += colDiff;                                                                        // 5785
        session.selection.fromOrientedRange(initialRange);                                                             // 5786
    };                                                                                                                 // 5787
                                                                                                                       // 5788
    this.getNextLineIndent = function(state, line, tab) {                                                              // 5789
        return this.$getIndent(line);                                                                                  // 5790
    };                                                                                                                 // 5791
                                                                                                                       // 5792
    this.checkOutdent = function(state, line, input) {                                                                 // 5793
        return false;                                                                                                  // 5794
    };                                                                                                                 // 5795
                                                                                                                       // 5796
    this.autoOutdent = function(state, doc, row) {                                                                     // 5797
    };                                                                                                                 // 5798
                                                                                                                       // 5799
    this.$getIndent = function(line) {                                                                                 // 5800
        return line.match(/^\s*/)[0];                                                                                  // 5801
    };                                                                                                                 // 5802
                                                                                                                       // 5803
    this.createWorker = function(session) {                                                                            // 5804
        return null;                                                                                                   // 5805
    };                                                                                                                 // 5806
                                                                                                                       // 5807
    this.createModeDelegates = function (mapping) {                                                                    // 5808
        this.$embeds = [];                                                                                             // 5809
        this.$modes = {};                                                                                              // 5810
        for (var i in mapping) {                                                                                       // 5811
            if (mapping[i]) {                                                                                          // 5812
                this.$embeds.push(i);                                                                                  // 5813
                this.$modes[i] = new mapping[i]();                                                                     // 5814
            }                                                                                                          // 5815
        }                                                                                                              // 5816
                                                                                                                       // 5817
        var delegations = ['toggleBlockComment', 'toggleCommentLines', 'getNextLineIndent',                            // 5818
            'checkOutdent', 'autoOutdent', 'transformAction', 'getCompletions'];                                       // 5819
                                                                                                                       // 5820
        for (var i = 0; i < delegations.length; i++) {                                                                 // 5821
            (function(scope) {                                                                                         // 5822
              var functionName = delegations[i];                                                                       // 5823
              var defaultHandler = scope[functionName];                                                                // 5824
              scope[delegations[i]] = function() {                                                                     // 5825
                  return this.$delegator(functionName, arguments, defaultHandler);                                     // 5826
              };                                                                                                       // 5827
            } (this));                                                                                                 // 5828
        }                                                                                                              // 5829
    };                                                                                                                 // 5830
                                                                                                                       // 5831
    this.$delegator = function(method, args, defaultHandler) {                                                         // 5832
        var state = args[0];                                                                                           // 5833
        if (typeof state != "string")                                                                                  // 5834
            state = state[0];                                                                                          // 5835
        for (var i = 0; i < this.$embeds.length; i++) {                                                                // 5836
            if (!this.$modes[this.$embeds[i]]) continue;                                                               // 5837
                                                                                                                       // 5838
            var split = state.split(this.$embeds[i]);                                                                  // 5839
            if (!split[0] && split[1]) {                                                                               // 5840
                args[0] = split[1];                                                                                    // 5841
                var mode = this.$modes[this.$embeds[i]];                                                               // 5842
                return mode[method].apply(mode, args);                                                                 // 5843
            }                                                                                                          // 5844
        }                                                                                                              // 5845
        var ret = defaultHandler.apply(this, args);                                                                    // 5846
        return defaultHandler ? ret : undefined;                                                                       // 5847
    };                                                                                                                 // 5848
                                                                                                                       // 5849
    this.transformAction = function(state, action, editor, session, param) {                                           // 5850
        if (this.$behaviour) {                                                                                         // 5851
            var behaviours = this.$behaviour.getBehaviours();                                                          // 5852
            for (var key in behaviours) {                                                                              // 5853
                if (behaviours[key][action]) {                                                                         // 5854
                    var ret = behaviours[key][action].apply(this, arguments);                                          // 5855
                    if (ret) {                                                                                         // 5856
                        return ret;                                                                                    // 5857
                    }                                                                                                  // 5858
                }                                                                                                      // 5859
            }                                                                                                          // 5860
        }                                                                                                              // 5861
    };                                                                                                                 // 5862
                                                                                                                       // 5863
    this.getKeywords = function(append) {                                                                              // 5864
        if (!this.completionKeywords) {                                                                                // 5865
            var rules = this.$tokenizer.rules;                                                                         // 5866
            var completionKeywords = [];                                                                               // 5867
            for (var rule in rules) {                                                                                  // 5868
                var ruleItr = rules[rule];                                                                             // 5869
                for (var r = 0, l = ruleItr.length; r < l; r++) {                                                      // 5870
                    if (typeof ruleItr[r].token === "string") {                                                        // 5871
                        if (/keyword|support|storage/.test(ruleItr[r].token))                                          // 5872
                            completionKeywords.push(ruleItr[r].regex);                                                 // 5873
                    }                                                                                                  // 5874
                    else if (typeof ruleItr[r].token === "object") {                                                   // 5875
                        for (var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++) {                         // 5876
                            if (/keyword|support|storage/.test(ruleItr[r].token[a])) {                                 // 5877
                                var rule = ruleItr[r].regex.match(/\(.+?\)/g)[a];                                      // 5878
                                completionKeywords.push(rule.substr(1, rule.length - 2));                              // 5879
                            }                                                                                          // 5880
                        }                                                                                              // 5881
                    }                                                                                                  // 5882
                }                                                                                                      // 5883
            }                                                                                                          // 5884
            this.completionKeywords = completionKeywords;                                                              // 5885
        }                                                                                                              // 5886
        if (!append)                                                                                                   // 5887
            return this.$keywordList;                                                                                  // 5888
        return completionKeywords.concat(this.$keywordList || []);                                                     // 5889
    };                                                                                                                 // 5890
                                                                                                                       // 5891
    this.$createKeywordList = function() {                                                                             // 5892
        if (!this.$highlightRules)                                                                                     // 5893
            this.getTokenizer();                                                                                       // 5894
        return this.$keywordList = this.$highlightRules.$keywordList || [];                                            // 5895
    };                                                                                                                 // 5896
                                                                                                                       // 5897
    this.getCompletions = function(state, session, pos, prefix) {                                                      // 5898
        var keywords = this.$keywordList || this.$createKeywordList();                                                 // 5899
        return keywords.map(function(word) {                                                                           // 5900
            return {                                                                                                   // 5901
                name: word,                                                                                            // 5902
                value: word,                                                                                           // 5903
                score: 0,                                                                                              // 5904
                meta: "keyword"                                                                                        // 5905
            };                                                                                                         // 5906
        });                                                                                                            // 5907
    };                                                                                                                 // 5908
                                                                                                                       // 5909
    this.$id = "ace/mode/text";                                                                                        // 5910
}).call(Mode.prototype);                                                                                               // 5911
                                                                                                                       // 5912
exports.Mode = Mode;                                                                                                   // 5913
});                                                                                                                    // 5914
                                                                                                                       // 5915
define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 5917
                                                                                                                       // 5918
var oop = require("./lib/oop");                                                                                        // 5919
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 5920
                                                                                                                       // 5921
var Anchor = exports.Anchor = function(doc, row, column) {                                                             // 5922
    this.$onChange = this.onChange.bind(this);                                                                         // 5923
    this.attach(doc);                                                                                                  // 5924
                                                                                                                       // 5925
    if (typeof column == "undefined")                                                                                  // 5926
        this.setPosition(row.row, row.column);                                                                         // 5927
    else                                                                                                               // 5928
        this.setPosition(row, column);                                                                                 // 5929
};                                                                                                                     // 5930
                                                                                                                       // 5931
(function() {                                                                                                          // 5932
                                                                                                                       // 5933
    oop.implement(this, EventEmitter);                                                                                 // 5934
    this.getPosition = function() {                                                                                    // 5935
        return this.$clipPositionToDocument(this.row, this.column);                                                    // 5936
    };                                                                                                                 // 5937
    this.getDocument = function() {                                                                                    // 5938
        return this.document;                                                                                          // 5939
    };                                                                                                                 // 5940
    this.$insertRight = false;                                                                                         // 5941
    this.onChange = function(e) {                                                                                      // 5942
        var delta = e.data;                                                                                            // 5943
        var range = delta.range;                                                                                       // 5944
                                                                                                                       // 5945
        if (range.start.row == range.end.row && range.start.row != this.row)                                           // 5946
            return;                                                                                                    // 5947
                                                                                                                       // 5948
        if (range.start.row > this.row)                                                                                // 5949
            return;                                                                                                    // 5950
                                                                                                                       // 5951
        if (range.start.row == this.row && range.start.column > this.column)                                           // 5952
            return;                                                                                                    // 5953
                                                                                                                       // 5954
        var row = this.row;                                                                                            // 5955
        var column = this.column;                                                                                      // 5956
        var start = range.start;                                                                                       // 5957
        var end = range.end;                                                                                           // 5958
                                                                                                                       // 5959
        if (delta.action === "insertText") {                                                                           // 5960
            if (start.row === row && start.column <= column) {                                                         // 5961
                if (start.column === column && this.$insertRight) {                                                    // 5962
                } else if (start.row === end.row) {                                                                    // 5963
                    column += end.column - start.column;                                                               // 5964
                } else {                                                                                               // 5965
                    column -= start.column;                                                                            // 5966
                    row += end.row - start.row;                                                                        // 5967
                }                                                                                                      // 5968
            } else if (start.row !== end.row && start.row < row) {                                                     // 5969
                row += end.row - start.row;                                                                            // 5970
            }                                                                                                          // 5971
        } else if (delta.action === "insertLines") {                                                                   // 5972
            if (start.row === row && column === 0 && this.$insertRight) {                                              // 5973
            }                                                                                                          // 5974
            else if (start.row <= row) {                                                                               // 5975
                row += end.row - start.row;                                                                            // 5976
            }                                                                                                          // 5977
        } else if (delta.action === "removeText") {                                                                    // 5978
            if (start.row === row && start.column < column) {                                                          // 5979
                if (end.column >= column)                                                                              // 5980
                    column = start.column;                                                                             // 5981
                else                                                                                                   // 5982
                    column = Math.max(0, column - (end.column - start.column));                                        // 5983
                                                                                                                       // 5984
            } else if (start.row !== end.row && start.row < row) {                                                     // 5985
                if (end.row === row)                                                                                   // 5986
                    column = Math.max(0, column - end.column) + start.column;                                          // 5987
                row -= (end.row - start.row);                                                                          // 5988
            } else if (end.row === row) {                                                                              // 5989
                row -= end.row - start.row;                                                                            // 5990
                column = Math.max(0, column - end.column) + start.column;                                              // 5991
            }                                                                                                          // 5992
        } else if (delta.action == "removeLines") {                                                                    // 5993
            if (start.row <= row) {                                                                                    // 5994
                if (end.row <= row)                                                                                    // 5995
                    row -= end.row - start.row;                                                                        // 5996
                else {                                                                                                 // 5997
                    row = start.row;                                                                                   // 5998
                    column = 0;                                                                                        // 5999
                }                                                                                                      // 6000
            }                                                                                                          // 6001
        }                                                                                                              // 6002
                                                                                                                       // 6003
        this.setPosition(row, column, true);                                                                           // 6004
    };                                                                                                                 // 6005
    this.setPosition = function(row, column, noClip) {                                                                 // 6006
        var pos;                                                                                                       // 6007
        if (noClip) {                                                                                                  // 6008
            pos = {                                                                                                    // 6009
                row: row,                                                                                              // 6010
                column: column                                                                                         // 6011
            };                                                                                                         // 6012
        } else {                                                                                                       // 6013
            pos = this.$clipPositionToDocument(row, column);                                                           // 6014
        }                                                                                                              // 6015
                                                                                                                       // 6016
        if (this.row == pos.row && this.column == pos.column)                                                          // 6017
            return;                                                                                                    // 6018
                                                                                                                       // 6019
        var old = {                                                                                                    // 6020
            row: this.row,                                                                                             // 6021
            column: this.column                                                                                        // 6022
        };                                                                                                             // 6023
                                                                                                                       // 6024
        this.row = pos.row;                                                                                            // 6025
        this.column = pos.column;                                                                                      // 6026
        this._signal("change", {                                                                                       // 6027
            old: old,                                                                                                  // 6028
            value: pos                                                                                                 // 6029
        });                                                                                                            // 6030
    };                                                                                                                 // 6031
    this.detach = function() {                                                                                         // 6032
        this.document.removeEventListener("change", this.$onChange);                                                   // 6033
    };                                                                                                                 // 6034
    this.attach = function(doc) {                                                                                      // 6035
        this.document = doc || this.document;                                                                          // 6036
        this.document.on("change", this.$onChange);                                                                    // 6037
    };                                                                                                                 // 6038
    this.$clipPositionToDocument = function(row, column) {                                                             // 6039
        var pos = {};                                                                                                  // 6040
                                                                                                                       // 6041
        if (row >= this.document.getLength()) {                                                                        // 6042
            pos.row = Math.max(0, this.document.getLength() - 1);                                                      // 6043
            pos.column = this.document.getLine(pos.row).length;                                                        // 6044
        }                                                                                                              // 6045
        else if (row < 0) {                                                                                            // 6046
            pos.row = 0;                                                                                               // 6047
            pos.column = 0;                                                                                            // 6048
        }                                                                                                              // 6049
        else {                                                                                                         // 6050
            pos.row = row;                                                                                             // 6051
            pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));                         // 6052
        }                                                                                                              // 6053
                                                                                                                       // 6054
        if (column < 0)                                                                                                // 6055
            pos.column = 0;                                                                                            // 6056
                                                                                                                       // 6057
        return pos;                                                                                                    // 6058
    };                                                                                                                 // 6059
                                                                                                                       // 6060
}).call(Anchor.prototype);                                                                                             // 6061
                                                                                                                       // 6062
});                                                                                                                    // 6063
                                                                                                                       // 6064
define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"], function(require, exports, module) {
"use strict";                                                                                                          // 6066
                                                                                                                       // 6067
var oop = require("./lib/oop");                                                                                        // 6068
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 6069
var Range = require("./range").Range;                                                                                  // 6070
var Anchor = require("./anchor").Anchor;                                                                               // 6071
                                                                                                                       // 6072
var Document = function(text) {                                                                                        // 6073
    this.$lines = [];                                                                                                  // 6074
    if (text.length === 0) {                                                                                           // 6075
        this.$lines = [""];                                                                                            // 6076
    } else if (Array.isArray(text)) {                                                                                  // 6077
        this._insertLines(0, text);                                                                                    // 6078
    } else {                                                                                                           // 6079
        this.insert({row: 0, column:0}, text);                                                                         // 6080
    }                                                                                                                  // 6081
};                                                                                                                     // 6082
                                                                                                                       // 6083
(function() {                                                                                                          // 6084
                                                                                                                       // 6085
    oop.implement(this, EventEmitter);                                                                                 // 6086
    this.setValue = function(text) {                                                                                   // 6087
        var len = this.getLength();                                                                                    // 6088
        this.remove(new Range(0, 0, len, this.getLine(len-1).length));                                                 // 6089
        this.insert({row: 0, column:0}, text);                                                                         // 6090
    };                                                                                                                 // 6091
    this.getValue = function() {                                                                                       // 6092
        return this.getAllLines().join(this.getNewLineCharacter());                                                    // 6093
    };                                                                                                                 // 6094
    this.createAnchor = function(row, column) {                                                                        // 6095
        return new Anchor(this, row, column);                                                                          // 6096
    };                                                                                                                 // 6097
    if ("aaa".split(/a/).length === 0)                                                                                 // 6098
        this.$split = function(text) {                                                                                 // 6099
            return text.replace(/\r\n|\r/g, "\n").split("\n");                                                         // 6100
        };                                                                                                             // 6101
    else                                                                                                               // 6102
        this.$split = function(text) {                                                                                 // 6103
            return text.split(/\r\n|\r|\n/);                                                                           // 6104
        };                                                                                                             // 6105
                                                                                                                       // 6106
                                                                                                                       // 6107
    this.$detectNewLine = function(text) {                                                                             // 6108
        var match = text.match(/^.*?(\r\n|\r|\n)/m);                                                                   // 6109
        this.$autoNewLine = match ? match[1] : "\n";                                                                   // 6110
        this._signal("changeNewLineMode");                                                                             // 6111
    };                                                                                                                 // 6112
    this.getNewLineCharacter = function() {                                                                            // 6113
        switch (this.$newLineMode) {                                                                                   // 6114
          case "windows":                                                                                              // 6115
            return "\r\n";                                                                                             // 6116
          case "unix":                                                                                                 // 6117
            return "\n";                                                                                               // 6118
          default:                                                                                                     // 6119
            return this.$autoNewLine || "\n";                                                                          // 6120
        }                                                                                                              // 6121
    };                                                                                                                 // 6122
                                                                                                                       // 6123
    this.$autoNewLine = "";                                                                                            // 6124
    this.$newLineMode = "auto";                                                                                        // 6125
    this.setNewLineMode = function(newLineMode) {                                                                      // 6126
        if (this.$newLineMode === newLineMode)                                                                         // 6127
            return;                                                                                                    // 6128
                                                                                                                       // 6129
        this.$newLineMode = newLineMode;                                                                               // 6130
        this._signal("changeNewLineMode");                                                                             // 6131
    };                                                                                                                 // 6132
    this.getNewLineMode = function() {                                                                                 // 6133
        return this.$newLineMode;                                                                                      // 6134
    };                                                                                                                 // 6135
    this.isNewLine = function(text) {                                                                                  // 6136
        return (text == "\r\n" || text == "\r" || text == "\n");                                                       // 6137
    };                                                                                                                 // 6138
    this.getLine = function(row) {                                                                                     // 6139
        return this.$lines[row] || "";                                                                                 // 6140
    };                                                                                                                 // 6141
    this.getLines = function(firstRow, lastRow) {                                                                      // 6142
        return this.$lines.slice(firstRow, lastRow + 1);                                                               // 6143
    };                                                                                                                 // 6144
    this.getAllLines = function() {                                                                                    // 6145
        return this.getLines(0, this.getLength());                                                                     // 6146
    };                                                                                                                 // 6147
    this.getLength = function() {                                                                                      // 6148
        return this.$lines.length;                                                                                     // 6149
    };                                                                                                                 // 6150
    this.getTextRange = function(range) {                                                                              // 6151
        if (range.start.row == range.end.row) {                                                                        // 6152
            return this.getLine(range.start.row)                                                                       // 6153
                .substring(range.start.column, range.end.column);                                                      // 6154
        }                                                                                                              // 6155
        var lines = this.getLines(range.start.row, range.end.row);                                                     // 6156
        lines[0] = (lines[0] || "").substring(range.start.column);                                                     // 6157
        var l = lines.length - 1;                                                                                      // 6158
        if (range.end.row - range.start.row == l)                                                                      // 6159
            lines[l] = lines[l].substring(0, range.end.column);                                                        // 6160
        return lines.join(this.getNewLineCharacter());                                                                 // 6161
    };                                                                                                                 // 6162
                                                                                                                       // 6163
    this.$clipPosition = function(position) {                                                                          // 6164
        var length = this.getLength();                                                                                 // 6165
        if (position.row >= length) {                                                                                  // 6166
            position.row = Math.max(0, length - 1);                                                                    // 6167
            position.column = this.getLine(length-1).length;                                                           // 6168
        } else if (position.row < 0)                                                                                   // 6169
            position.row = 0;                                                                                          // 6170
        return position;                                                                                               // 6171
    };                                                                                                                 // 6172
    this.insert = function(position, text) {                                                                           // 6173
        if (!text || text.length === 0)                                                                                // 6174
            return position;                                                                                           // 6175
                                                                                                                       // 6176
        position = this.$clipPosition(position);                                                                       // 6177
        if (this.getLength() <= 1)                                                                                     // 6178
            this.$detectNewLine(text);                                                                                 // 6179
                                                                                                                       // 6180
        var lines = this.$split(text);                                                                                 // 6181
        var firstLine = lines.splice(0, 1)[0];                                                                         // 6182
        var lastLine = lines.length == 0 ? null : lines.splice(lines.length - 1, 1)[0];                                // 6183
                                                                                                                       // 6184
        position = this.insertInLine(position, firstLine);                                                             // 6185
        if (lastLine !== null) {                                                                                       // 6186
            position = this.insertNewLine(position); // terminate first line                                           // 6187
            position = this._insertLines(position.row, lines);                                                         // 6188
            position = this.insertInLine(position, lastLine || "");                                                    // 6189
        }                                                                                                              // 6190
        return position;                                                                                               // 6191
    };                                                                                                                 // 6192
    this.insertLines = function(row, lines) {                                                                          // 6193
        if (row >= this.getLength())                                                                                   // 6194
            return this.insert({row: row, column: 0}, "\n" + lines.join("\n"));                                        // 6195
        return this._insertLines(Math.max(row, 0), lines);                                                             // 6196
    };                                                                                                                 // 6197
    this._insertLines = function(row, lines) {                                                                         // 6198
        if (lines.length == 0)                                                                                         // 6199
            return {row: row, column: 0};                                                                              // 6200
        while (lines.length > 0xF000) {                                                                                // 6201
            var end = this._insertLines(row, lines.slice(0, 0xF000));                                                  // 6202
            lines = lines.slice(0xF000);                                                                               // 6203
            row = end.row;                                                                                             // 6204
        }                                                                                                              // 6205
                                                                                                                       // 6206
        var args = [row, 0];                                                                                           // 6207
        args.push.apply(args, lines);                                                                                  // 6208
        this.$lines.splice.apply(this.$lines, args);                                                                   // 6209
                                                                                                                       // 6210
        var range = new Range(row, 0, row + lines.length, 0);                                                          // 6211
        var delta = {                                                                                                  // 6212
            action: "insertLines",                                                                                     // 6213
            range: range,                                                                                              // 6214
            lines: lines                                                                                               // 6215
        };                                                                                                             // 6216
        this._signal("change", { data: delta });                                                                       // 6217
        return range.end;                                                                                              // 6218
    };                                                                                                                 // 6219
    this.insertNewLine = function(position) {                                                                          // 6220
        position = this.$clipPosition(position);                                                                       // 6221
        var line = this.$lines[position.row] || "";                                                                    // 6222
                                                                                                                       // 6223
        this.$lines[position.row] = line.substring(0, position.column);                                                // 6224
        this.$lines.splice(position.row + 1, 0, line.substring(position.column, line.length));                         // 6225
                                                                                                                       // 6226
        var end = {                                                                                                    // 6227
            row : position.row + 1,                                                                                    // 6228
            column : 0                                                                                                 // 6229
        };                                                                                                             // 6230
                                                                                                                       // 6231
        var delta = {                                                                                                  // 6232
            action: "insertText",                                                                                      // 6233
            range: Range.fromPoints(position, end),                                                                    // 6234
            text: this.getNewLineCharacter()                                                                           // 6235
        };                                                                                                             // 6236
        this._signal("change", { data: delta });                                                                       // 6237
                                                                                                                       // 6238
        return end;                                                                                                    // 6239
    };                                                                                                                 // 6240
    this.insertInLine = function(position, text) {                                                                     // 6241
        if (text.length == 0)                                                                                          // 6242
            return position;                                                                                           // 6243
                                                                                                                       // 6244
        var line = this.$lines[position.row] || "";                                                                    // 6245
                                                                                                                       // 6246
        this.$lines[position.row] = line.substring(0, position.column) + text                                          // 6247
                + line.substring(position.column);                                                                     // 6248
                                                                                                                       // 6249
        var end = {                                                                                                    // 6250
            row : position.row,                                                                                        // 6251
            column : position.column + text.length                                                                     // 6252
        };                                                                                                             // 6253
                                                                                                                       // 6254
        var delta = {                                                                                                  // 6255
            action: "insertText",                                                                                      // 6256
            range: Range.fromPoints(position, end),                                                                    // 6257
            text: text                                                                                                 // 6258
        };                                                                                                             // 6259
        this._signal("change", { data: delta });                                                                       // 6260
                                                                                                                       // 6261
        return end;                                                                                                    // 6262
    };                                                                                                                 // 6263
    this.remove = function(range) {                                                                                    // 6264
        if (!(range instanceof Range))                                                                                 // 6265
            range = Range.fromPoints(range.start, range.end);                                                          // 6266
        range.start = this.$clipPosition(range.start);                                                                 // 6267
        range.end = this.$clipPosition(range.end);                                                                     // 6268
                                                                                                                       // 6269
        if (range.isEmpty())                                                                                           // 6270
            return range.start;                                                                                        // 6271
                                                                                                                       // 6272
        var firstRow = range.start.row;                                                                                // 6273
        var lastRow = range.end.row;                                                                                   // 6274
                                                                                                                       // 6275
        if (range.isMultiLine()) {                                                                                     // 6276
            var firstFullRow = range.start.column == 0 ? firstRow : firstRow + 1;                                      // 6277
            var lastFullRow = lastRow - 1;                                                                             // 6278
                                                                                                                       // 6279
            if (range.end.column > 0)                                                                                  // 6280
                this.removeInLine(lastRow, 0, range.end.column);                                                       // 6281
                                                                                                                       // 6282
            if (lastFullRow >= firstFullRow)                                                                           // 6283
                this._removeLines(firstFullRow, lastFullRow);                                                          // 6284
                                                                                                                       // 6285
            if (firstFullRow != firstRow) {                                                                            // 6286
                this.removeInLine(firstRow, range.start.column, this.getLine(firstRow).length);                        // 6287
                this.removeNewLine(range.start.row);                                                                   // 6288
            }                                                                                                          // 6289
        }                                                                                                              // 6290
        else {                                                                                                         // 6291
            this.removeInLine(firstRow, range.start.column, range.end.column);                                         // 6292
        }                                                                                                              // 6293
        return range.start;                                                                                            // 6294
    };                                                                                                                 // 6295
    this.removeInLine = function(row, startColumn, endColumn) {                                                        // 6296
        if (startColumn == endColumn)                                                                                  // 6297
            return;                                                                                                    // 6298
                                                                                                                       // 6299
        var range = new Range(row, startColumn, row, endColumn);                                                       // 6300
        var line = this.getLine(row);                                                                                  // 6301
        var removed = line.substring(startColumn, endColumn);                                                          // 6302
        var newLine = line.substring(0, startColumn) + line.substring(endColumn, line.length);                         // 6303
        this.$lines.splice(row, 1, newLine);                                                                           // 6304
                                                                                                                       // 6305
        var delta = {                                                                                                  // 6306
            action: "removeText",                                                                                      // 6307
            range: range,                                                                                              // 6308
            text: removed                                                                                              // 6309
        };                                                                                                             // 6310
        this._signal("change", { data: delta });                                                                       // 6311
        return range.start;                                                                                            // 6312
    };                                                                                                                 // 6313
    this.removeLines = function(firstRow, lastRow) {                                                                   // 6314
        if (firstRow < 0 || lastRow >= this.getLength())                                                               // 6315
            return this.remove(new Range(firstRow, 0, lastRow + 1, 0));                                                // 6316
        return this._removeLines(firstRow, lastRow);                                                                   // 6317
    };                                                                                                                 // 6318
                                                                                                                       // 6319
    this._removeLines = function(firstRow, lastRow) {                                                                  // 6320
        var range = new Range(firstRow, 0, lastRow + 1, 0);                                                            // 6321
        var removed = this.$lines.splice(firstRow, lastRow - firstRow + 1);                                            // 6322
                                                                                                                       // 6323
        var delta = {                                                                                                  // 6324
            action: "removeLines",                                                                                     // 6325
            range: range,                                                                                              // 6326
            nl: this.getNewLineCharacter(),                                                                            // 6327
            lines: removed                                                                                             // 6328
        };                                                                                                             // 6329
        this._signal("change", { data: delta });                                                                       // 6330
        return removed;                                                                                                // 6331
    };                                                                                                                 // 6332
    this.removeNewLine = function(row) {                                                                               // 6333
        var firstLine = this.getLine(row);                                                                             // 6334
        var secondLine = this.getLine(row+1);                                                                          // 6335
                                                                                                                       // 6336
        var range = new Range(row, firstLine.length, row+1, 0);                                                        // 6337
        var line = firstLine + secondLine;                                                                             // 6338
                                                                                                                       // 6339
        this.$lines.splice(row, 2, line);                                                                              // 6340
                                                                                                                       // 6341
        var delta = {                                                                                                  // 6342
            action: "removeText",                                                                                      // 6343
            range: range,                                                                                              // 6344
            text: this.getNewLineCharacter()                                                                           // 6345
        };                                                                                                             // 6346
        this._signal("change", { data: delta });                                                                       // 6347
    };                                                                                                                 // 6348
    this.replace = function(range, text) {                                                                             // 6349
        if (!(range instanceof Range))                                                                                 // 6350
            range = Range.fromPoints(range.start, range.end);                                                          // 6351
        if (text.length == 0 && range.isEmpty())                                                                       // 6352
            return range.start;                                                                                        // 6353
        if (text == this.getTextRange(range))                                                                          // 6354
            return range.end;                                                                                          // 6355
                                                                                                                       // 6356
        this.remove(range);                                                                                            // 6357
        if (text) {                                                                                                    // 6358
            var end = this.insert(range.start, text);                                                                  // 6359
        }                                                                                                              // 6360
        else {                                                                                                         // 6361
            end = range.start;                                                                                         // 6362
        }                                                                                                              // 6363
                                                                                                                       // 6364
        return end;                                                                                                    // 6365
    };                                                                                                                 // 6366
    this.applyDeltas = function(deltas) {                                                                              // 6367
        for (var i=0; i<deltas.length; i++) {                                                                          // 6368
            var delta = deltas[i];                                                                                     // 6369
            var range = Range.fromPoints(delta.range.start, delta.range.end);                                          // 6370
                                                                                                                       // 6371
            if (delta.action == "insertLines")                                                                         // 6372
                this.insertLines(range.start.row, delta.lines);                                                        // 6373
            else if (delta.action == "insertText")                                                                     // 6374
                this.insert(range.start, delta.text);                                                                  // 6375
            else if (delta.action == "removeLines")                                                                    // 6376
                this._removeLines(range.start.row, range.end.row - 1);                                                 // 6377
            else if (delta.action == "removeText")                                                                     // 6378
                this.remove(range);                                                                                    // 6379
        }                                                                                                              // 6380
    };                                                                                                                 // 6381
    this.revertDeltas = function(deltas) {                                                                             // 6382
        for (var i=deltas.length-1; i>=0; i--) {                                                                       // 6383
            var delta = deltas[i];                                                                                     // 6384
                                                                                                                       // 6385
            var range = Range.fromPoints(delta.range.start, delta.range.end);                                          // 6386
                                                                                                                       // 6387
            if (delta.action == "insertLines")                                                                         // 6388
                this._removeLines(range.start.row, range.end.row - 1);                                                 // 6389
            else if (delta.action == "insertText")                                                                     // 6390
                this.remove(range);                                                                                    // 6391
            else if (delta.action == "removeLines")                                                                    // 6392
                this._insertLines(range.start.row, delta.lines);                                                       // 6393
            else if (delta.action == "removeText")                                                                     // 6394
                this.insert(range.start, delta.text);                                                                  // 6395
        }                                                                                                              // 6396
    };                                                                                                                 // 6397
    this.indexToPosition = function(index, startRow) {                                                                 // 6398
        var lines = this.$lines || this.getAllLines();                                                                 // 6399
        var newlineLength = this.getNewLineCharacter().length;                                                         // 6400
        for (var i = startRow || 0, l = lines.length; i < l; i++) {                                                    // 6401
            index -= lines[i].length + newlineLength;                                                                  // 6402
            if (index < 0)                                                                                             // 6403
                return {row: i, column: index + lines[i].length + newlineLength};                                      // 6404
        }                                                                                                              // 6405
        return {row: l-1, column: lines[l-1].length};                                                                  // 6406
    };                                                                                                                 // 6407
    this.positionToIndex = function(pos, startRow) {                                                                   // 6408
        var lines = this.$lines || this.getAllLines();                                                                 // 6409
        var newlineLength = this.getNewLineCharacter().length;                                                         // 6410
        var index = 0;                                                                                                 // 6411
        var row = Math.min(pos.row, lines.length);                                                                     // 6412
        for (var i = startRow || 0; i < row; ++i)                                                                      // 6413
            index += lines[i].length + newlineLength;                                                                  // 6414
                                                                                                                       // 6415
        return index + pos.column;                                                                                     // 6416
    };                                                                                                                 // 6417
                                                                                                                       // 6418
}).call(Document.prototype);                                                                                           // 6419
                                                                                                                       // 6420
exports.Document = Document;                                                                                           // 6421
});                                                                                                                    // 6422
                                                                                                                       // 6423
define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 6425
                                                                                                                       // 6426
var oop = require("./lib/oop");                                                                                        // 6427
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 6428
                                                                                                                       // 6429
var BackgroundTokenizer = function(tokenizer, editor) {                                                                // 6430
    this.running = false;                                                                                              // 6431
    this.lines = [];                                                                                                   // 6432
    this.states = [];                                                                                                  // 6433
    this.currentLine = 0;                                                                                              // 6434
    this.tokenizer = tokenizer;                                                                                        // 6435
                                                                                                                       // 6436
    var self = this;                                                                                                   // 6437
                                                                                                                       // 6438
    this.$worker = function() {                                                                                        // 6439
        if (!self.running) { return; }                                                                                 // 6440
                                                                                                                       // 6441
        var workerStart = new Date();                                                                                  // 6442
        var currentLine = self.currentLine;                                                                            // 6443
        var endLine = -1;                                                                                              // 6444
        var doc = self.doc;                                                                                            // 6445
                                                                                                                       // 6446
        while (self.lines[currentLine])                                                                                // 6447
            currentLine++;                                                                                             // 6448
                                                                                                                       // 6449
        var startLine = currentLine;                                                                                   // 6450
                                                                                                                       // 6451
        var len = doc.getLength();                                                                                     // 6452
        var processedLines = 0;                                                                                        // 6453
        self.running = false;                                                                                          // 6454
        while (currentLine < len) {                                                                                    // 6455
            self.$tokenizeRow(currentLine);                                                                            // 6456
            endLine = currentLine;                                                                                     // 6457
            do {                                                                                                       // 6458
                currentLine++;                                                                                         // 6459
            } while (self.lines[currentLine]);                                                                         // 6460
            processedLines ++;                                                                                         // 6461
            if ((processedLines % 5 === 0) && (new Date() - workerStart) > 20) {                                       // 6462
                self.running = setTimeout(self.$worker, 20);                                                           // 6463
                break;                                                                                                 // 6464
            }                                                                                                          // 6465
        }                                                                                                              // 6466
        self.currentLine = currentLine;                                                                                // 6467
                                                                                                                       // 6468
        if (startLine <= endLine)                                                                                      // 6469
            self.fireUpdateEvent(startLine, endLine);                                                                  // 6470
    };                                                                                                                 // 6471
};                                                                                                                     // 6472
                                                                                                                       // 6473
(function(){                                                                                                           // 6474
                                                                                                                       // 6475
    oop.implement(this, EventEmitter);                                                                                 // 6476
    this.setTokenizer = function(tokenizer) {                                                                          // 6477
        this.tokenizer = tokenizer;                                                                                    // 6478
        this.lines = [];                                                                                               // 6479
        this.states = [];                                                                                              // 6480
                                                                                                                       // 6481
        this.start(0);                                                                                                 // 6482
    };                                                                                                                 // 6483
    this.setDocument = function(doc) {                                                                                 // 6484
        this.doc = doc;                                                                                                // 6485
        this.lines = [];                                                                                               // 6486
        this.states = [];                                                                                              // 6487
                                                                                                                       // 6488
        this.stop();                                                                                                   // 6489
    };                                                                                                                 // 6490
    this.fireUpdateEvent = function(firstRow, lastRow) {                                                               // 6491
        var data = {                                                                                                   // 6492
            first: firstRow,                                                                                           // 6493
            last: lastRow                                                                                              // 6494
        };                                                                                                             // 6495
        this._signal("update", {data: data});                                                                          // 6496
    };                                                                                                                 // 6497
    this.start = function(startRow) {                                                                                  // 6498
        this.currentLine = Math.min(startRow || 0, this.currentLine, this.doc.getLength());                            // 6499
        this.lines.splice(this.currentLine, this.lines.length);                                                        // 6500
        this.states.splice(this.currentLine, this.states.length);                                                      // 6501
                                                                                                                       // 6502
        this.stop();                                                                                                   // 6503
        this.running = setTimeout(this.$worker, 700);                                                                  // 6504
    };                                                                                                                 // 6505
                                                                                                                       // 6506
    this.scheduleStart = function() {                                                                                  // 6507
        if (!this.running)                                                                                             // 6508
            this.running = setTimeout(this.$worker, 700);                                                              // 6509
    }                                                                                                                  // 6510
                                                                                                                       // 6511
    this.$updateOnChange = function(delta) {                                                                           // 6512
        var range = delta.range;                                                                                       // 6513
        var startRow = range.start.row;                                                                                // 6514
        var len = range.end.row - startRow;                                                                            // 6515
                                                                                                                       // 6516
        if (len === 0) {                                                                                               // 6517
            this.lines[startRow] = null;                                                                               // 6518
        } else if (delta.action == "removeText" || delta.action == "removeLines") {                                    // 6519
            this.lines.splice(startRow, len + 1, null);                                                                // 6520
            this.states.splice(startRow, len + 1, null);                                                               // 6521
        } else {                                                                                                       // 6522
            var args = Array(len + 1);                                                                                 // 6523
            args.unshift(startRow, 1);                                                                                 // 6524
            this.lines.splice.apply(this.lines, args);                                                                 // 6525
            this.states.splice.apply(this.states, args);                                                               // 6526
        }                                                                                                              // 6527
                                                                                                                       // 6528
        this.currentLine = Math.min(startRow, this.currentLine, this.doc.getLength());                                 // 6529
                                                                                                                       // 6530
        this.stop();                                                                                                   // 6531
    };                                                                                                                 // 6532
    this.stop = function() {                                                                                           // 6533
        if (this.running)                                                                                              // 6534
            clearTimeout(this.running);                                                                                // 6535
        this.running = false;                                                                                          // 6536
    };                                                                                                                 // 6537
    this.getTokens = function(row) {                                                                                   // 6538
        return this.lines[row] || this.$tokenizeRow(row);                                                              // 6539
    };                                                                                                                 // 6540
    this.getState = function(row) {                                                                                    // 6541
        if (this.currentLine == row)                                                                                   // 6542
            this.$tokenizeRow(row);                                                                                    // 6543
        return this.states[row] || "start";                                                                            // 6544
    };                                                                                                                 // 6545
                                                                                                                       // 6546
    this.$tokenizeRow = function(row) {                                                                                // 6547
        var line = this.doc.getLine(row);                                                                              // 6548
        var state = this.states[row - 1];                                                                              // 6549
                                                                                                                       // 6550
        var data = this.tokenizer.getLineTokens(line, state, row);                                                     // 6551
                                                                                                                       // 6552
        if (this.states[row] + "" !== data.state + "") {                                                               // 6553
            this.states[row] = data.state;                                                                             // 6554
            this.lines[row + 1] = null;                                                                                // 6555
            if (this.currentLine > row + 1)                                                                            // 6556
                this.currentLine = row + 1;                                                                            // 6557
        } else if (this.currentLine == row) {                                                                          // 6558
            this.currentLine = row + 1;                                                                                // 6559
        }                                                                                                              // 6560
                                                                                                                       // 6561
        return this.lines[row] = data.tokens;                                                                          // 6562
    };                                                                                                                 // 6563
                                                                                                                       // 6564
}).call(BackgroundTokenizer.prototype);                                                                                // 6565
                                                                                                                       // 6566
exports.BackgroundTokenizer = BackgroundTokenizer;                                                                     // 6567
});                                                                                                                    // 6568
                                                                                                                       // 6569
define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 6571
                                                                                                                       // 6572
var lang = require("./lib/lang");                                                                                      // 6573
var oop = require("./lib/oop");                                                                                        // 6574
var Range = require("./range").Range;                                                                                  // 6575
                                                                                                                       // 6576
var SearchHighlight = function(regExp, clazz, type) {                                                                  // 6577
    this.setRegexp(regExp);                                                                                            // 6578
    this.clazz = clazz;                                                                                                // 6579
    this.type = type || "text";                                                                                        // 6580
};                                                                                                                     // 6581
                                                                                                                       // 6582
(function() {                                                                                                          // 6583
    this.MAX_RANGES = 500;                                                                                             // 6584
                                                                                                                       // 6585
    this.setRegexp = function(regExp) {                                                                                // 6586
        if (this.regExp+"" == regExp+"")                                                                               // 6587
            return;                                                                                                    // 6588
        this.regExp = regExp;                                                                                          // 6589
        this.cache = [];                                                                                               // 6590
    };                                                                                                                 // 6591
                                                                                                                       // 6592
    this.update = function(html, markerLayer, session, config) {                                                       // 6593
        if (!this.regExp)                                                                                              // 6594
            return;                                                                                                    // 6595
        var start = config.firstRow, end = config.lastRow;                                                             // 6596
                                                                                                                       // 6597
        for (var i = start; i <= end; i++) {                                                                           // 6598
            var ranges = this.cache[i];                                                                                // 6599
            if (ranges == null) {                                                                                      // 6600
                ranges = lang.getMatchOffsets(session.getLine(i), this.regExp);                                        // 6601
                if (ranges.length > this.MAX_RANGES)                                                                   // 6602
                    ranges = ranges.slice(0, this.MAX_RANGES);                                                         // 6603
                ranges = ranges.map(function(match) {                                                                  // 6604
                    return new Range(i, match.offset, i, match.offset + match.length);                                 // 6605
                });                                                                                                    // 6606
                this.cache[i] = ranges.length ? ranges : "";                                                           // 6607
            }                                                                                                          // 6608
                                                                                                                       // 6609
            for (var j = ranges.length; j --; ) {                                                                      // 6610
                markerLayer.drawSingleLineMarker(                                                                      // 6611
                    html, ranges[j].toScreenRange(session), this.clazz, config);                                       // 6612
            }                                                                                                          // 6613
        }                                                                                                              // 6614
    };                                                                                                                 // 6615
                                                                                                                       // 6616
}).call(SearchHighlight.prototype);                                                                                    // 6617
                                                                                                                       // 6618
exports.SearchHighlight = SearchHighlight;                                                                             // 6619
});                                                                                                                    // 6620
                                                                                                                       // 6621
define("ace/edit_session/fold_line",["require","exports","module","ace/range"], function(require, exports, module) {   // 6622
"use strict";                                                                                                          // 6623
                                                                                                                       // 6624
var Range = require("../range").Range;                                                                                 // 6625
function FoldLine(foldData, folds) {                                                                                   // 6626
    this.foldData = foldData;                                                                                          // 6627
    if (Array.isArray(folds)) {                                                                                        // 6628
        this.folds = folds;                                                                                            // 6629
    } else {                                                                                                           // 6630
        folds = this.folds = [ folds ];                                                                                // 6631
    }                                                                                                                  // 6632
                                                                                                                       // 6633
    var last = folds[folds.length - 1];                                                                                // 6634
    this.range = new Range(folds[0].start.row, folds[0].start.column,                                                  // 6635
                           last.end.row, last.end.column);                                                             // 6636
    this.start = this.range.start;                                                                                     // 6637
    this.end   = this.range.end;                                                                                       // 6638
                                                                                                                       // 6639
    this.folds.forEach(function(fold) {                                                                                // 6640
        fold.setFoldLine(this);                                                                                        // 6641
    }, this);                                                                                                          // 6642
}                                                                                                                      // 6643
                                                                                                                       // 6644
(function() {                                                                                                          // 6645
    this.shiftRow = function(shift) {                                                                                  // 6646
        this.start.row += shift;                                                                                       // 6647
        this.end.row += shift;                                                                                         // 6648
        this.folds.forEach(function(fold) {                                                                            // 6649
            fold.start.row += shift;                                                                                   // 6650
            fold.end.row += shift;                                                                                     // 6651
        });                                                                                                            // 6652
    };                                                                                                                 // 6653
                                                                                                                       // 6654
    this.addFold = function(fold) {                                                                                    // 6655
        if (fold.sameRow) {                                                                                            // 6656
            if (fold.start.row < this.startRow || fold.endRow > this.endRow) {                                         // 6657
                throw new Error("Can't add a fold to this FoldLine as it has no connection");                          // 6658
            }                                                                                                          // 6659
            this.folds.push(fold);                                                                                     // 6660
            this.folds.sort(function(a, b) {                                                                           // 6661
                return -a.range.compareEnd(b.start.row, b.start.column);                                               // 6662
            });                                                                                                        // 6663
            if (this.range.compareEnd(fold.start.row, fold.start.column) > 0) {                                        // 6664
                this.end.row = fold.end.row;                                                                           // 6665
                this.end.column =  fold.end.column;                                                                    // 6666
            } else if (this.range.compareStart(fold.end.row, fold.end.column) < 0) {                                   // 6667
                this.start.row = fold.start.row;                                                                       // 6668
                this.start.column = fold.start.column;                                                                 // 6669
            }                                                                                                          // 6670
        } else if (fold.start.row == this.end.row) {                                                                   // 6671
            this.folds.push(fold);                                                                                     // 6672
            this.end.row = fold.end.row;                                                                               // 6673
            this.end.column = fold.end.column;                                                                         // 6674
        } else if (fold.end.row == this.start.row) {                                                                   // 6675
            this.folds.unshift(fold);                                                                                  // 6676
            this.start.row = fold.start.row;                                                                           // 6677
            this.start.column = fold.start.column;                                                                     // 6678
        } else {                                                                                                       // 6679
            throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");                         // 6680
        }                                                                                                              // 6681
        fold.foldLine = this;                                                                                          // 6682
    };                                                                                                                 // 6683
                                                                                                                       // 6684
    this.containsRow = function(row) {                                                                                 // 6685
        return row >= this.start.row && row <= this.end.row;                                                           // 6686
    };                                                                                                                 // 6687
                                                                                                                       // 6688
    this.walk = function(callback, endRow, endColumn) {                                                                // 6689
        var lastEnd = 0,                                                                                               // 6690
            folds = this.folds,                                                                                        // 6691
            fold,                                                                                                      // 6692
            cmp, stop, isNewRow = true;                                                                                // 6693
                                                                                                                       // 6694
        if (endRow == null) {                                                                                          // 6695
            endRow = this.end.row;                                                                                     // 6696
            endColumn = this.end.column;                                                                               // 6697
        }                                                                                                              // 6698
                                                                                                                       // 6699
        for (var i = 0; i < folds.length; i++) {                                                                       // 6700
            fold = folds[i];                                                                                           // 6701
                                                                                                                       // 6702
            cmp = fold.range.compareStart(endRow, endColumn);                                                          // 6703
            if (cmp == -1) {                                                                                           // 6704
                callback(null, endRow, endColumn, lastEnd, isNewRow);                                                  // 6705
                return;                                                                                                // 6706
            }                                                                                                          // 6707
                                                                                                                       // 6708
            stop = callback(null, fold.start.row, fold.start.column, lastEnd, isNewRow);                               // 6709
            stop = !stop && callback(fold.placeholder, fold.start.row, fold.start.column, lastEnd);                    // 6710
            if (stop || cmp === 0) {                                                                                   // 6711
                return;                                                                                                // 6712
            }                                                                                                          // 6713
            isNewRow = !fold.sameRow;                                                                                  // 6714
            lastEnd = fold.end.column;                                                                                 // 6715
        }                                                                                                              // 6716
        callback(null, endRow, endColumn, lastEnd, isNewRow);                                                          // 6717
    };                                                                                                                 // 6718
                                                                                                                       // 6719
    this.getNextFoldTo = function(row, column) {                                                                       // 6720
        var fold, cmp;                                                                                                 // 6721
        for (var i = 0; i < this.folds.length; i++) {                                                                  // 6722
            fold = this.folds[i];                                                                                      // 6723
            cmp = fold.range.compareEnd(row, column);                                                                  // 6724
            if (cmp == -1) {                                                                                           // 6725
                return {                                                                                               // 6726
                    fold: fold,                                                                                        // 6727
                    kind: "after"                                                                                      // 6728
                };                                                                                                     // 6729
            } else if (cmp === 0) {                                                                                    // 6730
                return {                                                                                               // 6731
                    fold: fold,                                                                                        // 6732
                    kind: "inside"                                                                                     // 6733
                };                                                                                                     // 6734
            }                                                                                                          // 6735
        }                                                                                                              // 6736
        return null;                                                                                                   // 6737
    };                                                                                                                 // 6738
                                                                                                                       // 6739
    this.addRemoveChars = function(row, column, len) {                                                                 // 6740
        var ret = this.getNextFoldTo(row, column),                                                                     // 6741
            fold, folds;                                                                                               // 6742
        if (ret) {                                                                                                     // 6743
            fold = ret.fold;                                                                                           // 6744
            if (ret.kind == "inside"                                                                                   // 6745
                && fold.start.column != column                                                                         // 6746
                && fold.start.row != row)                                                                              // 6747
            {                                                                                                          // 6748
                window.console && window.console.log(row, column, fold);                                               // 6749
            } else if (fold.start.row == row) {                                                                        // 6750
                folds = this.folds;                                                                                    // 6751
                var i = folds.indexOf(fold);                                                                           // 6752
                if (i === 0) {                                                                                         // 6753
                    this.start.column += len;                                                                          // 6754
                }                                                                                                      // 6755
                for (i; i < folds.length; i++) {                                                                       // 6756
                    fold = folds[i];                                                                                   // 6757
                    fold.start.column += len;                                                                          // 6758
                    if (!fold.sameRow) {                                                                               // 6759
                        return;                                                                                        // 6760
                    }                                                                                                  // 6761
                    fold.end.column += len;                                                                            // 6762
                }                                                                                                      // 6763
                this.end.column += len;                                                                                // 6764
            }                                                                                                          // 6765
        }                                                                                                              // 6766
    };                                                                                                                 // 6767
                                                                                                                       // 6768
    this.split = function(row, column) {                                                                               // 6769
        var pos = this.getNextFoldTo(row, column);                                                                     // 6770
                                                                                                                       // 6771
        if (!pos || pos.kind == "inside")                                                                              // 6772
            return null;                                                                                               // 6773
                                                                                                                       // 6774
        var fold = pos.fold;                                                                                           // 6775
        var folds = this.folds;                                                                                        // 6776
        var foldData = this.foldData;                                                                                  // 6777
                                                                                                                       // 6778
        var i = folds.indexOf(fold);                                                                                   // 6779
        var foldBefore = folds[i - 1];                                                                                 // 6780
        this.end.row = foldBefore.end.row;                                                                             // 6781
        this.end.column = foldBefore.end.column;                                                                       // 6782
        folds = folds.splice(i, folds.length - i);                                                                     // 6783
                                                                                                                       // 6784
        var newFoldLine = new FoldLine(foldData, folds);                                                               // 6785
        foldData.splice(foldData.indexOf(this) + 1, 0, newFoldLine);                                                   // 6786
        return newFoldLine;                                                                                            // 6787
    };                                                                                                                 // 6788
                                                                                                                       // 6789
    this.merge = function(foldLineNext) {                                                                              // 6790
        var folds = foldLineNext.folds;                                                                                // 6791
        for (var i = 0; i < folds.length; i++) {                                                                       // 6792
            this.addFold(folds[i]);                                                                                    // 6793
        }                                                                                                              // 6794
        var foldData = this.foldData;                                                                                  // 6795
        foldData.splice(foldData.indexOf(foldLineNext), 1);                                                            // 6796
    };                                                                                                                 // 6797
                                                                                                                       // 6798
    this.toString = function() {                                                                                       // 6799
        var ret = [this.range.toString() + ": [" ];                                                                    // 6800
                                                                                                                       // 6801
        this.folds.forEach(function(fold) {                                                                            // 6802
            ret.push("  " + fold.toString());                                                                          // 6803
        });                                                                                                            // 6804
        ret.push("]");                                                                                                 // 6805
        return ret.join("\n");                                                                                         // 6806
    };                                                                                                                 // 6807
                                                                                                                       // 6808
    this.idxToPosition = function(idx) {                                                                               // 6809
        var lastFoldEndColumn = 0;                                                                                     // 6810
                                                                                                                       // 6811
        for (var i = 0; i < this.folds.length; i++) {                                                                  // 6812
            var fold = this.folds[i];                                                                                  // 6813
                                                                                                                       // 6814
            idx -= fold.start.column - lastFoldEndColumn;                                                              // 6815
            if (idx < 0) {                                                                                             // 6816
                return {                                                                                               // 6817
                    row: fold.start.row,                                                                               // 6818
                    column: fold.start.column + idx                                                                    // 6819
                };                                                                                                     // 6820
            }                                                                                                          // 6821
                                                                                                                       // 6822
            idx -= fold.placeholder.length;                                                                            // 6823
            if (idx < 0) {                                                                                             // 6824
                return fold.start;                                                                                     // 6825
            }                                                                                                          // 6826
                                                                                                                       // 6827
            lastFoldEndColumn = fold.end.column;                                                                       // 6828
        }                                                                                                              // 6829
                                                                                                                       // 6830
        return {                                                                                                       // 6831
            row: this.end.row,                                                                                         // 6832
            column: this.end.column + idx                                                                              // 6833
        };                                                                                                             // 6834
    };                                                                                                                 // 6835
}).call(FoldLine.prototype);                                                                                           // 6836
                                                                                                                       // 6837
exports.FoldLine = FoldLine;                                                                                           // 6838
});                                                                                                                    // 6839
                                                                                                                       // 6840
define("ace/range_list",["require","exports","module","ace/range"], function(require, exports, module) {               // 6841
"use strict";                                                                                                          // 6842
var Range = require("./range").Range;                                                                                  // 6843
var comparePoints = Range.comparePoints;                                                                               // 6844
                                                                                                                       // 6845
var RangeList = function() {                                                                                           // 6846
    this.ranges = [];                                                                                                  // 6847
};                                                                                                                     // 6848
                                                                                                                       // 6849
(function() {                                                                                                          // 6850
    this.comparePoints = comparePoints;                                                                                // 6851
                                                                                                                       // 6852
    this.pointIndex = function(pos, excludeEdges, startIndex) {                                                        // 6853
        var list = this.ranges;                                                                                        // 6854
                                                                                                                       // 6855
        for (var i = startIndex || 0; i < list.length; i++) {                                                          // 6856
            var range = list[i];                                                                                       // 6857
            var cmpEnd = comparePoints(pos, range.end);                                                                // 6858
            if (cmpEnd > 0)                                                                                            // 6859
                continue;                                                                                              // 6860
            var cmpStart = comparePoints(pos, range.start);                                                            // 6861
            if (cmpEnd === 0)                                                                                          // 6862
                return excludeEdges && cmpStart !== 0 ? -i-2 : i;                                                      // 6863
            if (cmpStart > 0 || (cmpStart === 0 && !excludeEdges))                                                     // 6864
                return i;                                                                                              // 6865
                                                                                                                       // 6866
            return -i-1;                                                                                               // 6867
        }                                                                                                              // 6868
        return -i - 1;                                                                                                 // 6869
    };                                                                                                                 // 6870
                                                                                                                       // 6871
    this.add = function(range) {                                                                                       // 6872
        var excludeEdges = !range.isEmpty();                                                                           // 6873
        var startIndex = this.pointIndex(range.start, excludeEdges);                                                   // 6874
        if (startIndex < 0)                                                                                            // 6875
            startIndex = -startIndex - 1;                                                                              // 6876
                                                                                                                       // 6877
        var endIndex = this.pointIndex(range.end, excludeEdges, startIndex);                                           // 6878
                                                                                                                       // 6879
        if (endIndex < 0)                                                                                              // 6880
            endIndex = -endIndex - 1;                                                                                  // 6881
        else                                                                                                           // 6882
            endIndex++;                                                                                                // 6883
        return this.ranges.splice(startIndex, endIndex - startIndex, range);                                           // 6884
    };                                                                                                                 // 6885
                                                                                                                       // 6886
    this.addList = function(list) {                                                                                    // 6887
        var removed = [];                                                                                              // 6888
        for (var i = list.length; i--; ) {                                                                             // 6889
            removed.push.call(removed, this.add(list[i]));                                                             // 6890
        }                                                                                                              // 6891
        return removed;                                                                                                // 6892
    };                                                                                                                 // 6893
                                                                                                                       // 6894
    this.substractPoint = function(pos) {                                                                              // 6895
        var i = this.pointIndex(pos);                                                                                  // 6896
                                                                                                                       // 6897
        if (i >= 0)                                                                                                    // 6898
            return this.ranges.splice(i, 1);                                                                           // 6899
    };                                                                                                                 // 6900
    this.merge = function() {                                                                                          // 6901
        var removed = [];                                                                                              // 6902
        var list = this.ranges;                                                                                        // 6903
                                                                                                                       // 6904
        list = list.sort(function(a, b) {                                                                              // 6905
            return comparePoints(a.start, b.start);                                                                    // 6906
        });                                                                                                            // 6907
                                                                                                                       // 6908
        var next = list[0], range;                                                                                     // 6909
        for (var i = 1; i < list.length; i++) {                                                                        // 6910
            range = next;                                                                                              // 6911
            next = list[i];                                                                                            // 6912
            var cmp = comparePoints(range.end, next.start);                                                            // 6913
            if (cmp < 0)                                                                                               // 6914
                continue;                                                                                              // 6915
                                                                                                                       // 6916
            if (cmp == 0 && !range.isEmpty() && !next.isEmpty())                                                       // 6917
                continue;                                                                                              // 6918
                                                                                                                       // 6919
            if (comparePoints(range.end, next.end) < 0) {                                                              // 6920
                range.end.row = next.end.row;                                                                          // 6921
                range.end.column = next.end.column;                                                                    // 6922
            }                                                                                                          // 6923
                                                                                                                       // 6924
            list.splice(i, 1);                                                                                         // 6925
            removed.push(next);                                                                                        // 6926
            next = range;                                                                                              // 6927
            i--;                                                                                                       // 6928
        }                                                                                                              // 6929
                                                                                                                       // 6930
        this.ranges = list;                                                                                            // 6931
                                                                                                                       // 6932
        return removed;                                                                                                // 6933
    };                                                                                                                 // 6934
                                                                                                                       // 6935
    this.contains = function(row, column) {                                                                            // 6936
        return this.pointIndex({row: row, column: column}) >= 0;                                                       // 6937
    };                                                                                                                 // 6938
                                                                                                                       // 6939
    this.containsPoint = function(pos) {                                                                               // 6940
        return this.pointIndex(pos) >= 0;                                                                              // 6941
    };                                                                                                                 // 6942
                                                                                                                       // 6943
    this.rangeAtPoint = function(pos) {                                                                                // 6944
        var i = this.pointIndex(pos);                                                                                  // 6945
        if (i >= 0)                                                                                                    // 6946
            return this.ranges[i];                                                                                     // 6947
    };                                                                                                                 // 6948
                                                                                                                       // 6949
                                                                                                                       // 6950
    this.clipRows = function(startRow, endRow) {                                                                       // 6951
        var list = this.ranges;                                                                                        // 6952
        if (list[0].start.row > endRow || list[list.length - 1].start.row < startRow)                                  // 6953
            return [];                                                                                                 // 6954
                                                                                                                       // 6955
        var startIndex = this.pointIndex({row: startRow, column: 0});                                                  // 6956
        if (startIndex < 0)                                                                                            // 6957
            startIndex = -startIndex - 1;                                                                              // 6958
        var endIndex = this.pointIndex({row: endRow, column: 0}, startIndex);                                          // 6959
        if (endIndex < 0)                                                                                              // 6960
            endIndex = -endIndex - 1;                                                                                  // 6961
                                                                                                                       // 6962
        var clipped = [];                                                                                              // 6963
        for (var i = startIndex; i < endIndex; i++) {                                                                  // 6964
            clipped.push(list[i]);                                                                                     // 6965
        }                                                                                                              // 6966
        return clipped;                                                                                                // 6967
    };                                                                                                                 // 6968
                                                                                                                       // 6969
    this.removeAll = function() {                                                                                      // 6970
        return this.ranges.splice(0, this.ranges.length);                                                              // 6971
    };                                                                                                                 // 6972
                                                                                                                       // 6973
    this.attach = function(session) {                                                                                  // 6974
        if (this.session)                                                                                              // 6975
            this.detach();                                                                                             // 6976
                                                                                                                       // 6977
        this.session = session;                                                                                        // 6978
        this.onChange = this.$onChange.bind(this);                                                                     // 6979
                                                                                                                       // 6980
        this.session.on('change', this.onChange);                                                                      // 6981
    };                                                                                                                 // 6982
                                                                                                                       // 6983
    this.detach = function() {                                                                                         // 6984
        if (!this.session)                                                                                             // 6985
            return;                                                                                                    // 6986
        this.session.removeListener('change', this.onChange);                                                          // 6987
        this.session = null;                                                                                           // 6988
    };                                                                                                                 // 6989
                                                                                                                       // 6990
    this.$onChange = function(e) {                                                                                     // 6991
        var changeRange = e.data.range;                                                                                // 6992
        if (e.data.action[0] == "i"){                                                                                  // 6993
            var start = changeRange.start;                                                                             // 6994
            var end = changeRange.end;                                                                                 // 6995
        } else {                                                                                                       // 6996
            var end = changeRange.start;                                                                               // 6997
            var start = changeRange.end;                                                                               // 6998
        }                                                                                                              // 6999
        var startRow = start.row;                                                                                      // 7000
        var endRow = end.row;                                                                                          // 7001
        var lineDif = endRow - startRow;                                                                               // 7002
                                                                                                                       // 7003
        var colDiff = -start.column + end.column;                                                                      // 7004
        var ranges = this.ranges;                                                                                      // 7005
                                                                                                                       // 7006
        for (var i = 0, n = ranges.length; i < n; i++) {                                                               // 7007
            var r = ranges[i];                                                                                         // 7008
            if (r.end.row < startRow)                                                                                  // 7009
                continue;                                                                                              // 7010
            if (r.start.row > startRow)                                                                                // 7011
                break;                                                                                                 // 7012
                                                                                                                       // 7013
            if (r.start.row == startRow && r.start.column >= start.column ) {                                          // 7014
                if (r.start.column == start.column && this.$insertRight) {                                             // 7015
                } else {                                                                                               // 7016
                    r.start.column += colDiff;                                                                         // 7017
                    r.start.row += lineDif;                                                                            // 7018
                }                                                                                                      // 7019
            }                                                                                                          // 7020
            if (r.end.row == startRow && r.end.column >= start.column) {                                               // 7021
                if (r.end.column == start.column && this.$insertRight) {                                               // 7022
                    continue;                                                                                          // 7023
                }                                                                                                      // 7024
                if (r.end.column == start.column && colDiff > 0 && i < n - 1) {                                        // 7025
                    if (r.end.column > r.start.column && r.end.column == ranges[i+1].start.column)                     // 7026
                        r.end.column -= colDiff;                                                                       // 7027
                }                                                                                                      // 7028
                r.end.column += colDiff;                                                                               // 7029
                r.end.row += lineDif;                                                                                  // 7030
            }                                                                                                          // 7031
        }                                                                                                              // 7032
                                                                                                                       // 7033
        if (lineDif != 0 && i < n) {                                                                                   // 7034
            for (; i < n; i++) {                                                                                       // 7035
                var r = ranges[i];                                                                                     // 7036
                r.start.row += lineDif;                                                                                // 7037
                r.end.row += lineDif;                                                                                  // 7038
            }                                                                                                          // 7039
        }                                                                                                              // 7040
    };                                                                                                                 // 7041
                                                                                                                       // 7042
}).call(RangeList.prototype);                                                                                          // 7043
                                                                                                                       // 7044
exports.RangeList = RangeList;                                                                                         // 7045
});                                                                                                                    // 7046
                                                                                                                       // 7047
define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"], function(require, exports, module) {
"use strict";                                                                                                          // 7049
                                                                                                                       // 7050
var Range = require("../range").Range;                                                                                 // 7051
var RangeList = require("../range_list").RangeList;                                                                    // 7052
var oop = require("../lib/oop")                                                                                        // 7053
var Fold = exports.Fold = function(range, placeholder) {                                                               // 7054
    this.foldLine = null;                                                                                              // 7055
    this.placeholder = placeholder;                                                                                    // 7056
    this.range = range;                                                                                                // 7057
    this.start = range.start;                                                                                          // 7058
    this.end = range.end;                                                                                              // 7059
                                                                                                                       // 7060
    this.sameRow = range.start.row == range.end.row;                                                                   // 7061
    this.subFolds = this.ranges = [];                                                                                  // 7062
};                                                                                                                     // 7063
                                                                                                                       // 7064
oop.inherits(Fold, RangeList);                                                                                         // 7065
                                                                                                                       // 7066
(function() {                                                                                                          // 7067
                                                                                                                       // 7068
    this.toString = function() {                                                                                       // 7069
        return '"' + this.placeholder + '" ' + this.range.toString();                                                  // 7070
    };                                                                                                                 // 7071
                                                                                                                       // 7072
    this.setFoldLine = function(foldLine) {                                                                            // 7073
        this.foldLine = foldLine;                                                                                      // 7074
        this.subFolds.forEach(function(fold) {                                                                         // 7075
            fold.setFoldLine(foldLine);                                                                                // 7076
        });                                                                                                            // 7077
    };                                                                                                                 // 7078
                                                                                                                       // 7079
    this.clone = function() {                                                                                          // 7080
        var range = this.range.clone();                                                                                // 7081
        var fold = new Fold(range, this.placeholder);                                                                  // 7082
        this.subFolds.forEach(function(subFold) {                                                                      // 7083
            fold.subFolds.push(subFold.clone());                                                                       // 7084
        });                                                                                                            // 7085
        fold.collapseChildren = this.collapseChildren;                                                                 // 7086
        return fold;                                                                                                   // 7087
    };                                                                                                                 // 7088
                                                                                                                       // 7089
    this.addSubFold = function(fold) {                                                                                 // 7090
        if (this.range.isEqual(fold))                                                                                  // 7091
            return;                                                                                                    // 7092
                                                                                                                       // 7093
        if (!this.range.containsRange(fold))                                                                           // 7094
            throw new Error("A fold can't intersect already existing fold" + fold.range + this.range);                 // 7095
        consumeRange(fold, this.start);                                                                                // 7096
                                                                                                                       // 7097
        var row = fold.start.row, column = fold.start.column;                                                          // 7098
        for (var i = 0, cmp = -1; i < this.subFolds.length; i++) {                                                     // 7099
            cmp = this.subFolds[i].range.compare(row, column);                                                         // 7100
            if (cmp != 1)                                                                                              // 7101
                break;                                                                                                 // 7102
        }                                                                                                              // 7103
        var afterStart = this.subFolds[i];                                                                             // 7104
                                                                                                                       // 7105
        if (cmp == 0)                                                                                                  // 7106
            return afterStart.addSubFold(fold);                                                                        // 7107
        var row = fold.range.end.row, column = fold.range.end.column;                                                  // 7108
        for (var j = i, cmp = -1; j < this.subFolds.length; j++) {                                                     // 7109
            cmp = this.subFolds[j].range.compare(row, column);                                                         // 7110
            if (cmp != 1)                                                                                              // 7111
                break;                                                                                                 // 7112
        }                                                                                                              // 7113
        var afterEnd = this.subFolds[j];                                                                               // 7114
                                                                                                                       // 7115
        if (cmp == 0)                                                                                                  // 7116
            throw new Error("A fold can't intersect already existing fold" + fold.range + this.range);                 // 7117
                                                                                                                       // 7118
        var consumedFolds = this.subFolds.splice(i, j - i, fold);                                                      // 7119
        fold.setFoldLine(this.foldLine);                                                                               // 7120
                                                                                                                       // 7121
        return fold;                                                                                                   // 7122
    };                                                                                                                 // 7123
                                                                                                                       // 7124
    this.restoreRange = function(range) {                                                                              // 7125
        return restoreRange(range, this.start);                                                                        // 7126
    };                                                                                                                 // 7127
                                                                                                                       // 7128
}).call(Fold.prototype);                                                                                               // 7129
                                                                                                                       // 7130
function consumePoint(point, anchor) {                                                                                 // 7131
    point.row -= anchor.row;                                                                                           // 7132
    if (point.row == 0)                                                                                                // 7133
        point.column -= anchor.column;                                                                                 // 7134
}                                                                                                                      // 7135
function consumeRange(range, anchor) {                                                                                 // 7136
    consumePoint(range.start, anchor);                                                                                 // 7137
    consumePoint(range.end, anchor);                                                                                   // 7138
}                                                                                                                      // 7139
function restorePoint(point, anchor) {                                                                                 // 7140
    if (point.row == 0)                                                                                                // 7141
        point.column += anchor.column;                                                                                 // 7142
    point.row += anchor.row;                                                                                           // 7143
}                                                                                                                      // 7144
function restoreRange(range, anchor) {                                                                                 // 7145
    restorePoint(range.start, anchor);                                                                                 // 7146
    restorePoint(range.end, anchor);                                                                                   // 7147
}                                                                                                                      // 7148
                                                                                                                       // 7149
});                                                                                                                    // 7150
                                                                                                                       // 7151
define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"], function(require, exports, module) {
"use strict";                                                                                                          // 7153
                                                                                                                       // 7154
var Range = require("../range").Range;                                                                                 // 7155
var FoldLine = require("./fold_line").FoldLine;                                                                        // 7156
var Fold = require("./fold").Fold;                                                                                     // 7157
var TokenIterator = require("../token_iterator").TokenIterator;                                                        // 7158
                                                                                                                       // 7159
function Folding() {                                                                                                   // 7160
    this.getFoldAt = function(row, column, side) {                                                                     // 7161
        var foldLine = this.getFoldLine(row);                                                                          // 7162
        if (!foldLine)                                                                                                 // 7163
            return null;                                                                                               // 7164
                                                                                                                       // 7165
        var folds = foldLine.folds;                                                                                    // 7166
        for (var i = 0; i < folds.length; i++) {                                                                       // 7167
            var fold = folds[i];                                                                                       // 7168
            if (fold.range.contains(row, column)) {                                                                    // 7169
                if (side == 1 && fold.range.isEnd(row, column)) {                                                      // 7170
                    continue;                                                                                          // 7171
                } else if (side == -1 && fold.range.isStart(row, column)) {                                            // 7172
                    continue;                                                                                          // 7173
                }                                                                                                      // 7174
                return fold;                                                                                           // 7175
            }                                                                                                          // 7176
        }                                                                                                              // 7177
    };                                                                                                                 // 7178
    this.getFoldsInRange = function(range) {                                                                           // 7179
        var start = range.start;                                                                                       // 7180
        var end = range.end;                                                                                           // 7181
        var foldLines = this.$foldData;                                                                                // 7182
        var foundFolds = [];                                                                                           // 7183
                                                                                                                       // 7184
        start.column += 1;                                                                                             // 7185
        end.column -= 1;                                                                                               // 7186
                                                                                                                       // 7187
        for (var i = 0; i < foldLines.length; i++) {                                                                   // 7188
            var cmp = foldLines[i].range.compareRange(range);                                                          // 7189
            if (cmp == 2) {                                                                                            // 7190
                continue;                                                                                              // 7191
            }                                                                                                          // 7192
            else if (cmp == -2) {                                                                                      // 7193
                break;                                                                                                 // 7194
            }                                                                                                          // 7195
                                                                                                                       // 7196
            var folds = foldLines[i].folds;                                                                            // 7197
            for (var j = 0; j < folds.length; j++) {                                                                   // 7198
                var fold = folds[j];                                                                                   // 7199
                cmp = fold.range.compareRange(range);                                                                  // 7200
                if (cmp == -2) {                                                                                       // 7201
                    break;                                                                                             // 7202
                } else if (cmp == 2) {                                                                                 // 7203
                    continue;                                                                                          // 7204
                } else                                                                                                 // 7205
                if (cmp == 42) {                                                                                       // 7206
                    break;                                                                                             // 7207
                }                                                                                                      // 7208
                foundFolds.push(fold);                                                                                 // 7209
            }                                                                                                          // 7210
        }                                                                                                              // 7211
        start.column -= 1;                                                                                             // 7212
        end.column += 1;                                                                                               // 7213
                                                                                                                       // 7214
        return foundFolds;                                                                                             // 7215
    };                                                                                                                 // 7216
                                                                                                                       // 7217
    this.getFoldsInRangeList = function(ranges) {                                                                      // 7218
        if (Array.isArray(ranges)) {                                                                                   // 7219
            var folds = [];                                                                                            // 7220
            ranges.forEach(function(range) {                                                                           // 7221
                folds = folds.concat(this.getFoldsInRange(range));                                                     // 7222
            }, this);                                                                                                  // 7223
        } else {                                                                                                       // 7224
            var folds = this.getFoldsInRange(ranges);                                                                  // 7225
        }                                                                                                              // 7226
        return folds;                                                                                                  // 7227
    }                                                                                                                  // 7228
    this.getAllFolds = function() {                                                                                    // 7229
        var folds = [];                                                                                                // 7230
        var foldLines = this.$foldData;                                                                                // 7231
                                                                                                                       // 7232
        for (var i = 0; i < foldLines.length; i++)                                                                     // 7233
            for (var j = 0; j < foldLines[i].folds.length; j++)                                                        // 7234
                folds.push(foldLines[i].folds[j]);                                                                     // 7235
                                                                                                                       // 7236
        return folds;                                                                                                  // 7237
    };                                                                                                                 // 7238
    this.getFoldStringAt = function(row, column, trim, foldLine) {                                                     // 7239
        foldLine = foldLine || this.getFoldLine(row);                                                                  // 7240
        if (!foldLine)                                                                                                 // 7241
            return null;                                                                                               // 7242
                                                                                                                       // 7243
        var lastFold = {                                                                                               // 7244
            end: { column: 0 }                                                                                         // 7245
        };                                                                                                             // 7246
        var str, fold;                                                                                                 // 7247
        for (var i = 0; i < foldLine.folds.length; i++) {                                                              // 7248
            fold = foldLine.folds[i];                                                                                  // 7249
            var cmp = fold.range.compareEnd(row, column);                                                              // 7250
            if (cmp == -1) {                                                                                           // 7251
                str = this                                                                                             // 7252
                    .getLine(fold.start.row)                                                                           // 7253
                    .substring(lastFold.end.column, fold.start.column);                                                // 7254
                break;                                                                                                 // 7255
            }                                                                                                          // 7256
            else if (cmp === 0) {                                                                                      // 7257
                return null;                                                                                           // 7258
            }                                                                                                          // 7259
            lastFold = fold;                                                                                           // 7260
        }                                                                                                              // 7261
        if (!str)                                                                                                      // 7262
            str = this.getLine(fold.start.row).substring(lastFold.end.column);                                         // 7263
                                                                                                                       // 7264
        if (trim == -1)                                                                                                // 7265
            return str.substring(0, column - lastFold.end.column);                                                     // 7266
        else if (trim == 1)                                                                                            // 7267
            return str.substring(column - lastFold.end.column);                                                        // 7268
        else                                                                                                           // 7269
            return str;                                                                                                // 7270
    };                                                                                                                 // 7271
                                                                                                                       // 7272
    this.getFoldLine = function(docRow, startFoldLine) {                                                               // 7273
        var foldData = this.$foldData;                                                                                 // 7274
        var i = 0;                                                                                                     // 7275
        if (startFoldLine)                                                                                             // 7276
            i = foldData.indexOf(startFoldLine);                                                                       // 7277
        if (i == -1)                                                                                                   // 7278
            i = 0;                                                                                                     // 7279
        for (i; i < foldData.length; i++) {                                                                            // 7280
            var foldLine = foldData[i];                                                                                // 7281
            if (foldLine.start.row <= docRow && foldLine.end.row >= docRow) {                                          // 7282
                return foldLine;                                                                                       // 7283
            } else if (foldLine.end.row > docRow) {                                                                    // 7284
                return null;                                                                                           // 7285
            }                                                                                                          // 7286
        }                                                                                                              // 7287
        return null;                                                                                                   // 7288
    };                                                                                                                 // 7289
    this.getNextFoldLine = function(docRow, startFoldLine) {                                                           // 7290
        var foldData = this.$foldData;                                                                                 // 7291
        var i = 0;                                                                                                     // 7292
        if (startFoldLine)                                                                                             // 7293
            i = foldData.indexOf(startFoldLine);                                                                       // 7294
        if (i == -1)                                                                                                   // 7295
            i = 0;                                                                                                     // 7296
        for (i; i < foldData.length; i++) {                                                                            // 7297
            var foldLine = foldData[i];                                                                                // 7298
            if (foldLine.end.row >= docRow) {                                                                          // 7299
                return foldLine;                                                                                       // 7300
            }                                                                                                          // 7301
        }                                                                                                              // 7302
        return null;                                                                                                   // 7303
    };                                                                                                                 // 7304
                                                                                                                       // 7305
    this.getFoldedRowCount = function(first, last) {                                                                   // 7306
        var foldData = this.$foldData, rowCount = last-first+1;                                                        // 7307
        for (var i = 0; i < foldData.length; i++) {                                                                    // 7308
            var foldLine = foldData[i],                                                                                // 7309
                end = foldLine.end.row,                                                                                // 7310
                start = foldLine.start.row;                                                                            // 7311
            if (end >= last) {                                                                                         // 7312
                if(start < last) {                                                                                     // 7313
                    if(start >= first)                                                                                 // 7314
                        rowCount -= last-start;                                                                        // 7315
                    else                                                                                               // 7316
                        rowCount = 0;//in one fold                                                                     // 7317
                }                                                                                                      // 7318
                break;                                                                                                 // 7319
            } else if(end >= first){                                                                                   // 7320
                if (start >= first) //fold inside range                                                                // 7321
                    rowCount -=  end-start;                                                                            // 7322
                else                                                                                                   // 7323
                    rowCount -=  end-first+1;                                                                          // 7324
            }                                                                                                          // 7325
        }                                                                                                              // 7326
        return rowCount;                                                                                               // 7327
    };                                                                                                                 // 7328
                                                                                                                       // 7329
    this.$addFoldLine = function(foldLine) {                                                                           // 7330
        this.$foldData.push(foldLine);                                                                                 // 7331
        this.$foldData.sort(function(a, b) {                                                                           // 7332
            return a.start.row - b.start.row;                                                                          // 7333
        });                                                                                                            // 7334
        return foldLine;                                                                                               // 7335
    };                                                                                                                 // 7336
    this.addFold = function(placeholder, range) {                                                                      // 7337
        var foldData = this.$foldData;                                                                                 // 7338
        var added = false;                                                                                             // 7339
        var fold;                                                                                                      // 7340
                                                                                                                       // 7341
        if (placeholder instanceof Fold)                                                                               // 7342
            fold = placeholder;                                                                                        // 7343
        else {                                                                                                         // 7344
            fold = new Fold(range, placeholder);                                                                       // 7345
            fold.collapseChildren = range.collapseChildren;                                                            // 7346
        }                                                                                                              // 7347
        this.$clipRangeToDocument(fold.range);                                                                         // 7348
                                                                                                                       // 7349
        var startRow = fold.start.row;                                                                                 // 7350
        var startColumn = fold.start.column;                                                                           // 7351
        var endRow = fold.end.row;                                                                                     // 7352
        var endColumn = fold.end.column;                                                                               // 7353
        if (!(startRow < endRow ||                                                                                     // 7354
            startRow == endRow && startColumn <= endColumn - 2))                                                       // 7355
            throw new Error("The range has to be at least 2 characters width");                                        // 7356
                                                                                                                       // 7357
        var startFold = this.getFoldAt(startRow, startColumn, 1);                                                      // 7358
        var endFold = this.getFoldAt(endRow, endColumn, -1);                                                           // 7359
        if (startFold && endFold == startFold)                                                                         // 7360
            return startFold.addSubFold(fold);                                                                         // 7361
                                                                                                                       // 7362
        if (startFold && !startFold.range.isStart(startRow, startColumn))                                              // 7363
            this.removeFold(startFold);                                                                                // 7364
                                                                                                                       // 7365
        if (endFold && !endFold.range.isEnd(endRow, endColumn))                                                        // 7366
            this.removeFold(endFold);                                                                                  // 7367
        var folds = this.getFoldsInRange(fold.range);                                                                  // 7368
        if (folds.length > 0) {                                                                                        // 7369
            this.removeFolds(folds);                                                                                   // 7370
            folds.forEach(function(subFold) {                                                                          // 7371
                fold.addSubFold(subFold);                                                                              // 7372
            });                                                                                                        // 7373
        }                                                                                                              // 7374
                                                                                                                       // 7375
        for (var i = 0; i < foldData.length; i++) {                                                                    // 7376
            var foldLine = foldData[i];                                                                                // 7377
            if (endRow == foldLine.start.row) {                                                                        // 7378
                foldLine.addFold(fold);                                                                                // 7379
                added = true;                                                                                          // 7380
                break;                                                                                                 // 7381
            } else if (startRow == foldLine.end.row) {                                                                 // 7382
                foldLine.addFold(fold);                                                                                // 7383
                added = true;                                                                                          // 7384
                if (!fold.sameRow) {                                                                                   // 7385
                    var foldLineNext = foldData[i + 1];                                                                // 7386
                    if (foldLineNext && foldLineNext.start.row == endRow) {                                            // 7387
                        foldLine.merge(foldLineNext);                                                                  // 7388
                        break;                                                                                         // 7389
                    }                                                                                                  // 7390
                }                                                                                                      // 7391
                break;                                                                                                 // 7392
            } else if (endRow <= foldLine.start.row) {                                                                 // 7393
                break;                                                                                                 // 7394
            }                                                                                                          // 7395
        }                                                                                                              // 7396
                                                                                                                       // 7397
        if (!added)                                                                                                    // 7398
            foldLine = this.$addFoldLine(new FoldLine(this.$foldData, fold));                                          // 7399
                                                                                                                       // 7400
        if (this.$useWrapMode)                                                                                         // 7401
            this.$updateWrapData(foldLine.start.row, foldLine.start.row);                                              // 7402
        else                                                                                                           // 7403
            this.$updateRowLengthCache(foldLine.start.row, foldLine.start.row);                                        // 7404
        this.$modified = true;                                                                                         // 7405
        this._emit("changeFold", { data: fold, action: "add" });                                                       // 7406
                                                                                                                       // 7407
        return fold;                                                                                                   // 7408
    };                                                                                                                 // 7409
                                                                                                                       // 7410
    this.addFolds = function(folds) {                                                                                  // 7411
        folds.forEach(function(fold) {                                                                                 // 7412
            this.addFold(fold);                                                                                        // 7413
        }, this);                                                                                                      // 7414
    };                                                                                                                 // 7415
                                                                                                                       // 7416
    this.removeFold = function(fold) {                                                                                 // 7417
        var foldLine = fold.foldLine;                                                                                  // 7418
        var startRow = foldLine.start.row;                                                                             // 7419
        var endRow = foldLine.end.row;                                                                                 // 7420
                                                                                                                       // 7421
        var foldLines = this.$foldData;                                                                                // 7422
        var folds = foldLine.folds;                                                                                    // 7423
        if (folds.length == 1) {                                                                                       // 7424
            foldLines.splice(foldLines.indexOf(foldLine), 1);                                                          // 7425
        } else                                                                                                         // 7426
        if (foldLine.range.isEnd(fold.end.row, fold.end.column)) {                                                     // 7427
            folds.pop();                                                                                               // 7428
            foldLine.end.row = folds[folds.length - 1].end.row;                                                        // 7429
            foldLine.end.column = folds[folds.length - 1].end.column;                                                  // 7430
        } else                                                                                                         // 7431
        if (foldLine.range.isStart(fold.start.row, fold.start.column)) {                                               // 7432
            folds.shift();                                                                                             // 7433
            foldLine.start.row = folds[0].start.row;                                                                   // 7434
            foldLine.start.column = folds[0].start.column;                                                             // 7435
        } else                                                                                                         // 7436
        if (fold.sameRow) {                                                                                            // 7437
            folds.splice(folds.indexOf(fold), 1);                                                                      // 7438
        } else                                                                                                         // 7439
        {                                                                                                              // 7440
            var newFoldLine = foldLine.split(fold.start.row, fold.start.column);                                       // 7441
            folds = newFoldLine.folds;                                                                                 // 7442
            folds.shift();                                                                                             // 7443
            newFoldLine.start.row = folds[0].start.row;                                                                // 7444
            newFoldLine.start.column = folds[0].start.column;                                                          // 7445
        }                                                                                                              // 7446
                                                                                                                       // 7447
        if (!this.$updating) {                                                                                         // 7448
            if (this.$useWrapMode)                                                                                     // 7449
                this.$updateWrapData(startRow, endRow);                                                                // 7450
            else                                                                                                       // 7451
                this.$updateRowLengthCache(startRow, endRow);                                                          // 7452
        }                                                                                                              // 7453
        this.$modified = true;                                                                                         // 7454
        this._emit("changeFold", { data: fold, action: "remove" });                                                    // 7455
    };                                                                                                                 // 7456
                                                                                                                       // 7457
    this.removeFolds = function(folds) {                                                                               // 7458
        var cloneFolds = [];                                                                                           // 7459
        for (var i = 0; i < folds.length; i++) {                                                                       // 7460
            cloneFolds.push(folds[i]);                                                                                 // 7461
        }                                                                                                              // 7462
                                                                                                                       // 7463
        cloneFolds.forEach(function(fold) {                                                                            // 7464
            this.removeFold(fold);                                                                                     // 7465
        }, this);                                                                                                      // 7466
        this.$modified = true;                                                                                         // 7467
    };                                                                                                                 // 7468
                                                                                                                       // 7469
    this.expandFold = function(fold) {                                                                                 // 7470
        this.removeFold(fold);                                                                                         // 7471
        fold.subFolds.forEach(function(subFold) {                                                                      // 7472
            fold.restoreRange(subFold);                                                                                // 7473
            this.addFold(subFold);                                                                                     // 7474
        }, this);                                                                                                      // 7475
        if (fold.collapseChildren > 0) {                                                                               // 7476
            this.foldAll(fold.start.row+1, fold.end.row, fold.collapseChildren-1);                                     // 7477
        }                                                                                                              // 7478
        fold.subFolds = [];                                                                                            // 7479
    };                                                                                                                 // 7480
                                                                                                                       // 7481
    this.expandFolds = function(folds) {                                                                               // 7482
        folds.forEach(function(fold) {                                                                                 // 7483
            this.expandFold(fold);                                                                                     // 7484
        }, this);                                                                                                      // 7485
    };                                                                                                                 // 7486
                                                                                                                       // 7487
    this.unfold = function(location, expandInner) {                                                                    // 7488
        var range, folds;                                                                                              // 7489
        if (location == null) {                                                                                        // 7490
            range = new Range(0, 0, this.getLength(), 0);                                                              // 7491
            expandInner = true;                                                                                        // 7492
        } else if (typeof location == "number")                                                                        // 7493
            range = new Range(location, 0, location, this.getLine(location).length);                                   // 7494
        else if ("row" in location)                                                                                    // 7495
            range = Range.fromPoints(location, location);                                                              // 7496
        else                                                                                                           // 7497
            range = location;                                                                                          // 7498
                                                                                                                       // 7499
        folds = this.getFoldsInRangeList(range);                                                                       // 7500
        if (expandInner) {                                                                                             // 7501
            this.removeFolds(folds);                                                                                   // 7502
        } else {                                                                                                       // 7503
            var subFolds = folds;                                                                                      // 7504
            while (subFolds.length) {                                                                                  // 7505
                this.expandFolds(subFolds);                                                                            // 7506
                subFolds = this.getFoldsInRangeList(range);                                                            // 7507
            }                                                                                                          // 7508
        }                                                                                                              // 7509
        if (folds.length)                                                                                              // 7510
            return folds;                                                                                              // 7511
    };                                                                                                                 // 7512
    this.isRowFolded = function(docRow, startFoldRow) {                                                                // 7513
        return !!this.getFoldLine(docRow, startFoldRow);                                                               // 7514
    };                                                                                                                 // 7515
                                                                                                                       // 7516
    this.getRowFoldEnd = function(docRow, startFoldRow) {                                                              // 7517
        var foldLine = this.getFoldLine(docRow, startFoldRow);                                                         // 7518
        return foldLine ? foldLine.end.row : docRow;                                                                   // 7519
    };                                                                                                                 // 7520
                                                                                                                       // 7521
    this.getRowFoldStart = function(docRow, startFoldRow) {                                                            // 7522
        var foldLine = this.getFoldLine(docRow, startFoldRow);                                                         // 7523
        return foldLine ? foldLine.start.row : docRow;                                                                 // 7524
    };                                                                                                                 // 7525
                                                                                                                       // 7526
    this.getFoldDisplayLine = function(foldLine, endRow, endColumn, startRow, startColumn) {                           // 7527
        if (startRow == null)                                                                                          // 7528
            startRow = foldLine.start.row;                                                                             // 7529
        if (startColumn == null)                                                                                       // 7530
            startColumn = 0;                                                                                           // 7531
        if (endRow == null)                                                                                            // 7532
            endRow = foldLine.end.row;                                                                                 // 7533
        if (endColumn == null)                                                                                         // 7534
            endColumn = this.getLine(endRow).length;                                                                   // 7535
        var doc = this.doc;                                                                                            // 7536
        var textLine = "";                                                                                             // 7537
                                                                                                                       // 7538
        foldLine.walk(function(placeholder, row, column, lastColumn) {                                                 // 7539
            if (row < startRow)                                                                                        // 7540
                return;                                                                                                // 7541
            if (row == startRow) {                                                                                     // 7542
                if (column < startColumn)                                                                              // 7543
                    return;                                                                                            // 7544
                lastColumn = Math.max(startColumn, lastColumn);                                                        // 7545
            }                                                                                                          // 7546
                                                                                                                       // 7547
            if (placeholder != null) {                                                                                 // 7548
                textLine += placeholder;                                                                               // 7549
            } else {                                                                                                   // 7550
                textLine += doc.getLine(row).substring(lastColumn, column);                                            // 7551
            }                                                                                                          // 7552
        }, endRow, endColumn);                                                                                         // 7553
        return textLine;                                                                                               // 7554
    };                                                                                                                 // 7555
                                                                                                                       // 7556
    this.getDisplayLine = function(row, endColumn, startRow, startColumn) {                                            // 7557
        var foldLine = this.getFoldLine(row);                                                                          // 7558
                                                                                                                       // 7559
        if (!foldLine) {                                                                                               // 7560
            var line;                                                                                                  // 7561
            line = this.doc.getLine(row);                                                                              // 7562
            return line.substring(startColumn || 0, endColumn || line.length);                                         // 7563
        } else {                                                                                                       // 7564
            return this.getFoldDisplayLine(                                                                            // 7565
                foldLine, row, endColumn, startRow, startColumn);                                                      // 7566
        }                                                                                                              // 7567
    };                                                                                                                 // 7568
                                                                                                                       // 7569
    this.$cloneFoldData = function() {                                                                                 // 7570
        var fd = [];                                                                                                   // 7571
        fd = this.$foldData.map(function(foldLine) {                                                                   // 7572
            var folds = foldLine.folds.map(function(fold) {                                                            // 7573
                return fold.clone();                                                                                   // 7574
            });                                                                                                        // 7575
            return new FoldLine(fd, folds);                                                                            // 7576
        });                                                                                                            // 7577
                                                                                                                       // 7578
        return fd;                                                                                                     // 7579
    };                                                                                                                 // 7580
                                                                                                                       // 7581
    this.toggleFold = function(tryToUnfold) {                                                                          // 7582
        var selection = this.selection;                                                                                // 7583
        var range = selection.getRange();                                                                              // 7584
        var fold;                                                                                                      // 7585
        var bracketPos;                                                                                                // 7586
                                                                                                                       // 7587
        if (range.isEmpty()) {                                                                                         // 7588
            var cursor = range.start;                                                                                  // 7589
            fold = this.getFoldAt(cursor.row, cursor.column);                                                          // 7590
                                                                                                                       // 7591
            if (fold) {                                                                                                // 7592
                this.expandFold(fold);                                                                                 // 7593
                return;                                                                                                // 7594
            } else if (bracketPos = this.findMatchingBracket(cursor)) {                                                // 7595
                if (range.comparePoint(bracketPos) == 1) {                                                             // 7596
                    range.end = bracketPos;                                                                            // 7597
                } else {                                                                                               // 7598
                    range.start = bracketPos;                                                                          // 7599
                    range.start.column++;                                                                              // 7600
                    range.end.column--;                                                                                // 7601
                }                                                                                                      // 7602
            } else if (bracketPos = this.findMatchingBracket({row: cursor.row, column: cursor.column + 1})) {          // 7603
                if (range.comparePoint(bracketPos) == 1)                                                               // 7604
                    range.end = bracketPos;                                                                            // 7605
                else                                                                                                   // 7606
                    range.start = bracketPos;                                                                          // 7607
                                                                                                                       // 7608
                range.start.column++;                                                                                  // 7609
            } else {                                                                                                   // 7610
                range = this.getCommentFoldRange(cursor.row, cursor.column) || range;                                  // 7611
            }                                                                                                          // 7612
        } else {                                                                                                       // 7613
            var folds = this.getFoldsInRange(range);                                                                   // 7614
            if (tryToUnfold && folds.length) {                                                                         // 7615
                this.expandFolds(folds);                                                                               // 7616
                return;                                                                                                // 7617
            } else if (folds.length == 1 ) {                                                                           // 7618
                fold = folds[0];                                                                                       // 7619
            }                                                                                                          // 7620
        }                                                                                                              // 7621
                                                                                                                       // 7622
        if (!fold)                                                                                                     // 7623
            fold = this.getFoldAt(range.start.row, range.start.column);                                                // 7624
                                                                                                                       // 7625
        if (fold && fold.range.toString() == range.toString()) {                                                       // 7626
            this.expandFold(fold);                                                                                     // 7627
            return;                                                                                                    // 7628
        }                                                                                                              // 7629
                                                                                                                       // 7630
        var placeholder = "...";                                                                                       // 7631
        if (!range.isMultiLine()) {                                                                                    // 7632
            placeholder = this.getTextRange(range);                                                                    // 7633
            if(placeholder.length < 4)                                                                                 // 7634
                return;                                                                                                // 7635
            placeholder = placeholder.trim().substring(0, 2) + "..";                                                   // 7636
        }                                                                                                              // 7637
                                                                                                                       // 7638
        this.addFold(placeholder, range);                                                                              // 7639
    };                                                                                                                 // 7640
                                                                                                                       // 7641
    this.getCommentFoldRange = function(row, column, dir) {                                                            // 7642
        var iterator = new TokenIterator(this, row, column);                                                           // 7643
        var token = iterator.getCurrentToken();                                                                        // 7644
        if (token && /^comment|string/.test(token.type)) {                                                             // 7645
            var range = new Range();                                                                                   // 7646
            var re = new RegExp(token.type.replace(/\..*/, "\\."));                                                    // 7647
            if (dir != 1) {                                                                                            // 7648
                do {                                                                                                   // 7649
                    token = iterator.stepBackward();                                                                   // 7650
                } while(token && re.test(token.type));                                                                 // 7651
                iterator.stepForward();                                                                                // 7652
            }                                                                                                          // 7653
                                                                                                                       // 7654
            range.start.row = iterator.getCurrentTokenRow();                                                           // 7655
            range.start.column = iterator.getCurrentTokenColumn() + 2;                                                 // 7656
                                                                                                                       // 7657
            iterator = new TokenIterator(this, row, column);                                                           // 7658
                                                                                                                       // 7659
            if (dir != -1) {                                                                                           // 7660
                do {                                                                                                   // 7661
                    token = iterator.stepForward();                                                                    // 7662
                } while(token && re.test(token.type));                                                                 // 7663
                token = iterator.stepBackward();                                                                       // 7664
            } else                                                                                                     // 7665
                token = iterator.getCurrentToken();                                                                    // 7666
                                                                                                                       // 7667
            range.end.row = iterator.getCurrentTokenRow();                                                             // 7668
            range.end.column = iterator.getCurrentTokenColumn() + token.value.length - 2;                              // 7669
            return range;                                                                                              // 7670
        }                                                                                                              // 7671
    };                                                                                                                 // 7672
                                                                                                                       // 7673
    this.foldAll = function(startRow, endRow, depth) {                                                                 // 7674
        if (depth == undefined)                                                                                        // 7675
            depth = 100000; // JSON.stringify doesn't hanle Infinity                                                   // 7676
        var foldWidgets = this.foldWidgets;                                                                            // 7677
        if (!foldWidgets)                                                                                              // 7678
            return; // mode doesn't support folding                                                                    // 7679
        endRow = endRow || this.getLength();                                                                           // 7680
        startRow = startRow || 0;                                                                                      // 7681
        for (var row = startRow; row < endRow; row++) {                                                                // 7682
            if (foldWidgets[row] == null)                                                                              // 7683
                foldWidgets[row] = this.getFoldWidget(row);                                                            // 7684
            if (foldWidgets[row] != "start")                                                                           // 7685
                continue;                                                                                              // 7686
                                                                                                                       // 7687
            var range = this.getFoldWidgetRange(row);                                                                  // 7688
            if (range && range.isMultiLine()                                                                           // 7689
                && range.end.row <= endRow                                                                             // 7690
                && range.start.row >= startRow                                                                         // 7691
            ) {                                                                                                        // 7692
                row = range.end.row;                                                                                   // 7693
                try {                                                                                                  // 7694
                    var fold = this.addFold("...", range);                                                             // 7695
                    if (fold)                                                                                          // 7696
                        fold.collapseChildren = depth;                                                                 // 7697
                } catch(e) {}                                                                                          // 7698
            }                                                                                                          // 7699
        }                                                                                                              // 7700
    };                                                                                                                 // 7701
    this.$foldStyles = {                                                                                               // 7702
        "manual": 1,                                                                                                   // 7703
        "markbegin": 1,                                                                                                // 7704
        "markbeginend": 1                                                                                              // 7705
    };                                                                                                                 // 7706
    this.$foldStyle = "markbegin";                                                                                     // 7707
    this.setFoldStyle = function(style) {                                                                              // 7708
        if (!this.$foldStyles[style])                                                                                  // 7709
            throw new Error("invalid fold style: " + style + "[" + Object.keys(this.$foldStyles).join(", ") + "]");    // 7710
                                                                                                                       // 7711
        if (this.$foldStyle == style)                                                                                  // 7712
            return;                                                                                                    // 7713
                                                                                                                       // 7714
        this.$foldStyle = style;                                                                                       // 7715
                                                                                                                       // 7716
        if (style == "manual")                                                                                         // 7717
            this.unfold();                                                                                             // 7718
        var mode = this.$foldMode;                                                                                     // 7719
        this.$setFolding(null);                                                                                        // 7720
        this.$setFolding(mode);                                                                                        // 7721
    };                                                                                                                 // 7722
                                                                                                                       // 7723
    this.$setFolding = function(foldMode) {                                                                            // 7724
        if (this.$foldMode == foldMode)                                                                                // 7725
            return;                                                                                                    // 7726
                                                                                                                       // 7727
        this.$foldMode = foldMode;                                                                                     // 7728
                                                                                                                       // 7729
        this.removeListener('change', this.$updateFoldWidgets);                                                        // 7730
        this._emit("changeAnnotation");                                                                                // 7731
                                                                                                                       // 7732
        if (!foldMode || this.$foldStyle == "manual") {                                                                // 7733
            this.foldWidgets = null;                                                                                   // 7734
            return;                                                                                                    // 7735
        }                                                                                                              // 7736
                                                                                                                       // 7737
        this.foldWidgets = [];                                                                                         // 7738
        this.getFoldWidget = foldMode.getFoldWidget.bind(foldMode, this, this.$foldStyle);                             // 7739
        this.getFoldWidgetRange = foldMode.getFoldWidgetRange.bind(foldMode, this, this.$foldStyle);                   // 7740
                                                                                                                       // 7741
        this.$updateFoldWidgets = this.updateFoldWidgets.bind(this);                                                   // 7742
        this.on('change', this.$updateFoldWidgets);                                                                    // 7743
                                                                                                                       // 7744
    };                                                                                                                 // 7745
                                                                                                                       // 7746
    this.getParentFoldRangeData = function (row, ignoreCurrent) {                                                      // 7747
        var fw = this.foldWidgets;                                                                                     // 7748
        if (!fw || (ignoreCurrent && fw[row]))                                                                         // 7749
            return {};                                                                                                 // 7750
                                                                                                                       // 7751
        var i = row - 1, firstRange;                                                                                   // 7752
        while (i >= 0) {                                                                                               // 7753
            var c = fw[i];                                                                                             // 7754
            if (c == null)                                                                                             // 7755
                c = fw[i] = this.getFoldWidget(i);                                                                     // 7756
                                                                                                                       // 7757
            if (c == "start") {                                                                                        // 7758
                var range = this.getFoldWidgetRange(i);                                                                // 7759
                if (!firstRange)                                                                                       // 7760
                    firstRange = range;                                                                                // 7761
                if (range && range.end.row >= row)                                                                     // 7762
                    break;                                                                                             // 7763
            }                                                                                                          // 7764
            i--;                                                                                                       // 7765
        }                                                                                                              // 7766
                                                                                                                       // 7767
        return {                                                                                                       // 7768
            range: i !== -1 && range,                                                                                  // 7769
            firstRange: firstRange                                                                                     // 7770
        };                                                                                                             // 7771
    }                                                                                                                  // 7772
                                                                                                                       // 7773
    this.onFoldWidgetClick = function(row, e) {                                                                        // 7774
        e = e.domEvent;                                                                                                // 7775
        var options = {                                                                                                // 7776
            children: e.shiftKey,                                                                                      // 7777
            all: e.ctrlKey || e.metaKey,                                                                               // 7778
            siblings: e.altKey                                                                                         // 7779
        };                                                                                                             // 7780
                                                                                                                       // 7781
        var range = this.$toggleFoldWidget(row, options);                                                              // 7782
        if (!range) {                                                                                                  // 7783
            var el = (e.target || e.srcElement)                                                                        // 7784
            if (el && /ace_fold-widget/.test(el.className))                                                            // 7785
                el.className += " ace_invalid";                                                                        // 7786
        }                                                                                                              // 7787
    };                                                                                                                 // 7788
                                                                                                                       // 7789
    this.$toggleFoldWidget = function(row, options) {                                                                  // 7790
        if (!this.getFoldWidget)                                                                                       // 7791
            return;                                                                                                    // 7792
        var type = this.getFoldWidget(row);                                                                            // 7793
        var line = this.getLine(row);                                                                                  // 7794
                                                                                                                       // 7795
        var dir = type === "end" ? -1 : 1;                                                                             // 7796
        var fold = this.getFoldAt(row, dir === -1 ? 0 : line.length, dir);                                             // 7797
                                                                                                                       // 7798
        if (fold) {                                                                                                    // 7799
            if (options.children || options.all)                                                                       // 7800
                this.removeFold(fold);                                                                                 // 7801
            else                                                                                                       // 7802
                this.expandFold(fold);                                                                                 // 7803
            return;                                                                                                    // 7804
        }                                                                                                              // 7805
                                                                                                                       // 7806
        var range = this.getFoldWidgetRange(row, true);                                                                // 7807
        if (range && !range.isMultiLine()) {                                                                           // 7808
            fold = this.getFoldAt(range.start.row, range.start.column, 1);                                             // 7809
            if (fold && range.isEqual(fold.range)) {                                                                   // 7810
                this.removeFold(fold);                                                                                 // 7811
                return;                                                                                                // 7812
            }                                                                                                          // 7813
        }                                                                                                              // 7814
                                                                                                                       // 7815
        if (options.siblings) {                                                                                        // 7816
            var data = this.getParentFoldRangeData(row);                                                               // 7817
            if (data.range) {                                                                                          // 7818
                var startRow = data.range.start.row + 1;                                                               // 7819
                var endRow = data.range.end.row;                                                                       // 7820
            }                                                                                                          // 7821
            this.foldAll(startRow, endRow, options.all ? 10000 : 0);                                                   // 7822
        } else if (options.children) {                                                                                 // 7823
            endRow = range ? range.end.row : this.getLength();                                                         // 7824
            this.foldAll(row + 1, range.end.row, options.all ? 10000 : 0);                                             // 7825
        } else if (range) {                                                                                            // 7826
            if (options.all)                                                                                           // 7827
                range.collapseChildren = 10000;                                                                        // 7828
            this.addFold("...", range);                                                                                // 7829
        }                                                                                                              // 7830
                                                                                                                       // 7831
        return range;                                                                                                  // 7832
    };                                                                                                                 // 7833
                                                                                                                       // 7834
                                                                                                                       // 7835
                                                                                                                       // 7836
    this.toggleFoldWidget = function(toggleParent) {                                                                   // 7837
        var row = this.selection.getCursor().row;                                                                      // 7838
        row = this.getRowFoldStart(row);                                                                               // 7839
        var range = this.$toggleFoldWidget(row, {});                                                                   // 7840
                                                                                                                       // 7841
        if (range)                                                                                                     // 7842
            return;                                                                                                    // 7843
        var data = this.getParentFoldRangeData(row, true);                                                             // 7844
        range = data.range || data.firstRange;                                                                         // 7845
                                                                                                                       // 7846
        if (range) {                                                                                                   // 7847
            row = range.start.row;                                                                                     // 7848
            var fold = this.getFoldAt(row, this.getLine(row).length, 1);                                               // 7849
                                                                                                                       // 7850
            if (fold) {                                                                                                // 7851
                this.removeFold(fold);                                                                                 // 7852
            } else {                                                                                                   // 7853
                this.addFold("...", range);                                                                            // 7854
            }                                                                                                          // 7855
        }                                                                                                              // 7856
    };                                                                                                                 // 7857
                                                                                                                       // 7858
    this.updateFoldWidgets = function(e) {                                                                             // 7859
        var delta = e.data;                                                                                            // 7860
        var range = delta.range;                                                                                       // 7861
        var firstRow = range.start.row;                                                                                // 7862
        var len = range.end.row - firstRow;                                                                            // 7863
                                                                                                                       // 7864
        if (len === 0) {                                                                                               // 7865
            this.foldWidgets[firstRow] = null;                                                                         // 7866
        } else if (delta.action == "removeText" || delta.action == "removeLines") {                                    // 7867
            this.foldWidgets.splice(firstRow, len + 1, null);                                                          // 7868
        } else {                                                                                                       // 7869
            var args = Array(len + 1);                                                                                 // 7870
            args.unshift(firstRow, 1);                                                                                 // 7871
            this.foldWidgets.splice.apply(this.foldWidgets, args);                                                     // 7872
        }                                                                                                              // 7873
    };                                                                                                                 // 7874
                                                                                                                       // 7875
}                                                                                                                      // 7876
                                                                                                                       // 7877
exports.Folding = Folding;                                                                                             // 7878
                                                                                                                       // 7879
});                                                                                                                    // 7880
                                                                                                                       // 7881
define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 7883
                                                                                                                       // 7884
var TokenIterator = require("../token_iterator").TokenIterator;                                                        // 7885
var Range = require("../range").Range;                                                                                 // 7886
                                                                                                                       // 7887
                                                                                                                       // 7888
function BracketMatch() {                                                                                              // 7889
                                                                                                                       // 7890
    this.findMatchingBracket = function(position, chr) {                                                               // 7891
        if (position.column == 0) return null;                                                                         // 7892
                                                                                                                       // 7893
        var charBeforeCursor = chr || this.getLine(position.row).charAt(position.column-1);                            // 7894
        if (charBeforeCursor == "") return null;                                                                       // 7895
                                                                                                                       // 7896
        var match = charBeforeCursor.match(/([\(\[\{])|([\)\]\}])/);                                                   // 7897
        if (!match)                                                                                                    // 7898
            return null;                                                                                               // 7899
                                                                                                                       // 7900
        if (match[1])                                                                                                  // 7901
            return this.$findClosingBracket(match[1], position);                                                       // 7902
        else                                                                                                           // 7903
            return this.$findOpeningBracket(match[2], position);                                                       // 7904
    };                                                                                                                 // 7905
                                                                                                                       // 7906
    this.getBracketRange = function(pos) {                                                                             // 7907
        var line = this.getLine(pos.row);                                                                              // 7908
        var before = true, range;                                                                                      // 7909
                                                                                                                       // 7910
        var chr = line.charAt(pos.column-1);                                                                           // 7911
        var match = chr && chr.match(/([\(\[\{])|([\)\]\}])/);                                                         // 7912
        if (!match) {                                                                                                  // 7913
            chr = line.charAt(pos.column);                                                                             // 7914
            pos = {row: pos.row, column: pos.column + 1};                                                              // 7915
            match = chr && chr.match(/([\(\[\{])|([\)\]\}])/);                                                         // 7916
            before = false;                                                                                            // 7917
        }                                                                                                              // 7918
        if (!match)                                                                                                    // 7919
            return null;                                                                                               // 7920
                                                                                                                       // 7921
        if (match[1]) {                                                                                                // 7922
            var bracketPos = this.$findClosingBracket(match[1], pos);                                                  // 7923
            if (!bracketPos)                                                                                           // 7924
                return null;                                                                                           // 7925
            range = Range.fromPoints(pos, bracketPos);                                                                 // 7926
            if (!before) {                                                                                             // 7927
                range.end.column++;                                                                                    // 7928
                range.start.column--;                                                                                  // 7929
            }                                                                                                          // 7930
            range.cursor = range.end;                                                                                  // 7931
        } else {                                                                                                       // 7932
            var bracketPos = this.$findOpeningBracket(match[2], pos);                                                  // 7933
            if (!bracketPos)                                                                                           // 7934
                return null;                                                                                           // 7935
            range = Range.fromPoints(bracketPos, pos);                                                                 // 7936
            if (!before) {                                                                                             // 7937
                range.start.column++;                                                                                  // 7938
                range.end.column--;                                                                                    // 7939
            }                                                                                                          // 7940
            range.cursor = range.start;                                                                                // 7941
        }                                                                                                              // 7942
                                                                                                                       // 7943
        return range;                                                                                                  // 7944
    };                                                                                                                 // 7945
                                                                                                                       // 7946
    this.$brackets = {                                                                                                 // 7947
        ")": "(",                                                                                                      // 7948
        "(": ")",                                                                                                      // 7949
        "]": "[",                                                                                                      // 7950
        "[": "]",                                                                                                      // 7951
        "{": "}",                                                                                                      // 7952
        "}": "{"                                                                                                       // 7953
    };                                                                                                                 // 7954
                                                                                                                       // 7955
    this.$findOpeningBracket = function(bracket, position, typeRe) {                                                   // 7956
        var openBracket = this.$brackets[bracket];                                                                     // 7957
        var depth = 1;                                                                                                 // 7958
                                                                                                                       // 7959
        var iterator = new TokenIterator(this, position.row, position.column);                                         // 7960
        var token = iterator.getCurrentToken();                                                                        // 7961
        if (!token)                                                                                                    // 7962
            token = iterator.stepForward();                                                                            // 7963
        if (!token)                                                                                                    // 7964
            return;                                                                                                    // 7965
                                                                                                                       // 7966
         if (!typeRe){                                                                                                 // 7967
            typeRe = new RegExp(                                                                                       // 7968
                "(\\.?" +                                                                                              // 7969
                token.type.replace(".", "\\.").replace("rparen", ".paren")                                             // 7970
                    .replace(/\b(?:end|start|begin)\b/, "")                                                            // 7971
                + ")+"                                                                                                 // 7972
            );                                                                                                         // 7973
        }                                                                                                              // 7974
        var valueIndex = position.column - iterator.getCurrentTokenColumn() - 2;                                       // 7975
        var value = token.value;                                                                                       // 7976
                                                                                                                       // 7977
        while (true) {                                                                                                 // 7978
                                                                                                                       // 7979
            while (valueIndex >= 0) {                                                                                  // 7980
                var chr = value.charAt(valueIndex);                                                                    // 7981
                if (chr == openBracket) {                                                                              // 7982
                    depth -= 1;                                                                                        // 7983
                    if (depth == 0) {                                                                                  // 7984
                        return {row: iterator.getCurrentTokenRow(),                                                    // 7985
                            column: valueIndex + iterator.getCurrentTokenColumn()};                                    // 7986
                    }                                                                                                  // 7987
                }                                                                                                      // 7988
                else if (chr == bracket) {                                                                             // 7989
                    depth += 1;                                                                                        // 7990
                }                                                                                                      // 7991
                valueIndex -= 1;                                                                                       // 7992
            }                                                                                                          // 7993
            do {                                                                                                       // 7994
                token = iterator.stepBackward();                                                                       // 7995
            } while (token && !typeRe.test(token.type));                                                               // 7996
                                                                                                                       // 7997
            if (token == null)                                                                                         // 7998
                break;                                                                                                 // 7999
                                                                                                                       // 8000
            value = token.value;                                                                                       // 8001
            valueIndex = value.length - 1;                                                                             // 8002
        }                                                                                                              // 8003
                                                                                                                       // 8004
        return null;                                                                                                   // 8005
    };                                                                                                                 // 8006
                                                                                                                       // 8007
    this.$findClosingBracket = function(bracket, position, typeRe) {                                                   // 8008
        var closingBracket = this.$brackets[bracket];                                                                  // 8009
        var depth = 1;                                                                                                 // 8010
                                                                                                                       // 8011
        var iterator = new TokenIterator(this, position.row, position.column);                                         // 8012
        var token = iterator.getCurrentToken();                                                                        // 8013
        if (!token)                                                                                                    // 8014
            token = iterator.stepForward();                                                                            // 8015
        if (!token)                                                                                                    // 8016
            return;                                                                                                    // 8017
                                                                                                                       // 8018
        if (!typeRe){                                                                                                  // 8019
            typeRe = new RegExp(                                                                                       // 8020
                "(\\.?" +                                                                                              // 8021
                token.type.replace(".", "\\.").replace("lparen", ".paren")                                             // 8022
                    .replace(/\b(?:end|start|begin)\b/, "")                                                            // 8023
                + ")+"                                                                                                 // 8024
            );                                                                                                         // 8025
        }                                                                                                              // 8026
        var valueIndex = position.column - iterator.getCurrentTokenColumn();                                           // 8027
                                                                                                                       // 8028
        while (true) {                                                                                                 // 8029
                                                                                                                       // 8030
            var value = token.value;                                                                                   // 8031
            var valueLength = value.length;                                                                            // 8032
            while (valueIndex < valueLength) {                                                                         // 8033
                var chr = value.charAt(valueIndex);                                                                    // 8034
                if (chr == closingBracket) {                                                                           // 8035
                    depth -= 1;                                                                                        // 8036
                    if (depth == 0) {                                                                                  // 8037
                        return {row: iterator.getCurrentTokenRow(),                                                    // 8038
                            column: valueIndex + iterator.getCurrentTokenColumn()};                                    // 8039
                    }                                                                                                  // 8040
                }                                                                                                      // 8041
                else if (chr == bracket) {                                                                             // 8042
                    depth += 1;                                                                                        // 8043
                }                                                                                                      // 8044
                valueIndex += 1;                                                                                       // 8045
            }                                                                                                          // 8046
            do {                                                                                                       // 8047
                token = iterator.stepForward();                                                                        // 8048
            } while (token && !typeRe.test(token.type));                                                               // 8049
                                                                                                                       // 8050
            if (token == null)                                                                                         // 8051
                break;                                                                                                 // 8052
                                                                                                                       // 8053
            valueIndex = 0;                                                                                            // 8054
        }                                                                                                              // 8055
                                                                                                                       // 8056
        return null;                                                                                                   // 8057
    };                                                                                                                 // 8058
}                                                                                                                      // 8059
exports.BracketMatch = BracketMatch;                                                                                   // 8060
                                                                                                                       // 8061
});                                                                                                                    // 8062
                                                                                                                       // 8063
define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"], function(require, exports, module) {
"use strict";                                                                                                          // 8065
                                                                                                                       // 8066
var oop = require("./lib/oop");                                                                                        // 8067
var lang = require("./lib/lang");                                                                                      // 8068
var config = require("./config");                                                                                      // 8069
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 8070
var Selection = require("./selection").Selection;                                                                      // 8071
var TextMode = require("./mode/text").Mode;                                                                            // 8072
var Range = require("./range").Range;                                                                                  // 8073
var Document = require("./document").Document;                                                                         // 8074
var BackgroundTokenizer = require("./background_tokenizer").BackgroundTokenizer;                                       // 8075
var SearchHighlight = require("./search_highlight").SearchHighlight;                                                   // 8076
                                                                                                                       // 8077
var EditSession = function(text, mode) {                                                                               // 8078
    this.$breakpoints = [];                                                                                            // 8079
    this.$decorations = [];                                                                                            // 8080
    this.$frontMarkers = {};                                                                                           // 8081
    this.$backMarkers = {};                                                                                            // 8082
    this.$markerId = 1;                                                                                                // 8083
    this.$undoSelect = true;                                                                                           // 8084
                                                                                                                       // 8085
    this.$foldData = [];                                                                                               // 8086
    this.$foldData.toString = function() {                                                                             // 8087
        return this.join("\n");                                                                                        // 8088
    }                                                                                                                  // 8089
    this.on("changeFold", this.onChangeFold.bind(this));                                                               // 8090
    this.$onChange = this.onChange.bind(this);                                                                         // 8091
                                                                                                                       // 8092
    if (typeof text != "object" || !text.getLine)                                                                      // 8093
        text = new Document(text);                                                                                     // 8094
                                                                                                                       // 8095
    this.setDocument(text);                                                                                            // 8096
    this.selection = new Selection(this);                                                                              // 8097
                                                                                                                       // 8098
    config.resetOptions(this);                                                                                         // 8099
    this.setMode(mode);                                                                                                // 8100
    config._signal("session", this);                                                                                   // 8101
};                                                                                                                     // 8102
                                                                                                                       // 8103
                                                                                                                       // 8104
(function() {                                                                                                          // 8105
                                                                                                                       // 8106
    oop.implement(this, EventEmitter);                                                                                 // 8107
    this.setDocument = function(doc) {                                                                                 // 8108
        if (this.doc)                                                                                                  // 8109
            this.doc.removeListener("change", this.$onChange);                                                         // 8110
                                                                                                                       // 8111
        this.doc = doc;                                                                                                // 8112
        doc.on("change", this.$onChange);                                                                              // 8113
                                                                                                                       // 8114
        if (this.bgTokenizer)                                                                                          // 8115
            this.bgTokenizer.setDocument(this.getDocument());                                                          // 8116
                                                                                                                       // 8117
        this.resetCaches();                                                                                            // 8118
    };                                                                                                                 // 8119
    this.getDocument = function() {                                                                                    // 8120
        return this.doc;                                                                                               // 8121
    };                                                                                                                 // 8122
    this.$resetRowCache = function(docRow) {                                                                           // 8123
        if (!docRow) {                                                                                                 // 8124
            this.$docRowCache = [];                                                                                    // 8125
            this.$screenRowCache = [];                                                                                 // 8126
            return;                                                                                                    // 8127
        }                                                                                                              // 8128
        var l = this.$docRowCache.length;                                                                              // 8129
        var i = this.$getRowCacheIndex(this.$docRowCache, docRow) + 1;                                                 // 8130
        if (l > i) {                                                                                                   // 8131
            this.$docRowCache.splice(i, l);                                                                            // 8132
            this.$screenRowCache.splice(i, l);                                                                         // 8133
        }                                                                                                              // 8134
    };                                                                                                                 // 8135
                                                                                                                       // 8136
    this.$getRowCacheIndex = function(cacheArray, val) {                                                               // 8137
        var low = 0;                                                                                                   // 8138
        var hi = cacheArray.length - 1;                                                                                // 8139
                                                                                                                       // 8140
        while (low <= hi) {                                                                                            // 8141
            var mid = (low + hi) >> 1;                                                                                 // 8142
            var c = cacheArray[mid];                                                                                   // 8143
                                                                                                                       // 8144
            if (val > c)                                                                                               // 8145
                low = mid + 1;                                                                                         // 8146
            else if (val < c)                                                                                          // 8147
                hi = mid - 1;                                                                                          // 8148
            else                                                                                                       // 8149
                return mid;                                                                                            // 8150
        }                                                                                                              // 8151
                                                                                                                       // 8152
        return low -1;                                                                                                 // 8153
    };                                                                                                                 // 8154
                                                                                                                       // 8155
    this.resetCaches = function() {                                                                                    // 8156
        this.$modified = true;                                                                                         // 8157
        this.$wrapData = [];                                                                                           // 8158
        this.$rowLengthCache = [];                                                                                     // 8159
        this.$resetRowCache(0);                                                                                        // 8160
        if (this.bgTokenizer)                                                                                          // 8161
            this.bgTokenizer.start(0);                                                                                 // 8162
    };                                                                                                                 // 8163
                                                                                                                       // 8164
    this.onChangeFold = function(e) {                                                                                  // 8165
        var fold = e.data;                                                                                             // 8166
        this.$resetRowCache(fold.start.row);                                                                           // 8167
    };                                                                                                                 // 8168
                                                                                                                       // 8169
    this.onChange = function(e) {                                                                                      // 8170
        var delta = e.data;                                                                                            // 8171
        this.$modified = true;                                                                                         // 8172
                                                                                                                       // 8173
        this.$resetRowCache(delta.range.start.row);                                                                    // 8174
                                                                                                                       // 8175
        var removedFolds = this.$updateInternalDataOnChange(e);                                                        // 8176
        if (!this.$fromUndo && this.$undoManager && !delta.ignore) {                                                   // 8177
            this.$deltasDoc.push(delta);                                                                               // 8178
            if (removedFolds && removedFolds.length != 0) {                                                            // 8179
                this.$deltasFold.push({                                                                                // 8180
                    action: "removeFolds",                                                                             // 8181
                    folds:  removedFolds                                                                               // 8182
                });                                                                                                    // 8183
            }                                                                                                          // 8184
                                                                                                                       // 8185
            this.$informUndoManager.schedule();                                                                        // 8186
        }                                                                                                              // 8187
                                                                                                                       // 8188
        this.bgTokenizer && this.bgTokenizer.$updateOnChange(delta);                                                   // 8189
        this._signal("change", e);                                                                                     // 8190
    };                                                                                                                 // 8191
    this.setValue = function(text) {                                                                                   // 8192
        this.doc.setValue(text);                                                                                       // 8193
        this.selection.moveTo(0, 0);                                                                                   // 8194
                                                                                                                       // 8195
        this.$resetRowCache(0);                                                                                        // 8196
        this.$deltas = [];                                                                                             // 8197
        this.$deltasDoc = [];                                                                                          // 8198
        this.$deltasFold = [];                                                                                         // 8199
        this.setUndoManager(this.$undoManager);                                                                        // 8200
        this.getUndoManager().reset();                                                                                 // 8201
    };                                                                                                                 // 8202
    this.getValue =                                                                                                    // 8203
    this.toString = function() {                                                                                       // 8204
        return this.doc.getValue();                                                                                    // 8205
    };                                                                                                                 // 8206
    this.getSelection = function() {                                                                                   // 8207
        return this.selection;                                                                                         // 8208
    };                                                                                                                 // 8209
    this.getState = function(row) {                                                                                    // 8210
        return this.bgTokenizer.getState(row);                                                                         // 8211
    };                                                                                                                 // 8212
    this.getTokens = function(row) {                                                                                   // 8213
        return this.bgTokenizer.getTokens(row);                                                                        // 8214
    };                                                                                                                 // 8215
    this.getTokenAt = function(row, column) {                                                                          // 8216
        var tokens = this.bgTokenizer.getTokens(row);                                                                  // 8217
        var token, c = 0;                                                                                              // 8218
        if (column == null) {                                                                                          // 8219
            i = tokens.length - 1;                                                                                     // 8220
            c = this.getLine(row).length;                                                                              // 8221
        } else {                                                                                                       // 8222
            for (var i = 0; i < tokens.length; i++) {                                                                  // 8223
                c += tokens[i].value.length;                                                                           // 8224
                if (c >= column)                                                                                       // 8225
                    break;                                                                                             // 8226
            }                                                                                                          // 8227
        }                                                                                                              // 8228
        token = tokens[i];                                                                                             // 8229
        if (!token)                                                                                                    // 8230
            return null;                                                                                               // 8231
        token.index = i;                                                                                               // 8232
        token.start = c - token.value.length;                                                                          // 8233
        return token;                                                                                                  // 8234
    };                                                                                                                 // 8235
    this.setUndoManager = function(undoManager) {                                                                      // 8236
        this.$undoManager = undoManager;                                                                               // 8237
        this.$deltas = [];                                                                                             // 8238
        this.$deltasDoc = [];                                                                                          // 8239
        this.$deltasFold = [];                                                                                         // 8240
                                                                                                                       // 8241
        if (this.$informUndoManager)                                                                                   // 8242
            this.$informUndoManager.cancel();                                                                          // 8243
                                                                                                                       // 8244
        if (undoManager) {                                                                                             // 8245
            var self = this;                                                                                           // 8246
                                                                                                                       // 8247
            this.$syncInformUndoManager = function() {                                                                 // 8248
                self.$informUndoManager.cancel();                                                                      // 8249
                                                                                                                       // 8250
                if (self.$deltasFold.length) {                                                                         // 8251
                    self.$deltas.push({                                                                                // 8252
                        group: "fold",                                                                                 // 8253
                        deltas: self.$deltasFold                                                                       // 8254
                    });                                                                                                // 8255
                    self.$deltasFold = [];                                                                             // 8256
                }                                                                                                      // 8257
                                                                                                                       // 8258
                if (self.$deltasDoc.length) {                                                                          // 8259
                    self.$deltas.push({                                                                                // 8260
                        group: "doc",                                                                                  // 8261
                        deltas: self.$deltasDoc                                                                        // 8262
                    });                                                                                                // 8263
                    self.$deltasDoc = [];                                                                              // 8264
                }                                                                                                      // 8265
                                                                                                                       // 8266
                if (self.$deltas.length > 0) {                                                                         // 8267
                    undoManager.execute({                                                                              // 8268
                        action: "aceupdate",                                                                           // 8269
                        args: [self.$deltas, self],                                                                    // 8270
                        merge: self.mergeUndoDeltas                                                                    // 8271
                    });                                                                                                // 8272
                }                                                                                                      // 8273
                self.mergeUndoDeltas = false;                                                                          // 8274
                self.$deltas = [];                                                                                     // 8275
            };                                                                                                         // 8276
            this.$informUndoManager = lang.delayedCall(this.$syncInformUndoManager);                                   // 8277
        }                                                                                                              // 8278
    };                                                                                                                 // 8279
    this.markUndoGroup = function() {                                                                                  // 8280
        if (this.$syncInformUndoManager)                                                                               // 8281
            this.$syncInformUndoManager();                                                                             // 8282
    };                                                                                                                 // 8283
                                                                                                                       // 8284
    this.$defaultUndoManager = {                                                                                       // 8285
        undo: function() {},                                                                                           // 8286
        redo: function() {},                                                                                           // 8287
        reset: function() {}                                                                                           // 8288
    };                                                                                                                 // 8289
    this.getUndoManager = function() {                                                                                 // 8290
        return this.$undoManager || this.$defaultUndoManager;                                                          // 8291
    };                                                                                                                 // 8292
    this.getTabString = function() {                                                                                   // 8293
        if (this.getUseSoftTabs()) {                                                                                   // 8294
            return lang.stringRepeat(" ", this.getTabSize());                                                          // 8295
        } else {                                                                                                       // 8296
            return "\t";                                                                                               // 8297
        }                                                                                                              // 8298
    };                                                                                                                 // 8299
    this.setUseSoftTabs = function(val) {                                                                              // 8300
        this.setOption("useSoftTabs", val);                                                                            // 8301
    };                                                                                                                 // 8302
    this.getUseSoftTabs = function() {                                                                                 // 8303
        return this.$useSoftTabs && !this.$mode.$indentWithTabs;                                                       // 8304
    };                                                                                                                 // 8305
    this.setTabSize = function(tabSize) {                                                                              // 8306
        this.setOption("tabSize", tabSize);                                                                            // 8307
    };                                                                                                                 // 8308
    this.getTabSize = function() {                                                                                     // 8309
        return this.$tabSize;                                                                                          // 8310
    };                                                                                                                 // 8311
    this.isTabStop = function(position) {                                                                              // 8312
        return this.$useSoftTabs && (position.column % this.$tabSize === 0);                                           // 8313
    };                                                                                                                 // 8314
                                                                                                                       // 8315
    this.$overwrite = false;                                                                                           // 8316
    this.setOverwrite = function(overwrite) {                                                                          // 8317
        this.setOption("overwrite", overwrite);                                                                        // 8318
    };                                                                                                                 // 8319
    this.getOverwrite = function() {                                                                                   // 8320
        return this.$overwrite;                                                                                        // 8321
    };                                                                                                                 // 8322
    this.toggleOverwrite = function() {                                                                                // 8323
        this.setOverwrite(!this.$overwrite);                                                                           // 8324
    };                                                                                                                 // 8325
    this.addGutterDecoration = function(row, className) {                                                              // 8326
        if (!this.$decorations[row])                                                                                   // 8327
            this.$decorations[row] = "";                                                                               // 8328
        this.$decorations[row] += " " + className;                                                                     // 8329
        this._signal("changeBreakpoint", {});                                                                          // 8330
    };                                                                                                                 // 8331
    this.removeGutterDecoration = function(row, className) {                                                           // 8332
        this.$decorations[row] = (this.$decorations[row] || "").replace(" " + className, "");                          // 8333
        this._signal("changeBreakpoint", {});                                                                          // 8334
    };                                                                                                                 // 8335
    this.getBreakpoints = function() {                                                                                 // 8336
        return this.$breakpoints;                                                                                      // 8337
    };                                                                                                                 // 8338
    this.setBreakpoints = function(rows) {                                                                             // 8339
        this.$breakpoints = [];                                                                                        // 8340
        for (var i=0; i<rows.length; i++) {                                                                            // 8341
            this.$breakpoints[rows[i]] = "ace_breakpoint";                                                             // 8342
        }                                                                                                              // 8343
        this._signal("changeBreakpoint", {});                                                                          // 8344
    };                                                                                                                 // 8345
    this.clearBreakpoints = function() {                                                                               // 8346
        this.$breakpoints = [];                                                                                        // 8347
        this._signal("changeBreakpoint", {});                                                                          // 8348
    };                                                                                                                 // 8349
    this.setBreakpoint = function(row, className) {                                                                    // 8350
        if (className === undefined)                                                                                   // 8351
            className = "ace_breakpoint";                                                                              // 8352
        if (className)                                                                                                 // 8353
            this.$breakpoints[row] = className;                                                                        // 8354
        else                                                                                                           // 8355
            delete this.$breakpoints[row];                                                                             // 8356
        this._signal("changeBreakpoint", {});                                                                          // 8357
    };                                                                                                                 // 8358
    this.clearBreakpoint = function(row) {                                                                             // 8359
        delete this.$breakpoints[row];                                                                                 // 8360
        this._signal("changeBreakpoint", {});                                                                          // 8361
    };                                                                                                                 // 8362
    this.addMarker = function(range, clazz, type, inFront) {                                                           // 8363
        var id = this.$markerId++;                                                                                     // 8364
                                                                                                                       // 8365
        var marker = {                                                                                                 // 8366
            range : range,                                                                                             // 8367
            type : type || "line",                                                                                     // 8368
            renderer: typeof type == "function" ? type : null,                                                         // 8369
            clazz : clazz,                                                                                             // 8370
            inFront: !!inFront,                                                                                        // 8371
            id: id                                                                                                     // 8372
        };                                                                                                             // 8373
                                                                                                                       // 8374
        if (inFront) {                                                                                                 // 8375
            this.$frontMarkers[id] = marker;                                                                           // 8376
            this._signal("changeFrontMarker");                                                                         // 8377
        } else {                                                                                                       // 8378
            this.$backMarkers[id] = marker;                                                                            // 8379
            this._signal("changeBackMarker");                                                                          // 8380
        }                                                                                                              // 8381
                                                                                                                       // 8382
        return id;                                                                                                     // 8383
    };                                                                                                                 // 8384
    this.addDynamicMarker = function(marker, inFront) {                                                                // 8385
        if (!marker.update)                                                                                            // 8386
            return;                                                                                                    // 8387
        var id = this.$markerId++;                                                                                     // 8388
        marker.id = id;                                                                                                // 8389
        marker.inFront = !!inFront;                                                                                    // 8390
                                                                                                                       // 8391
        if (inFront) {                                                                                                 // 8392
            this.$frontMarkers[id] = marker;                                                                           // 8393
            this._signal("changeFrontMarker");                                                                         // 8394
        } else {                                                                                                       // 8395
            this.$backMarkers[id] = marker;                                                                            // 8396
            this._signal("changeBackMarker");                                                                          // 8397
        }                                                                                                              // 8398
                                                                                                                       // 8399
        return marker;                                                                                                 // 8400
    };                                                                                                                 // 8401
    this.removeMarker = function(markerId) {                                                                           // 8402
        var marker = this.$frontMarkers[markerId] || this.$backMarkers[markerId];                                      // 8403
        if (!marker)                                                                                                   // 8404
            return;                                                                                                    // 8405
                                                                                                                       // 8406
        var markers = marker.inFront ? this.$frontMarkers : this.$backMarkers;                                         // 8407
        if (marker) {                                                                                                  // 8408
            delete (markers[markerId]);                                                                                // 8409
            this._signal(marker.inFront ? "changeFrontMarker" : "changeBackMarker");                                   // 8410
        }                                                                                                              // 8411
    };                                                                                                                 // 8412
    this.getMarkers = function(inFront) {                                                                              // 8413
        return inFront ? this.$frontMarkers : this.$backMarkers;                                                       // 8414
    };                                                                                                                 // 8415
                                                                                                                       // 8416
    this.highlight = function(re) {                                                                                    // 8417
        if (!this.$searchHighlight) {                                                                                  // 8418
            var highlight = new SearchHighlight(null, "ace_selected-word", "text");                                    // 8419
            this.$searchHighlight = this.addDynamicMarker(highlight);                                                  // 8420
        }                                                                                                              // 8421
        this.$searchHighlight.setRegexp(re);                                                                           // 8422
    };                                                                                                                 // 8423
    this.highlightLines = function(startRow, endRow, clazz, inFront) {                                                 // 8424
        if (typeof endRow != "number") {                                                                               // 8425
            clazz = endRow;                                                                                            // 8426
            endRow = startRow;                                                                                         // 8427
        }                                                                                                              // 8428
        if (!clazz)                                                                                                    // 8429
            clazz = "ace_step";                                                                                        // 8430
                                                                                                                       // 8431
        var range = new Range(startRow, 0, endRow, Infinity);                                                          // 8432
        range.id = this.addMarker(range, clazz, "fullLine", inFront);                                                  // 8433
        return range;                                                                                                  // 8434
    };                                                                                                                 // 8435
    this.setAnnotations = function(annotations) {                                                                      // 8436
        this.$annotations = annotations;                                                                               // 8437
        this._signal("changeAnnotation", {});                                                                          // 8438
    };                                                                                                                 // 8439
    this.getAnnotations = function() {                                                                                 // 8440
        return this.$annotations || [];                                                                                // 8441
    };                                                                                                                 // 8442
    this.clearAnnotations = function() {                                                                               // 8443
        this.setAnnotations([]);                                                                                       // 8444
    };                                                                                                                 // 8445
    this.$detectNewLine = function(text) {                                                                             // 8446
        var match = text.match(/^.*?(\r?\n)/m);                                                                        // 8447
        if (match) {                                                                                                   // 8448
            this.$autoNewLine = match[1];                                                                              // 8449
        } else {                                                                                                       // 8450
            this.$autoNewLine = "\n";                                                                                  // 8451
        }                                                                                                              // 8452
    };                                                                                                                 // 8453
    this.getWordRange = function(row, column) {                                                                        // 8454
        var line = this.getLine(row);                                                                                  // 8455
                                                                                                                       // 8456
        var inToken = false;                                                                                           // 8457
        if (column > 0)                                                                                                // 8458
            inToken = !!line.charAt(column - 1).match(this.tokenRe);                                                   // 8459
                                                                                                                       // 8460
        if (!inToken)                                                                                                  // 8461
            inToken = !!line.charAt(column).match(this.tokenRe);                                                       // 8462
                                                                                                                       // 8463
        if (inToken)                                                                                                   // 8464
            var re = this.tokenRe;                                                                                     // 8465
        else if (/^\s+$/.test(line.slice(column-1, column+1)))                                                         // 8466
            var re = /\s/;                                                                                             // 8467
        else                                                                                                           // 8468
            var re = this.nonTokenRe;                                                                                  // 8469
                                                                                                                       // 8470
        var start = column;                                                                                            // 8471
        if (start > 0) {                                                                                               // 8472
            do {                                                                                                       // 8473
                start--;                                                                                               // 8474
            }                                                                                                          // 8475
            while (start >= 0 && line.charAt(start).match(re));                                                        // 8476
            start++;                                                                                                   // 8477
        }                                                                                                              // 8478
                                                                                                                       // 8479
        var end = column;                                                                                              // 8480
        while (end < line.length && line.charAt(end).match(re)) {                                                      // 8481
            end++;                                                                                                     // 8482
        }                                                                                                              // 8483
                                                                                                                       // 8484
        return new Range(row, start, row, end);                                                                        // 8485
    };                                                                                                                 // 8486
    this.getAWordRange = function(row, column) {                                                                       // 8487
        var wordRange = this.getWordRange(row, column);                                                                // 8488
        var line = this.getLine(wordRange.end.row);                                                                    // 8489
                                                                                                                       // 8490
        while (line.charAt(wordRange.end.column).match(/[ \t]/)) {                                                     // 8491
            wordRange.end.column += 1;                                                                                 // 8492
        }                                                                                                              // 8493
        return wordRange;                                                                                              // 8494
    };                                                                                                                 // 8495
    this.setNewLineMode = function(newLineMode) {                                                                      // 8496
        this.doc.setNewLineMode(newLineMode);                                                                          // 8497
    };                                                                                                                 // 8498
    this.getNewLineMode = function() {                                                                                 // 8499
        return this.doc.getNewLineMode();                                                                              // 8500
    };                                                                                                                 // 8501
    this.setUseWorker = function(useWorker) { this.setOption("useWorker", useWorker); };                               // 8502
    this.getUseWorker = function() { return this.$useWorker; };                                                        // 8503
    this.onReloadTokenizer = function(e) {                                                                             // 8504
        var rows = e.data;                                                                                             // 8505
        this.bgTokenizer.start(rows.first);                                                                            // 8506
        this._signal("tokenizerUpdate", e);                                                                            // 8507
    };                                                                                                                 // 8508
                                                                                                                       // 8509
    this.$modes = {};                                                                                                  // 8510
    this.$mode = null;                                                                                                 // 8511
    this.$modeId = null;                                                                                               // 8512
    this.setMode = function(mode, cb) {                                                                                // 8513
        if (mode && typeof mode === "object") {                                                                        // 8514
            if (mode.getTokenizer)                                                                                     // 8515
                return this.$onChangeMode(mode);                                                                       // 8516
            var options = mode;                                                                                        // 8517
            var path = options.path;                                                                                   // 8518
        } else {                                                                                                       // 8519
            path = mode || "ace/mode/text";                                                                            // 8520
        }                                                                                                              // 8521
        if (!this.$modes["ace/mode/text"])                                                                             // 8522
            this.$modes["ace/mode/text"] = new TextMode();                                                             // 8523
                                                                                                                       // 8524
        if (this.$modes[path] && !options) {                                                                           // 8525
            this.$onChangeMode(this.$modes[path]);                                                                     // 8526
            cb && cb();                                                                                                // 8527
            return;                                                                                                    // 8528
        }                                                                                                              // 8529
        this.$modeId = path;                                                                                           // 8530
        config.loadModule(["mode", path], function(m) {                                                                // 8531
            if (this.$modeId !== path)                                                                                 // 8532
                return cb && cb();                                                                                     // 8533
            if (this.$modes[path] && !options)                                                                         // 8534
                return this.$onChangeMode(this.$modes[path]);                                                          // 8535
            if (m && m.Mode) {                                                                                         // 8536
                m = new m.Mode(options);                                                                               // 8537
                if (!options) {                                                                                        // 8538
                    this.$modes[path] = m;                                                                             // 8539
                    m.$id = path;                                                                                      // 8540
                }                                                                                                      // 8541
                this.$onChangeMode(m);                                                                                 // 8542
                cb && cb();                                                                                            // 8543
            }                                                                                                          // 8544
        }.bind(this));                                                                                                 // 8545
        if (!this.$mode)                                                                                               // 8546
            this.$onChangeMode(this.$modes["ace/mode/text"], true);                                                    // 8547
    };                                                                                                                 // 8548
                                                                                                                       // 8549
    this.$onChangeMode = function(mode, $isPlaceholder) {                                                              // 8550
        if (!$isPlaceholder)                                                                                           // 8551
            this.$modeId = mode.$id;                                                                                   // 8552
        if (this.$mode === mode)                                                                                       // 8553
            return;                                                                                                    // 8554
                                                                                                                       // 8555
        this.$mode = mode;                                                                                             // 8556
                                                                                                                       // 8557
        this.$stopWorker();                                                                                            // 8558
                                                                                                                       // 8559
        if (this.$useWorker)                                                                                           // 8560
            this.$startWorker();                                                                                       // 8561
                                                                                                                       // 8562
        var tokenizer = mode.getTokenizer();                                                                           // 8563
                                                                                                                       // 8564
        if(tokenizer.addEventListener !== undefined) {                                                                 // 8565
            var onReloadTokenizer = this.onReloadTokenizer.bind(this);                                                 // 8566
            tokenizer.addEventListener("update", onReloadTokenizer);                                                   // 8567
        }                                                                                                              // 8568
                                                                                                                       // 8569
        if (!this.bgTokenizer) {                                                                                       // 8570
            this.bgTokenizer = new BackgroundTokenizer(tokenizer);                                                     // 8571
            var _self = this;                                                                                          // 8572
            this.bgTokenizer.addEventListener("update", function(e) {                                                  // 8573
                _self._signal("tokenizerUpdate", e);                                                                   // 8574
            });                                                                                                        // 8575
        } else {                                                                                                       // 8576
            this.bgTokenizer.setTokenizer(tokenizer);                                                                  // 8577
        }                                                                                                              // 8578
                                                                                                                       // 8579
        this.bgTokenizer.setDocument(this.getDocument());                                                              // 8580
                                                                                                                       // 8581
        this.tokenRe = mode.tokenRe;                                                                                   // 8582
        this.nonTokenRe = mode.nonTokenRe;                                                                             // 8583
                                                                                                                       // 8584
                                                                                                                       // 8585
        if (!$isPlaceholder) {                                                                                         // 8586
            if (mode.attachToSession)                                                                                  // 8587
                mode.attachToSession(this);                                                                            // 8588
            this.$options.wrapMethod.set.call(this, this.$wrapMethod);                                                 // 8589
            this.$setFolding(mode.foldingRules);                                                                       // 8590
            this.bgTokenizer.start(0);                                                                                 // 8591
            this._emit("changeMode");                                                                                  // 8592
        }                                                                                                              // 8593
    };                                                                                                                 // 8594
                                                                                                                       // 8595
    this.$stopWorker = function() {                                                                                    // 8596
        if (this.$worker) {                                                                                            // 8597
            this.$worker.terminate();                                                                                  // 8598
            this.$worker = null;                                                                                       // 8599
        }                                                                                                              // 8600
    };                                                                                                                 // 8601
                                                                                                                       // 8602
    this.$startWorker = function() {                                                                                   // 8603
        try {                                                                                                          // 8604
            this.$worker = this.$mode.createWorker(this);                                                              // 8605
        } catch (e) {                                                                                                  // 8606
            if (typeof console == "object") {                                                                          // 8607
                console.log("Could not load worker");                                                                  // 8608
                console.log(e);                                                                                        // 8609
            }                                                                                                          // 8610
            this.$worker = null;                                                                                       // 8611
        }                                                                                                              // 8612
    };                                                                                                                 // 8613
    this.getMode = function() {                                                                                        // 8614
        return this.$mode;                                                                                             // 8615
    };                                                                                                                 // 8616
                                                                                                                       // 8617
    this.$scrollTop = 0;                                                                                               // 8618
    this.setScrollTop = function(scrollTop) {                                                                          // 8619
        if (this.$scrollTop === scrollTop || isNaN(scrollTop))                                                         // 8620
            return;                                                                                                    // 8621
                                                                                                                       // 8622
        this.$scrollTop = scrollTop;                                                                                   // 8623
        this._signal("changeScrollTop", scrollTop);                                                                    // 8624
    };                                                                                                                 // 8625
    this.getScrollTop = function() {                                                                                   // 8626
        return this.$scrollTop;                                                                                        // 8627
    };                                                                                                                 // 8628
                                                                                                                       // 8629
    this.$scrollLeft = 0;                                                                                              // 8630
    this.setScrollLeft = function(scrollLeft) {                                                                        // 8631
        if (this.$scrollLeft === scrollLeft || isNaN(scrollLeft))                                                      // 8632
            return;                                                                                                    // 8633
                                                                                                                       // 8634
        this.$scrollLeft = scrollLeft;                                                                                 // 8635
        this._signal("changeScrollLeft", scrollLeft);                                                                  // 8636
    };                                                                                                                 // 8637
    this.getScrollLeft = function() {                                                                                  // 8638
        return this.$scrollLeft;                                                                                       // 8639
    };                                                                                                                 // 8640
    this.getScreenWidth = function() {                                                                                 // 8641
        this.$computeWidth();                                                                                          // 8642
        if (this.lineWidgets)                                                                                          // 8643
            return Math.max(this.getLineWidgetMaxWidth(), this.screenWidth);                                           // 8644
        return this.screenWidth;                                                                                       // 8645
    };                                                                                                                 // 8646
                                                                                                                       // 8647
    this.getLineWidgetMaxWidth = function() {                                                                          // 8648
        if (this.lineWidgetsWidth != null) return this.lineWidgetsWidth;                                               // 8649
        var width = 0;                                                                                                 // 8650
        this.lineWidgets.forEach(function(w) {                                                                         // 8651
            if (w && w.screenWidth > width)                                                                            // 8652
                width = w.screenWidth;                                                                                 // 8653
        });                                                                                                            // 8654
        return this.lineWidgetWidth = width;                                                                           // 8655
    };                                                                                                                 // 8656
                                                                                                                       // 8657
    this.$computeWidth = function(force) {                                                                             // 8658
        if (this.$modified || force) {                                                                                 // 8659
            this.$modified = false;                                                                                    // 8660
                                                                                                                       // 8661
            if (this.$useWrapMode)                                                                                     // 8662
                return this.screenWidth = this.$wrapLimit;                                                             // 8663
                                                                                                                       // 8664
            var lines = this.doc.getAllLines();                                                                        // 8665
            var cache = this.$rowLengthCache;                                                                          // 8666
            var longestScreenLine = 0;                                                                                 // 8667
            var foldIndex = 0;                                                                                         // 8668
            var foldLine = this.$foldData[foldIndex];                                                                  // 8669
            var foldStart = foldLine ? foldLine.start.row : Infinity;                                                  // 8670
            var len = lines.length;                                                                                    // 8671
                                                                                                                       // 8672
            for (var i = 0; i < len; i++) {                                                                            // 8673
                if (i > foldStart) {                                                                                   // 8674
                    i = foldLine.end.row + 1;                                                                          // 8675
                    if (i >= len)                                                                                      // 8676
                        break;                                                                                         // 8677
                    foldLine = this.$foldData[foldIndex++];                                                            // 8678
                    foldStart = foldLine ? foldLine.start.row : Infinity;                                              // 8679
                }                                                                                                      // 8680
                                                                                                                       // 8681
                if (cache[i] == null)                                                                                  // 8682
                    cache[i] = this.$getStringScreenWidth(lines[i])[0];                                                // 8683
                                                                                                                       // 8684
                if (cache[i] > longestScreenLine)                                                                      // 8685
                    longestScreenLine = cache[i];                                                                      // 8686
            }                                                                                                          // 8687
            this.screenWidth = longestScreenLine;                                                                      // 8688
        }                                                                                                              // 8689
    };                                                                                                                 // 8690
    this.getLine = function(row) {                                                                                     // 8691
        return this.doc.getLine(row);                                                                                  // 8692
    };                                                                                                                 // 8693
    this.getLines = function(firstRow, lastRow) {                                                                      // 8694
        return this.doc.getLines(firstRow, lastRow);                                                                   // 8695
    };                                                                                                                 // 8696
    this.getLength = function() {                                                                                      // 8697
        return this.doc.getLength();                                                                                   // 8698
    };                                                                                                                 // 8699
    this.getTextRange = function(range) {                                                                              // 8700
        return this.doc.getTextRange(range || this.selection.getRange());                                              // 8701
    };                                                                                                                 // 8702
    this.insert = function(position, text) {                                                                           // 8703
        return this.doc.insert(position, text);                                                                        // 8704
    };                                                                                                                 // 8705
    this.remove = function(range) {                                                                                    // 8706
        return this.doc.remove(range);                                                                                 // 8707
    };                                                                                                                 // 8708
    this.undoChanges = function(deltas, dontSelect) {                                                                  // 8709
        if (!deltas.length)                                                                                            // 8710
            return;                                                                                                    // 8711
                                                                                                                       // 8712
        this.$fromUndo = true;                                                                                         // 8713
        var lastUndoRange = null;                                                                                      // 8714
        for (var i = deltas.length - 1; i != -1; i--) {                                                                // 8715
            var delta = deltas[i];                                                                                     // 8716
            if (delta.group == "doc") {                                                                                // 8717
                this.doc.revertDeltas(delta.deltas);                                                                   // 8718
                lastUndoRange =                                                                                        // 8719
                    this.$getUndoSelection(delta.deltas, true, lastUndoRange);                                         // 8720
            } else {                                                                                                   // 8721
                delta.deltas.forEach(function(foldDelta) {                                                             // 8722
                    this.addFolds(foldDelta.folds);                                                                    // 8723
                }, this);                                                                                              // 8724
            }                                                                                                          // 8725
        }                                                                                                              // 8726
        this.$fromUndo = false;                                                                                        // 8727
        lastUndoRange &&                                                                                               // 8728
            this.$undoSelect &&                                                                                        // 8729
            !dontSelect &&                                                                                             // 8730
            this.selection.setSelectionRange(lastUndoRange);                                                           // 8731
        return lastUndoRange;                                                                                          // 8732
    };                                                                                                                 // 8733
    this.redoChanges = function(deltas, dontSelect) {                                                                  // 8734
        if (!deltas.length)                                                                                            // 8735
            return;                                                                                                    // 8736
                                                                                                                       // 8737
        this.$fromUndo = true;                                                                                         // 8738
        var lastUndoRange = null;                                                                                      // 8739
        for (var i = 0; i < deltas.length; i++) {                                                                      // 8740
            var delta = deltas[i];                                                                                     // 8741
            if (delta.group == "doc") {                                                                                // 8742
                this.doc.applyDeltas(delta.deltas);                                                                    // 8743
                lastUndoRange =                                                                                        // 8744
                    this.$getUndoSelection(delta.deltas, false, lastUndoRange);                                        // 8745
            }                                                                                                          // 8746
        }                                                                                                              // 8747
        this.$fromUndo = false;                                                                                        // 8748
        lastUndoRange &&                                                                                               // 8749
            this.$undoSelect &&                                                                                        // 8750
            !dontSelect &&                                                                                             // 8751
            this.selection.setSelectionRange(lastUndoRange);                                                           // 8752
        return lastUndoRange;                                                                                          // 8753
    };                                                                                                                 // 8754
    this.setUndoSelect = function(enable) {                                                                            // 8755
        this.$undoSelect = enable;                                                                                     // 8756
    };                                                                                                                 // 8757
                                                                                                                       // 8758
    this.$getUndoSelection = function(deltas, isUndo, lastUndoRange) {                                                 // 8759
        function isInsert(delta) {                                                                                     // 8760
            var insert =                                                                                               // 8761
                delta.action === "insertText" || delta.action === "insertLines";                                       // 8762
            return isUndo ? !insert : insert;                                                                          // 8763
        }                                                                                                              // 8764
                                                                                                                       // 8765
        var delta = deltas[0];                                                                                         // 8766
        var range, point;                                                                                              // 8767
        var lastDeltaIsInsert = false;                                                                                 // 8768
        if (isInsert(delta)) {                                                                                         // 8769
            range = Range.fromPoints(delta.range.start, delta.range.end);                                              // 8770
            lastDeltaIsInsert = true;                                                                                  // 8771
        } else {                                                                                                       // 8772
            range = Range.fromPoints(delta.range.start, delta.range.start);                                            // 8773
            lastDeltaIsInsert = false;                                                                                 // 8774
        }                                                                                                              // 8775
                                                                                                                       // 8776
        for (var i = 1; i < deltas.length; i++) {                                                                      // 8777
            delta = deltas[i];                                                                                         // 8778
            if (isInsert(delta)) {                                                                                     // 8779
                point = delta.range.start;                                                                             // 8780
                if (range.compare(point.row, point.column) == -1) {                                                    // 8781
                    range.setStart(delta.range.start);                                                                 // 8782
                }                                                                                                      // 8783
                point = delta.range.end;                                                                               // 8784
                if (range.compare(point.row, point.column) == 1) {                                                     // 8785
                    range.setEnd(delta.range.end);                                                                     // 8786
                }                                                                                                      // 8787
                lastDeltaIsInsert = true;                                                                              // 8788
            } else {                                                                                                   // 8789
                point = delta.range.start;                                                                             // 8790
                if (range.compare(point.row, point.column) == -1) {                                                    // 8791
                    range =                                                                                            // 8792
                        Range.fromPoints(delta.range.start, delta.range.start);                                        // 8793
                }                                                                                                      // 8794
                lastDeltaIsInsert = false;                                                                             // 8795
            }                                                                                                          // 8796
        }                                                                                                              // 8797
        if (lastUndoRange != null) {                                                                                   // 8798
            if (Range.comparePoints(lastUndoRange.start, range.start) === 0) {                                         // 8799
                lastUndoRange.start.column += range.end.column - range.start.column;                                   // 8800
                lastUndoRange.end.column += range.end.column - range.start.column;                                     // 8801
            }                                                                                                          // 8802
                                                                                                                       // 8803
            var cmp = lastUndoRange.compareRange(range);                                                               // 8804
            if (cmp == 1) {                                                                                            // 8805
                range.setStart(lastUndoRange.start);                                                                   // 8806
            } else if (cmp == -1) {                                                                                    // 8807
                range.setEnd(lastUndoRange.end);                                                                       // 8808
            }                                                                                                          // 8809
        }                                                                                                              // 8810
                                                                                                                       // 8811
        return range;                                                                                                  // 8812
    };                                                                                                                 // 8813
    this.replace = function(range, text) {                                                                             // 8814
        return this.doc.replace(range, text);                                                                          // 8815
    };                                                                                                                 // 8816
    this.moveText = function(fromRange, toPosition, copy) {                                                            // 8817
        var text = this.getTextRange(fromRange);                                                                       // 8818
        var folds = this.getFoldsInRange(fromRange);                                                                   // 8819
                                                                                                                       // 8820
        var toRange = Range.fromPoints(toPosition, toPosition);                                                        // 8821
        if (!copy) {                                                                                                   // 8822
            this.remove(fromRange);                                                                                    // 8823
            var rowDiff = fromRange.start.row - fromRange.end.row;                                                     // 8824
            var collDiff = rowDiff ? -fromRange.end.column : fromRange.start.column - fromRange.end.column;            // 8825
            if (collDiff) {                                                                                            // 8826
                if (toRange.start.row == fromRange.end.row && toRange.start.column > fromRange.end.column)             // 8827
                    toRange.start.column += collDiff;                                                                  // 8828
                if (toRange.end.row == fromRange.end.row && toRange.end.column > fromRange.end.column)                 // 8829
                    toRange.end.column += collDiff;                                                                    // 8830
            }                                                                                                          // 8831
            if (rowDiff && toRange.start.row >= fromRange.end.row) {                                                   // 8832
                toRange.start.row += rowDiff;                                                                          // 8833
                toRange.end.row += rowDiff;                                                                            // 8834
            }                                                                                                          // 8835
        }                                                                                                              // 8836
                                                                                                                       // 8837
        toRange.end = this.insert(toRange.start, text);                                                                // 8838
        if (folds.length) {                                                                                            // 8839
            var oldStart = fromRange.start;                                                                            // 8840
            var newStart = toRange.start;                                                                              // 8841
            var rowDiff = newStart.row - oldStart.row;                                                                 // 8842
            var collDiff = newStart.column - oldStart.column;                                                          // 8843
            this.addFolds(folds.map(function(x) {                                                                      // 8844
                x = x.clone();                                                                                         // 8845
                if (x.start.row == oldStart.row)                                                                       // 8846
                    x.start.column += collDiff;                                                                        // 8847
                if (x.end.row == oldStart.row)                                                                         // 8848
                    x.end.column += collDiff;                                                                          // 8849
                x.start.row += rowDiff;                                                                                // 8850
                x.end.row += rowDiff;                                                                                  // 8851
                return x;                                                                                              // 8852
            }));                                                                                                       // 8853
        }                                                                                                              // 8854
                                                                                                                       // 8855
        return toRange;                                                                                                // 8856
    };                                                                                                                 // 8857
    this.indentRows = function(startRow, endRow, indentString) {                                                       // 8858
        indentString = indentString.replace(/\t/g, this.getTabString());                                               // 8859
        for (var row=startRow; row<=endRow; row++)                                                                     // 8860
            this.insert({row: row, column:0}, indentString);                                                           // 8861
    };                                                                                                                 // 8862
    this.outdentRows = function (range) {                                                                              // 8863
        var rowRange = range.collapseRows();                                                                           // 8864
        var deleteRange = new Range(0, 0, 0, 0);                                                                       // 8865
        var size = this.getTabSize();                                                                                  // 8866
                                                                                                                       // 8867
        for (var i = rowRange.start.row; i <= rowRange.end.row; ++i) {                                                 // 8868
            var line = this.getLine(i);                                                                                // 8869
                                                                                                                       // 8870
            deleteRange.start.row = i;                                                                                 // 8871
            deleteRange.end.row = i;                                                                                   // 8872
            for (var j = 0; j < size; ++j)                                                                             // 8873
                if (line.charAt(j) != ' ')                                                                             // 8874
                    break;                                                                                             // 8875
            if (j < size && line.charAt(j) == '\t') {                                                                  // 8876
                deleteRange.start.column = j;                                                                          // 8877
                deleteRange.end.column = j + 1;                                                                        // 8878
            } else {                                                                                                   // 8879
                deleteRange.start.column = 0;                                                                          // 8880
                deleteRange.end.column = j;                                                                            // 8881
            }                                                                                                          // 8882
            this.remove(deleteRange);                                                                                  // 8883
        }                                                                                                              // 8884
    };                                                                                                                 // 8885
                                                                                                                       // 8886
    this.$moveLines = function(firstRow, lastRow, dir) {                                                               // 8887
        firstRow = this.getRowFoldStart(firstRow);                                                                     // 8888
        lastRow = this.getRowFoldEnd(lastRow);                                                                         // 8889
        if (dir < 0) {                                                                                                 // 8890
            var row = this.getRowFoldStart(firstRow + dir);                                                            // 8891
            if (row < 0) return 0;                                                                                     // 8892
            var diff = row-firstRow;                                                                                   // 8893
        } else if (dir > 0) {                                                                                          // 8894
            var row = this.getRowFoldEnd(lastRow + dir);                                                               // 8895
            if (row > this.doc.getLength()-1) return 0;                                                                // 8896
            var diff = row-lastRow;                                                                                    // 8897
        } else {                                                                                                       // 8898
            firstRow = this.$clipRowToDocument(firstRow);                                                              // 8899
            lastRow = this.$clipRowToDocument(lastRow);                                                                // 8900
            var diff = lastRow - firstRow + 1;                                                                         // 8901
        }                                                                                                              // 8902
                                                                                                                       // 8903
        var range = new Range(firstRow, 0, lastRow, Number.MAX_VALUE);                                                 // 8904
        var folds = this.getFoldsInRange(range).map(function(x){                                                       // 8905
            x = x.clone();                                                                                             // 8906
            x.start.row += diff;                                                                                       // 8907
            x.end.row += diff;                                                                                         // 8908
            return x;                                                                                                  // 8909
        });                                                                                                            // 8910
                                                                                                                       // 8911
        var lines = dir == 0                                                                                           // 8912
            ? this.doc.getLines(firstRow, lastRow)                                                                     // 8913
            : this.doc.removeLines(firstRow, lastRow);                                                                 // 8914
        this.doc.insertLines(firstRow+diff, lines);                                                                    // 8915
        folds.length && this.addFolds(folds);                                                                          // 8916
        return diff;                                                                                                   // 8917
    };                                                                                                                 // 8918
    this.moveLinesUp = function(firstRow, lastRow) {                                                                   // 8919
        return this.$moveLines(firstRow, lastRow, -1);                                                                 // 8920
    };                                                                                                                 // 8921
    this.moveLinesDown = function(firstRow, lastRow) {                                                                 // 8922
        return this.$moveLines(firstRow, lastRow, 1);                                                                  // 8923
    };                                                                                                                 // 8924
    this.duplicateLines = function(firstRow, lastRow) {                                                                // 8925
        return this.$moveLines(firstRow, lastRow, 0);                                                                  // 8926
    };                                                                                                                 // 8927
                                                                                                                       // 8928
                                                                                                                       // 8929
    this.$clipRowToDocument = function(row) {                                                                          // 8930
        return Math.max(0, Math.min(row, this.doc.getLength()-1));                                                     // 8931
    };                                                                                                                 // 8932
                                                                                                                       // 8933
    this.$clipColumnToRow = function(row, column) {                                                                    // 8934
        if (column < 0)                                                                                                // 8935
            return 0;                                                                                                  // 8936
        return Math.min(this.doc.getLine(row).length, column);                                                         // 8937
    };                                                                                                                 // 8938
                                                                                                                       // 8939
                                                                                                                       // 8940
    this.$clipPositionToDocument = function(row, column) {                                                             // 8941
        column = Math.max(0, column);                                                                                  // 8942
                                                                                                                       // 8943
        if (row < 0) {                                                                                                 // 8944
            row = 0;                                                                                                   // 8945
            column = 0;                                                                                                // 8946
        } else {                                                                                                       // 8947
            var len = this.doc.getLength();                                                                            // 8948
            if (row >= len) {                                                                                          // 8949
                row = len - 1;                                                                                         // 8950
                column = this.doc.getLine(len-1).length;                                                               // 8951
            } else {                                                                                                   // 8952
                column = Math.min(this.doc.getLine(row).length, column);                                               // 8953
            }                                                                                                          // 8954
        }                                                                                                              // 8955
                                                                                                                       // 8956
        return {                                                                                                       // 8957
            row: row,                                                                                                  // 8958
            column: column                                                                                             // 8959
        };                                                                                                             // 8960
    };                                                                                                                 // 8961
                                                                                                                       // 8962
    this.$clipRangeToDocument = function(range) {                                                                      // 8963
        if (range.start.row < 0) {                                                                                     // 8964
            range.start.row = 0;                                                                                       // 8965
            range.start.column = 0;                                                                                    // 8966
        } else {                                                                                                       // 8967
            range.start.column = this.$clipColumnToRow(                                                                // 8968
                range.start.row,                                                                                       // 8969
                range.start.column                                                                                     // 8970
            );                                                                                                         // 8971
        }                                                                                                              // 8972
                                                                                                                       // 8973
        var len = this.doc.getLength() - 1;                                                                            // 8974
        if (range.end.row > len) {                                                                                     // 8975
            range.end.row = len;                                                                                       // 8976
            range.end.column = this.doc.getLine(len).length;                                                           // 8977
        } else {                                                                                                       // 8978
            range.end.column = this.$clipColumnToRow(                                                                  // 8979
                range.end.row,                                                                                         // 8980
                range.end.column                                                                                       // 8981
            );                                                                                                         // 8982
        }                                                                                                              // 8983
        return range;                                                                                                  // 8984
    };                                                                                                                 // 8985
    this.$wrapLimit = 80;                                                                                              // 8986
    this.$useWrapMode = false;                                                                                         // 8987
    this.$wrapLimitRange = {                                                                                           // 8988
        min : null,                                                                                                    // 8989
        max : null                                                                                                     // 8990
    };                                                                                                                 // 8991
    this.setUseWrapMode = function(useWrapMode) {                                                                      // 8992
        if (useWrapMode != this.$useWrapMode) {                                                                        // 8993
            this.$useWrapMode = useWrapMode;                                                                           // 8994
            this.$modified = true;                                                                                     // 8995
            this.$resetRowCache(0);                                                                                    // 8996
            if (useWrapMode) {                                                                                         // 8997
                var len = this.getLength();                                                                            // 8998
                this.$wrapData = Array(len);                                                                           // 8999
                this.$updateWrapData(0, len - 1);                                                                      // 9000
            }                                                                                                          // 9001
                                                                                                                       // 9002
            this._signal("changeWrapMode");                                                                            // 9003
        }                                                                                                              // 9004
    };                                                                                                                 // 9005
    this.getUseWrapMode = function() {                                                                                 // 9006
        return this.$useWrapMode;                                                                                      // 9007
    };                                                                                                                 // 9008
    this.setWrapLimitRange = function(min, max) {                                                                      // 9009
        if (this.$wrapLimitRange.min !== min || this.$wrapLimitRange.max !== max) {                                    // 9010
            this.$wrapLimitRange = {                                                                                   // 9011
                min: min,                                                                                              // 9012
                max: max                                                                                               // 9013
            };                                                                                                         // 9014
            this.$modified = true;                                                                                     // 9015
            this._signal("changeWrapMode");                                                                            // 9016
        }                                                                                                              // 9017
    };                                                                                                                 // 9018
    this.adjustWrapLimit = function(desiredLimit, $printMargin) {                                                      // 9019
        var limits = this.$wrapLimitRange;                                                                             // 9020
        if (limits.max < 0)                                                                                            // 9021
            limits = {min: $printMargin, max: $printMargin};                                                           // 9022
        var wrapLimit = this.$constrainWrapLimit(desiredLimit, limits.min, limits.max);                                // 9023
        if (wrapLimit != this.$wrapLimit && wrapLimit > 1) {                                                           // 9024
            this.$wrapLimit = wrapLimit;                                                                               // 9025
            this.$modified = true;                                                                                     // 9026
            if (this.$useWrapMode) {                                                                                   // 9027
                this.$updateWrapData(0, this.getLength() - 1);                                                         // 9028
                this.$resetRowCache(0);                                                                                // 9029
                this._signal("changeWrapLimit");                                                                       // 9030
            }                                                                                                          // 9031
            return true;                                                                                               // 9032
        }                                                                                                              // 9033
        return false;                                                                                                  // 9034
    };                                                                                                                 // 9035
                                                                                                                       // 9036
    this.$constrainWrapLimit = function(wrapLimit, min, max) {                                                         // 9037
        if (min)                                                                                                       // 9038
            wrapLimit = Math.max(min, wrapLimit);                                                                      // 9039
                                                                                                                       // 9040
        if (max)                                                                                                       // 9041
            wrapLimit = Math.min(max, wrapLimit);                                                                      // 9042
                                                                                                                       // 9043
        return wrapLimit;                                                                                              // 9044
    };                                                                                                                 // 9045
    this.getWrapLimit = function() {                                                                                   // 9046
        return this.$wrapLimit;                                                                                        // 9047
    };                                                                                                                 // 9048
    this.setWrapLimit = function (limit) {                                                                             // 9049
        this.setWrapLimitRange(limit, limit);                                                                          // 9050
    };                                                                                                                 // 9051
    this.getWrapLimitRange = function() {                                                                              // 9052
        return {                                                                                                       // 9053
            min : this.$wrapLimitRange.min,                                                                            // 9054
            max : this.$wrapLimitRange.max                                                                             // 9055
        };                                                                                                             // 9056
    };                                                                                                                 // 9057
                                                                                                                       // 9058
    this.$updateInternalDataOnChange = function(e) {                                                                   // 9059
        var useWrapMode = this.$useWrapMode;                                                                           // 9060
        var len;                                                                                                       // 9061
        var action = e.data.action;                                                                                    // 9062
        var firstRow = e.data.range.start.row;                                                                         // 9063
        var lastRow = e.data.range.end.row;                                                                            // 9064
        var start = e.data.range.start;                                                                                // 9065
        var end = e.data.range.end;                                                                                    // 9066
        var removedFolds = null;                                                                                       // 9067
                                                                                                                       // 9068
        if (action.indexOf("Lines") != -1) {                                                                           // 9069
            if (action == "insertLines") {                                                                             // 9070
                lastRow = firstRow + (e.data.lines.length);                                                            // 9071
            } else {                                                                                                   // 9072
                lastRow = firstRow;                                                                                    // 9073
            }                                                                                                          // 9074
            len = e.data.lines ? e.data.lines.length : lastRow - firstRow;                                             // 9075
        } else {                                                                                                       // 9076
            len = lastRow - firstRow;                                                                                  // 9077
        }                                                                                                              // 9078
                                                                                                                       // 9079
        this.$updating = true;                                                                                         // 9080
        if (len != 0) {                                                                                                // 9081
            if (action.indexOf("remove") != -1) {                                                                      // 9082
                this[useWrapMode ? "$wrapData" : "$rowLengthCache"].splice(firstRow, len);                             // 9083
                                                                                                                       // 9084
                var foldLines = this.$foldData;                                                                        // 9085
                removedFolds = this.getFoldsInRange(e.data.range);                                                     // 9086
                this.removeFolds(removedFolds);                                                                        // 9087
                                                                                                                       // 9088
                var foldLine = this.getFoldLine(end.row);                                                              // 9089
                var idx = 0;                                                                                           // 9090
                if (foldLine) {                                                                                        // 9091
                    foldLine.addRemoveChars(end.row, end.column, start.column - end.column);                           // 9092
                    foldLine.shiftRow(-len);                                                                           // 9093
                                                                                                                       // 9094
                    var foldLineBefore = this.getFoldLine(firstRow);                                                   // 9095
                    if (foldLineBefore && foldLineBefore !== foldLine) {                                               // 9096
                        foldLineBefore.merge(foldLine);                                                                // 9097
                        foldLine = foldLineBefore;                                                                     // 9098
                    }                                                                                                  // 9099
                    idx = foldLines.indexOf(foldLine) + 1;                                                             // 9100
                }                                                                                                      // 9101
                                                                                                                       // 9102
                for (idx; idx < foldLines.length; idx++) {                                                             // 9103
                    var foldLine = foldLines[idx];                                                                     // 9104
                    if (foldLine.start.row >= end.row) {                                                               // 9105
                        foldLine.shiftRow(-len);                                                                       // 9106
                    }                                                                                                  // 9107
                }                                                                                                      // 9108
                                                                                                                       // 9109
                lastRow = firstRow;                                                                                    // 9110
            } else {                                                                                                   // 9111
                var args = Array(len);                                                                                 // 9112
                args.unshift(firstRow, 0);                                                                             // 9113
                var arr = useWrapMode ? this.$wrapData : this.$rowLengthCache                                          // 9114
                arr.splice.apply(arr, args);                                                                           // 9115
                var foldLines = this.$foldData;                                                                        // 9116
                var foldLine = this.getFoldLine(firstRow);                                                             // 9117
                var idx = 0;                                                                                           // 9118
                if (foldLine) {                                                                                        // 9119
                    var cmp = foldLine.range.compareInside(start.row, start.column);                                   // 9120
                    if (cmp == 0) {                                                                                    // 9121
                        foldLine = foldLine.split(start.row, start.column);                                            // 9122
                        if (foldLine) {                                                                                // 9123
                            foldLine.shiftRow(len);                                                                    // 9124
                            foldLine.addRemoveChars(lastRow, 0, end.column - start.column);                            // 9125
                        }                                                                                              // 9126
                    } else                                                                                             // 9127
                    if (cmp == -1) {                                                                                   // 9128
                        foldLine.addRemoveChars(firstRow, 0, end.column - start.column);                               // 9129
                        foldLine.shiftRow(len);                                                                        // 9130
                    }                                                                                                  // 9131
                    idx = foldLines.indexOf(foldLine) + 1;                                                             // 9132
                }                                                                                                      // 9133
                                                                                                                       // 9134
                for (idx; idx < foldLines.length; idx++) {                                                             // 9135
                    var foldLine = foldLines[idx];                                                                     // 9136
                    if (foldLine.start.row >= firstRow) {                                                              // 9137
                        foldLine.shiftRow(len);                                                                        // 9138
                    }                                                                                                  // 9139
                }                                                                                                      // 9140
            }                                                                                                          // 9141
        } else {                                                                                                       // 9142
            len = Math.abs(e.data.range.start.column - e.data.range.end.column);                                       // 9143
            if (action.indexOf("remove") != -1) {                                                                      // 9144
                removedFolds = this.getFoldsInRange(e.data.range);                                                     // 9145
                this.removeFolds(removedFolds);                                                                        // 9146
                                                                                                                       // 9147
                len = -len;                                                                                            // 9148
            }                                                                                                          // 9149
            var foldLine = this.getFoldLine(firstRow);                                                                 // 9150
            if (foldLine) {                                                                                            // 9151
                foldLine.addRemoveChars(firstRow, start.column, len);                                                  // 9152
            }                                                                                                          // 9153
        }                                                                                                              // 9154
                                                                                                                       // 9155
        if (useWrapMode && this.$wrapData.length != this.doc.getLength()) {                                            // 9156
            console.error("doc.getLength() and $wrapData.length have to be the same!");                                // 9157
        }                                                                                                              // 9158
        this.$updating = false;                                                                                        // 9159
                                                                                                                       // 9160
        if (useWrapMode)                                                                                               // 9161
            this.$updateWrapData(firstRow, lastRow);                                                                   // 9162
        else                                                                                                           // 9163
            this.$updateRowLengthCache(firstRow, lastRow);                                                             // 9164
                                                                                                                       // 9165
        return removedFolds;                                                                                           // 9166
    };                                                                                                                 // 9167
                                                                                                                       // 9168
    this.$updateRowLengthCache = function(firstRow, lastRow, b) {                                                      // 9169
        this.$rowLengthCache[firstRow] = null;                                                                         // 9170
        this.$rowLengthCache[lastRow] = null;                                                                          // 9171
    };                                                                                                                 // 9172
                                                                                                                       // 9173
    this.$updateWrapData = function(firstRow, lastRow) {                                                               // 9174
        var lines = this.doc.getAllLines();                                                                            // 9175
        var tabSize = this.getTabSize();                                                                               // 9176
        var wrapData = this.$wrapData;                                                                                 // 9177
        var wrapLimit = this.$wrapLimit;                                                                               // 9178
        var tokens;                                                                                                    // 9179
        var foldLine;                                                                                                  // 9180
                                                                                                                       // 9181
        var row = firstRow;                                                                                            // 9182
        lastRow = Math.min(lastRow, lines.length - 1);                                                                 // 9183
        while (row <= lastRow) {                                                                                       // 9184
            foldLine = this.getFoldLine(row, foldLine);                                                                // 9185
            if (!foldLine) {                                                                                           // 9186
                tokens = this.$getDisplayTokens(lines[row]);                                                           // 9187
                wrapData[row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);                                   // 9188
                row ++;                                                                                                // 9189
            } else {                                                                                                   // 9190
                tokens = [];                                                                                           // 9191
                foldLine.walk(function(placeholder, row, column, lastColumn) {                                         // 9192
                        var walkTokens;                                                                                // 9193
                        if (placeholder != null) {                                                                     // 9194
                            walkTokens = this.$getDisplayTokens(                                                       // 9195
                                            placeholder, tokens.length);                                               // 9196
                            walkTokens[0] = PLACEHOLDER_START;                                                         // 9197
                            for (var i = 1; i < walkTokens.length; i++) {                                              // 9198
                                walkTokens[i] = PLACEHOLDER_BODY;                                                      // 9199
                            }                                                                                          // 9200
                        } else {                                                                                       // 9201
                            walkTokens = this.$getDisplayTokens(                                                       // 9202
                                lines[row].substring(lastColumn, column),                                              // 9203
                                tokens.length);                                                                        // 9204
                        }                                                                                              // 9205
                        tokens = tokens.concat(walkTokens);                                                            // 9206
                    }.bind(this),                                                                                      // 9207
                    foldLine.end.row,                                                                                  // 9208
                    lines[foldLine.end.row].length + 1                                                                 // 9209
                );                                                                                                     // 9210
                                                                                                                       // 9211
                wrapData[foldLine.start.row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);                    // 9212
                row = foldLine.end.row + 1;                                                                            // 9213
            }                                                                                                          // 9214
        }                                                                                                              // 9215
    };                                                                                                                 // 9216
    var CHAR = 1,                                                                                                      // 9217
        CHAR_EXT = 2,                                                                                                  // 9218
        PLACEHOLDER_START = 3,                                                                                         // 9219
        PLACEHOLDER_BODY =  4,                                                                                         // 9220
        PUNCTUATION = 9,                                                                                               // 9221
        SPACE = 10,                                                                                                    // 9222
        TAB = 11,                                                                                                      // 9223
        TAB_SPACE = 12;                                                                                                // 9224
                                                                                                                       // 9225
                                                                                                                       // 9226
    this.$computeWrapSplits = function(tokens, wrapLimit) {                                                            // 9227
        if (tokens.length == 0) {                                                                                      // 9228
            return [];                                                                                                 // 9229
        }                                                                                                              // 9230
                                                                                                                       // 9231
        var splits = [];                                                                                               // 9232
        var displayLength = tokens.length;                                                                             // 9233
        var lastSplit = 0, lastDocSplit = 0;                                                                           // 9234
                                                                                                                       // 9235
        var isCode = this.$wrapAsCode;                                                                                 // 9236
                                                                                                                       // 9237
        function addSplit(screenPos) {                                                                                 // 9238
            var displayed = tokens.slice(lastSplit, screenPos);                                                        // 9239
            var len = displayed.length;                                                                                // 9240
            displayed.join("").                                                                                        // 9241
                replace(/12/g, function() {                                                                            // 9242
                    len -= 1;                                                                                          // 9243
                }).                                                                                                    // 9244
                replace(/2/g, function() {                                                                             // 9245
                    len -= 1;                                                                                          // 9246
                });                                                                                                    // 9247
                                                                                                                       // 9248
            lastDocSplit += len;                                                                                       // 9249
            splits.push(lastDocSplit);                                                                                 // 9250
            lastSplit = screenPos;                                                                                     // 9251
        }                                                                                                              // 9252
                                                                                                                       // 9253
        while (displayLength - lastSplit > wrapLimit) {                                                                // 9254
            var split = lastSplit + wrapLimit;                                                                         // 9255
            if (tokens[split - 1] >= SPACE && tokens[split] >= SPACE) {                                                // 9256
                addSplit(split);                                                                                       // 9257
                continue;                                                                                              // 9258
            }                                                                                                          // 9259
            if (tokens[split] == PLACEHOLDER_START || tokens[split] == PLACEHOLDER_BODY) {                             // 9260
                for (split; split != lastSplit - 1; split--) {                                                         // 9261
                    if (tokens[split] == PLACEHOLDER_START) {                                                          // 9262
                        break;                                                                                         // 9263
                    }                                                                                                  // 9264
                }                                                                                                      // 9265
                if (split > lastSplit) {                                                                               // 9266
                    addSplit(split);                                                                                   // 9267
                    continue;                                                                                          // 9268
                }                                                                                                      // 9269
                split = lastSplit + wrapLimit;                                                                         // 9270
                for (split; split < tokens.length; split++) {                                                          // 9271
                    if (tokens[split] != PLACEHOLDER_BODY) {                                                           // 9272
                        break;                                                                                         // 9273
                    }                                                                                                  // 9274
                }                                                                                                      // 9275
                if (split == tokens.length) {                                                                          // 9276
                    break;  // Breaks the while-loop.                                                                  // 9277
                }                                                                                                      // 9278
                addSplit(split);                                                                                       // 9279
                continue;                                                                                              // 9280
            }                                                                                                          // 9281
            var minSplit = Math.max(split - (isCode ? 10 : wrapLimit-(wrapLimit>>2)), lastSplit - 1);                  // 9282
            while (split > minSplit && tokens[split] < PLACEHOLDER_START) {                                            // 9283
                split --;                                                                                              // 9284
            }                                                                                                          // 9285
            if (isCode) {                                                                                              // 9286
                while (split > minSplit && tokens[split] < PLACEHOLDER_START) {                                        // 9287
                    split --;                                                                                          // 9288
                }                                                                                                      // 9289
                while (split > minSplit && tokens[split] == PUNCTUATION) {                                             // 9290
                    split --;                                                                                          // 9291
                }                                                                                                      // 9292
            } else {                                                                                                   // 9293
                while (split > minSplit && tokens[split] < SPACE) {                                                    // 9294
                    split --;                                                                                          // 9295
                }                                                                                                      // 9296
            }                                                                                                          // 9297
            if (split > minSplit) {                                                                                    // 9298
                addSplit(++split);                                                                                     // 9299
                continue;                                                                                              // 9300
            }                                                                                                          // 9301
            split = lastSplit + wrapLimit;                                                                             // 9302
            if (tokens[split] == CHAR_EXT)                                                                             // 9303
                split--;                                                                                               // 9304
            addSplit(split);                                                                                           // 9305
        }                                                                                                              // 9306
        return splits;                                                                                                 // 9307
    };                                                                                                                 // 9308
    this.$getDisplayTokens = function(str, offset) {                                                                   // 9309
        var arr = [];                                                                                                  // 9310
        var tabSize;                                                                                                   // 9311
        offset = offset || 0;                                                                                          // 9312
                                                                                                                       // 9313
        for (var i = 0; i < str.length; i++) {                                                                         // 9314
            var c = str.charCodeAt(i);                                                                                 // 9315
            if (c == 9) {                                                                                              // 9316
                tabSize = this.getScreenTabSize(arr.length + offset);                                                  // 9317
                arr.push(TAB);                                                                                         // 9318
                for (var n = 1; n < tabSize; n++) {                                                                    // 9319
                    arr.push(TAB_SPACE);                                                                               // 9320
                }                                                                                                      // 9321
            }                                                                                                          // 9322
            else if (c == 32) {                                                                                        // 9323
                arr.push(SPACE);                                                                                       // 9324
            } else if((c > 39 && c < 48) || (c > 57 && c < 64)) {                                                      // 9325
                arr.push(PUNCTUATION);                                                                                 // 9326
            }                                                                                                          // 9327
            else if (c >= 0x1100 && isFullWidth(c)) {                                                                  // 9328
                arr.push(CHAR, CHAR_EXT);                                                                              // 9329
            } else {                                                                                                   // 9330
                arr.push(CHAR);                                                                                        // 9331
            }                                                                                                          // 9332
        }                                                                                                              // 9333
        return arr;                                                                                                    // 9334
    };                                                                                                                 // 9335
    this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {                                        // 9336
        if (maxScreenColumn == 0)                                                                                      // 9337
            return [0, 0];                                                                                             // 9338
        if (maxScreenColumn == null)                                                                                   // 9339
            maxScreenColumn = Infinity;                                                                                // 9340
        screenColumn = screenColumn || 0;                                                                              // 9341
                                                                                                                       // 9342
        var c, column;                                                                                                 // 9343
        for (column = 0; column < str.length; column++) {                                                              // 9344
            c = str.charCodeAt(column);                                                                                // 9345
            if (c == 9) {                                                                                              // 9346
                screenColumn += this.getScreenTabSize(screenColumn);                                                   // 9347
            }                                                                                                          // 9348
            else if (c >= 0x1100 && isFullWidth(c)) {                                                                  // 9349
                screenColumn += 2;                                                                                     // 9350
            } else {                                                                                                   // 9351
                screenColumn += 1;                                                                                     // 9352
            }                                                                                                          // 9353
            if (screenColumn > maxScreenColumn) {                                                                      // 9354
                break;                                                                                                 // 9355
            }                                                                                                          // 9356
        }                                                                                                              // 9357
                                                                                                                       // 9358
        return [screenColumn, column];                                                                                 // 9359
    };                                                                                                                 // 9360
                                                                                                                       // 9361
    this.lineWidgets = null;                                                                                           // 9362
    this.getRowLength = function(row) {                                                                                // 9363
        if (this.lineWidgets)                                                                                          // 9364
            var h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;                                      // 9365
        else                                                                                                           // 9366
            h = 0                                                                                                      // 9367
        if (!this.$useWrapMode || !this.$wrapData[row]) {                                                              // 9368
            return 1 + h;                                                                                              // 9369
        } else {                                                                                                       // 9370
            return this.$wrapData[row].length + 1 + h;                                                                 // 9371
        }                                                                                                              // 9372
    };                                                                                                                 // 9373
    this.getRowLineCount = function(row) {                                                                             // 9374
        if (!this.$useWrapMode || !this.$wrapData[row]) {                                                              // 9375
            return 1;                                                                                                  // 9376
        } else {                                                                                                       // 9377
            return this.$wrapData[row].length + 1;                                                                     // 9378
        }                                                                                                              // 9379
    };                                                                                                                 // 9380
    this.getScreenLastRowColumn = function(screenRow) {                                                                // 9381
        var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);                                          // 9382
        return this.documentToScreenColumn(pos.row, pos.column);                                                       // 9383
    };                                                                                                                 // 9384
    this.getDocumentLastRowColumn = function(docRow, docColumn) {                                                      // 9385
        var screenRow = this.documentToScreenRow(docRow, docColumn);                                                   // 9386
        return this.getScreenLastRowColumn(screenRow);                                                                 // 9387
    };                                                                                                                 // 9388
    this.getDocumentLastRowColumnPosition = function(docRow, docColumn) {                                              // 9389
        var screenRow = this.documentToScreenRow(docRow, docColumn);                                                   // 9390
        return this.screenToDocumentPosition(screenRow, Number.MAX_VALUE / 10);                                        // 9391
    };                                                                                                                 // 9392
    this.getRowSplitData = function(row) {                                                                             // 9393
        if (!this.$useWrapMode) {                                                                                      // 9394
            return undefined;                                                                                          // 9395
        } else {                                                                                                       // 9396
            return this.$wrapData[row];                                                                                // 9397
        }                                                                                                              // 9398
    };                                                                                                                 // 9399
    this.getScreenTabSize = function(screenColumn) {                                                                   // 9400
        return this.$tabSize - screenColumn % this.$tabSize;                                                           // 9401
    };                                                                                                                 // 9402
                                                                                                                       // 9403
                                                                                                                       // 9404
    this.screenToDocumentRow = function(screenRow, screenColumn) {                                                     // 9405
        return this.screenToDocumentPosition(screenRow, screenColumn).row;                                             // 9406
    };                                                                                                                 // 9407
                                                                                                                       // 9408
                                                                                                                       // 9409
    this.screenToDocumentColumn = function(screenRow, screenColumn) {                                                  // 9410
        return this.screenToDocumentPosition(screenRow, screenColumn).column;                                          // 9411
    };                                                                                                                 // 9412
    this.screenToDocumentPosition = function(screenRow, screenColumn) {                                                // 9413
        if (screenRow < 0)                                                                                             // 9414
            return {row: 0, column: 0};                                                                                // 9415
                                                                                                                       // 9416
        var line;                                                                                                      // 9417
        var docRow = 0;                                                                                                // 9418
        var docColumn = 0;                                                                                             // 9419
        var column;                                                                                                    // 9420
        var row = 0;                                                                                                   // 9421
        var rowLength = 0;                                                                                             // 9422
                                                                                                                       // 9423
        var rowCache = this.$screenRowCache;                                                                           // 9424
        var i = this.$getRowCacheIndex(rowCache, screenRow);                                                           // 9425
        var l = rowCache.length;                                                                                       // 9426
        if (l && i >= 0) {                                                                                             // 9427
            var row = rowCache[i];                                                                                     // 9428
            var docRow = this.$docRowCache[i];                                                                         // 9429
            var doCache = screenRow > rowCache[l - 1];                                                                 // 9430
        } else {                                                                                                       // 9431
            var doCache = !l;                                                                                          // 9432
        }                                                                                                              // 9433
                                                                                                                       // 9434
        var maxRow = this.getLength() - 1;                                                                             // 9435
        var foldLine = this.getNextFoldLine(docRow);                                                                   // 9436
        var foldStart = foldLine ? foldLine.start.row : Infinity;                                                      // 9437
                                                                                                                       // 9438
        while (row <= screenRow) {                                                                                     // 9439
            rowLength = this.getRowLength(docRow);                                                                     // 9440
            if (row + rowLength > screenRow || docRow >= maxRow) {                                                     // 9441
                break;                                                                                                 // 9442
            } else {                                                                                                   // 9443
                row += rowLength;                                                                                      // 9444
                docRow++;                                                                                              // 9445
                if (docRow > foldStart) {                                                                              // 9446
                    docRow = foldLine.end.row+1;                                                                       // 9447
                    foldLine = this.getNextFoldLine(docRow, foldLine);                                                 // 9448
                    foldStart = foldLine ? foldLine.start.row : Infinity;                                              // 9449
                }                                                                                                      // 9450
            }                                                                                                          // 9451
                                                                                                                       // 9452
            if (doCache) {                                                                                             // 9453
                this.$docRowCache.push(docRow);                                                                        // 9454
                this.$screenRowCache.push(row);                                                                        // 9455
            }                                                                                                          // 9456
        }                                                                                                              // 9457
                                                                                                                       // 9458
        if (foldLine && foldLine.start.row <= docRow) {                                                                // 9459
            line = this.getFoldDisplayLine(foldLine);                                                                  // 9460
            docRow = foldLine.start.row;                                                                               // 9461
        } else if (row + rowLength <= screenRow || docRow > maxRow) {                                                  // 9462
            return {                                                                                                   // 9463
                row: maxRow,                                                                                           // 9464
                column: this.getLine(maxRow).length                                                                    // 9465
            };                                                                                                         // 9466
        } else {                                                                                                       // 9467
            line = this.getLine(docRow);                                                                               // 9468
            foldLine = null;                                                                                           // 9469
        }                                                                                                              // 9470
                                                                                                                       // 9471
        if (this.$useWrapMode) {                                                                                       // 9472
            var splits = this.$wrapData[docRow];                                                                       // 9473
            if (splits) {                                                                                              // 9474
                var splitIndex = Math.floor(screenRow - row);                                                          // 9475
                column = splits[splitIndex];                                                                           // 9476
                if(splitIndex > 0 && splits.length) {                                                                  // 9477
                    docColumn = splits[splitIndex - 1] || splits[splits.length - 1];                                   // 9478
                    line = line.substring(docColumn);                                                                  // 9479
                }                                                                                                      // 9480
            }                                                                                                          // 9481
        }                                                                                                              // 9482
                                                                                                                       // 9483
        docColumn += this.$getStringScreenWidth(line, screenColumn)[1];                                                // 9484
        if (this.$useWrapMode && docColumn >= column)                                                                  // 9485
            docColumn = column - 1;                                                                                    // 9486
                                                                                                                       // 9487
        if (foldLine)                                                                                                  // 9488
            return foldLine.idxToPosition(docColumn);                                                                  // 9489
                                                                                                                       // 9490
        return {row: docRow, column: docColumn};                                                                       // 9491
    };                                                                                                                 // 9492
    this.documentToScreenPosition = function(docRow, docColumn) {                                                      // 9493
        if (typeof docColumn === "undefined")                                                                          // 9494
            var pos = this.$clipPositionToDocument(docRow.row, docRow.column);                                         // 9495
        else                                                                                                           // 9496
            pos = this.$clipPositionToDocument(docRow, docColumn);                                                     // 9497
                                                                                                                       // 9498
        docRow = pos.row;                                                                                              // 9499
        docColumn = pos.column;                                                                                        // 9500
                                                                                                                       // 9501
        var screenRow = 0;                                                                                             // 9502
        var foldStartRow = null;                                                                                       // 9503
        var fold = null;                                                                                               // 9504
        fold = this.getFoldAt(docRow, docColumn, 1);                                                                   // 9505
        if (fold) {                                                                                                    // 9506
            docRow = fold.start.row;                                                                                   // 9507
            docColumn = fold.start.column;                                                                             // 9508
        }                                                                                                              // 9509
                                                                                                                       // 9510
        var rowEnd, row = 0;                                                                                           // 9511
                                                                                                                       // 9512
                                                                                                                       // 9513
        var rowCache = this.$docRowCache;                                                                              // 9514
        var i = this.$getRowCacheIndex(rowCache, docRow);                                                              // 9515
        var l = rowCache.length;                                                                                       // 9516
        if (l && i >= 0) {                                                                                             // 9517
            var row = rowCache[i];                                                                                     // 9518
            var screenRow = this.$screenRowCache[i];                                                                   // 9519
            var doCache = docRow > rowCache[l - 1];                                                                    // 9520
        } else {                                                                                                       // 9521
            var doCache = !l;                                                                                          // 9522
        }                                                                                                              // 9523
                                                                                                                       // 9524
        var foldLine = this.getNextFoldLine(row);                                                                      // 9525
        var foldStart = foldLine ?foldLine.start.row :Infinity;                                                        // 9526
                                                                                                                       // 9527
        while (row < docRow) {                                                                                         // 9528
            if (row >= foldStart) {                                                                                    // 9529
                rowEnd = foldLine.end.row + 1;                                                                         // 9530
                if (rowEnd > docRow)                                                                                   // 9531
                    break;                                                                                             // 9532
                foldLine = this.getNextFoldLine(rowEnd, foldLine);                                                     // 9533
                foldStart = foldLine ?foldLine.start.row :Infinity;                                                    // 9534
            }                                                                                                          // 9535
            else {                                                                                                     // 9536
                rowEnd = row + 1;                                                                                      // 9537
            }                                                                                                          // 9538
                                                                                                                       // 9539
            screenRow += this.getRowLength(row);                                                                       // 9540
            row = rowEnd;                                                                                              // 9541
                                                                                                                       // 9542
            if (doCache) {                                                                                             // 9543
                this.$docRowCache.push(row);                                                                           // 9544
                this.$screenRowCache.push(screenRow);                                                                  // 9545
            }                                                                                                          // 9546
        }                                                                                                              // 9547
        var textLine = "";                                                                                             // 9548
        if (foldLine && row >= foldStart) {                                                                            // 9549
            textLine = this.getFoldDisplayLine(foldLine, docRow, docColumn);                                           // 9550
            foldStartRow = foldLine.start.row;                                                                         // 9551
        } else {                                                                                                       // 9552
            textLine = this.getLine(docRow).substring(0, docColumn);                                                   // 9553
            foldStartRow = docRow;                                                                                     // 9554
        }                                                                                                              // 9555
        if (this.$useWrapMode) {                                                                                       // 9556
            var wrapRow = this.$wrapData[foldStartRow];                                                                // 9557
            if (wrapRow) {                                                                                             // 9558
                var screenRowOffset = 0;                                                                               // 9559
                while (textLine.length >= wrapRow[screenRowOffset]) {                                                  // 9560
                    screenRow ++;                                                                                      // 9561
                    screenRowOffset++;                                                                                 // 9562
                }                                                                                                      // 9563
                textLine = textLine.substring(                                                                         // 9564
                    wrapRow[screenRowOffset - 1] || 0, textLine.length                                                 // 9565
                );                                                                                                     // 9566
            }                                                                                                          // 9567
        }                                                                                                              // 9568
                                                                                                                       // 9569
        return {                                                                                                       // 9570
            row: screenRow,                                                                                            // 9571
            column: this.$getStringScreenWidth(textLine)[0]                                                            // 9572
        };                                                                                                             // 9573
    };                                                                                                                 // 9574
    this.documentToScreenColumn = function(row, docColumn) {                                                           // 9575
        return this.documentToScreenPosition(row, docColumn).column;                                                   // 9576
    };                                                                                                                 // 9577
    this.documentToScreenRow = function(docRow, docColumn) {                                                           // 9578
        return this.documentToScreenPosition(docRow, docColumn).row;                                                   // 9579
    };                                                                                                                 // 9580
    this.getScreenLength = function() {                                                                                // 9581
        var screenRows = 0;                                                                                            // 9582
        var fold = null;                                                                                               // 9583
        if (!this.$useWrapMode) {                                                                                      // 9584
            screenRows = this.getLength();                                                                             // 9585
            var foldData = this.$foldData;                                                                             // 9586
            for (var i = 0; i < foldData.length; i++) {                                                                // 9587
                fold = foldData[i];                                                                                    // 9588
                screenRows -= fold.end.row - fold.start.row;                                                           // 9589
            }                                                                                                          // 9590
        } else {                                                                                                       // 9591
            var lastRow = this.$wrapData.length;                                                                       // 9592
            var row = 0, i = 0;                                                                                        // 9593
            var fold = this.$foldData[i++];                                                                            // 9594
            var foldStart = fold ? fold.start.row :Infinity;                                                           // 9595
                                                                                                                       // 9596
            while (row < lastRow) {                                                                                    // 9597
                var splits = this.$wrapData[row];                                                                      // 9598
                screenRows += splits ? splits.length + 1 : 1;                                                          // 9599
                row ++;                                                                                                // 9600
                if (row > foldStart) {                                                                                 // 9601
                    row = fold.end.row+1;                                                                              // 9602
                    fold = this.$foldData[i++];                                                                        // 9603
                    foldStart = fold ?fold.start.row :Infinity;                                                        // 9604
                }                                                                                                      // 9605
            }                                                                                                          // 9606
        }                                                                                                              // 9607
        if (this.lineWidgets)                                                                                          // 9608
            screenRows += this.$getWidgetScreenLength();                                                               // 9609
                                                                                                                       // 9610
        return screenRows;                                                                                             // 9611
    };                                                                                                                 // 9612
    this.$setFontMetrics = function(fm) {                                                                              // 9613
    };                                                                                                                 // 9614
                                                                                                                       // 9615
    this.destroy = function() {                                                                                        // 9616
        if (this.bgTokenizer) {                                                                                        // 9617
            this.bgTokenizer.setDocument(null);                                                                        // 9618
            this.bgTokenizer = null;                                                                                   // 9619
        }                                                                                                              // 9620
        this.$stopWorker();                                                                                            // 9621
    };                                                                                                                 // 9622
    function isFullWidth(c) {                                                                                          // 9623
        if (c < 0x1100)                                                                                                // 9624
            return false;                                                                                              // 9625
        return c >= 0x1100 && c <= 0x115F ||                                                                           // 9626
               c >= 0x11A3 && c <= 0x11A7 ||                                                                           // 9627
               c >= 0x11FA && c <= 0x11FF ||                                                                           // 9628
               c >= 0x2329 && c <= 0x232A ||                                                                           // 9629
               c >= 0x2E80 && c <= 0x2E99 ||                                                                           // 9630
               c >= 0x2E9B && c <= 0x2EF3 ||                                                                           // 9631
               c >= 0x2F00 && c <= 0x2FD5 ||                                                                           // 9632
               c >= 0x2FF0 && c <= 0x2FFB ||                                                                           // 9633
               c >= 0x3000 && c <= 0x303E ||                                                                           // 9634
               c >= 0x3041 && c <= 0x3096 ||                                                                           // 9635
               c >= 0x3099 && c <= 0x30FF ||                                                                           // 9636
               c >= 0x3105 && c <= 0x312D ||                                                                           // 9637
               c >= 0x3131 && c <= 0x318E ||                                                                           // 9638
               c >= 0x3190 && c <= 0x31BA ||                                                                           // 9639
               c >= 0x31C0 && c <= 0x31E3 ||                                                                           // 9640
               c >= 0x31F0 && c <= 0x321E ||                                                                           // 9641
               c >= 0x3220 && c <= 0x3247 ||                                                                           // 9642
               c >= 0x3250 && c <= 0x32FE ||                                                                           // 9643
               c >= 0x3300 && c <= 0x4DBF ||                                                                           // 9644
               c >= 0x4E00 && c <= 0xA48C ||                                                                           // 9645
               c >= 0xA490 && c <= 0xA4C6 ||                                                                           // 9646
               c >= 0xA960 && c <= 0xA97C ||                                                                           // 9647
               c >= 0xAC00 && c <= 0xD7A3 ||                                                                           // 9648
               c >= 0xD7B0 && c <= 0xD7C6 ||                                                                           // 9649
               c >= 0xD7CB && c <= 0xD7FB ||                                                                           // 9650
               c >= 0xF900 && c <= 0xFAFF ||                                                                           // 9651
               c >= 0xFE10 && c <= 0xFE19 ||                                                                           // 9652
               c >= 0xFE30 && c <= 0xFE52 ||                                                                           // 9653
               c >= 0xFE54 && c <= 0xFE66 ||                                                                           // 9654
               c >= 0xFE68 && c <= 0xFE6B ||                                                                           // 9655
               c >= 0xFF01 && c <= 0xFF60 ||                                                                           // 9656
               c >= 0xFFE0 && c <= 0xFFE6;                                                                             // 9657
    };                                                                                                                 // 9658
                                                                                                                       // 9659
}).call(EditSession.prototype);                                                                                        // 9660
                                                                                                                       // 9661
require("./edit_session/folding").Folding.call(EditSession.prototype);                                                 // 9662
require("./edit_session/bracket_match").BracketMatch.call(EditSession.prototype);                                      // 9663
                                                                                                                       // 9664
                                                                                                                       // 9665
config.defineOptions(EditSession.prototype, "session", {                                                               // 9666
    wrap: {                                                                                                            // 9667
        set: function(value) {                                                                                         // 9668
            if (!value || value == "off")                                                                              // 9669
                value = false;                                                                                         // 9670
            else if (value == "free")                                                                                  // 9671
                value = true;                                                                                          // 9672
            else if (value == "printMargin")                                                                           // 9673
                value = -1;                                                                                            // 9674
            else if (typeof value == "string")                                                                         // 9675
                value = parseInt(value, 10) || false;                                                                  // 9676
                                                                                                                       // 9677
            if (this.$wrap == value)                                                                                   // 9678
                return;                                                                                                // 9679
            if (!value) {                                                                                              // 9680
                this.setUseWrapMode(false);                                                                            // 9681
            } else {                                                                                                   // 9682
                var col = typeof value == "number" ? value : null;                                                     // 9683
                this.setWrapLimitRange(col, col);                                                                      // 9684
                this.setUseWrapMode(true);                                                                             // 9685
            }                                                                                                          // 9686
            this.$wrap = value;                                                                                        // 9687
        },                                                                                                             // 9688
        get: function() {                                                                                              // 9689
            if (this.getUseWrapMode()) {                                                                               // 9690
                if (this.$wrap == -1)                                                                                  // 9691
                    return "printMargin";                                                                              // 9692
                if (!this.getWrapLimitRange().min)                                                                     // 9693
                    return "free";                                                                                     // 9694
                return this.$wrap;                                                                                     // 9695
            }                                                                                                          // 9696
            return "off";                                                                                              // 9697
        },                                                                                                             // 9698
        handlesSet: true                                                                                               // 9699
    },                                                                                                                 // 9700
    wrapMethod: {                                                                                                      // 9701
        set: function(val) {                                                                                           // 9702
            val = val == "auto"                                                                                        // 9703
                ? this.$mode.type != "text"                                                                            // 9704
                : val != "text";                                                                                       // 9705
            if (val != this.$wrapAsCode) {                                                                             // 9706
                this.$wrapAsCode = val;                                                                                // 9707
                if (this.$useWrapMode) {                                                                               // 9708
                    this.$modified = true;                                                                             // 9709
                    this.$resetRowCache(0);                                                                            // 9710
                    this.$updateWrapData(0, this.getLength() - 1);                                                     // 9711
                }                                                                                                      // 9712
            }                                                                                                          // 9713
        },                                                                                                             // 9714
        initialValue: "auto"                                                                                           // 9715
    },                                                                                                                 // 9716
    firstLineNumber: {                                                                                                 // 9717
        set: function() {this._signal("changeBreakpoint");},                                                           // 9718
        initialValue: 1                                                                                                // 9719
    },                                                                                                                 // 9720
    useWorker: {                                                                                                       // 9721
        set: function(useWorker) {                                                                                     // 9722
            this.$useWorker = useWorker;                                                                               // 9723
                                                                                                                       // 9724
            this.$stopWorker();                                                                                        // 9725
            if (useWorker)                                                                                             // 9726
                this.$startWorker();                                                                                   // 9727
        },                                                                                                             // 9728
        initialValue: true                                                                                             // 9729
    },                                                                                                                 // 9730
    useSoftTabs: {initialValue: true},                                                                                 // 9731
    tabSize: {                                                                                                         // 9732
        set: function(tabSize) {                                                                                       // 9733
            if (isNaN(tabSize) || this.$tabSize === tabSize) return;                                                   // 9734
                                                                                                                       // 9735
            this.$modified = true;                                                                                     // 9736
            this.$rowLengthCache = [];                                                                                 // 9737
            this.$tabSize = tabSize;                                                                                   // 9738
            this._signal("changeTabSize");                                                                             // 9739
        },                                                                                                             // 9740
        initialValue: 4,                                                                                               // 9741
        handlesSet: true                                                                                               // 9742
    },                                                                                                                 // 9743
    overwrite: {                                                                                                       // 9744
        set: function(val) {this._signal("changeOverwrite");},                                                         // 9745
        initialValue: false                                                                                            // 9746
    },                                                                                                                 // 9747
    newLineMode: {                                                                                                     // 9748
        set: function(val) {this.doc.setNewLineMode(val)},                                                             // 9749
        get: function() {return this.doc.getNewLineMode()},                                                            // 9750
        handlesSet: true                                                                                               // 9751
    },                                                                                                                 // 9752
    mode: {                                                                                                            // 9753
        set: function(val) { this.setMode(val) },                                                                      // 9754
        get: function() { return this.$modeId }                                                                        // 9755
    }                                                                                                                  // 9756
});                                                                                                                    // 9757
                                                                                                                       // 9758
exports.EditSession = EditSession;                                                                                     // 9759
});                                                                                                                    // 9760
                                                                                                                       // 9761
define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 9763
                                                                                                                       // 9764
var lang = require("./lib/lang");                                                                                      // 9765
var oop = require("./lib/oop");                                                                                        // 9766
var Range = require("./range").Range;                                                                                  // 9767
                                                                                                                       // 9768
var Search = function() {                                                                                              // 9769
    this.$options = {};                                                                                                // 9770
};                                                                                                                     // 9771
                                                                                                                       // 9772
(function() {                                                                                                          // 9773
    this.set = function(options) {                                                                                     // 9774
        oop.mixin(this.$options, options);                                                                             // 9775
        return this;                                                                                                   // 9776
    };                                                                                                                 // 9777
    this.getOptions = function() {                                                                                     // 9778
        return lang.copyObject(this.$options);                                                                         // 9779
    };                                                                                                                 // 9780
    this.setOptions = function(options) {                                                                              // 9781
        this.$options = options;                                                                                       // 9782
    };                                                                                                                 // 9783
    this.find = function(session) {                                                                                    // 9784
        var iterator = this.$matchIterator(session, this.$options);                                                    // 9785
                                                                                                                       // 9786
        if (!iterator)                                                                                                 // 9787
            return false;                                                                                              // 9788
                                                                                                                       // 9789
        var firstRange = null;                                                                                         // 9790
        iterator.forEach(function(range, row, offset) {                                                                // 9791
            if (!range.start) {                                                                                        // 9792
                var column = range.offset + (offset || 0);                                                             // 9793
                firstRange = new Range(row, column, row, column+range.length);                                         // 9794
            } else                                                                                                     // 9795
                firstRange = range;                                                                                    // 9796
            return true;                                                                                               // 9797
        });                                                                                                            // 9798
                                                                                                                       // 9799
        return firstRange;                                                                                             // 9800
    };                                                                                                                 // 9801
    this.findAll = function(session) {                                                                                 // 9802
        var options = this.$options;                                                                                   // 9803
        if (!options.needle)                                                                                           // 9804
            return [];                                                                                                 // 9805
        this.$assembleRegExp(options);                                                                                 // 9806
                                                                                                                       // 9807
        var range = options.range;                                                                                     // 9808
        var lines = range                                                                                              // 9809
            ? session.getLines(range.start.row, range.end.row)                                                         // 9810
            : session.doc.getAllLines();                                                                               // 9811
                                                                                                                       // 9812
        var ranges = [];                                                                                               // 9813
        var re = options.re;                                                                                           // 9814
        if (options.$isMultiLine) {                                                                                    // 9815
            var len = re.length;                                                                                       // 9816
            var maxRow = lines.length - len;                                                                           // 9817
            var prevRange;                                                                                             // 9818
            outer: for (var row = re.offset || 0; row <= maxRow; row++) {                                              // 9819
                for (var j = 0; j < len; j++)                                                                          // 9820
                    if (lines[row + j].search(re[j]) == -1)                                                            // 9821
                        continue outer;                                                                                // 9822
                                                                                                                       // 9823
                var startLine = lines[row];                                                                            // 9824
                var line = lines[row + len - 1];                                                                       // 9825
                var startIndex = startLine.length - startLine.match(re[0])[0].length;                                  // 9826
                var endIndex = line.match(re[len - 1])[0].length;                                                      // 9827
                                                                                                                       // 9828
                if (prevRange && prevRange.end.row === row &&                                                          // 9829
                    prevRange.end.column > startIndex                                                                  // 9830
                ) {                                                                                                    // 9831
                    continue;                                                                                          // 9832
                }                                                                                                      // 9833
                ranges.push(prevRange = new Range(                                                                     // 9834
                    row, startIndex, row + len - 1, endIndex                                                           // 9835
                ));                                                                                                    // 9836
                if (len > 2)                                                                                           // 9837
                    row = row + len - 2;                                                                               // 9838
            }                                                                                                          // 9839
        } else {                                                                                                       // 9840
            for (var i = 0; i < lines.length; i++) {                                                                   // 9841
                var matches = lang.getMatchOffsets(lines[i], re);                                                      // 9842
                for (var j = 0; j < matches.length; j++) {                                                             // 9843
                    var match = matches[j];                                                                            // 9844
                    ranges.push(new Range(i, match.offset, i, match.offset + match.length));                           // 9845
                }                                                                                                      // 9846
            }                                                                                                          // 9847
        }                                                                                                              // 9848
                                                                                                                       // 9849
        if (range) {                                                                                                   // 9850
            var startColumn = range.start.column;                                                                      // 9851
            var endColumn = range.start.column;                                                                        // 9852
            var i = 0, j = ranges.length - 1;                                                                          // 9853
            while (i < j && ranges[i].start.column < startColumn && ranges[i].start.row == range.start.row)            // 9854
                i++;                                                                                                   // 9855
                                                                                                                       // 9856
            while (i < j && ranges[j].end.column > endColumn && ranges[j].end.row == range.end.row)                    // 9857
                j--;                                                                                                   // 9858
                                                                                                                       // 9859
            ranges = ranges.slice(i, j + 1);                                                                           // 9860
            for (i = 0, j = ranges.length; i < j; i++) {                                                               // 9861
                ranges[i].start.row += range.start.row;                                                                // 9862
                ranges[i].end.row += range.start.row;                                                                  // 9863
            }                                                                                                          // 9864
        }                                                                                                              // 9865
                                                                                                                       // 9866
        return ranges;                                                                                                 // 9867
    };                                                                                                                 // 9868
    this.replace = function(input, replacement) {                                                                      // 9869
        var options = this.$options;                                                                                   // 9870
                                                                                                                       // 9871
        var re = this.$assembleRegExp(options);                                                                        // 9872
        if (options.$isMultiLine)                                                                                      // 9873
            return replacement;                                                                                        // 9874
                                                                                                                       // 9875
        if (!re)                                                                                                       // 9876
            return;                                                                                                    // 9877
                                                                                                                       // 9878
        var match = re.exec(input);                                                                                    // 9879
        if (!match || match[0].length != input.length)                                                                 // 9880
            return null;                                                                                               // 9881
                                                                                                                       // 9882
        replacement = input.replace(re, replacement);                                                                  // 9883
        if (options.preserveCase) {                                                                                    // 9884
            replacement = replacement.split("");                                                                       // 9885
            for (var i = Math.min(input.length, input.length); i--; ) {                                                // 9886
                var ch = input[i];                                                                                     // 9887
                if (ch && ch.toLowerCase() != ch)                                                                      // 9888
                    replacement[i] = replacement[i].toUpperCase();                                                     // 9889
                else                                                                                                   // 9890
                    replacement[i] = replacement[i].toLowerCase();                                                     // 9891
            }                                                                                                          // 9892
            replacement = replacement.join("");                                                                        // 9893
        }                                                                                                              // 9894
                                                                                                                       // 9895
        return replacement;                                                                                            // 9896
    };                                                                                                                 // 9897
                                                                                                                       // 9898
    this.$matchIterator = function(session, options) {                                                                 // 9899
        var re = this.$assembleRegExp(options);                                                                        // 9900
        if (!re)                                                                                                       // 9901
            return false;                                                                                              // 9902
                                                                                                                       // 9903
        var self = this, callback, backwards = options.backwards;                                                      // 9904
                                                                                                                       // 9905
        if (options.$isMultiLine) {                                                                                    // 9906
            var len = re.length;                                                                                       // 9907
            var matchIterator = function(line, row, offset) {                                                          // 9908
                var startIndex = line.search(re[0]);                                                                   // 9909
                if (startIndex == -1)                                                                                  // 9910
                    return;                                                                                            // 9911
                for (var i = 1; i < len; i++) {                                                                        // 9912
                    line = session.getLine(row + i);                                                                   // 9913
                    if (line.search(re[i]) == -1)                                                                      // 9914
                        return;                                                                                        // 9915
                }                                                                                                      // 9916
                                                                                                                       // 9917
                var endIndex = line.match(re[len - 1])[0].length;                                                      // 9918
                                                                                                                       // 9919
                var range = new Range(row, startIndex, row + len - 1, endIndex);                                       // 9920
                if (re.offset == 1) {                                                                                  // 9921
                    range.start.row--;                                                                                 // 9922
                    range.start.column = Number.MAX_VALUE;                                                             // 9923
                } else if (offset)                                                                                     // 9924
                    range.start.column += offset;                                                                      // 9925
                                                                                                                       // 9926
                if (callback(range))                                                                                   // 9927
                    return true;                                                                                       // 9928
            };                                                                                                         // 9929
        } else if (backwards) {                                                                                        // 9930
            var matchIterator = function(line, row, startIndex) {                                                      // 9931
                var matches = lang.getMatchOffsets(line, re);                                                          // 9932
                for (var i = matches.length-1; i >= 0; i--)                                                            // 9933
                    if (callback(matches[i], row, startIndex))                                                         // 9934
                        return true;                                                                                   // 9935
            };                                                                                                         // 9936
        } else {                                                                                                       // 9937
            var matchIterator = function(line, row, startIndex) {                                                      // 9938
                var matches = lang.getMatchOffsets(line, re);                                                          // 9939
                for (var i = 0; i < matches.length; i++)                                                               // 9940
                    if (callback(matches[i], row, startIndex))                                                         // 9941
                        return true;                                                                                   // 9942
            };                                                                                                         // 9943
        }                                                                                                              // 9944
                                                                                                                       // 9945
        return {                                                                                                       // 9946
            forEach: function(_callback) {                                                                             // 9947
                callback = _callback;                                                                                  // 9948
                self.$lineIterator(session, options).forEach(matchIterator);                                           // 9949
            }                                                                                                          // 9950
        };                                                                                                             // 9951
    };                                                                                                                 // 9952
                                                                                                                       // 9953
    this.$assembleRegExp = function(options, $disableFakeMultiline) {                                                  // 9954
        if (options.needle instanceof RegExp)                                                                          // 9955
            return options.re = options.needle;                                                                        // 9956
                                                                                                                       // 9957
        var needle = options.needle;                                                                                   // 9958
                                                                                                                       // 9959
        if (!options.needle)                                                                                           // 9960
            return options.re = false;                                                                                 // 9961
                                                                                                                       // 9962
        if (!options.regExp)                                                                                           // 9963
            needle = lang.escapeRegExp(needle);                                                                        // 9964
                                                                                                                       // 9965
        if (options.wholeWord)                                                                                         // 9966
            needle = "\\b" + needle + "\\b";                                                                           // 9967
                                                                                                                       // 9968
        var modifier = options.caseSensitive ? "gm" : "gmi";                                                           // 9969
                                                                                                                       // 9970
        options.$isMultiLine = !$disableFakeMultiline && /[\n\r]/.test(needle);                                        // 9971
        if (options.$isMultiLine)                                                                                      // 9972
            return options.re = this.$assembleMultilineRegExp(needle, modifier);                                       // 9973
                                                                                                                       // 9974
        try {                                                                                                          // 9975
            var re = new RegExp(needle, modifier);                                                                     // 9976
        } catch(e) {                                                                                                   // 9977
            re = false;                                                                                                // 9978
        }                                                                                                              // 9979
        return options.re = re;                                                                                        // 9980
    };                                                                                                                 // 9981
                                                                                                                       // 9982
    this.$assembleMultilineRegExp = function(needle, modifier) {                                                       // 9983
        var parts = needle.replace(/\r\n|\r|\n/g, "$\n^").split("\n");                                                 // 9984
        var re = [];                                                                                                   // 9985
        for (var i = 0; i < parts.length; i++) try {                                                                   // 9986
            re.push(new RegExp(parts[i], modifier));                                                                   // 9987
        } catch(e) {                                                                                                   // 9988
            return false;                                                                                              // 9989
        }                                                                                                              // 9990
        if (parts[0] == "") {                                                                                          // 9991
            re.shift();                                                                                                // 9992
            re.offset = 1;                                                                                             // 9993
        } else {                                                                                                       // 9994
            re.offset = 0;                                                                                             // 9995
        }                                                                                                              // 9996
        return re;                                                                                                     // 9997
    };                                                                                                                 // 9998
                                                                                                                       // 9999
    this.$lineIterator = function(session, options) {                                                                  // 10000
        var backwards = options.backwards == true;                                                                     // 10001
        var skipCurrent = options.skipCurrent != false;                                                                // 10002
                                                                                                                       // 10003
        var range = options.range;                                                                                     // 10004
        var start = options.start;                                                                                     // 10005
        if (!start)                                                                                                    // 10006
            start = range ? range[backwards ? "end" : "start"] : session.selection.getRange();                         // 10007
                                                                                                                       // 10008
        if (start.start)                                                                                               // 10009
            start = start[skipCurrent != backwards ? "end" : "start"];                                                 // 10010
                                                                                                                       // 10011
        var firstRow = range ? range.start.row : 0;                                                                    // 10012
        var lastRow = range ? range.end.row : session.getLength() - 1;                                                 // 10013
                                                                                                                       // 10014
        var forEach = backwards ? function(callback) {                                                                 // 10015
                var row = start.row;                                                                                   // 10016
                                                                                                                       // 10017
                var line = session.getLine(row).substring(0, start.column);                                            // 10018
                if (callback(line, row))                                                                               // 10019
                    return;                                                                                            // 10020
                                                                                                                       // 10021
                for (row--; row >= firstRow; row--)                                                                    // 10022
                    if (callback(session.getLine(row), row))                                                           // 10023
                        return;                                                                                        // 10024
                                                                                                                       // 10025
                if (options.wrap == false)                                                                             // 10026
                    return;                                                                                            // 10027
                                                                                                                       // 10028
                for (row = lastRow, firstRow = start.row; row >= firstRow; row--)                                      // 10029
                    if (callback(session.getLine(row), row))                                                           // 10030
                        return;                                                                                        // 10031
            } : function(callback) {                                                                                   // 10032
                var row = start.row;                                                                                   // 10033
                                                                                                                       // 10034
                var line = session.getLine(row).substr(start.column);                                                  // 10035
                if (callback(line, row, start.column))                                                                 // 10036
                    return;                                                                                            // 10037
                                                                                                                       // 10038
                for (row = row+1; row <= lastRow; row++)                                                               // 10039
                    if (callback(session.getLine(row), row))                                                           // 10040
                        return;                                                                                        // 10041
                                                                                                                       // 10042
                if (options.wrap == false)                                                                             // 10043
                    return;                                                                                            // 10044
                                                                                                                       // 10045
                for (row = firstRow, lastRow = start.row; row <= lastRow; row++)                                       // 10046
                    if (callback(session.getLine(row), row))                                                           // 10047
                        return;                                                                                        // 10048
            };                                                                                                         // 10049
                                                                                                                       // 10050
        return {forEach: forEach};                                                                                     // 10051
    };                                                                                                                 // 10052
                                                                                                                       // 10053
}).call(Search.prototype);                                                                                             // 10054
                                                                                                                       // 10055
exports.Search = Search;                                                                                               // 10056
});                                                                                                                    // 10057
                                                                                                                       // 10058
define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"], function(require, exports, module) {
"use strict";                                                                                                          // 10060
                                                                                                                       // 10061
var keyUtil = require("../lib/keys");                                                                                  // 10062
var useragent = require("../lib/useragent");                                                                           // 10063
var KEY_MODS = keyUtil.KEY_MODS;                                                                                       // 10064
                                                                                                                       // 10065
function HashHandler(config, platform) {                                                                               // 10066
    this.platform = platform || (useragent.isMac ? "mac" : "win");                                                     // 10067
    this.commands = {};                                                                                                // 10068
    this.commandKeyBinding = {};                                                                                       // 10069
    this.addCommands(config);                                                                                          // 10070
    this.$singleCommand = true;                                                                                        // 10071
}                                                                                                                      // 10072
                                                                                                                       // 10073
function MultiHashHandler(config, platform) {                                                                          // 10074
    HashHandler.call(this, config, platform);                                                                          // 10075
    this.$singleCommand = false;                                                                                       // 10076
}                                                                                                                      // 10077
                                                                                                                       // 10078
MultiHashHandler.prototype = HashHandler.prototype;                                                                    // 10079
                                                                                                                       // 10080
(function() {                                                                                                          // 10081
                                                                                                                       // 10082
                                                                                                                       // 10083
    this.addCommand = function(command) {                                                                              // 10084
        if (this.commands[command.name])                                                                               // 10085
            this.removeCommand(command);                                                                               // 10086
                                                                                                                       // 10087
        this.commands[command.name] = command;                                                                         // 10088
                                                                                                                       // 10089
        if (command.bindKey)                                                                                           // 10090
            this._buildKeyHash(command);                                                                               // 10091
    };                                                                                                                 // 10092
                                                                                                                       // 10093
    this.removeCommand = function(command, keepCommand) {                                                              // 10094
        var name = command && (typeof command === 'string' ? command : command.name);                                  // 10095
        command = this.commands[name];                                                                                 // 10096
        if (!keepCommand)                                                                                              // 10097
            delete this.commands[name];                                                                                // 10098
        var ckb = this.commandKeyBinding;                                                                              // 10099
        for (var keyId in ckb) {                                                                                       // 10100
            var cmdGroup = ckb[keyId];                                                                                 // 10101
            if (cmdGroup == command) {                                                                                 // 10102
                delete ckb[keyId];                                                                                     // 10103
            } else if (Array.isArray(cmdGroup)) {                                                                      // 10104
                var i = cmdGroup.indexOf(command);                                                                     // 10105
                if (i != -1) {                                                                                         // 10106
                    cmdGroup.splice(i, 1);                                                                             // 10107
                    if (cmdGroup.length == 1)                                                                          // 10108
                        ckb[keyId] = cmdGroup[0];                                                                      // 10109
                }                                                                                                      // 10110
            }                                                                                                          // 10111
        }                                                                                                              // 10112
    };                                                                                                                 // 10113
                                                                                                                       // 10114
    this.bindKey = function(key, command, asDefault) {                                                                 // 10115
        if (typeof key == "object")                                                                                    // 10116
            key = key[this.platform];                                                                                  // 10117
        if (!key)                                                                                                      // 10118
            return;                                                                                                    // 10119
        if (typeof command == "function")                                                                              // 10120
            return this.addCommand({exec: command, bindKey: key, name: command.name || key});                          // 10121
                                                                                                                       // 10122
        key.split("|").forEach(function(keyPart) {                                                                     // 10123
            var chain = "";                                                                                            // 10124
            if (keyPart.indexOf(" ") != -1) {                                                                          // 10125
                var parts = keyPart.split(/\s+/);                                                                      // 10126
                keyPart = parts.pop();                                                                                 // 10127
                parts.forEach(function(keyPart) {                                                                      // 10128
                    var binding = this.parseKeys(keyPart);                                                             // 10129
                    var id = KEY_MODS[binding.hashId] + binding.key;                                                   // 10130
                    chain += (chain ? " " : "") + id;                                                                  // 10131
                    this._addCommandToBinding(chain, "chainKeys");                                                     // 10132
                }, this);                                                                                              // 10133
                chain += " ";                                                                                          // 10134
            }                                                                                                          // 10135
            var binding = this.parseKeys(keyPart);                                                                     // 10136
            var id = KEY_MODS[binding.hashId] + binding.key;                                                           // 10137
            this._addCommandToBinding(chain + id, command, asDefault);                                                 // 10138
        }, this);                                                                                                      // 10139
    };                                                                                                                 // 10140
                                                                                                                       // 10141
    this._addCommandToBinding = function(keyId, command, asDefault) {                                                  // 10142
        var ckb = this.commandKeyBinding, i;                                                                           // 10143
        if (!command) {                                                                                                // 10144
            delete ckb[keyId];                                                                                         // 10145
        } else if (!ckb[keyId] || this.$singleCommand) {                                                               // 10146
            ckb[keyId] = command;                                                                                      // 10147
        } else {                                                                                                       // 10148
            if (!Array.isArray(ckb[keyId])) {                                                                          // 10149
                ckb[keyId] = [ckb[keyId]];                                                                             // 10150
            } else if ((i = ckb[keyId].indexOf(command)) != -1) {                                                      // 10151
                ckb[keyId].splice(i, 1);                                                                               // 10152
            }                                                                                                          // 10153
                                                                                                                       // 10154
            if (asDefault || command.isDefault)                                                                        // 10155
                ckb[keyId].unshift(command);                                                                           // 10156
            else                                                                                                       // 10157
                ckb[keyId].push(command);                                                                              // 10158
        }                                                                                                              // 10159
    };                                                                                                                 // 10160
                                                                                                                       // 10161
    this.addCommands = function(commands) {                                                                            // 10162
        commands && Object.keys(commands).forEach(function(name) {                                                     // 10163
            var command = commands[name];                                                                              // 10164
            if (!command)                                                                                              // 10165
                return;                                                                                                // 10166
                                                                                                                       // 10167
            if (typeof command === "string")                                                                           // 10168
                return this.bindKey(command, name);                                                                    // 10169
                                                                                                                       // 10170
            if (typeof command === "function")                                                                         // 10171
                command = { exec: command };                                                                           // 10172
                                                                                                                       // 10173
            if (typeof command !== "object")                                                                           // 10174
                return;                                                                                                // 10175
                                                                                                                       // 10176
            if (!command.name)                                                                                         // 10177
                command.name = name;                                                                                   // 10178
                                                                                                                       // 10179
            this.addCommand(command);                                                                                  // 10180
        }, this);                                                                                                      // 10181
    };                                                                                                                 // 10182
                                                                                                                       // 10183
    this.removeCommands = function(commands) {                                                                         // 10184
        Object.keys(commands).forEach(function(name) {                                                                 // 10185
            this.removeCommand(commands[name]);                                                                        // 10186
        }, this);                                                                                                      // 10187
    };                                                                                                                 // 10188
                                                                                                                       // 10189
    this.bindKeys = function(keyList) {                                                                                // 10190
        Object.keys(keyList).forEach(function(key) {                                                                   // 10191
            this.bindKey(key, keyList[key]);                                                                           // 10192
        }, this);                                                                                                      // 10193
    };                                                                                                                 // 10194
                                                                                                                       // 10195
    this._buildKeyHash = function(command) {                                                                           // 10196
        this.bindKey(command.bindKey, command);                                                                        // 10197
    };                                                                                                                 // 10198
    this.parseKeys = function(keys) {                                                                                  // 10199
        var parts = keys.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(x){return x});                         // 10200
        var key = parts.pop();                                                                                         // 10201
                                                                                                                       // 10202
        var keyCode = keyUtil[key];                                                                                    // 10203
        if (keyUtil.FUNCTION_KEYS[keyCode])                                                                            // 10204
            key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();                                                        // 10205
        else if (!parts.length)                                                                                        // 10206
            return {key: key, hashId: -1};                                                                             // 10207
        else if (parts.length == 1 && parts[0] == "shift")                                                             // 10208
            return {key: key.toUpperCase(), hashId: -1};                                                               // 10209
                                                                                                                       // 10210
        var hashId = 0;                                                                                                // 10211
        for (var i = parts.length; i--;) {                                                                             // 10212
            var modifier = keyUtil.KEY_MODS[parts[i]];                                                                 // 10213
            if (modifier == null) {                                                                                    // 10214
                if (typeof console != "undefined")                                                                     // 10215
                    console.error("invalid modifier " + parts[i] + " in " + keys);                                     // 10216
                return false;                                                                                          // 10217
            }                                                                                                          // 10218
            hashId |= modifier;                                                                                        // 10219
        }                                                                                                              // 10220
        return {key: key, hashId: hashId};                                                                             // 10221
    };                                                                                                                 // 10222
                                                                                                                       // 10223
    this.findKeyCommand = function findKeyCommand(hashId, keyString) {                                                 // 10224
        var key = KEY_MODS[hashId] + keyString;                                                                        // 10225
        return this.commandKeyBinding[key];                                                                            // 10226
    };                                                                                                                 // 10227
                                                                                                                       // 10228
    this.handleKeyboard = function(data, hashId, keyString, keyCode) {                                                 // 10229
        var key = KEY_MODS[hashId] + keyString;                                                                        // 10230
        var command = this.commandKeyBinding[key];                                                                     // 10231
        if (data.$keyChain) {                                                                                          // 10232
            data.$keyChain += " " + key;                                                                               // 10233
            command = this.commandKeyBinding[data.$keyChain] || command;                                               // 10234
        }                                                                                                              // 10235
                                                                                                                       // 10236
        if (command) {                                                                                                 // 10237
            if (command == "chainKeys" || command[command.length - 1] == "chainKeys") {                                // 10238
                data.$keyChain = data.$keyChain || key;                                                                // 10239
                return {command: "null"};                                                                              // 10240
            }                                                                                                          // 10241
        }                                                                                                              // 10242
                                                                                                                       // 10243
        if (data.$keyChain && keyCode > 0)                                                                             // 10244
            data.$keyChain = "";                                                                                       // 10245
        return {command: command};                                                                                     // 10246
    };                                                                                                                 // 10247
                                                                                                                       // 10248
}).call(HashHandler.prototype);                                                                                        // 10249
                                                                                                                       // 10250
exports.HashHandler = HashHandler;                                                                                     // 10251
exports.MultiHashHandler = MultiHashHandler;                                                                           // 10252
});                                                                                                                    // 10253
                                                                                                                       // 10254
define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 10256
                                                                                                                       // 10257
var oop = require("../lib/oop");                                                                                       // 10258
var MultiHashHandler = require("../keyboard/hash_handler").MultiHashHandler;                                           // 10259
var EventEmitter = require("../lib/event_emitter").EventEmitter;                                                       // 10260
                                                                                                                       // 10261
var CommandManager = function(platform, commands) {                                                                    // 10262
    MultiHashHandler.call(this, commands, platform);                                                                   // 10263
    this.byName = this.commands;                                                                                       // 10264
    this.setDefaultHandler("exec", function(e) {                                                                       // 10265
        return e.command.exec(e.editor, e.args || {});                                                                 // 10266
    });                                                                                                                // 10267
};                                                                                                                     // 10268
                                                                                                                       // 10269
oop.inherits(CommandManager, MultiHashHandler);                                                                        // 10270
                                                                                                                       // 10271
(function() {                                                                                                          // 10272
                                                                                                                       // 10273
    oop.implement(this, EventEmitter);                                                                                 // 10274
                                                                                                                       // 10275
    this.exec = function(command, editor, args) {                                                                      // 10276
        if (Array.isArray(command)) {                                                                                  // 10277
            for (var i = command.length; i--; ) {                                                                      // 10278
                if (this.exec(command[i], editor, args)) return true;                                                  // 10279
            }                                                                                                          // 10280
            return false;                                                                                              // 10281
        }                                                                                                              // 10282
                                                                                                                       // 10283
        if (typeof command === "string")                                                                               // 10284
            command = this.commands[command];                                                                          // 10285
                                                                                                                       // 10286
        if (!command)                                                                                                  // 10287
            return false;                                                                                              // 10288
                                                                                                                       // 10289
        if (editor && editor.$readOnly && !command.readOnly)                                                           // 10290
            return false;                                                                                              // 10291
                                                                                                                       // 10292
        var e = {editor: editor, command: command, args: args};                                                        // 10293
        e.returnValue = this._emit("exec", e);                                                                         // 10294
        this._signal("afterExec", e);                                                                                  // 10295
                                                                                                                       // 10296
        return e.returnValue === false ? false : true;                                                                 // 10297
    };                                                                                                                 // 10298
                                                                                                                       // 10299
    this.toggleRecording = function(editor) {                                                                          // 10300
        if (this.$inReplay)                                                                                            // 10301
            return;                                                                                                    // 10302
                                                                                                                       // 10303
        editor && editor._emit("changeStatus");                                                                        // 10304
        if (this.recording) {                                                                                          // 10305
            this.macro.pop();                                                                                          // 10306
            this.removeEventListener("exec", this.$addCommandToMacro);                                                 // 10307
                                                                                                                       // 10308
            if (!this.macro.length)                                                                                    // 10309
                this.macro = this.oldMacro;                                                                            // 10310
                                                                                                                       // 10311
            return this.recording = false;                                                                             // 10312
        }                                                                                                              // 10313
        if (!this.$addCommandToMacro) {                                                                                // 10314
            this.$addCommandToMacro = function(e) {                                                                    // 10315
                this.macro.push([e.command, e.args]);                                                                  // 10316
            }.bind(this);                                                                                              // 10317
        }                                                                                                              // 10318
                                                                                                                       // 10319
        this.oldMacro = this.macro;                                                                                    // 10320
        this.macro = [];                                                                                               // 10321
        this.on("exec", this.$addCommandToMacro);                                                                      // 10322
        return this.recording = true;                                                                                  // 10323
    };                                                                                                                 // 10324
                                                                                                                       // 10325
    this.replay = function(editor) {                                                                                   // 10326
        if (this.$inReplay || !this.macro)                                                                             // 10327
            return;                                                                                                    // 10328
                                                                                                                       // 10329
        if (this.recording)                                                                                            // 10330
            return this.toggleRecording(editor);                                                                       // 10331
                                                                                                                       // 10332
        try {                                                                                                          // 10333
            this.$inReplay = true;                                                                                     // 10334
            this.macro.forEach(function(x) {                                                                           // 10335
                if (typeof x == "string")                                                                              // 10336
                    this.exec(x, editor);                                                                              // 10337
                else                                                                                                   // 10338
                    this.exec(x[0], editor, x[1]);                                                                     // 10339
            }, this);                                                                                                  // 10340
        } finally {                                                                                                    // 10341
            this.$inReplay = false;                                                                                    // 10342
        }                                                                                                              // 10343
    };                                                                                                                 // 10344
                                                                                                                       // 10345
    this.trimMacro = function(m) {                                                                                     // 10346
        return m.map(function(x){                                                                                      // 10347
            if (typeof x[0] != "string")                                                                               // 10348
                x[0] = x[0].name;                                                                                      // 10349
            if (!x[1])                                                                                                 // 10350
                x = x[0];                                                                                              // 10351
            return x;                                                                                                  // 10352
        });                                                                                                            // 10353
    };                                                                                                                 // 10354
                                                                                                                       // 10355
}).call(CommandManager.prototype);                                                                                     // 10356
                                                                                                                       // 10357
exports.CommandManager = CommandManager;                                                                               // 10358
                                                                                                                       // 10359
});                                                                                                                    // 10360
                                                                                                                       // 10361
define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 10363
                                                                                                                       // 10364
var lang = require("../lib/lang");                                                                                     // 10365
var config = require("../config");                                                                                     // 10366
var Range = require("../range").Range;                                                                                 // 10367
                                                                                                                       // 10368
function bindKey(win, mac) {                                                                                           // 10369
    return {win: win, mac: mac};                                                                                       // 10370
}                                                                                                                      // 10371
exports.commands = [{                                                                                                  // 10372
    name: "showSettingsMenu",                                                                                          // 10373
    bindKey: bindKey("Ctrl-,", "Command-,"),                                                                           // 10374
    exec: function(editor) {                                                                                           // 10375
        config.loadModule("ace/ext/settings_menu", function(module) {                                                  // 10376
            module.init(editor);                                                                                       // 10377
            editor.showSettingsMenu();                                                                                 // 10378
        });                                                                                                            // 10379
    },                                                                                                                 // 10380
    readOnly: true                                                                                                     // 10381
}, {                                                                                                                   // 10382
    name: "goToNextError",                                                                                             // 10383
    bindKey: bindKey("Alt-E", "Ctrl-E"),                                                                               // 10384
    exec: function(editor) {                                                                                           // 10385
        config.loadModule("ace/ext/error_marker", function(module) {                                                   // 10386
            module.showErrorMarker(editor, 1);                                                                         // 10387
        });                                                                                                            // 10388
    },                                                                                                                 // 10389
    scrollIntoView: "animate",                                                                                         // 10390
    readOnly: true                                                                                                     // 10391
}, {                                                                                                                   // 10392
    name: "goToPreviousError",                                                                                         // 10393
    bindKey: bindKey("Alt-Shift-E", "Ctrl-Shift-E"),                                                                   // 10394
    exec: function(editor) {                                                                                           // 10395
        config.loadModule("ace/ext/error_marker", function(module) {                                                   // 10396
            module.showErrorMarker(editor, -1);                                                                        // 10397
        });                                                                                                            // 10398
    },                                                                                                                 // 10399
    scrollIntoView: "animate",                                                                                         // 10400
    readOnly: true                                                                                                     // 10401
}, {                                                                                                                   // 10402
    name: "selectall",                                                                                                 // 10403
    bindKey: bindKey("Ctrl-A", "Command-A"),                                                                           // 10404
    exec: function(editor) { editor.selectAll(); },                                                                    // 10405
    readOnly: true                                                                                                     // 10406
}, {                                                                                                                   // 10407
    name: "centerselection",                                                                                           // 10408
    bindKey: bindKey(null, "Ctrl-L"),                                                                                  // 10409
    exec: function(editor) { editor.centerSelection(); },                                                              // 10410
    readOnly: true                                                                                                     // 10411
}, {                                                                                                                   // 10412
    name: "gotoline",                                                                                                  // 10413
    bindKey: bindKey("Ctrl-L", "Command-L"),                                                                           // 10414
    exec: function(editor) {                                                                                           // 10415
        var line = parseInt(prompt("Enter line number:"), 10);                                                         // 10416
        if (!isNaN(line)) {                                                                                            // 10417
            editor.gotoLine(line);                                                                                     // 10418
        }                                                                                                              // 10419
    },                                                                                                                 // 10420
    readOnly: true                                                                                                     // 10421
}, {                                                                                                                   // 10422
    name: "fold",                                                                                                      // 10423
    bindKey: bindKey("Alt-L|Ctrl-F1", "Command-Alt-L|Command-F1"),                                                     // 10424
    exec: function(editor) { editor.session.toggleFold(false); },                                                      // 10425
    scrollIntoView: "center",                                                                                          // 10426
    readOnly: true                                                                                                     // 10427
}, {                                                                                                                   // 10428
    name: "unfold",                                                                                                    // 10429
    bindKey: bindKey("Alt-Shift-L|Ctrl-Shift-F1", "Command-Alt-Shift-L|Command-Shift-F1"),                             // 10430
    exec: function(editor) { editor.session.toggleFold(true); },                                                       // 10431
    scrollIntoView: "center",                                                                                          // 10432
    readOnly: true                                                                                                     // 10433
}, {                                                                                                                   // 10434
    name: "toggleFoldWidget",                                                                                          // 10435
    bindKey: bindKey("F2", "F2"),                                                                                      // 10436
    exec: function(editor) { editor.session.toggleFoldWidget(); },                                                     // 10437
    scrollIntoView: "center",                                                                                          // 10438
    readOnly: true                                                                                                     // 10439
}, {                                                                                                                   // 10440
    name: "toggleParentFoldWidget",                                                                                    // 10441
    bindKey: bindKey("Alt-F2", "Alt-F2"),                                                                              // 10442
    exec: function(editor) { editor.session.toggleFoldWidget(true); },                                                 // 10443
    scrollIntoView: "center",                                                                                          // 10444
    readOnly: true                                                                                                     // 10445
}, {                                                                                                                   // 10446
    name: "foldall",                                                                                                   // 10447
    bindKey: bindKey("Ctrl-Alt-0", "Ctrl-Command-Option-0"),                                                           // 10448
    exec: function(editor) { editor.session.foldAll(); },                                                              // 10449
    scrollIntoView: "center",                                                                                          // 10450
    readOnly: true                                                                                                     // 10451
}, {                                                                                                                   // 10452
    name: "foldOther",                                                                                                 // 10453
    bindKey: bindKey("Alt-0", "Command-Option-0"),                                                                     // 10454
    exec: function(editor) {                                                                                           // 10455
        editor.session.foldAll();                                                                                      // 10456
        editor.session.unfold(editor.selection.getAllRanges());                                                        // 10457
    },                                                                                                                 // 10458
    scrollIntoView: "center",                                                                                          // 10459
    readOnly: true                                                                                                     // 10460
}, {                                                                                                                   // 10461
    name: "unfoldall",                                                                                                 // 10462
    bindKey: bindKey("Alt-Shift-0", "Command-Option-Shift-0"),                                                         // 10463
    exec: function(editor) { editor.session.unfold(); },                                                               // 10464
    scrollIntoView: "center",                                                                                          // 10465
    readOnly: true                                                                                                     // 10466
}, {                                                                                                                   // 10467
    name: "findnext",                                                                                                  // 10468
    bindKey: bindKey("Ctrl-K", "Command-G"),                                                                           // 10469
    exec: function(editor) { editor.findNext(); },                                                                     // 10470
    multiSelectAction: "forEach",                                                                                      // 10471
    scrollIntoView: "center",                                                                                          // 10472
    readOnly: true                                                                                                     // 10473
}, {                                                                                                                   // 10474
    name: "findprevious",                                                                                              // 10475
    bindKey: bindKey("Ctrl-Shift-K", "Command-Shift-G"),                                                               // 10476
    exec: function(editor) { editor.findPrevious(); },                                                                 // 10477
    multiSelectAction: "forEach",                                                                                      // 10478
    scrollIntoView: "center",                                                                                          // 10479
    readOnly: true                                                                                                     // 10480
}, {                                                                                                                   // 10481
    name: "selectOrFindNext",                                                                                          // 10482
    bindKey: bindKey("Alt-K", "Ctrl-G"),                                                                               // 10483
    exec: function(editor) {                                                                                           // 10484
        if (editor.selection.isEmpty())                                                                                // 10485
            editor.selection.selectWord();                                                                             // 10486
        else                                                                                                           // 10487
            editor.findNext();                                                                                         // 10488
    },                                                                                                                 // 10489
    readOnly: true                                                                                                     // 10490
}, {                                                                                                                   // 10491
    name: "selectOrFindPrevious",                                                                                      // 10492
    bindKey: bindKey("Alt-Shift-K", "Ctrl-Shift-G"),                                                                   // 10493
    exec: function(editor) {                                                                                           // 10494
        if (editor.selection.isEmpty())                                                                                // 10495
            editor.selection.selectWord();                                                                             // 10496
        else                                                                                                           // 10497
            editor.findPrevious();                                                                                     // 10498
    },                                                                                                                 // 10499
    readOnly: true                                                                                                     // 10500
}, {                                                                                                                   // 10501
    name: "find",                                                                                                      // 10502
    bindKey: bindKey("Ctrl-F", "Command-F"),                                                                           // 10503
    exec: function(editor) {                                                                                           // 10504
        config.loadModule("ace/ext/searchbox", function(e) {e.Search(editor)});                                        // 10505
    },                                                                                                                 // 10506
    readOnly: true                                                                                                     // 10507
}, {                                                                                                                   // 10508
    name: "overwrite",                                                                                                 // 10509
    bindKey: "Insert",                                                                                                 // 10510
    exec: function(editor) { editor.toggleOverwrite(); },                                                              // 10511
    readOnly: true                                                                                                     // 10512
}, {                                                                                                                   // 10513
    name: "selecttostart",                                                                                             // 10514
    bindKey: bindKey("Ctrl-Shift-Home", "Command-Shift-Up"),                                                           // 10515
    exec: function(editor) { editor.getSelection().selectFileStart(); },                                               // 10516
    multiSelectAction: "forEach",                                                                                      // 10517
    readOnly: true,                                                                                                    // 10518
    scrollIntoView: "animate",                                                                                         // 10519
    aceCommandGroup: "fileJump"                                                                                        // 10520
}, {                                                                                                                   // 10521
    name: "gotostart",                                                                                                 // 10522
    bindKey: bindKey("Ctrl-Home", "Command-Home|Command-Up"),                                                          // 10523
    exec: function(editor) { editor.navigateFileStart(); },                                                            // 10524
    multiSelectAction: "forEach",                                                                                      // 10525
    readOnly: true,                                                                                                    // 10526
    scrollIntoView: "animate",                                                                                         // 10527
    aceCommandGroup: "fileJump"                                                                                        // 10528
}, {                                                                                                                   // 10529
    name: "selectup",                                                                                                  // 10530
    bindKey: bindKey("Shift-Up", "Shift-Up"),                                                                          // 10531
    exec: function(editor) { editor.getSelection().selectUp(); },                                                      // 10532
    multiSelectAction: "forEach",                                                                                      // 10533
    readOnly: true                                                                                                     // 10534
}, {                                                                                                                   // 10535
    name: "golineup",                                                                                                  // 10536
    bindKey: bindKey("Up", "Up|Ctrl-P"),                                                                               // 10537
    exec: function(editor, args) { editor.navigateUp(args.times); },                                                   // 10538
    multiSelectAction: "forEach",                                                                                      // 10539
    readOnly: true                                                                                                     // 10540
}, {                                                                                                                   // 10541
    name: "selecttoend",                                                                                               // 10542
    bindKey: bindKey("Ctrl-Shift-End", "Command-Shift-Down"),                                                          // 10543
    exec: function(editor) { editor.getSelection().selectFileEnd(); },                                                 // 10544
    multiSelectAction: "forEach",                                                                                      // 10545
    readOnly: true,                                                                                                    // 10546
    scrollIntoView: "animate",                                                                                         // 10547
    aceCommandGroup: "fileJump"                                                                                        // 10548
}, {                                                                                                                   // 10549
    name: "gotoend",                                                                                                   // 10550
    bindKey: bindKey("Ctrl-End", "Command-End|Command-Down"),                                                          // 10551
    exec: function(editor) { editor.navigateFileEnd(); },                                                              // 10552
    multiSelectAction: "forEach",                                                                                      // 10553
    readOnly: true,                                                                                                    // 10554
    scrollIntoView: "animate",                                                                                         // 10555
    aceCommandGroup: "fileJump"                                                                                        // 10556
}, {                                                                                                                   // 10557
    name: "selectdown",                                                                                                // 10558
    bindKey: bindKey("Shift-Down", "Shift-Down"),                                                                      // 10559
    exec: function(editor) { editor.getSelection().selectDown(); },                                                    // 10560
    multiSelectAction: "forEach",                                                                                      // 10561
    scrollIntoView: "cursor",                                                                                          // 10562
    readOnly: true                                                                                                     // 10563
}, {                                                                                                                   // 10564
    name: "golinedown",                                                                                                // 10565
    bindKey: bindKey("Down", "Down|Ctrl-N"),                                                                           // 10566
    exec: function(editor, args) { editor.navigateDown(args.times); },                                                 // 10567
    multiSelectAction: "forEach",                                                                                      // 10568
    scrollIntoView: "cursor",                                                                                          // 10569
    readOnly: true                                                                                                     // 10570
}, {                                                                                                                   // 10571
    name: "selectwordleft",                                                                                            // 10572
    bindKey: bindKey("Ctrl-Shift-Left", "Option-Shift-Left"),                                                          // 10573
    exec: function(editor) { editor.getSelection().selectWordLeft(); },                                                // 10574
    multiSelectAction: "forEach",                                                                                      // 10575
    scrollIntoView: "cursor",                                                                                          // 10576
    readOnly: true                                                                                                     // 10577
}, {                                                                                                                   // 10578
    name: "gotowordleft",                                                                                              // 10579
    bindKey: bindKey("Ctrl-Left", "Option-Left"),                                                                      // 10580
    exec: function(editor) { editor.navigateWordLeft(); },                                                             // 10581
    multiSelectAction: "forEach",                                                                                      // 10582
    scrollIntoView: "cursor",                                                                                          // 10583
    readOnly: true                                                                                                     // 10584
}, {                                                                                                                   // 10585
    name: "selecttolinestart",                                                                                         // 10586
    bindKey: bindKey("Alt-Shift-Left", "Command-Shift-Left"),                                                          // 10587
    exec: function(editor) { editor.getSelection().selectLineStart(); },                                               // 10588
    multiSelectAction: "forEach",                                                                                      // 10589
    scrollIntoView: "cursor",                                                                                          // 10590
    readOnly: true                                                                                                     // 10591
}, {                                                                                                                   // 10592
    name: "gotolinestart",                                                                                             // 10593
    bindKey: bindKey("Alt-Left|Home", "Command-Left|Home|Ctrl-A"),                                                     // 10594
    exec: function(editor) { editor.navigateLineStart(); },                                                            // 10595
    multiSelectAction: "forEach",                                                                                      // 10596
    scrollIntoView: "cursor",                                                                                          // 10597
    readOnly: true                                                                                                     // 10598
}, {                                                                                                                   // 10599
    name: "selectleft",                                                                                                // 10600
    bindKey: bindKey("Shift-Left", "Shift-Left"),                                                                      // 10601
    exec: function(editor) { editor.getSelection().selectLeft(); },                                                    // 10602
    multiSelectAction: "forEach",                                                                                      // 10603
    scrollIntoView: "cursor",                                                                                          // 10604
    readOnly: true                                                                                                     // 10605
}, {                                                                                                                   // 10606
    name: "gotoleft",                                                                                                  // 10607
    bindKey: bindKey("Left", "Left|Ctrl-B"),                                                                           // 10608
    exec: function(editor, args) { editor.navigateLeft(args.times); },                                                 // 10609
    multiSelectAction: "forEach",                                                                                      // 10610
    scrollIntoView: "cursor",                                                                                          // 10611
    readOnly: true                                                                                                     // 10612
}, {                                                                                                                   // 10613
    name: "selectwordright",                                                                                           // 10614
    bindKey: bindKey("Ctrl-Shift-Right", "Option-Shift-Right"),                                                        // 10615
    exec: function(editor) { editor.getSelection().selectWordRight(); },                                               // 10616
    multiSelectAction: "forEach",                                                                                      // 10617
    scrollIntoView: "cursor",                                                                                          // 10618
    readOnly: true                                                                                                     // 10619
}, {                                                                                                                   // 10620
    name: "gotowordright",                                                                                             // 10621
    bindKey: bindKey("Ctrl-Right", "Option-Right"),                                                                    // 10622
    exec: function(editor) { editor.navigateWordRight(); },                                                            // 10623
    multiSelectAction: "forEach",                                                                                      // 10624
    scrollIntoView: "cursor",                                                                                          // 10625
    readOnly: true                                                                                                     // 10626
}, {                                                                                                                   // 10627
    name: "selecttolineend",                                                                                           // 10628
    bindKey: bindKey("Alt-Shift-Right", "Command-Shift-Right"),                                                        // 10629
    exec: function(editor) { editor.getSelection().selectLineEnd(); },                                                 // 10630
    multiSelectAction: "forEach",                                                                                      // 10631
    scrollIntoView: "cursor",                                                                                          // 10632
    readOnly: true                                                                                                     // 10633
}, {                                                                                                                   // 10634
    name: "gotolineend",                                                                                               // 10635
    bindKey: bindKey("Alt-Right|End", "Command-Right|End|Ctrl-E"),                                                     // 10636
    exec: function(editor) { editor.navigateLineEnd(); },                                                              // 10637
    multiSelectAction: "forEach",                                                                                      // 10638
    scrollIntoView: "cursor",                                                                                          // 10639
    readOnly: true                                                                                                     // 10640
}, {                                                                                                                   // 10641
    name: "selectright",                                                                                               // 10642
    bindKey: bindKey("Shift-Right", "Shift-Right"),                                                                    // 10643
    exec: function(editor) { editor.getSelection().selectRight(); },                                                   // 10644
    multiSelectAction: "forEach",                                                                                      // 10645
    scrollIntoView: "cursor",                                                                                          // 10646
    readOnly: true                                                                                                     // 10647
}, {                                                                                                                   // 10648
    name: "gotoright",                                                                                                 // 10649
    bindKey: bindKey("Right", "Right|Ctrl-F"),                                                                         // 10650
    exec: function(editor, args) { editor.navigateRight(args.times); },                                                // 10651
    multiSelectAction: "forEach",                                                                                      // 10652
    scrollIntoView: "cursor",                                                                                          // 10653
    readOnly: true                                                                                                     // 10654
}, {                                                                                                                   // 10655
    name: "selectpagedown",                                                                                            // 10656
    bindKey: "Shift-PageDown",                                                                                         // 10657
    exec: function(editor) { editor.selectPageDown(); },                                                               // 10658
    readOnly: true                                                                                                     // 10659
}, {                                                                                                                   // 10660
    name: "pagedown",                                                                                                  // 10661
    bindKey: bindKey(null, "Option-PageDown"),                                                                         // 10662
    exec: function(editor) { editor.scrollPageDown(); },                                                               // 10663
    readOnly: true                                                                                                     // 10664
}, {                                                                                                                   // 10665
    name: "gotopagedown",                                                                                              // 10666
    bindKey: bindKey("PageDown", "PageDown|Ctrl-V"),                                                                   // 10667
    exec: function(editor) { editor.gotoPageDown(); },                                                                 // 10668
    readOnly: true                                                                                                     // 10669
}, {                                                                                                                   // 10670
    name: "selectpageup",                                                                                              // 10671
    bindKey: "Shift-PageUp",                                                                                           // 10672
    exec: function(editor) { editor.selectPageUp(); },                                                                 // 10673
    readOnly: true                                                                                                     // 10674
}, {                                                                                                                   // 10675
    name: "pageup",                                                                                                    // 10676
    bindKey: bindKey(null, "Option-PageUp"),                                                                           // 10677
    exec: function(editor) { editor.scrollPageUp(); },                                                                 // 10678
    readOnly: true                                                                                                     // 10679
}, {                                                                                                                   // 10680
    name: "gotopageup",                                                                                                // 10681
    bindKey: "PageUp",                                                                                                 // 10682
    exec: function(editor) { editor.gotoPageUp(); },                                                                   // 10683
    readOnly: true                                                                                                     // 10684
}, {                                                                                                                   // 10685
    name: "scrollup",                                                                                                  // 10686
    bindKey: bindKey("Ctrl-Up", null),                                                                                 // 10687
    exec: function(e) { e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight); },                             // 10688
    readOnly: true                                                                                                     // 10689
}, {                                                                                                                   // 10690
    name: "scrolldown",                                                                                                // 10691
    bindKey: bindKey("Ctrl-Down", null),                                                                               // 10692
    exec: function(e) { e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight); },                              // 10693
    readOnly: true                                                                                                     // 10694
}, {                                                                                                                   // 10695
    name: "selectlinestart",                                                                                           // 10696
    bindKey: "Shift-Home",                                                                                             // 10697
    exec: function(editor) { editor.getSelection().selectLineStart(); },                                               // 10698
    multiSelectAction: "forEach",                                                                                      // 10699
    scrollIntoView: "cursor",                                                                                          // 10700
    readOnly: true                                                                                                     // 10701
}, {                                                                                                                   // 10702
    name: "selectlineend",                                                                                             // 10703
    bindKey: "Shift-End",                                                                                              // 10704
    exec: function(editor) { editor.getSelection().selectLineEnd(); },                                                 // 10705
    multiSelectAction: "forEach",                                                                                      // 10706
    scrollIntoView: "cursor",                                                                                          // 10707
    readOnly: true                                                                                                     // 10708
}, {                                                                                                                   // 10709
    name: "togglerecording",                                                                                           // 10710
    bindKey: bindKey("Ctrl-Alt-E", "Command-Option-E"),                                                                // 10711
    exec: function(editor) { editor.commands.toggleRecording(editor); },                                               // 10712
    readOnly: true                                                                                                     // 10713
}, {                                                                                                                   // 10714
    name: "replaymacro",                                                                                               // 10715
    bindKey: bindKey("Ctrl-Shift-E", "Command-Shift-E"),                                                               // 10716
    exec: function(editor) { editor.commands.replay(editor); },                                                        // 10717
    readOnly: true                                                                                                     // 10718
}, {                                                                                                                   // 10719
    name: "jumptomatching",                                                                                            // 10720
    bindKey: bindKey("Ctrl-P", "Ctrl-P"),                                                                              // 10721
    exec: function(editor) { editor.jumpToMatching(); },                                                               // 10722
    multiSelectAction: "forEach",                                                                                      // 10723
    readOnly: true                                                                                                     // 10724
}, {                                                                                                                   // 10725
    name: "selecttomatching",                                                                                          // 10726
    bindKey: bindKey("Ctrl-Shift-P", "Ctrl-Shift-P"),                                                                  // 10727
    exec: function(editor) { editor.jumpToMatching(true); },                                                           // 10728
    multiSelectAction: "forEach",                                                                                      // 10729
    readOnly: true                                                                                                     // 10730
}, {                                                                                                                   // 10731
    name: "passKeysToBrowser",                                                                                         // 10732
    bindKey: bindKey("null", "null"),                                                                                  // 10733
    exec: function() {},                                                                                               // 10734
    passEvent: true,                                                                                                   // 10735
    readOnly: true                                                                                                     // 10736
},                                                                                                                     // 10737
{                                                                                                                      // 10738
    name: "cut",                                                                                                       // 10739
    exec: function(editor) {                                                                                           // 10740
        var range = editor.getSelectionRange();                                                                        // 10741
        editor._emit("cut", range);                                                                                    // 10742
                                                                                                                       // 10743
        if (!editor.selection.isEmpty()) {                                                                             // 10744
            editor.session.remove(range);                                                                              // 10745
            editor.clearSelection();                                                                                   // 10746
        }                                                                                                              // 10747
    },                                                                                                                 // 10748
    scrollIntoView: "cursor",                                                                                          // 10749
    multiSelectAction: "forEach"                                                                                       // 10750
}, {                                                                                                                   // 10751
    name: "removeline",                                                                                                // 10752
    bindKey: bindKey("Ctrl-D", "Command-D"),                                                                           // 10753
    exec: function(editor) { editor.removeLines(); },                                                                  // 10754
    scrollIntoView: "cursor",                                                                                          // 10755
    multiSelectAction: "forEachLine"                                                                                   // 10756
}, {                                                                                                                   // 10757
    name: "duplicateSelection",                                                                                        // 10758
    bindKey: bindKey("Ctrl-Shift-D", "Command-Shift-D"),                                                               // 10759
    exec: function(editor) { editor.duplicateSelection(); },                                                           // 10760
    scrollIntoView: "cursor",                                                                                          // 10761
    multiSelectAction: "forEach"                                                                                       // 10762
}, {                                                                                                                   // 10763
    name: "sortlines",                                                                                                 // 10764
    bindKey: bindKey("Ctrl-Alt-S", "Command-Alt-S"),                                                                   // 10765
    exec: function(editor) { editor.sortLines(); },                                                                    // 10766
    scrollIntoView: "selection",                                                                                       // 10767
    multiSelectAction: "forEachLine"                                                                                   // 10768
}, {                                                                                                                   // 10769
    name: "togglecomment",                                                                                             // 10770
    bindKey: bindKey("Ctrl-/", "Command-/"),                                                                           // 10771
    exec: function(editor) { editor.toggleCommentLines(); },                                                           // 10772
    multiSelectAction: "forEachLine",                                                                                  // 10773
    scrollIntoView: "selectionPart"                                                                                    // 10774
}, {                                                                                                                   // 10775
    name: "toggleBlockComment",                                                                                        // 10776
    bindKey: bindKey("Ctrl-Shift-/", "Command-Shift-/"),                                                               // 10777
    exec: function(editor) { editor.toggleBlockComment(); },                                                           // 10778
    multiSelectAction: "forEach",                                                                                      // 10779
    scrollIntoView: "selectionPart"                                                                                    // 10780
}, {                                                                                                                   // 10781
    name: "modifyNumberUp",                                                                                            // 10782
    bindKey: bindKey("Ctrl-Shift-Up", "Alt-Shift-Up"),                                                                 // 10783
    exec: function(editor) { editor.modifyNumber(1); },                                                                // 10784
    multiSelectAction: "forEach"                                                                                       // 10785
}, {                                                                                                                   // 10786
    name: "modifyNumberDown",                                                                                          // 10787
    bindKey: bindKey("Ctrl-Shift-Down", "Alt-Shift-Down"),                                                             // 10788
    exec: function(editor) { editor.modifyNumber(-1); },                                                               // 10789
    multiSelectAction: "forEach"                                                                                       // 10790
}, {                                                                                                                   // 10791
    name: "replace",                                                                                                   // 10792
    bindKey: bindKey("Ctrl-H", "Command-Option-F"),                                                                    // 10793
    exec: function(editor) {                                                                                           // 10794
        config.loadModule("ace/ext/searchbox", function(e) {e.Search(editor, true)});                                  // 10795
    }                                                                                                                  // 10796
}, {                                                                                                                   // 10797
    name: "undo",                                                                                                      // 10798
    bindKey: bindKey("Ctrl-Z", "Command-Z"),                                                                           // 10799
    exec: function(editor) { editor.undo(); }                                                                          // 10800
}, {                                                                                                                   // 10801
    name: "redo",                                                                                                      // 10802
    bindKey: bindKey("Ctrl-Shift-Z|Ctrl-Y", "Command-Shift-Z|Command-Y"),                                              // 10803
    exec: function(editor) { editor.redo(); }                                                                          // 10804
}, {                                                                                                                   // 10805
    name: "copylinesup",                                                                                               // 10806
    bindKey: bindKey("Alt-Shift-Up", "Command-Option-Up"),                                                             // 10807
    exec: function(editor) { editor.copyLinesUp(); },                                                                  // 10808
    scrollIntoView: "cursor"                                                                                           // 10809
}, {                                                                                                                   // 10810
    name: "movelinesup",                                                                                               // 10811
    bindKey: bindKey("Alt-Up", "Option-Up"),                                                                           // 10812
    exec: function(editor) { editor.moveLinesUp(); },                                                                  // 10813
    scrollIntoView: "cursor"                                                                                           // 10814
}, {                                                                                                                   // 10815
    name: "copylinesdown",                                                                                             // 10816
    bindKey: bindKey("Alt-Shift-Down", "Command-Option-Down"),                                                         // 10817
    exec: function(editor) { editor.copyLinesDown(); },                                                                // 10818
    scrollIntoView: "cursor"                                                                                           // 10819
}, {                                                                                                                   // 10820
    name: "movelinesdown",                                                                                             // 10821
    bindKey: bindKey("Alt-Down", "Option-Down"),                                                                       // 10822
    exec: function(editor) { editor.moveLinesDown(); },                                                                // 10823
    scrollIntoView: "cursor"                                                                                           // 10824
}, {                                                                                                                   // 10825
    name: "del",                                                                                                       // 10826
    bindKey: bindKey("Delete", "Delete|Ctrl-D|Shift-Delete"),                                                          // 10827
    exec: function(editor) { editor.remove("right"); },                                                                // 10828
    multiSelectAction: "forEach",                                                                                      // 10829
    scrollIntoView: "cursor"                                                                                           // 10830
}, {                                                                                                                   // 10831
    name: "backspace",                                                                                                 // 10832
    bindKey: bindKey(                                                                                                  // 10833
        "Shift-Backspace|Backspace",                                                                                   // 10834
        "Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"                                                              // 10835
    ),                                                                                                                 // 10836
    exec: function(editor) { editor.remove("left"); },                                                                 // 10837
    multiSelectAction: "forEach",                                                                                      // 10838
    scrollIntoView: "cursor"                                                                                           // 10839
}, {                                                                                                                   // 10840
    name: "cut_or_delete",                                                                                             // 10841
    bindKey: bindKey("Shift-Delete", null),                                                                            // 10842
    exec: function(editor) {                                                                                           // 10843
        if (editor.selection.isEmpty()) {                                                                              // 10844
            editor.remove("left");                                                                                     // 10845
        } else {                                                                                                       // 10846
            return false;                                                                                              // 10847
        }                                                                                                              // 10848
    },                                                                                                                 // 10849
    multiSelectAction: "forEach",                                                                                      // 10850
    scrollIntoView: "cursor"                                                                                           // 10851
}, {                                                                                                                   // 10852
    name: "removetolinestart",                                                                                         // 10853
    bindKey: bindKey("Alt-Backspace", "Command-Backspace"),                                                            // 10854
    exec: function(editor) { editor.removeToLineStart(); },                                                            // 10855
    multiSelectAction: "forEach",                                                                                      // 10856
    scrollIntoView: "cursor"                                                                                           // 10857
}, {                                                                                                                   // 10858
    name: "removetolineend",                                                                                           // 10859
    bindKey: bindKey("Alt-Delete", "Ctrl-K"),                                                                          // 10860
    exec: function(editor) { editor.removeToLineEnd(); },                                                              // 10861
    multiSelectAction: "forEach",                                                                                      // 10862
    scrollIntoView: "cursor"                                                                                           // 10863
}, {                                                                                                                   // 10864
    name: "removewordleft",                                                                                            // 10865
    bindKey: bindKey("Ctrl-Backspace", "Alt-Backspace|Ctrl-Alt-Backspace"),                                            // 10866
    exec: function(editor) { editor.removeWordLeft(); },                                                               // 10867
    multiSelectAction: "forEach",                                                                                      // 10868
    scrollIntoView: "cursor"                                                                                           // 10869
}, {                                                                                                                   // 10870
    name: "removewordright",                                                                                           // 10871
    bindKey: bindKey("Ctrl-Delete", "Alt-Delete"),                                                                     // 10872
    exec: function(editor) { editor.removeWordRight(); },                                                              // 10873
    multiSelectAction: "forEach",                                                                                      // 10874
    scrollIntoView: "cursor"                                                                                           // 10875
}, {                                                                                                                   // 10876
    name: "outdent",                                                                                                   // 10877
    bindKey: bindKey("Shift-Tab", "Shift-Tab"),                                                                        // 10878
    exec: function(editor) { editor.blockOutdent(); },                                                                 // 10879
    multiSelectAction: "forEach",                                                                                      // 10880
    scrollIntoView: "selectionPart"                                                                                    // 10881
}, {                                                                                                                   // 10882
    name: "indent",                                                                                                    // 10883
    bindKey: bindKey("Tab", "Tab"),                                                                                    // 10884
    exec: function(editor) { editor.indent(); },                                                                       // 10885
    multiSelectAction: "forEach",                                                                                      // 10886
    scrollIntoView: "selectionPart"                                                                                    // 10887
}, {                                                                                                                   // 10888
    name: "blockoutdent",                                                                                              // 10889
    bindKey: bindKey("Ctrl-[", "Ctrl-["),                                                                              // 10890
    exec: function(editor) { editor.blockOutdent(); },                                                                 // 10891
    multiSelectAction: "forEachLine",                                                                                  // 10892
    scrollIntoView: "selectionPart"                                                                                    // 10893
}, {                                                                                                                   // 10894
    name: "blockindent",                                                                                               // 10895
    bindKey: bindKey("Ctrl-]", "Ctrl-]"),                                                                              // 10896
    exec: function(editor) { editor.blockIndent(); },                                                                  // 10897
    multiSelectAction: "forEachLine",                                                                                  // 10898
    scrollIntoView: "selectionPart"                                                                                    // 10899
}, {                                                                                                                   // 10900
    name: "insertstring",                                                                                              // 10901
    exec: function(editor, str) { editor.insert(str); },                                                               // 10902
    multiSelectAction: "forEach",                                                                                      // 10903
    scrollIntoView: "cursor"                                                                                           // 10904
}, {                                                                                                                   // 10905
    name: "inserttext",                                                                                                // 10906
    exec: function(editor, args) {                                                                                     // 10907
        editor.insert(lang.stringRepeat(args.text  || "", args.times || 1));                                           // 10908
    },                                                                                                                 // 10909
    multiSelectAction: "forEach",                                                                                      // 10910
    scrollIntoView: "cursor"                                                                                           // 10911
}, {                                                                                                                   // 10912
    name: "splitline",                                                                                                 // 10913
    bindKey: bindKey(null, "Ctrl-O"),                                                                                  // 10914
    exec: function(editor) { editor.splitLine(); },                                                                    // 10915
    multiSelectAction: "forEach",                                                                                      // 10916
    scrollIntoView: "cursor"                                                                                           // 10917
}, {                                                                                                                   // 10918
    name: "transposeletters",                                                                                          // 10919
    bindKey: bindKey("Ctrl-T", "Ctrl-T"),                                                                              // 10920
    exec: function(editor) { editor.transposeLetters(); },                                                             // 10921
    multiSelectAction: function(editor) {editor.transposeSelections(1); },                                             // 10922
    scrollIntoView: "cursor"                                                                                           // 10923
}, {                                                                                                                   // 10924
    name: "touppercase",                                                                                               // 10925
    bindKey: bindKey("Ctrl-U", "Ctrl-U"),                                                                              // 10926
    exec: function(editor) { editor.toUpperCase(); },                                                                  // 10927
    multiSelectAction: "forEach",                                                                                      // 10928
    scrollIntoView: "cursor"                                                                                           // 10929
}, {                                                                                                                   // 10930
    name: "tolowercase",                                                                                               // 10931
    bindKey: bindKey("Ctrl-Shift-U", "Ctrl-Shift-U"),                                                                  // 10932
    exec: function(editor) { editor.toLowerCase(); },                                                                  // 10933
    multiSelectAction: "forEach",                                                                                      // 10934
    scrollIntoView: "cursor"                                                                                           // 10935
}, {                                                                                                                   // 10936
    name: "expandtoline",                                                                                              // 10937
    bindKey: bindKey("Ctrl-Shift-L", "Command-Shift-L"),                                                               // 10938
    exec: function(editor) {                                                                                           // 10939
        var range = editor.selection.getRange();                                                                       // 10940
                                                                                                                       // 10941
        range.start.column = range.end.column = 0;                                                                     // 10942
        range.end.row++;                                                                                               // 10943
        editor.selection.setRange(range, false);                                                                       // 10944
    },                                                                                                                 // 10945
    multiSelectAction: "forEach",                                                                                      // 10946
    scrollIntoView: "cursor",                                                                                          // 10947
    readOnly: true                                                                                                     // 10948
}, {                                                                                                                   // 10949
    name: "joinlines",                                                                                                 // 10950
    bindKey: bindKey(null, null),                                                                                      // 10951
    exec: function(editor) {                                                                                           // 10952
        var isBackwards = editor.selection.isBackwards();                                                              // 10953
        var selectionStart = isBackwards ? editor.selection.getSelectionLead() : editor.selection.getSelectionAnchor();
        var selectionEnd = isBackwards ? editor.selection.getSelectionAnchor() : editor.selection.getSelectionLead();  // 10955
        var firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length                                    // 10956
        var selectedText = editor.session.doc.getTextRange(editor.selection.getRange());                               // 10957
        var selectedCount = selectedText.replace(/\n\s*/, " ").length;                                                 // 10958
        var insertLine = editor.session.doc.getLine(selectionStart.row);                                               // 10959
                                                                                                                       // 10960
        for (var i = selectionStart.row + 1; i <= selectionEnd.row + 1; i++) {                                         // 10961
            var curLine = lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));                    // 10962
            if (curLine.length !== 0) {                                                                                // 10963
                curLine = " " + curLine;                                                                               // 10964
            }                                                                                                          // 10965
            insertLine += curLine;                                                                                     // 10966
        };                                                                                                             // 10967
                                                                                                                       // 10968
        if (selectionEnd.row + 1 < (editor.session.doc.getLength() - 1)) {                                             // 10969
            insertLine += editor.session.doc.getNewLineCharacter();                                                    // 10970
        }                                                                                                              // 10971
                                                                                                                       // 10972
        editor.clearSelection();                                                                                       // 10973
        editor.session.doc.replace(new Range(selectionStart.row, 0, selectionEnd.row + 2, 0), insertLine);             // 10974
                                                                                                                       // 10975
        if (selectedCount > 0) {                                                                                       // 10976
            editor.selection.moveCursorTo(selectionStart.row, selectionStart.column);                                  // 10977
            editor.selection.selectTo(selectionStart.row, selectionStart.column + selectedCount);                      // 10978
        } else {                                                                                                       // 10979
            firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length > firstLineEndCol ? (firstLineEndCol + 1) : firstLineEndCol;
            editor.selection.moveCursorTo(selectionStart.row, firstLineEndCol);                                        // 10981
        }                                                                                                              // 10982
    },                                                                                                                 // 10983
    multiSelectAction: "forEach",                                                                                      // 10984
    readOnly: true                                                                                                     // 10985
}, {                                                                                                                   // 10986
    name: "invertSelection",                                                                                           // 10987
    bindKey: bindKey(null, null),                                                                                      // 10988
    exec: function(editor) {                                                                                           // 10989
        var endRow = editor.session.doc.getLength() - 1;                                                               // 10990
        var endCol = editor.session.doc.getLine(endRow).length;                                                        // 10991
        var ranges = editor.selection.rangeList.ranges;                                                                // 10992
        var newRanges = [];                                                                                            // 10993
        if (ranges.length < 1) {                                                                                       // 10994
            ranges = [editor.selection.getRange()];                                                                    // 10995
        }                                                                                                              // 10996
                                                                                                                       // 10997
        for (var i = 0; i < ranges.length; i++) {                                                                      // 10998
            if (i == (ranges.length - 1)) {                                                                            // 10999
                if (!(ranges[i].end.row === endRow && ranges[i].end.column === endCol)) {                              // 11000
                    newRanges.push(new Range(ranges[i].end.row, ranges[i].end.column, endRow, endCol));                // 11001
                }                                                                                                      // 11002
            }                                                                                                          // 11003
                                                                                                                       // 11004
            if (i === 0) {                                                                                             // 11005
                if (!(ranges[i].start.row === 0 && ranges[i].start.column === 0)) {                                    // 11006
                    newRanges.push(new Range(0, 0, ranges[i].start.row, ranges[i].start.column));                      // 11007
                }                                                                                                      // 11008
            } else {                                                                                                   // 11009
                newRanges.push(new Range(ranges[i-1].end.row, ranges[i-1].end.column, ranges[i].start.row, ranges[i].start.column));
            }                                                                                                          // 11011
        }                                                                                                              // 11012
                                                                                                                       // 11013
        editor.exitMultiSelectMode();                                                                                  // 11014
        editor.clearSelection();                                                                                       // 11015
                                                                                                                       // 11016
        for(var i = 0; i < newRanges.length; i++) {                                                                    // 11017
            editor.selection.addRange(newRanges[i], false);                                                            // 11018
        }                                                                                                              // 11019
    },                                                                                                                 // 11020
    readOnly: true,                                                                                                    // 11021
    scrollIntoView: "none"                                                                                             // 11022
}];                                                                                                                    // 11023
                                                                                                                       // 11024
});                                                                                                                    // 11025
                                                                                                                       // 11026
define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"], function(require, exports, module) {
"use strict";                                                                                                          // 11028
                                                                                                                       // 11029
require("./lib/fixoldbrowsers");                                                                                       // 11030
                                                                                                                       // 11031
var oop = require("./lib/oop");                                                                                        // 11032
var dom = require("./lib/dom");                                                                                        // 11033
var lang = require("./lib/lang");                                                                                      // 11034
var useragent = require("./lib/useragent");                                                                            // 11035
var TextInput = require("./keyboard/textinput").TextInput;                                                             // 11036
var MouseHandler = require("./mouse/mouse_handler").MouseHandler;                                                      // 11037
var FoldHandler = require("./mouse/fold_handler").FoldHandler;                                                         // 11038
var KeyBinding = require("./keyboard/keybinding").KeyBinding;                                                          // 11039
var EditSession = require("./edit_session").EditSession;                                                               // 11040
var Search = require("./search").Search;                                                                               // 11041
var Range = require("./range").Range;                                                                                  // 11042
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 11043
var CommandManager = require("./commands/command_manager").CommandManager;                                             // 11044
var defaultCommands = require("./commands/default_commands").commands;                                                 // 11045
var config = require("./config");                                                                                      // 11046
var TokenIterator = require("./token_iterator").TokenIterator;                                                         // 11047
var Editor = function(renderer, session) {                                                                             // 11048
    var container = renderer.getContainerElement();                                                                    // 11049
    this.container = container;                                                                                        // 11050
    this.renderer = renderer;                                                                                          // 11051
                                                                                                                       // 11052
    this.commands = new CommandManager(useragent.isMac ? "mac" : "win", defaultCommands);                              // 11053
    this.textInput  = new TextInput(renderer.getTextAreaContainer(), this);                                            // 11054
    this.renderer.textarea = this.textInput.getElement();                                                              // 11055
    this.keyBinding = new KeyBinding(this);                                                                            // 11056
    this.$mouseHandler = new MouseHandler(this);                                                                       // 11057
    new FoldHandler(this);                                                                                             // 11058
                                                                                                                       // 11059
    this.$blockScrolling = 0;                                                                                          // 11060
    this.$search = new Search().set({                                                                                  // 11061
        wrap: true                                                                                                     // 11062
    });                                                                                                                // 11063
                                                                                                                       // 11064
    this.$historyTracker = this.$historyTracker.bind(this);                                                            // 11065
    this.commands.on("exec", this.$historyTracker);                                                                    // 11066
                                                                                                                       // 11067
    this.$initOperationListeners();                                                                                    // 11068
                                                                                                                       // 11069
    this._$emitInputEvent = lang.delayedCall(function() {                                                              // 11070
        this._signal("input", {});                                                                                     // 11071
        if (this.session && this.session.bgTokenizer)                                                                  // 11072
            this.session.bgTokenizer.scheduleStart();                                                                  // 11073
    }.bind(this));                                                                                                     // 11074
                                                                                                                       // 11075
    this.on("change", function(_, _self) {                                                                             // 11076
        _self._$emitInputEvent.schedule(31);                                                                           // 11077
    });                                                                                                                // 11078
                                                                                                                       // 11079
    this.setSession(session || new EditSession(""));                                                                   // 11080
    config.resetOptions(this);                                                                                         // 11081
    config._signal("editor", this);                                                                                    // 11082
};                                                                                                                     // 11083
                                                                                                                       // 11084
(function(){                                                                                                           // 11085
                                                                                                                       // 11086
    oop.implement(this, EventEmitter);                                                                                 // 11087
                                                                                                                       // 11088
    this.$initOperationListeners = function() {                                                                        // 11089
        function last(a) {return a[a.length - 1]}                                                                      // 11090
                                                                                                                       // 11091
        this.selections = [];                                                                                          // 11092
        this.commands.on("exec", this.startOperation.bind(this), true);                                                // 11093
        this.commands.on("afterExec", this.endOperation.bind(this), true);                                             // 11094
                                                                                                                       // 11095
        this.$opResetTimer = lang.delayedCall(this.endOperation.bind(this));                                           // 11096
                                                                                                                       // 11097
        this.on("change", function() {                                                                                 // 11098
            this.curOp || this.startOperation();                                                                       // 11099
            this.curOp.docChanged = true;                                                                              // 11100
        }.bind(this), true);                                                                                           // 11101
                                                                                                                       // 11102
        this.on("changeSelection", function() {                                                                        // 11103
            this.curOp || this.startOperation();                                                                       // 11104
            this.curOp.selectionChanged = true;                                                                        // 11105
        }.bind(this), true);                                                                                           // 11106
    };                                                                                                                 // 11107
                                                                                                                       // 11108
    this.curOp = null;                                                                                                 // 11109
    this.prevOp = {};                                                                                                  // 11110
    this.startOperation = function(commadEvent) {                                                                      // 11111
        if (this.curOp) {                                                                                              // 11112
            if (!commadEvent || this.curOp.command)                                                                    // 11113
                return;                                                                                                // 11114
            this.prevOp = this.curOp;                                                                                  // 11115
        }                                                                                                              // 11116
        if (!commadEvent) {                                                                                            // 11117
            this.previousCommand = null;                                                                               // 11118
            commadEvent = {};                                                                                          // 11119
        }                                                                                                              // 11120
                                                                                                                       // 11121
        this.$opResetTimer.schedule();                                                                                 // 11122
        this.curOp = {                                                                                                 // 11123
            command: commadEvent.command || {},                                                                        // 11124
            args: commadEvent.args,                                                                                    // 11125
            scrollTop: this.renderer.scrollTop                                                                         // 11126
        };                                                                                                             // 11127
    };                                                                                                                 // 11128
                                                                                                                       // 11129
    this.endOperation = function(e) {                                                                                  // 11130
        if (this.curOp) {                                                                                              // 11131
            if (e && e.returnValue === false)                                                                          // 11132
                return this.curOp = null;                                                                              // 11133
                                                                                                                       // 11134
            var command = this.curOp.command;                                                                          // 11135
            if (command && command.scrollIntoView) {                                                                   // 11136
                switch (command.scrollIntoView) {                                                                      // 11137
                    case "center":                                                                                     // 11138
                        this.renderer.scrollCursorIntoView(null, 0.5);                                                 // 11139
                        break;                                                                                         // 11140
                    case "animate":                                                                                    // 11141
                    case "cursor":                                                                                     // 11142
                        this.renderer.scrollCursorIntoView();                                                          // 11143
                        break;                                                                                         // 11144
                    case "selectionPart":                                                                              // 11145
                        var range = this.selection.getRange();                                                         // 11146
                        var config = this.renderer.layerConfig;                                                        // 11147
                        if (range.start.row >= config.lastRow || range.end.row <= config.firstRow) {                   // 11148
                            this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);         // 11149
                        }                                                                                              // 11150
                        break;                                                                                         // 11151
                    default:                                                                                           // 11152
                        break;                                                                                         // 11153
                }                                                                                                      // 11154
                if (command.scrollIntoView == "animate")                                                               // 11155
                    this.renderer.animateScrolling(this.curOp.scrollTop);                                              // 11156
            }                                                                                                          // 11157
                                                                                                                       // 11158
            this.prevOp = this.curOp;                                                                                  // 11159
            this.curOp = null;                                                                                         // 11160
        }                                                                                                              // 11161
    };                                                                                                                 // 11162
    this.$mergeableCommands = ["backspace", "del", "insertstring"];                                                    // 11163
    this.$historyTracker = function(e) {                                                                               // 11164
        if (!this.$mergeUndoDeltas)                                                                                    // 11165
            return;                                                                                                    // 11166
                                                                                                                       // 11167
        var prev = this.prevOp;                                                                                        // 11168
        var mergeableCommands = this.$mergeableCommands;                                                               // 11169
        var shouldMerge = prev.command && (e.command.name == prev.command.name);                                       // 11170
        if (e.command.name == "insertstring") {                                                                        // 11171
            var text = e.args;                                                                                         // 11172
            if (this.mergeNextCommand === undefined)                                                                   // 11173
                this.mergeNextCommand = true;                                                                          // 11174
                                                                                                                       // 11175
            shouldMerge = shouldMerge                                                                                  // 11176
                && this.mergeNextCommand // previous command allows to coalesce with                                   // 11177
                && (!/\s/.test(text) || /\s/.test(prev.args)); // previous insertion was of same type                  // 11178
                                                                                                                       // 11179
            this.mergeNextCommand = true;                                                                              // 11180
        } else {                                                                                                       // 11181
            shouldMerge = shouldMerge                                                                                  // 11182
                && mergeableCommands.indexOf(e.command.name) !== -1; // the command is mergeable                       // 11183
        }                                                                                                              // 11184
                                                                                                                       // 11185
        if (                                                                                                           // 11186
            this.$mergeUndoDeltas != "always"                                                                          // 11187
            && Date.now() - this.sequenceStartTime > 2000                                                              // 11188
        ) {                                                                                                            // 11189
            shouldMerge = false; // the sequence is too long                                                           // 11190
        }                                                                                                              // 11191
                                                                                                                       // 11192
        if (shouldMerge)                                                                                               // 11193
            this.session.mergeUndoDeltas = true;                                                                       // 11194
        else if (mergeableCommands.indexOf(e.command.name) !== -1)                                                     // 11195
            this.sequenceStartTime = Date.now();                                                                       // 11196
    };                                                                                                                 // 11197
    this.setKeyboardHandler = function(keyboardHandler, cb) {                                                          // 11198
        if (keyboardHandler && typeof keyboardHandler === "string") {                                                  // 11199
            this.$keybindingId = keyboardHandler;                                                                      // 11200
            var _self = this;                                                                                          // 11201
            config.loadModule(["keybinding", keyboardHandler], function(module) {                                      // 11202
                if (_self.$keybindingId == keyboardHandler)                                                            // 11203
                    _self.keyBinding.setKeyboardHandler(module && module.handler);                                     // 11204
                cb && cb();                                                                                            // 11205
            });                                                                                                        // 11206
        } else {                                                                                                       // 11207
            this.$keybindingId = null;                                                                                 // 11208
            this.keyBinding.setKeyboardHandler(keyboardHandler);                                                       // 11209
            cb && cb();                                                                                                // 11210
        }                                                                                                              // 11211
    };                                                                                                                 // 11212
    this.getKeyboardHandler = function() {                                                                             // 11213
        return this.keyBinding.getKeyboardHandler();                                                                   // 11214
    };                                                                                                                 // 11215
    this.setSession = function(session) {                                                                              // 11216
        if (this.session == session)                                                                                   // 11217
            return;                                                                                                    // 11218
                                                                                                                       // 11219
        var oldSession = this.session;                                                                                 // 11220
        if (oldSession) {                                                                                              // 11221
            this.session.removeEventListener("change", this.$onDocumentChange);                                        // 11222
            this.session.removeEventListener("changeMode", this.$onChangeMode);                                        // 11223
            this.session.removeEventListener("tokenizerUpdate", this.$onTokenizerUpdate);                              // 11224
            this.session.removeEventListener("changeTabSize", this.$onChangeTabSize);                                  // 11225
            this.session.removeEventListener("changeWrapLimit", this.$onChangeWrapLimit);                              // 11226
            this.session.removeEventListener("changeWrapMode", this.$onChangeWrapMode);                                // 11227
            this.session.removeEventListener("onChangeFold", this.$onChangeFold);                                      // 11228
            this.session.removeEventListener("changeFrontMarker", this.$onChangeFrontMarker);                          // 11229
            this.session.removeEventListener("changeBackMarker", this.$onChangeBackMarker);                            // 11230
            this.session.removeEventListener("changeBreakpoint", this.$onChangeBreakpoint);                            // 11231
            this.session.removeEventListener("changeAnnotation", this.$onChangeAnnotation);                            // 11232
            this.session.removeEventListener("changeOverwrite", this.$onCursorChange);                                 // 11233
            this.session.removeEventListener("changeScrollTop", this.$onScrollTopChange);                              // 11234
            this.session.removeEventListener("changeScrollLeft", this.$onScrollLeftChange);                            // 11235
                                                                                                                       // 11236
            var selection = this.session.getSelection();                                                               // 11237
            selection.removeEventListener("changeCursor", this.$onCursorChange);                                       // 11238
            selection.removeEventListener("changeSelection", this.$onSelectionChange);                                 // 11239
        }                                                                                                              // 11240
                                                                                                                       // 11241
        this.session = session;                                                                                        // 11242
        if (session) {                                                                                                 // 11243
            this.$onDocumentChange = this.onDocumentChange.bind(this);                                                 // 11244
            session.addEventListener("change", this.$onDocumentChange);                                                // 11245
            this.renderer.setSession(session);                                                                         // 11246
                                                                                                                       // 11247
            this.$onChangeMode = this.onChangeMode.bind(this);                                                         // 11248
            session.addEventListener("changeMode", this.$onChangeMode);                                                // 11249
                                                                                                                       // 11250
            this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this);                                               // 11251
            session.addEventListener("tokenizerUpdate", this.$onTokenizerUpdate);                                      // 11252
                                                                                                                       // 11253
            this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer);                                 // 11254
            session.addEventListener("changeTabSize", this.$onChangeTabSize);                                          // 11255
                                                                                                                       // 11256
            this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this);                                               // 11257
            session.addEventListener("changeWrapLimit", this.$onChangeWrapLimit);                                      // 11258
                                                                                                                       // 11259
            this.$onChangeWrapMode = this.onChangeWrapMode.bind(this);                                                 // 11260
            session.addEventListener("changeWrapMode", this.$onChangeWrapMode);                                        // 11261
                                                                                                                       // 11262
            this.$onChangeFold = this.onChangeFold.bind(this);                                                         // 11263
            session.addEventListener("changeFold", this.$onChangeFold);                                                // 11264
                                                                                                                       // 11265
            this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this);                                           // 11266
            this.session.addEventListener("changeFrontMarker", this.$onChangeFrontMarker);                             // 11267
                                                                                                                       // 11268
            this.$onChangeBackMarker = this.onChangeBackMarker.bind(this);                                             // 11269
            this.session.addEventListener("changeBackMarker", this.$onChangeBackMarker);                               // 11270
                                                                                                                       // 11271
            this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this);                                             // 11272
            this.session.addEventListener("changeBreakpoint", this.$onChangeBreakpoint);                               // 11273
                                                                                                                       // 11274
            this.$onChangeAnnotation = this.onChangeAnnotation.bind(this);                                             // 11275
            this.session.addEventListener("changeAnnotation", this.$onChangeAnnotation);                               // 11276
                                                                                                                       // 11277
            this.$onCursorChange = this.onCursorChange.bind(this);                                                     // 11278
            this.session.addEventListener("changeOverwrite", this.$onCursorChange);                                    // 11279
                                                                                                                       // 11280
            this.$onScrollTopChange = this.onScrollTopChange.bind(this);                                               // 11281
            this.session.addEventListener("changeScrollTop", this.$onScrollTopChange);                                 // 11282
                                                                                                                       // 11283
            this.$onScrollLeftChange = this.onScrollLeftChange.bind(this);                                             // 11284
            this.session.addEventListener("changeScrollLeft", this.$onScrollLeftChange);                               // 11285
                                                                                                                       // 11286
            this.selection = session.getSelection();                                                                   // 11287
            this.selection.addEventListener("changeCursor", this.$onCursorChange);                                     // 11288
                                                                                                                       // 11289
            this.$onSelectionChange = this.onSelectionChange.bind(this);                                               // 11290
            this.selection.addEventListener("changeSelection", this.$onSelectionChange);                               // 11291
                                                                                                                       // 11292
            this.onChangeMode();                                                                                       // 11293
                                                                                                                       // 11294
            this.$blockScrolling += 1;                                                                                 // 11295
            this.onCursorChange();                                                                                     // 11296
            this.$blockScrolling -= 1;                                                                                 // 11297
                                                                                                                       // 11298
            this.onScrollTopChange();                                                                                  // 11299
            this.onScrollLeftChange();                                                                                 // 11300
            this.onSelectionChange();                                                                                  // 11301
            this.onChangeFrontMarker();                                                                                // 11302
            this.onChangeBackMarker();                                                                                 // 11303
            this.onChangeBreakpoint();                                                                                 // 11304
            this.onChangeAnnotation();                                                                                 // 11305
            this.session.getUseWrapMode() && this.renderer.adjustWrapLimit();                                          // 11306
            this.renderer.updateFull();                                                                                // 11307
        } else {                                                                                                       // 11308
            this.selection = null;                                                                                     // 11309
            this.renderer.setSession(session);                                                                         // 11310
        }                                                                                                              // 11311
                                                                                                                       // 11312
        this._signal("changeSession", {                                                                                // 11313
            session: session,                                                                                          // 11314
            oldSession: oldSession                                                                                     // 11315
        });                                                                                                            // 11316
                                                                                                                       // 11317
        oldSession && oldSession._signal("changeEditor", {oldEditor: this});                                           // 11318
        session && session._signal("changeEditor", {editor: this});                                                    // 11319
    };                                                                                                                 // 11320
    this.getSession = function() {                                                                                     // 11321
        return this.session;                                                                                           // 11322
    };                                                                                                                 // 11323
    this.setValue = function(val, cursorPos) {                                                                         // 11324
        this.session.doc.setValue(val);                                                                                // 11325
                                                                                                                       // 11326
        if (!cursorPos)                                                                                                // 11327
            this.selectAll();                                                                                          // 11328
        else if (cursorPos == 1)                                                                                       // 11329
            this.navigateFileEnd();                                                                                    // 11330
        else if (cursorPos == -1)                                                                                      // 11331
            this.navigateFileStart();                                                                                  // 11332
                                                                                                                       // 11333
        return val;                                                                                                    // 11334
    };                                                                                                                 // 11335
    this.getValue = function() {                                                                                       // 11336
        return this.session.getValue();                                                                                // 11337
    };                                                                                                                 // 11338
    this.getSelection = function() {                                                                                   // 11339
        return this.selection;                                                                                         // 11340
    };                                                                                                                 // 11341
    this.resize = function(force) {                                                                                    // 11342
        this.renderer.onResize(force);                                                                                 // 11343
    };                                                                                                                 // 11344
    this.setTheme = function(theme, cb) {                                                                              // 11345
        this.renderer.setTheme(theme, cb);                                                                             // 11346
    };                                                                                                                 // 11347
    this.getTheme = function() {                                                                                       // 11348
        return this.renderer.getTheme();                                                                               // 11349
    };                                                                                                                 // 11350
    this.setStyle = function(style) {                                                                                  // 11351
        this.renderer.setStyle(style);                                                                                 // 11352
    };                                                                                                                 // 11353
    this.unsetStyle = function(style) {                                                                                // 11354
        this.renderer.unsetStyle(style);                                                                               // 11355
    };                                                                                                                 // 11356
    this.getFontSize = function () {                                                                                   // 11357
        return this.getOption("fontSize") ||                                                                           // 11358
           dom.computedStyle(this.container, "fontSize");                                                              // 11359
    };                                                                                                                 // 11360
    this.setFontSize = function(size) {                                                                                // 11361
        this.setOption("fontSize", size);                                                                              // 11362
    };                                                                                                                 // 11363
                                                                                                                       // 11364
    this.$highlightBrackets = function() {                                                                             // 11365
        if (this.session.$bracketHighlight) {                                                                          // 11366
            this.session.removeMarker(this.session.$bracketHighlight);                                                 // 11367
            this.session.$bracketHighlight = null;                                                                     // 11368
        }                                                                                                              // 11369
                                                                                                                       // 11370
        if (this.$highlightPending) {                                                                                  // 11371
            return;                                                                                                    // 11372
        }                                                                                                              // 11373
        var self = this;                                                                                               // 11374
        this.$highlightPending = true;                                                                                 // 11375
        setTimeout(function() {                                                                                        // 11376
            self.$highlightPending = false;                                                                            // 11377
            var session = self.session;                                                                                // 11378
            if (!session || !session.bgTokenizer) return;                                                              // 11379
            var pos = session.findMatchingBracket(self.getCursorPosition());                                           // 11380
            if (pos) {                                                                                                 // 11381
                var range = new Range(pos.row, pos.column, pos.row, pos.column + 1);                                   // 11382
            } else if (session.$mode.getMatching) {                                                                    // 11383
                var range = session.$mode.getMatching(self.session);                                                   // 11384
            }                                                                                                          // 11385
            if (range)                                                                                                 // 11386
                session.$bracketHighlight = session.addMarker(range, "ace_bracket", "text");                           // 11387
        }, 50);                                                                                                        // 11388
    };                                                                                                                 // 11389
    this.$highlightTags = function() {                                                                                 // 11390
        if (this.$highlightTagPending)                                                                                 // 11391
            return;                                                                                                    // 11392
        var self = this;                                                                                               // 11393
        this.$highlightTagPending = true;                                                                              // 11394
        setTimeout(function() {                                                                                        // 11395
            self.$highlightTagPending = false;                                                                         // 11396
                                                                                                                       // 11397
            var session = self.session;                                                                                // 11398
            if (!session || !session.bgTokenizer) return;                                                              // 11399
                                                                                                                       // 11400
            var pos = self.getCursorPosition();                                                                        // 11401
            var iterator = new TokenIterator(self.session, pos.row, pos.column);                                       // 11402
            var token = iterator.getCurrentToken();                                                                    // 11403
                                                                                                                       // 11404
            if (!token || token.type.indexOf('tag-name') === -1) {                                                     // 11405
                session.removeMarker(session.$tagHighlight);                                                           // 11406
                session.$tagHighlight = null;                                                                          // 11407
                return;                                                                                                // 11408
            }                                                                                                          // 11409
                                                                                                                       // 11410
            var tag = token.value;                                                                                     // 11411
            var depth = 0;                                                                                             // 11412
            var prevToken = iterator.stepBackward();                                                                   // 11413
                                                                                                                       // 11414
            if (prevToken.value == '<'){                                                                               // 11415
                do {                                                                                                   // 11416
                    prevToken = token;                                                                                 // 11417
                    token = iterator.stepForward();                                                                    // 11418
                                                                                                                       // 11419
                    if (token && token.value === tag && token.type.indexOf('tag-name') !== -1) {                       // 11420
                        if (prevToken.value === '<'){                                                                  // 11421
                            depth++;                                                                                   // 11422
                        } else if (prevToken.value === '</'){                                                          // 11423
                            depth--;                                                                                   // 11424
                        }                                                                                              // 11425
                    }                                                                                                  // 11426
                                                                                                                       // 11427
                } while (token && depth >= 0);                                                                         // 11428
            } else {                                                                                                   // 11429
                do {                                                                                                   // 11430
                    token = prevToken;                                                                                 // 11431
                    prevToken = iterator.stepBackward();                                                               // 11432
                                                                                                                       // 11433
                    if (token && token.value === tag && token.type.indexOf('tag-name') !== -1) {                       // 11434
                        if (prevToken.value === '<') {                                                                 // 11435
                            depth++;                                                                                   // 11436
                        } else if (prevToken.value === '</') {                                                         // 11437
                            depth--;                                                                                   // 11438
                        }                                                                                              // 11439
                    }                                                                                                  // 11440
                } while (prevToken && depth <= 0);                                                                     // 11441
                iterator.stepForward();                                                                                // 11442
            }                                                                                                          // 11443
                                                                                                                       // 11444
            if (!token) {                                                                                              // 11445
                session.removeMarker(session.$tagHighlight);                                                           // 11446
                session.$tagHighlight = null;                                                                          // 11447
                return;                                                                                                // 11448
            }                                                                                                          // 11449
                                                                                                                       // 11450
            var row = iterator.getCurrentTokenRow();                                                                   // 11451
            var column = iterator.getCurrentTokenColumn();                                                             // 11452
            var range = new Range(row, column, row, column+token.value.length);                                        // 11453
            if (session.$tagHighlight && range.compareRange(session.$backMarkers[session.$tagHighlight].range)!==0) {  // 11454
                session.removeMarker(session.$tagHighlight);                                                           // 11455
                session.$tagHighlight = null;                                                                          // 11456
            }                                                                                                          // 11457
                                                                                                                       // 11458
            if (range && !session.$tagHighlight)                                                                       // 11459
                session.$tagHighlight = session.addMarker(range, "ace_bracket", "text");                               // 11460
        }, 50);                                                                                                        // 11461
    };                                                                                                                 // 11462
    this.focus = function() {                                                                                          // 11463
        var _self = this;                                                                                              // 11464
        setTimeout(function() {                                                                                        // 11465
            _self.textInput.focus();                                                                                   // 11466
        });                                                                                                            // 11467
        this.textInput.focus();                                                                                        // 11468
    };                                                                                                                 // 11469
    this.isFocused = function() {                                                                                      // 11470
        return this.textInput.isFocused();                                                                             // 11471
    };                                                                                                                 // 11472
    this.blur = function() {                                                                                           // 11473
        this.textInput.blur();                                                                                         // 11474
    };                                                                                                                 // 11475
    this.onFocus = function(e) {                                                                                       // 11476
        if (this.$isFocused)                                                                                           // 11477
            return;                                                                                                    // 11478
        this.$isFocused = true;                                                                                        // 11479
        this.renderer.showCursor();                                                                                    // 11480
        this.renderer.visualizeFocus();                                                                                // 11481
        this._emit("focus", e);                                                                                        // 11482
    };                                                                                                                 // 11483
    this.onBlur = function(e) {                                                                                        // 11484
        if (!this.$isFocused)                                                                                          // 11485
            return;                                                                                                    // 11486
        this.$isFocused = false;                                                                                       // 11487
        this.renderer.hideCursor();                                                                                    // 11488
        this.renderer.visualizeBlur();                                                                                 // 11489
        this._emit("blur", e);                                                                                         // 11490
    };                                                                                                                 // 11491
                                                                                                                       // 11492
    this.$cursorChange = function() {                                                                                  // 11493
        this.renderer.updateCursor();                                                                                  // 11494
    };                                                                                                                 // 11495
    this.onDocumentChange = function(e) {                                                                              // 11496
        var delta = e.data;                                                                                            // 11497
        var range = delta.range;                                                                                       // 11498
        var lastRow;                                                                                                   // 11499
                                                                                                                       // 11500
        if (range.start.row == range.end.row && delta.action != "insertLines" && delta.action != "removeLines")        // 11501
            lastRow = range.end.row;                                                                                   // 11502
        else                                                                                                           // 11503
            lastRow = Infinity;                                                                                        // 11504
        this.renderer.updateLines(range.start.row, lastRow, this.session.$useWrapMode);                                // 11505
                                                                                                                       // 11506
        this._signal("change", e);                                                                                     // 11507
        this.$cursorChange();                                                                                          // 11508
        this.$updateHighlightActiveLine();                                                                             // 11509
    };                                                                                                                 // 11510
                                                                                                                       // 11511
    this.onTokenizerUpdate = function(e) {                                                                             // 11512
        var rows = e.data;                                                                                             // 11513
        this.renderer.updateLines(rows.first, rows.last);                                                              // 11514
    };                                                                                                                 // 11515
                                                                                                                       // 11516
                                                                                                                       // 11517
    this.onScrollTopChange = function() {                                                                              // 11518
        this.renderer.scrollToY(this.session.getScrollTop());                                                          // 11519
    };                                                                                                                 // 11520
                                                                                                                       // 11521
    this.onScrollLeftChange = function() {                                                                             // 11522
        this.renderer.scrollToX(this.session.getScrollLeft());                                                         // 11523
    };                                                                                                                 // 11524
    this.onCursorChange = function() {                                                                                 // 11525
        this.$cursorChange();                                                                                          // 11526
                                                                                                                       // 11527
        if (!this.$blockScrolling) {                                                                                   // 11528
            this.renderer.scrollCursorIntoView();                                                                      // 11529
        }                                                                                                              // 11530
                                                                                                                       // 11531
        this.$highlightBrackets();                                                                                     // 11532
        this.$highlightTags();                                                                                         // 11533
        this.$updateHighlightActiveLine();                                                                             // 11534
        this._signal("changeSelection");                                                                               // 11535
    };                                                                                                                 // 11536
                                                                                                                       // 11537
    this.$updateHighlightActiveLine = function() {                                                                     // 11538
        var session = this.getSession();                                                                               // 11539
                                                                                                                       // 11540
        var highlight;                                                                                                 // 11541
        if (this.$highlightActiveLine) {                                                                               // 11542
            if ((this.$selectionStyle != "line" || !this.selection.isMultiLine()))                                     // 11543
                highlight = this.getCursorPosition();                                                                  // 11544
            if (this.renderer.$maxLines && this.session.getLength() === 1 && !(this.renderer.$minLines > 1))           // 11545
                highlight = false;                                                                                     // 11546
        }                                                                                                              // 11547
                                                                                                                       // 11548
        if (session.$highlightLineMarker && !highlight) {                                                              // 11549
            session.removeMarker(session.$highlightLineMarker.id);                                                     // 11550
            session.$highlightLineMarker = null;                                                                       // 11551
        } else if (!session.$highlightLineMarker && highlight) {                                                       // 11552
            var range = new Range(highlight.row, highlight.column, highlight.row, Infinity);                           // 11553
            range.id = session.addMarker(range, "ace_active-line", "screenLine");                                      // 11554
            session.$highlightLineMarker = range;                                                                      // 11555
        } else if (highlight) {                                                                                        // 11556
            session.$highlightLineMarker.start.row = highlight.row;                                                    // 11557
            session.$highlightLineMarker.end.row = highlight.row;                                                      // 11558
            session.$highlightLineMarker.start.column = highlight.column;                                              // 11559
            session._signal("changeBackMarker");                                                                       // 11560
        }                                                                                                              // 11561
    };                                                                                                                 // 11562
                                                                                                                       // 11563
    this.onSelectionChange = function(e) {                                                                             // 11564
        var session = this.session;                                                                                    // 11565
                                                                                                                       // 11566
        if (session.$selectionMarker) {                                                                                // 11567
            session.removeMarker(session.$selectionMarker);                                                            // 11568
        }                                                                                                              // 11569
        session.$selectionMarker = null;                                                                               // 11570
                                                                                                                       // 11571
        if (!this.selection.isEmpty()) {                                                                               // 11572
            var range = this.selection.getRange();                                                                     // 11573
            var style = this.getSelectionStyle();                                                                      // 11574
            session.$selectionMarker = session.addMarker(range, "ace_selection", style);                               // 11575
        } else {                                                                                                       // 11576
            this.$updateHighlightActiveLine();                                                                         // 11577
        }                                                                                                              // 11578
                                                                                                                       // 11579
        var re = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();                                   // 11580
        this.session.highlight(re);                                                                                    // 11581
                                                                                                                       // 11582
        this._signal("changeSelection");                                                                               // 11583
    };                                                                                                                 // 11584
                                                                                                                       // 11585
    this.$getSelectionHighLightRegexp = function() {                                                                   // 11586
        var session = this.session;                                                                                    // 11587
                                                                                                                       // 11588
        var selection = this.getSelectionRange();                                                                      // 11589
        if (selection.isEmpty() || selection.isMultiLine())                                                            // 11590
            return;                                                                                                    // 11591
                                                                                                                       // 11592
        var startOuter = selection.start.column - 1;                                                                   // 11593
        var endOuter = selection.end.column + 1;                                                                       // 11594
        var line = session.getLine(selection.start.row);                                                               // 11595
        var lineCols = line.length;                                                                                    // 11596
        var needle = line.substring(Math.max(startOuter, 0),                                                           // 11597
                                    Math.min(endOuter, lineCols));                                                     // 11598
        if ((startOuter >= 0 && /^[\w\d]/.test(needle)) ||                                                             // 11599
            (endOuter <= lineCols && /[\w\d]$/.test(needle)))                                                          // 11600
            return;                                                                                                    // 11601
                                                                                                                       // 11602
        needle = line.substring(selection.start.column, selection.end.column);                                         // 11603
        if (!/^[\w\d]+$/.test(needle))                                                                                 // 11604
            return;                                                                                                    // 11605
                                                                                                                       // 11606
        var re = this.$search.$assembleRegExp({                                                                        // 11607
            wholeWord: true,                                                                                           // 11608
            caseSensitive: true,                                                                                       // 11609
            needle: needle                                                                                             // 11610
        });                                                                                                            // 11611
                                                                                                                       // 11612
        return re;                                                                                                     // 11613
    };                                                                                                                 // 11614
                                                                                                                       // 11615
                                                                                                                       // 11616
    this.onChangeFrontMarker = function() {                                                                            // 11617
        this.renderer.updateFrontMarkers();                                                                            // 11618
    };                                                                                                                 // 11619
                                                                                                                       // 11620
    this.onChangeBackMarker = function() {                                                                             // 11621
        this.renderer.updateBackMarkers();                                                                             // 11622
    };                                                                                                                 // 11623
                                                                                                                       // 11624
                                                                                                                       // 11625
    this.onChangeBreakpoint = function() {                                                                             // 11626
        this.renderer.updateBreakpoints();                                                                             // 11627
    };                                                                                                                 // 11628
                                                                                                                       // 11629
    this.onChangeAnnotation = function() {                                                                             // 11630
        this.renderer.setAnnotations(this.session.getAnnotations());                                                   // 11631
    };                                                                                                                 // 11632
                                                                                                                       // 11633
                                                                                                                       // 11634
    this.onChangeMode = function(e) {                                                                                  // 11635
        this.renderer.updateText();                                                                                    // 11636
        this._emit("changeMode", e);                                                                                   // 11637
    };                                                                                                                 // 11638
                                                                                                                       // 11639
                                                                                                                       // 11640
    this.onChangeWrapLimit = function() {                                                                              // 11641
        this.renderer.updateFull();                                                                                    // 11642
    };                                                                                                                 // 11643
                                                                                                                       // 11644
    this.onChangeWrapMode = function() {                                                                               // 11645
        this.renderer.onResize(true);                                                                                  // 11646
    };                                                                                                                 // 11647
                                                                                                                       // 11648
                                                                                                                       // 11649
    this.onChangeFold = function() {                                                                                   // 11650
        this.$updateHighlightActiveLine();                                                                             // 11651
        this.renderer.updateFull();                                                                                    // 11652
    };                                                                                                                 // 11653
    this.getSelectedText = function() {                                                                                // 11654
        return this.session.getTextRange(this.getSelectionRange());                                                    // 11655
    };                                                                                                                 // 11656
    this.getCopyText = function() {                                                                                    // 11657
        var text = this.getSelectedText();                                                                             // 11658
        this._signal("copy", text);                                                                                    // 11659
        return text;                                                                                                   // 11660
    };                                                                                                                 // 11661
    this.onCopy = function() {                                                                                         // 11662
        this.commands.exec("copy", this);                                                                              // 11663
    };                                                                                                                 // 11664
    this.onCut = function() {                                                                                          // 11665
        this.commands.exec("cut", this);                                                                               // 11666
    };                                                                                                                 // 11667
    this.onPaste = function(text) {                                                                                    // 11668
        if (this.$readOnly)                                                                                            // 11669
            return;                                                                                                    // 11670
        var e = {text: text};                                                                                          // 11671
        this._signal("paste", e);                                                                                      // 11672
        this.insert(e.text, true);                                                                                     // 11673
    };                                                                                                                 // 11674
                                                                                                                       // 11675
    this.execCommand = function(command, args) {                                                                       // 11676
        return this.commands.exec(command, this, args);                                                                // 11677
    };                                                                                                                 // 11678
    this.insert = function(text, pasted) {                                                                             // 11679
        var session = this.session;                                                                                    // 11680
        var mode = session.getMode();                                                                                  // 11681
        var cursor = this.getCursorPosition();                                                                         // 11682
                                                                                                                       // 11683
        if (this.getBehavioursEnabled() && !pasted) {                                                                  // 11684
            var transform = mode.transformAction(session.getState(cursor.row), 'insertion', this, session, text);      // 11685
            if (transform) {                                                                                           // 11686
                if (text !== transform.text) {                                                                         // 11687
                    this.session.mergeUndoDeltas = false;                                                              // 11688
                    this.$mergeNextCommand = false;                                                                    // 11689
                }                                                                                                      // 11690
                text = transform.text;                                                                                 // 11691
                                                                                                                       // 11692
            }                                                                                                          // 11693
        }                                                                                                              // 11694
                                                                                                                       // 11695
        if (text == "\t")                                                                                              // 11696
            text = this.session.getTabString();                                                                        // 11697
        if (!this.selection.isEmpty()) {                                                                               // 11698
            var range = this.getSelectionRange();                                                                      // 11699
            cursor = this.session.remove(range);                                                                       // 11700
            this.clearSelection();                                                                                     // 11701
        }                                                                                                              // 11702
        else if (this.session.getOverwrite()) {                                                                        // 11703
            var range = new Range.fromPoints(cursor, cursor);                                                          // 11704
            range.end.column += text.length;                                                                           // 11705
            this.session.remove(range);                                                                                // 11706
        }                                                                                                              // 11707
                                                                                                                       // 11708
        if (text == "\n" || text == "\r\n") {                                                                          // 11709
            var line = session.getLine(cursor.row);                                                                    // 11710
            if (cursor.column > line.search(/\S|$/)) {                                                                 // 11711
                var d = line.substr(cursor.column).search(/\S|$/);                                                     // 11712
                session.doc.removeInLine(cursor.row, cursor.column, cursor.column + d);                                // 11713
            }                                                                                                          // 11714
        }                                                                                                              // 11715
        this.clearSelection();                                                                                         // 11716
                                                                                                                       // 11717
        var start = cursor.column;                                                                                     // 11718
        var lineState = session.getState(cursor.row);                                                                  // 11719
        var line = session.getLine(cursor.row);                                                                        // 11720
        var shouldOutdent = mode.checkOutdent(lineState, line, text);                                                  // 11721
        var end = session.insert(cursor, text);                                                                        // 11722
                                                                                                                       // 11723
        if (transform && transform.selection) {                                                                        // 11724
            if (transform.selection.length == 2) { // Transform relative to the current column                         // 11725
                this.selection.setSelectionRange(                                                                      // 11726
                    new Range(cursor.row, start + transform.selection[0],                                              // 11727
                              cursor.row, start + transform.selection[1]));                                            // 11728
            } else { // Transform relative to the current row.                                                         // 11729
                this.selection.setSelectionRange(                                                                      // 11730
                    new Range(cursor.row + transform.selection[0],                                                     // 11731
                              transform.selection[1],                                                                  // 11732
                              cursor.row + transform.selection[2],                                                     // 11733
                              transform.selection[3]));                                                                // 11734
            }                                                                                                          // 11735
        }                                                                                                              // 11736
                                                                                                                       // 11737
        if (session.getDocument().isNewLine(text)) {                                                                   // 11738
            var lineIndent = mode.getNextLineIndent(lineState, line.slice(0, cursor.column), session.getTabString());  // 11739
                                                                                                                       // 11740
            session.insert({row: cursor.row+1, column: 0}, lineIndent);                                                // 11741
        }                                                                                                              // 11742
        if (shouldOutdent)                                                                                             // 11743
            mode.autoOutdent(lineState, session, cursor.row);                                                          // 11744
    };                                                                                                                 // 11745
                                                                                                                       // 11746
    this.onTextInput = function(text) {                                                                                // 11747
        this.keyBinding.onTextInput(text);                                                                             // 11748
    };                                                                                                                 // 11749
                                                                                                                       // 11750
    this.onCommandKey = function(e, hashId, keyCode) {                                                                 // 11751
        this.keyBinding.onCommandKey(e, hashId, keyCode);                                                              // 11752
    };                                                                                                                 // 11753
    this.setOverwrite = function(overwrite) {                                                                          // 11754
        this.session.setOverwrite(overwrite);                                                                          // 11755
    };                                                                                                                 // 11756
    this.getOverwrite = function() {                                                                                   // 11757
        return this.session.getOverwrite();                                                                            // 11758
    };                                                                                                                 // 11759
    this.toggleOverwrite = function() {                                                                                // 11760
        this.session.toggleOverwrite();                                                                                // 11761
    };                                                                                                                 // 11762
    this.setScrollSpeed = function(speed) {                                                                            // 11763
        this.setOption("scrollSpeed", speed);                                                                          // 11764
    };                                                                                                                 // 11765
    this.getScrollSpeed = function() {                                                                                 // 11766
        return this.getOption("scrollSpeed");                                                                          // 11767
    };                                                                                                                 // 11768
    this.setDragDelay = function(dragDelay) {                                                                          // 11769
        this.setOption("dragDelay", dragDelay);                                                                        // 11770
    };                                                                                                                 // 11771
    this.getDragDelay = function() {                                                                                   // 11772
        return this.getOption("dragDelay");                                                                            // 11773
    };                                                                                                                 // 11774
    this.setSelectionStyle = function(val) {                                                                           // 11775
        this.setOption("selectionStyle", val);                                                                         // 11776
    };                                                                                                                 // 11777
    this.getSelectionStyle = function() {                                                                              // 11778
        return this.getOption("selectionStyle");                                                                       // 11779
    };                                                                                                                 // 11780
    this.setHighlightActiveLine = function(shouldHighlight) {                                                          // 11781
        this.setOption("highlightActiveLine", shouldHighlight);                                                        // 11782
    };                                                                                                                 // 11783
    this.getHighlightActiveLine = function() {                                                                         // 11784
        return this.getOption("highlightActiveLine");                                                                  // 11785
    };                                                                                                                 // 11786
    this.setHighlightGutterLine = function(shouldHighlight) {                                                          // 11787
        this.setOption("highlightGutterLine", shouldHighlight);                                                        // 11788
    };                                                                                                                 // 11789
                                                                                                                       // 11790
    this.getHighlightGutterLine = function() {                                                                         // 11791
        return this.getOption("highlightGutterLine");                                                                  // 11792
    };                                                                                                                 // 11793
    this.setHighlightSelectedWord = function(shouldHighlight) {                                                        // 11794
        this.setOption("highlightSelectedWord", shouldHighlight);                                                      // 11795
    };                                                                                                                 // 11796
    this.getHighlightSelectedWord = function() {                                                                       // 11797
        return this.$highlightSelectedWord;                                                                            // 11798
    };                                                                                                                 // 11799
                                                                                                                       // 11800
    this.setAnimatedScroll = function(shouldAnimate){                                                                  // 11801
        this.renderer.setAnimatedScroll(shouldAnimate);                                                                // 11802
    };                                                                                                                 // 11803
                                                                                                                       // 11804
    this.getAnimatedScroll = function(){                                                                               // 11805
        return this.renderer.getAnimatedScroll();                                                                      // 11806
    };                                                                                                                 // 11807
    this.setShowInvisibles = function(showInvisibles) {                                                                // 11808
        this.renderer.setShowInvisibles(showInvisibles);                                                               // 11809
    };                                                                                                                 // 11810
    this.getShowInvisibles = function() {                                                                              // 11811
        return this.renderer.getShowInvisibles();                                                                      // 11812
    };                                                                                                                 // 11813
                                                                                                                       // 11814
    this.setDisplayIndentGuides = function(display) {                                                                  // 11815
        this.renderer.setDisplayIndentGuides(display);                                                                 // 11816
    };                                                                                                                 // 11817
                                                                                                                       // 11818
    this.getDisplayIndentGuides = function() {                                                                         // 11819
        return this.renderer.getDisplayIndentGuides();                                                                 // 11820
    };                                                                                                                 // 11821
    this.setShowPrintMargin = function(showPrintMargin) {                                                              // 11822
        this.renderer.setShowPrintMargin(showPrintMargin);                                                             // 11823
    };                                                                                                                 // 11824
    this.getShowPrintMargin = function() {                                                                             // 11825
        return this.renderer.getShowPrintMargin();                                                                     // 11826
    };                                                                                                                 // 11827
    this.setPrintMarginColumn = function(showPrintMargin) {                                                            // 11828
        this.renderer.setPrintMarginColumn(showPrintMargin);                                                           // 11829
    };                                                                                                                 // 11830
    this.getPrintMarginColumn = function() {                                                                           // 11831
        return this.renderer.getPrintMarginColumn();                                                                   // 11832
    };                                                                                                                 // 11833
    this.setReadOnly = function(readOnly) {                                                                            // 11834
        this.setOption("readOnly", readOnly);                                                                          // 11835
    };                                                                                                                 // 11836
    this.getReadOnly = function() {                                                                                    // 11837
        return this.getOption("readOnly");                                                                             // 11838
    };                                                                                                                 // 11839
    this.setBehavioursEnabled = function (enabled) {                                                                   // 11840
        this.setOption("behavioursEnabled", enabled);                                                                  // 11841
    };                                                                                                                 // 11842
    this.getBehavioursEnabled = function () {                                                                          // 11843
        return this.getOption("behavioursEnabled");                                                                    // 11844
    };                                                                                                                 // 11845
    this.setWrapBehavioursEnabled = function (enabled) {                                                               // 11846
        this.setOption("wrapBehavioursEnabled", enabled);                                                              // 11847
    };                                                                                                                 // 11848
    this.getWrapBehavioursEnabled = function () {                                                                      // 11849
        return this.getOption("wrapBehavioursEnabled");                                                                // 11850
    };                                                                                                                 // 11851
    this.setShowFoldWidgets = function(show) {                                                                         // 11852
        this.setOption("showFoldWidgets", show);                                                                       // 11853
                                                                                                                       // 11854
    };                                                                                                                 // 11855
    this.getShowFoldWidgets = function() {                                                                             // 11856
        return this.getOption("showFoldWidgets");                                                                      // 11857
    };                                                                                                                 // 11858
                                                                                                                       // 11859
    this.setFadeFoldWidgets = function(fade) {                                                                         // 11860
        this.setOption("fadeFoldWidgets", fade);                                                                       // 11861
    };                                                                                                                 // 11862
                                                                                                                       // 11863
    this.getFadeFoldWidgets = function() {                                                                             // 11864
        return this.getOption("fadeFoldWidgets");                                                                      // 11865
    };                                                                                                                 // 11866
    this.remove = function(dir) {                                                                                      // 11867
        if (this.selection.isEmpty()){                                                                                 // 11868
            if (dir == "left")                                                                                         // 11869
                this.selection.selectLeft();                                                                           // 11870
            else                                                                                                       // 11871
                this.selection.selectRight();                                                                          // 11872
        }                                                                                                              // 11873
                                                                                                                       // 11874
        var range = this.getSelectionRange();                                                                          // 11875
        if (this.getBehavioursEnabled()) {                                                                             // 11876
            var session = this.session;                                                                                // 11877
            var state = session.getState(range.start.row);                                                             // 11878
            var new_range = session.getMode().transformAction(state, 'deletion', this, session, range);                // 11879
                                                                                                                       // 11880
            if (range.end.column === 0) {                                                                              // 11881
                var text = session.getTextRange(range);                                                                // 11882
                if (text[text.length - 1] == "\n") {                                                                   // 11883
                    var line = session.getLine(range.end.row);                                                         // 11884
                    if (/^\s+$/.test(line)) {                                                                          // 11885
                        range.end.column = line.length;                                                                // 11886
                    }                                                                                                  // 11887
                }                                                                                                      // 11888
            }                                                                                                          // 11889
            if (new_range)                                                                                             // 11890
                range = new_range;                                                                                     // 11891
        }                                                                                                              // 11892
                                                                                                                       // 11893
        this.session.remove(range);                                                                                    // 11894
        this.clearSelection();                                                                                         // 11895
    };                                                                                                                 // 11896
    this.removeWordRight = function() {                                                                                // 11897
        if (this.selection.isEmpty())                                                                                  // 11898
            this.selection.selectWordRight();                                                                          // 11899
                                                                                                                       // 11900
        this.session.remove(this.getSelectionRange());                                                                 // 11901
        this.clearSelection();                                                                                         // 11902
    };                                                                                                                 // 11903
    this.removeWordLeft = function() {                                                                                 // 11904
        if (this.selection.isEmpty())                                                                                  // 11905
            this.selection.selectWordLeft();                                                                           // 11906
                                                                                                                       // 11907
        this.session.remove(this.getSelectionRange());                                                                 // 11908
        this.clearSelection();                                                                                         // 11909
    };                                                                                                                 // 11910
    this.removeToLineStart = function() {                                                                              // 11911
        if (this.selection.isEmpty())                                                                                  // 11912
            this.selection.selectLineStart();                                                                          // 11913
                                                                                                                       // 11914
        this.session.remove(this.getSelectionRange());                                                                 // 11915
        this.clearSelection();                                                                                         // 11916
    };                                                                                                                 // 11917
    this.removeToLineEnd = function() {                                                                                // 11918
        if (this.selection.isEmpty())                                                                                  // 11919
            this.selection.selectLineEnd();                                                                            // 11920
                                                                                                                       // 11921
        var range = this.getSelectionRange();                                                                          // 11922
        if (range.start.column == range.end.column && range.start.row == range.end.row) {                              // 11923
            range.end.column = 0;                                                                                      // 11924
            range.end.row++;                                                                                           // 11925
        }                                                                                                              // 11926
                                                                                                                       // 11927
        this.session.remove(range);                                                                                    // 11928
        this.clearSelection();                                                                                         // 11929
    };                                                                                                                 // 11930
    this.splitLine = function() {                                                                                      // 11931
        if (!this.selection.isEmpty()) {                                                                               // 11932
            this.session.remove(this.getSelectionRange());                                                             // 11933
            this.clearSelection();                                                                                     // 11934
        }                                                                                                              // 11935
                                                                                                                       // 11936
        var cursor = this.getCursorPosition();                                                                         // 11937
        this.insert("\n");                                                                                             // 11938
        this.moveCursorToPosition(cursor);                                                                             // 11939
    };                                                                                                                 // 11940
    this.transposeLetters = function() {                                                                               // 11941
        if (!this.selection.isEmpty()) {                                                                               // 11942
            return;                                                                                                    // 11943
        }                                                                                                              // 11944
                                                                                                                       // 11945
        var cursor = this.getCursorPosition();                                                                         // 11946
        var column = cursor.column;                                                                                    // 11947
        if (column === 0)                                                                                              // 11948
            return;                                                                                                    // 11949
                                                                                                                       // 11950
        var line = this.session.getLine(cursor.row);                                                                   // 11951
        var swap, range;                                                                                               // 11952
        if (column < line.length) {                                                                                    // 11953
            swap = line.charAt(column) + line.charAt(column-1);                                                        // 11954
            range = new Range(cursor.row, column-1, cursor.row, column+1);                                             // 11955
        }                                                                                                              // 11956
        else {                                                                                                         // 11957
            swap = line.charAt(column-1) + line.charAt(column-2);                                                      // 11958
            range = new Range(cursor.row, column-2, cursor.row, column);                                               // 11959
        }                                                                                                              // 11960
        this.session.replace(range, swap);                                                                             // 11961
    };                                                                                                                 // 11962
    this.toLowerCase = function() {                                                                                    // 11963
        var originalRange = this.getSelectionRange();                                                                  // 11964
        if (this.selection.isEmpty()) {                                                                                // 11965
            this.selection.selectWord();                                                                               // 11966
        }                                                                                                              // 11967
                                                                                                                       // 11968
        var range = this.getSelectionRange();                                                                          // 11969
        var text = this.session.getTextRange(range);                                                                   // 11970
        this.session.replace(range, text.toLowerCase());                                                               // 11971
        this.selection.setSelectionRange(originalRange);                                                               // 11972
    };                                                                                                                 // 11973
    this.toUpperCase = function() {                                                                                    // 11974
        var originalRange = this.getSelectionRange();                                                                  // 11975
        if (this.selection.isEmpty()) {                                                                                // 11976
            this.selection.selectWord();                                                                               // 11977
        }                                                                                                              // 11978
                                                                                                                       // 11979
        var range = this.getSelectionRange();                                                                          // 11980
        var text = this.session.getTextRange(range);                                                                   // 11981
        this.session.replace(range, text.toUpperCase());                                                               // 11982
        this.selection.setSelectionRange(originalRange);                                                               // 11983
    };                                                                                                                 // 11984
    this.indent = function() {                                                                                         // 11985
        var session = this.session;                                                                                    // 11986
        var range = this.getSelectionRange();                                                                          // 11987
                                                                                                                       // 11988
        if (range.start.row < range.end.row) {                                                                         // 11989
            var rows = this.$getSelectedRows();                                                                        // 11990
            session.indentRows(rows.first, rows.last, "\t");                                                           // 11991
            return;                                                                                                    // 11992
        } else if (range.start.column < range.end.column) {                                                            // 11993
            var text = session.getTextRange(range);                                                                    // 11994
            if (!/^\s+$/.test(text)) {                                                                                 // 11995
                var rows = this.$getSelectedRows();                                                                    // 11996
                session.indentRows(rows.first, rows.last, "\t");                                                       // 11997
                return;                                                                                                // 11998
            }                                                                                                          // 11999
        }                                                                                                              // 12000
                                                                                                                       // 12001
        var line = session.getLine(range.start.row);                                                                   // 12002
        var position = range.start;                                                                                    // 12003
        var size = session.getTabSize();                                                                               // 12004
        var column = session.documentToScreenColumn(position.row, position.column);                                    // 12005
                                                                                                                       // 12006
        if (this.session.getUseSoftTabs()) {                                                                           // 12007
            var count = (size - column % size);                                                                        // 12008
            var indentString = lang.stringRepeat(" ", count);                                                          // 12009
        } else {                                                                                                       // 12010
            var count = column % size;                                                                                 // 12011
            while (line[range.start.column] == " " && count) {                                                         // 12012
                range.start.column--;                                                                                  // 12013
                count--;                                                                                               // 12014
            }                                                                                                          // 12015
            this.selection.setSelectionRange(range);                                                                   // 12016
            indentString = "\t";                                                                                       // 12017
        }                                                                                                              // 12018
        return this.insert(indentString);                                                                              // 12019
    };                                                                                                                 // 12020
    this.blockIndent = function() {                                                                                    // 12021
        var rows = this.$getSelectedRows();                                                                            // 12022
        this.session.indentRows(rows.first, rows.last, "\t");                                                          // 12023
    };                                                                                                                 // 12024
    this.blockOutdent = function() {                                                                                   // 12025
        var selection = this.session.getSelection();                                                                   // 12026
        this.session.outdentRows(selection.getRange());                                                                // 12027
    };                                                                                                                 // 12028
    this.sortLines = function() {                                                                                      // 12029
        var rows = this.$getSelectedRows();                                                                            // 12030
        var session = this.session;                                                                                    // 12031
                                                                                                                       // 12032
        var lines = [];                                                                                                // 12033
        for (i = rows.first; i <= rows.last; i++)                                                                      // 12034
            lines.push(session.getLine(i));                                                                            // 12035
                                                                                                                       // 12036
        lines.sort(function(a, b) {                                                                                    // 12037
            if (a.toLowerCase() < b.toLowerCase()) return -1;                                                          // 12038
            if (a.toLowerCase() > b.toLowerCase()) return 1;                                                           // 12039
            return 0;                                                                                                  // 12040
        });                                                                                                            // 12041
                                                                                                                       // 12042
        var deleteRange = new Range(0, 0, 0, 0);                                                                       // 12043
        for (var i = rows.first; i <= rows.last; i++) {                                                                // 12044
            var line = session.getLine(i);                                                                             // 12045
            deleteRange.start.row = i;                                                                                 // 12046
            deleteRange.end.row = i;                                                                                   // 12047
            deleteRange.end.column = line.length;                                                                      // 12048
            session.replace(deleteRange, lines[i-rows.first]);                                                         // 12049
        }                                                                                                              // 12050
    };                                                                                                                 // 12051
    this.toggleCommentLines = function() {                                                                             // 12052
        var state = this.session.getState(this.getCursorPosition().row);                                               // 12053
        var rows = this.$getSelectedRows();                                                                            // 12054
        this.session.getMode().toggleCommentLines(state, this.session, rows.first, rows.last);                         // 12055
    };                                                                                                                 // 12056
                                                                                                                       // 12057
    this.toggleBlockComment = function() {                                                                             // 12058
        var cursor = this.getCursorPosition();                                                                         // 12059
        var state = this.session.getState(cursor.row);                                                                 // 12060
        var range = this.getSelectionRange();                                                                          // 12061
        this.session.getMode().toggleBlockComment(state, this.session, range, cursor);                                 // 12062
    };                                                                                                                 // 12063
    this.getNumberAt = function(row, column) {                                                                         // 12064
        var _numberRx = /[\-]?[0-9]+(?:\.[0-9]+)?/g;                                                                   // 12065
        _numberRx.lastIndex = 0;                                                                                       // 12066
                                                                                                                       // 12067
        var s = this.session.getLine(row);                                                                             // 12068
        while (_numberRx.lastIndex < column) {                                                                         // 12069
            var m = _numberRx.exec(s);                                                                                 // 12070
            if(m.index <= column && m.index+m[0].length >= column){                                                    // 12071
                var number = {                                                                                         // 12072
                    value: m[0],                                                                                       // 12073
                    start: m.index,                                                                                    // 12074
                    end: m.index+m[0].length                                                                           // 12075
                };                                                                                                     // 12076
                return number;                                                                                         // 12077
            }                                                                                                          // 12078
        }                                                                                                              // 12079
        return null;                                                                                                   // 12080
    };                                                                                                                 // 12081
    this.modifyNumber = function(amount) {                                                                             // 12082
        var row = this.selection.getCursor().row;                                                                      // 12083
        var column = this.selection.getCursor().column;                                                                // 12084
        var charRange = new Range(row, column-1, row, column);                                                         // 12085
                                                                                                                       // 12086
        var c = this.session.getTextRange(charRange);                                                                  // 12087
        if (!isNaN(parseFloat(c)) && isFinite(c)) {                                                                    // 12088
            var nr = this.getNumberAt(row, column);                                                                    // 12089
            if (nr) {                                                                                                  // 12090
                var fp = nr.value.indexOf(".") >= 0 ? nr.start + nr.value.indexOf(".") + 1 : nr.end;                   // 12091
                var decimals = nr.start + nr.value.length - fp;                                                        // 12092
                                                                                                                       // 12093
                var t = parseFloat(nr.value);                                                                          // 12094
                t *= Math.pow(10, decimals);                                                                           // 12095
                                                                                                                       // 12096
                                                                                                                       // 12097
                if(fp !== nr.end && column < fp){                                                                      // 12098
                    amount *= Math.pow(10, nr.end - column - 1);                                                       // 12099
                } else {                                                                                               // 12100
                    amount *= Math.pow(10, nr.end - column);                                                           // 12101
                }                                                                                                      // 12102
                                                                                                                       // 12103
                t += amount;                                                                                           // 12104
                t /= Math.pow(10, decimals);                                                                           // 12105
                var nnr = t.toFixed(decimals);                                                                         // 12106
                var replaceRange = new Range(row, nr.start, row, nr.end);                                              // 12107
                this.session.replace(replaceRange, nnr);                                                               // 12108
                this.moveCursorTo(row, Math.max(nr.start +1, column + nnr.length - nr.value.length));                  // 12109
                                                                                                                       // 12110
            }                                                                                                          // 12111
        }                                                                                                              // 12112
    };                                                                                                                 // 12113
    this.removeLines = function() {                                                                                    // 12114
        var rows = this.$getSelectedRows();                                                                            // 12115
        var range;                                                                                                     // 12116
        if (rows.first === 0 || rows.last+1 < this.session.getLength())                                                // 12117
            range = new Range(rows.first, 0, rows.last+1, 0);                                                          // 12118
        else                                                                                                           // 12119
            range = new Range(                                                                                         // 12120
                rows.first-1, this.session.getLine(rows.first-1).length,                                               // 12121
                rows.last, this.session.getLine(rows.last).length                                                      // 12122
            );                                                                                                         // 12123
        this.session.remove(range);                                                                                    // 12124
        this.clearSelection();                                                                                         // 12125
    };                                                                                                                 // 12126
                                                                                                                       // 12127
    this.duplicateSelection = function() {                                                                             // 12128
        var sel = this.selection;                                                                                      // 12129
        var doc = this.session;                                                                                        // 12130
        var range = sel.getRange();                                                                                    // 12131
        var reverse = sel.isBackwards();                                                                               // 12132
        if (range.isEmpty()) {                                                                                         // 12133
            var row = range.start.row;                                                                                 // 12134
            doc.duplicateLines(row, row);                                                                              // 12135
        } else {                                                                                                       // 12136
            var point = reverse ? range.start : range.end;                                                             // 12137
            var endPoint = doc.insert(point, doc.getTextRange(range), false);                                          // 12138
            range.start = point;                                                                                       // 12139
            range.end = endPoint;                                                                                      // 12140
                                                                                                                       // 12141
            sel.setSelectionRange(range, reverse);                                                                     // 12142
        }                                                                                                              // 12143
    };                                                                                                                 // 12144
    this.moveLinesDown = function() {                                                                                  // 12145
        this.$moveLines(function(firstRow, lastRow) {                                                                  // 12146
            return this.session.moveLinesDown(firstRow, lastRow);                                                      // 12147
        });                                                                                                            // 12148
    };                                                                                                                 // 12149
    this.moveLinesUp = function() {                                                                                    // 12150
        this.$moveLines(function(firstRow, lastRow) {                                                                  // 12151
            return this.session.moveLinesUp(firstRow, lastRow);                                                        // 12152
        });                                                                                                            // 12153
    };                                                                                                                 // 12154
    this.moveText = function(range, toPosition, copy) {                                                                // 12155
        return this.session.moveText(range, toPosition, copy);                                                         // 12156
    };                                                                                                                 // 12157
    this.copyLinesUp = function() {                                                                                    // 12158
        this.$moveLines(function(firstRow, lastRow) {                                                                  // 12159
            this.session.duplicateLines(firstRow, lastRow);                                                            // 12160
            return 0;                                                                                                  // 12161
        });                                                                                                            // 12162
    };                                                                                                                 // 12163
    this.copyLinesDown = function() {                                                                                  // 12164
        this.$moveLines(function(firstRow, lastRow) {                                                                  // 12165
            return this.session.duplicateLines(firstRow, lastRow);                                                     // 12166
        });                                                                                                            // 12167
    };                                                                                                                 // 12168
    this.$moveLines = function(mover) {                                                                                // 12169
        var selection = this.selection;                                                                                // 12170
        if (!selection.inMultiSelectMode || this.inVirtualSelectionMode) {                                             // 12171
            var range = selection.toOrientedRange();                                                                   // 12172
            var rows = this.$getSelectedRows(range);                                                                   // 12173
            var linesMoved = mover.call(this, rows.first, rows.last);                                                  // 12174
            range.moveBy(linesMoved, 0);                                                                               // 12175
            selection.fromOrientedRange(range);                                                                        // 12176
        } else {                                                                                                       // 12177
            var ranges = selection.rangeList.ranges;                                                                   // 12178
            selection.rangeList.detach(this.session);                                                                  // 12179
                                                                                                                       // 12180
            for (var i = ranges.length; i--; ) {                                                                       // 12181
                var rangeIndex = i;                                                                                    // 12182
                var rows = ranges[i].collapseRows();                                                                   // 12183
                var last = rows.end.row;                                                                               // 12184
                var first = rows.start.row;                                                                            // 12185
                while (i--) {                                                                                          // 12186
                    rows = ranges[i].collapseRows();                                                                   // 12187
                    if (first - rows.end.row <= 1)                                                                     // 12188
                        first = rows.end.row;                                                                          // 12189
                    else                                                                                               // 12190
                        break;                                                                                         // 12191
                }                                                                                                      // 12192
                i++;                                                                                                   // 12193
                                                                                                                       // 12194
                var linesMoved = mover.call(this, first, last);                                                        // 12195
                while (rangeIndex >= i) {                                                                              // 12196
                    ranges[rangeIndex].moveBy(linesMoved, 0);                                                          // 12197
                    rangeIndex--;                                                                                      // 12198
                }                                                                                                      // 12199
            }                                                                                                          // 12200
            selection.fromOrientedRange(selection.ranges[0]);                                                          // 12201
            selection.rangeList.attach(this.session);                                                                  // 12202
        }                                                                                                              // 12203
    };                                                                                                                 // 12204
    this.$getSelectedRows = function() {                                                                               // 12205
        var range = this.getSelectionRange().collapseRows();                                                           // 12206
                                                                                                                       // 12207
        return {                                                                                                       // 12208
            first: this.session.getRowFoldStart(range.start.row),                                                      // 12209
            last: this.session.getRowFoldEnd(range.end.row)                                                            // 12210
        };                                                                                                             // 12211
    };                                                                                                                 // 12212
                                                                                                                       // 12213
    this.onCompositionStart = function(text) {                                                                         // 12214
        this.renderer.showComposition(this.getCursorPosition());                                                       // 12215
    };                                                                                                                 // 12216
                                                                                                                       // 12217
    this.onCompositionUpdate = function(text) {                                                                        // 12218
        this.renderer.setCompositionText(text);                                                                        // 12219
    };                                                                                                                 // 12220
                                                                                                                       // 12221
    this.onCompositionEnd = function() {                                                                               // 12222
        this.renderer.hideComposition();                                                                               // 12223
    };                                                                                                                 // 12224
    this.getFirstVisibleRow = function() {                                                                             // 12225
        return this.renderer.getFirstVisibleRow();                                                                     // 12226
    };                                                                                                                 // 12227
    this.getLastVisibleRow = function() {                                                                              // 12228
        return this.renderer.getLastVisibleRow();                                                                      // 12229
    };                                                                                                                 // 12230
    this.isRowVisible = function(row) {                                                                                // 12231
        return (row >= this.getFirstVisibleRow() && row <= this.getLastVisibleRow());                                  // 12232
    };                                                                                                                 // 12233
    this.isRowFullyVisible = function(row) {                                                                           // 12234
        return (row >= this.renderer.getFirstFullyVisibleRow() && row <= this.renderer.getLastFullyVisibleRow());      // 12235
    };                                                                                                                 // 12236
    this.$getVisibleRowCount = function() {                                                                            // 12237
        return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;                               // 12238
    };                                                                                                                 // 12239
                                                                                                                       // 12240
    this.$moveByPage = function(dir, select) {                                                                         // 12241
        var renderer = this.renderer;                                                                                  // 12242
        var config = this.renderer.layerConfig;                                                                        // 12243
        var rows = dir * Math.floor(config.height / config.lineHeight);                                                // 12244
                                                                                                                       // 12245
        this.$blockScrolling++;                                                                                        // 12246
        if (select === true) {                                                                                         // 12247
            this.selection.$moveSelection(function(){                                                                  // 12248
                this.moveCursorBy(rows, 0);                                                                            // 12249
            });                                                                                                        // 12250
        } else if (select === false) {                                                                                 // 12251
            this.selection.moveCursorBy(rows, 0);                                                                      // 12252
            this.selection.clearSelection();                                                                           // 12253
        }                                                                                                              // 12254
        this.$blockScrolling--;                                                                                        // 12255
                                                                                                                       // 12256
        var scrollTop = renderer.scrollTop;                                                                            // 12257
                                                                                                                       // 12258
        renderer.scrollBy(0, rows * config.lineHeight);                                                                // 12259
        if (select != null)                                                                                            // 12260
            renderer.scrollCursorIntoView(null, 0.5);                                                                  // 12261
                                                                                                                       // 12262
        renderer.animateScrolling(scrollTop);                                                                          // 12263
    };                                                                                                                 // 12264
    this.selectPageDown = function() {                                                                                 // 12265
        this.$moveByPage(1, true);                                                                                     // 12266
    };                                                                                                                 // 12267
    this.selectPageUp = function() {                                                                                   // 12268
        this.$moveByPage(-1, true);                                                                                    // 12269
    };                                                                                                                 // 12270
    this.gotoPageDown = function() {                                                                                   // 12271
       this.$moveByPage(1, false);                                                                                     // 12272
    };                                                                                                                 // 12273
    this.gotoPageUp = function() {                                                                                     // 12274
        this.$moveByPage(-1, false);                                                                                   // 12275
    };                                                                                                                 // 12276
    this.scrollPageDown = function() {                                                                                 // 12277
        this.$moveByPage(1);                                                                                           // 12278
    };                                                                                                                 // 12279
    this.scrollPageUp = function() {                                                                                   // 12280
        this.$moveByPage(-1);                                                                                          // 12281
    };                                                                                                                 // 12282
    this.scrollToRow = function(row) {                                                                                 // 12283
        this.renderer.scrollToRow(row);                                                                                // 12284
    };                                                                                                                 // 12285
    this.scrollToLine = function(line, center, animate, callback) {                                                    // 12286
        this.renderer.scrollToLine(line, center, animate, callback);                                                   // 12287
    };                                                                                                                 // 12288
    this.centerSelection = function() {                                                                                // 12289
        var range = this.getSelectionRange();                                                                          // 12290
        var pos = {                                                                                                    // 12291
            row: Math.floor(range.start.row + (range.end.row - range.start.row) / 2),                                  // 12292
            column: Math.floor(range.start.column + (range.end.column - range.start.column) / 2)                       // 12293
        };                                                                                                             // 12294
        this.renderer.alignCursor(pos, 0.5);                                                                           // 12295
    };                                                                                                                 // 12296
    this.getCursorPosition = function() {                                                                              // 12297
        return this.selection.getCursor();                                                                             // 12298
    };                                                                                                                 // 12299
    this.getCursorPositionScreen = function() {                                                                        // 12300
        return this.session.documentToScreenPosition(this.getCursorPosition());                                        // 12301
    };                                                                                                                 // 12302
    this.getSelectionRange = function() {                                                                              // 12303
        return this.selection.getRange();                                                                              // 12304
    };                                                                                                                 // 12305
    this.selectAll = function() {                                                                                      // 12306
        this.$blockScrolling += 1;                                                                                     // 12307
        this.selection.selectAll();                                                                                    // 12308
        this.$blockScrolling -= 1;                                                                                     // 12309
    };                                                                                                                 // 12310
    this.clearSelection = function() {                                                                                 // 12311
        this.selection.clearSelection();                                                                               // 12312
    };                                                                                                                 // 12313
    this.moveCursorTo = function(row, column) {                                                                        // 12314
        this.selection.moveCursorTo(row, column);                                                                      // 12315
    };                                                                                                                 // 12316
    this.moveCursorToPosition = function(pos) {                                                                        // 12317
        this.selection.moveCursorToPosition(pos);                                                                      // 12318
    };                                                                                                                 // 12319
    this.jumpToMatching = function(select, expand) {                                                                   // 12320
        var cursor = this.getCursorPosition();                                                                         // 12321
        var iterator = new TokenIterator(this.session, cursor.row, cursor.column);                                     // 12322
        var prevToken = iterator.getCurrentToken();                                                                    // 12323
        var token = prevToken || iterator.stepForward();                                                               // 12324
                                                                                                                       // 12325
        if (!token) return;                                                                                            // 12326
        var matchType;                                                                                                 // 12327
        var found = false;                                                                                             // 12328
        var depth = {};                                                                                                // 12329
        var i = cursor.column - token.start;                                                                           // 12330
        var bracketType;                                                                                               // 12331
        var brackets = {                                                                                               // 12332
            ")": "(",                                                                                                  // 12333
            "(": "(",                                                                                                  // 12334
            "]": "[",                                                                                                  // 12335
            "[": "[",                                                                                                  // 12336
            "{": "{",                                                                                                  // 12337
            "}": "{"                                                                                                   // 12338
        };                                                                                                             // 12339
                                                                                                                       // 12340
        do {                                                                                                           // 12341
            if (token.value.match(/[{}()\[\]]/g)) {                                                                    // 12342
                for (; i < token.value.length && !found; i++) {                                                        // 12343
                    if (!brackets[token.value[i]]) {                                                                   // 12344
                        continue;                                                                                      // 12345
                    }                                                                                                  // 12346
                                                                                                                       // 12347
                    bracketType = brackets[token.value[i]] + '.' + token.type.replace("rparen", "lparen");             // 12348
                                                                                                                       // 12349
                    if (isNaN(depth[bracketType])) {                                                                   // 12350
                        depth[bracketType] = 0;                                                                        // 12351
                    }                                                                                                  // 12352
                                                                                                                       // 12353
                    switch (token.value[i]) {                                                                          // 12354
                        case '(':                                                                                      // 12355
                        case '[':                                                                                      // 12356
                        case '{':                                                                                      // 12357
                            depth[bracketType]++;                                                                      // 12358
                            break;                                                                                     // 12359
                        case ')':                                                                                      // 12360
                        case ']':                                                                                      // 12361
                        case '}':                                                                                      // 12362
                            depth[bracketType]--;                                                                      // 12363
                                                                                                                       // 12364
                            if (depth[bracketType] === -1) {                                                           // 12365
                                matchType = 'bracket';                                                                 // 12366
                                found = true;                                                                          // 12367
                            }                                                                                          // 12368
                        break;                                                                                         // 12369
                    }                                                                                                  // 12370
                }                                                                                                      // 12371
            }                                                                                                          // 12372
            else if (token && token.type.indexOf('tag-name') !== -1) {                                                 // 12373
                if (isNaN(depth[token.value])) {                                                                       // 12374
                    depth[token.value] = 0;                                                                            // 12375
                }                                                                                                      // 12376
                                                                                                                       // 12377
                if (prevToken.value === '<') {                                                                         // 12378
                    depth[token.value]++;                                                                              // 12379
                }                                                                                                      // 12380
                else if (prevToken.value === '</') {                                                                   // 12381
                    depth[token.value]--;                                                                              // 12382
                }                                                                                                      // 12383
                                                                                                                       // 12384
                if (depth[token.value] === -1) {                                                                       // 12385
                    matchType = 'tag';                                                                                 // 12386
                    found = true;                                                                                      // 12387
                }                                                                                                      // 12388
            }                                                                                                          // 12389
                                                                                                                       // 12390
            if (!found) {                                                                                              // 12391
                prevToken = token;                                                                                     // 12392
                token = iterator.stepForward();                                                                        // 12393
                i = 0;                                                                                                 // 12394
            }                                                                                                          // 12395
        } while (token && !found);                                                                                     // 12396
        if (!matchType)                                                                                                // 12397
            return;                                                                                                    // 12398
                                                                                                                       // 12399
        var range, pos;                                                                                                // 12400
        if (matchType === 'bracket') {                                                                                 // 12401
            range = this.session.getBracketRange(cursor);                                                              // 12402
            if (!range) {                                                                                              // 12403
                range = new Range(                                                                                     // 12404
                    iterator.getCurrentTokenRow(),                                                                     // 12405
                    iterator.getCurrentTokenColumn() + i - 1,                                                          // 12406
                    iterator.getCurrentTokenRow(),                                                                     // 12407
                    iterator.getCurrentTokenColumn() + i - 1                                                           // 12408
                );                                                                                                     // 12409
                pos = range.start;                                                                                     // 12410
                if (expand || pos.row === cursor.row && Math.abs(pos.column - cursor.column) < 2)                      // 12411
                    range = this.session.getBracketRange(pos);                                                         // 12412
            }                                                                                                          // 12413
        }                                                                                                              // 12414
        else if (matchType === 'tag') {                                                                                // 12415
            if (token && token.type.indexOf('tag-name') !== -1)                                                        // 12416
                var tag = token.value;                                                                                 // 12417
            else                                                                                                       // 12418
                return;                                                                                                // 12419
                                                                                                                       // 12420
            range = new Range(                                                                                         // 12421
                iterator.getCurrentTokenRow(),                                                                         // 12422
                iterator.getCurrentTokenColumn() - 2,                                                                  // 12423
                iterator.getCurrentTokenRow(),                                                                         // 12424
                iterator.getCurrentTokenColumn() - 2                                                                   // 12425
            );                                                                                                         // 12426
            if (range.compare(cursor.row, cursor.column) === 0) {                                                      // 12427
                found = false;                                                                                         // 12428
                do {                                                                                                   // 12429
                    token = prevToken;                                                                                 // 12430
                    prevToken = iterator.stepBackward();                                                               // 12431
                                                                                                                       // 12432
                    if (prevToken) {                                                                                   // 12433
                        if (prevToken.type.indexOf('tag-close') !== -1) {                                              // 12434
                            range.setEnd(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1);         // 12435
                        }                                                                                              // 12436
                                                                                                                       // 12437
                        if (token.value === tag && token.type.indexOf('tag-name') !== -1) {                            // 12438
                            if (prevToken.value === '<') {                                                             // 12439
                                depth[tag]++;                                                                          // 12440
                            }                                                                                          // 12441
                            else if (prevToken.value === '</') {                                                       // 12442
                                depth[tag]--;                                                                          // 12443
                            }                                                                                          // 12444
                                                                                                                       // 12445
                            if (depth[tag] === 0)                                                                      // 12446
                                found = true;                                                                          // 12447
                        }                                                                                              // 12448
                    }                                                                                                  // 12449
                } while (prevToken && !found);                                                                         // 12450
            }                                                                                                          // 12451
            if (token && token.type.indexOf('tag-name')) {                                                             // 12452
                pos = range.start;                                                                                     // 12453
                if (pos.row == cursor.row && Math.abs(pos.column - cursor.column) < 2)                                 // 12454
                    pos = range.end;                                                                                   // 12455
            }                                                                                                          // 12456
        }                                                                                                              // 12457
                                                                                                                       // 12458
        pos = range && range.cursor || pos;                                                                            // 12459
        if (pos) {                                                                                                     // 12460
            if (select) {                                                                                              // 12461
                if (range && expand) {                                                                                 // 12462
                    this.selection.setRange(range);                                                                    // 12463
                } else if (range && range.isEqual(this.getSelectionRange())) {                                         // 12464
                    this.clearSelection();                                                                             // 12465
                } else {                                                                                               // 12466
                    this.selection.selectTo(pos.row, pos.column);                                                      // 12467
                }                                                                                                      // 12468
            } else {                                                                                                   // 12469
                this.selection.moveTo(pos.row, pos.column);                                                            // 12470
            }                                                                                                          // 12471
        }                                                                                                              // 12472
    };                                                                                                                 // 12473
    this.gotoLine = function(lineNumber, column, animate) {                                                            // 12474
        this.selection.clearSelection();                                                                               // 12475
        this.session.unfold({row: lineNumber - 1, column: column || 0});                                               // 12476
                                                                                                                       // 12477
        this.$blockScrolling += 1;                                                                                     // 12478
        this.exitMultiSelectMode && this.exitMultiSelectMode();                                                        // 12479
        this.moveCursorTo(lineNumber - 1, column || 0);                                                                // 12480
        this.$blockScrolling -= 1;                                                                                     // 12481
                                                                                                                       // 12482
        if (!this.isRowFullyVisible(lineNumber - 1))                                                                   // 12483
            this.scrollToLine(lineNumber - 1, true, animate);                                                          // 12484
    };                                                                                                                 // 12485
    this.navigateTo = function(row, column) {                                                                          // 12486
        this.selection.moveTo(row, column);                                                                            // 12487
    };                                                                                                                 // 12488
    this.navigateUp = function(times) {                                                                                // 12489
        if (this.selection.isMultiLine() && !this.selection.isBackwards()) {                                           // 12490
            var selectionStart = this.selection.anchor.getPosition();                                                  // 12491
            return this.moveCursorToPosition(selectionStart);                                                          // 12492
        }                                                                                                              // 12493
        this.selection.clearSelection();                                                                               // 12494
        this.selection.moveCursorBy(-times || -1, 0);                                                                  // 12495
    };                                                                                                                 // 12496
    this.navigateDown = function(times) {                                                                              // 12497
        if (this.selection.isMultiLine() && this.selection.isBackwards()) {                                            // 12498
            var selectionEnd = this.selection.anchor.getPosition();                                                    // 12499
            return this.moveCursorToPosition(selectionEnd);                                                            // 12500
        }                                                                                                              // 12501
        this.selection.clearSelection();                                                                               // 12502
        this.selection.moveCursorBy(times || 1, 0);                                                                    // 12503
    };                                                                                                                 // 12504
    this.navigateLeft = function(times) {                                                                              // 12505
        if (!this.selection.isEmpty()) {                                                                               // 12506
            var selectionStart = this.getSelectionRange().start;                                                       // 12507
            this.moveCursorToPosition(selectionStart);                                                                 // 12508
        }                                                                                                              // 12509
        else {                                                                                                         // 12510
            times = times || 1;                                                                                        // 12511
            while (times--) {                                                                                          // 12512
                this.selection.moveCursorLeft();                                                                       // 12513
            }                                                                                                          // 12514
        }                                                                                                              // 12515
        this.clearSelection();                                                                                         // 12516
    };                                                                                                                 // 12517
    this.navigateRight = function(times) {                                                                             // 12518
        if (!this.selection.isEmpty()) {                                                                               // 12519
            var selectionEnd = this.getSelectionRange().end;                                                           // 12520
            this.moveCursorToPosition(selectionEnd);                                                                   // 12521
        }                                                                                                              // 12522
        else {                                                                                                         // 12523
            times = times || 1;                                                                                        // 12524
            while (times--) {                                                                                          // 12525
                this.selection.moveCursorRight();                                                                      // 12526
            }                                                                                                          // 12527
        }                                                                                                              // 12528
        this.clearSelection();                                                                                         // 12529
    };                                                                                                                 // 12530
    this.navigateLineStart = function() {                                                                              // 12531
        this.selection.moveCursorLineStart();                                                                          // 12532
        this.clearSelection();                                                                                         // 12533
    };                                                                                                                 // 12534
    this.navigateLineEnd = function() {                                                                                // 12535
        this.selection.moveCursorLineEnd();                                                                            // 12536
        this.clearSelection();                                                                                         // 12537
    };                                                                                                                 // 12538
    this.navigateFileEnd = function() {                                                                                // 12539
        this.selection.moveCursorFileEnd();                                                                            // 12540
        this.clearSelection();                                                                                         // 12541
    };                                                                                                                 // 12542
    this.navigateFileStart = function() {                                                                              // 12543
        this.selection.moveCursorFileStart();                                                                          // 12544
        this.clearSelection();                                                                                         // 12545
    };                                                                                                                 // 12546
    this.navigateWordRight = function() {                                                                              // 12547
        this.selection.moveCursorWordRight();                                                                          // 12548
        this.clearSelection();                                                                                         // 12549
    };                                                                                                                 // 12550
    this.navigateWordLeft = function() {                                                                               // 12551
        this.selection.moveCursorWordLeft();                                                                           // 12552
        this.clearSelection();                                                                                         // 12553
    };                                                                                                                 // 12554
    this.replace = function(replacement, options) {                                                                    // 12555
        if (options)                                                                                                   // 12556
            this.$search.set(options);                                                                                 // 12557
                                                                                                                       // 12558
        var range = this.$search.find(this.session);                                                                   // 12559
        var replaced = 0;                                                                                              // 12560
        if (!range)                                                                                                    // 12561
            return replaced;                                                                                           // 12562
                                                                                                                       // 12563
        if (this.$tryReplace(range, replacement)) {                                                                    // 12564
            replaced = 1;                                                                                              // 12565
        }                                                                                                              // 12566
        if (range !== null) {                                                                                          // 12567
            this.selection.setSelectionRange(range);                                                                   // 12568
            this.renderer.scrollSelectionIntoView(range.start, range.end);                                             // 12569
        }                                                                                                              // 12570
                                                                                                                       // 12571
        return replaced;                                                                                               // 12572
    };                                                                                                                 // 12573
    this.replaceAll = function(replacement, options) {                                                                 // 12574
        if (options) {                                                                                                 // 12575
            this.$search.set(options);                                                                                 // 12576
        }                                                                                                              // 12577
                                                                                                                       // 12578
        var ranges = this.$search.findAll(this.session);                                                               // 12579
        var replaced = 0;                                                                                              // 12580
        if (!ranges.length)                                                                                            // 12581
            return replaced;                                                                                           // 12582
                                                                                                                       // 12583
        this.$blockScrolling += 1;                                                                                     // 12584
                                                                                                                       // 12585
        var selection = this.getSelectionRange();                                                                      // 12586
        this.selection.moveTo(0, 0);                                                                                   // 12587
                                                                                                                       // 12588
        for (var i = ranges.length - 1; i >= 0; --i) {                                                                 // 12589
            if(this.$tryReplace(ranges[i], replacement)) {                                                             // 12590
                replaced++;                                                                                            // 12591
            }                                                                                                          // 12592
        }                                                                                                              // 12593
                                                                                                                       // 12594
        this.selection.setSelectionRange(selection);                                                                   // 12595
        this.$blockScrolling -= 1;                                                                                     // 12596
                                                                                                                       // 12597
        return replaced;                                                                                               // 12598
    };                                                                                                                 // 12599
                                                                                                                       // 12600
    this.$tryReplace = function(range, replacement) {                                                                  // 12601
        var input = this.session.getTextRange(range);                                                                  // 12602
        replacement = this.$search.replace(input, replacement);                                                        // 12603
        if (replacement !== null) {                                                                                    // 12604
            range.end = this.session.replace(range, replacement);                                                      // 12605
            return range;                                                                                              // 12606
        } else {                                                                                                       // 12607
            return null;                                                                                               // 12608
        }                                                                                                              // 12609
    };                                                                                                                 // 12610
    this.getLastSearchOptions = function() {                                                                           // 12611
        return this.$search.getOptions();                                                                              // 12612
    };                                                                                                                 // 12613
    this.find = function(needle, options, animate) {                                                                   // 12614
        if (!options)                                                                                                  // 12615
            options = {};                                                                                              // 12616
                                                                                                                       // 12617
        if (typeof needle == "string" || needle instanceof RegExp)                                                     // 12618
            options.needle = needle;                                                                                   // 12619
        else if (typeof needle == "object")                                                                            // 12620
            oop.mixin(options, needle);                                                                                // 12621
                                                                                                                       // 12622
        var range = this.selection.getRange();                                                                         // 12623
        if (options.needle == null) {                                                                                  // 12624
            needle = this.session.getTextRange(range)                                                                  // 12625
                || this.$search.$options.needle;                                                                       // 12626
            if (!needle) {                                                                                             // 12627
                range = this.session.getWordRange(range.start.row, range.start.column);                                // 12628
                needle = this.session.getTextRange(range);                                                             // 12629
            }                                                                                                          // 12630
            this.$search.set({needle: needle});                                                                        // 12631
        }                                                                                                              // 12632
                                                                                                                       // 12633
        this.$search.set(options);                                                                                     // 12634
        if (!options.start)                                                                                            // 12635
            this.$search.set({start: range});                                                                          // 12636
                                                                                                                       // 12637
        var newRange = this.$search.find(this.session);                                                                // 12638
        if (options.preventScroll)                                                                                     // 12639
            return newRange;                                                                                           // 12640
        if (newRange) {                                                                                                // 12641
            this.revealRange(newRange, animate);                                                                       // 12642
            return newRange;                                                                                           // 12643
        }                                                                                                              // 12644
        if (options.backwards)                                                                                         // 12645
            range.start = range.end;                                                                                   // 12646
        else                                                                                                           // 12647
            range.end = range.start;                                                                                   // 12648
        this.selection.setRange(range);                                                                                // 12649
    };                                                                                                                 // 12650
    this.findNext = function(options, animate) {                                                                       // 12651
        this.find({skipCurrent: true, backwards: false}, options, animate);                                            // 12652
    };                                                                                                                 // 12653
    this.findPrevious = function(options, animate) {                                                                   // 12654
        this.find(options, {skipCurrent: true, backwards: true}, animate);                                             // 12655
    };                                                                                                                 // 12656
                                                                                                                       // 12657
    this.revealRange = function(range, animate) {                                                                      // 12658
        this.$blockScrolling += 1;                                                                                     // 12659
        this.session.unfold(range);                                                                                    // 12660
        this.selection.setSelectionRange(range);                                                                       // 12661
        this.$blockScrolling -= 1;                                                                                     // 12662
                                                                                                                       // 12663
        var scrollTop = this.renderer.scrollTop;                                                                       // 12664
        this.renderer.scrollSelectionIntoView(range.start, range.end, 0.5);                                            // 12665
        if (animate !== false)                                                                                         // 12666
            this.renderer.animateScrolling(scrollTop);                                                                 // 12667
    };                                                                                                                 // 12668
    this.undo = function() {                                                                                           // 12669
        this.$blockScrolling++;                                                                                        // 12670
        this.session.getUndoManager().undo();                                                                          // 12671
        this.$blockScrolling--;                                                                                        // 12672
        this.renderer.scrollCursorIntoView(null, 0.5);                                                                 // 12673
    };                                                                                                                 // 12674
    this.redo = function() {                                                                                           // 12675
        this.$blockScrolling++;                                                                                        // 12676
        this.session.getUndoManager().redo();                                                                          // 12677
        this.$blockScrolling--;                                                                                        // 12678
        this.renderer.scrollCursorIntoView(null, 0.5);                                                                 // 12679
    };                                                                                                                 // 12680
    this.destroy = function() {                                                                                        // 12681
        this.renderer.destroy();                                                                                       // 12682
        this._signal("destroy", this);                                                                                 // 12683
        if (this.session) {                                                                                            // 12684
            this.session.destroy();                                                                                    // 12685
        }                                                                                                              // 12686
    };                                                                                                                 // 12687
    this.setAutoScrollEditorIntoView = function(enable) {                                                              // 12688
        if (!enable)                                                                                                   // 12689
            return;                                                                                                    // 12690
        var rect;                                                                                                      // 12691
        var self = this;                                                                                               // 12692
        var shouldScroll = false;                                                                                      // 12693
        if (!this.$scrollAnchor)                                                                                       // 12694
            this.$scrollAnchor = document.createElement("div");                                                        // 12695
        var scrollAnchor = this.$scrollAnchor;                                                                         // 12696
        scrollAnchor.style.cssText = "position:absolute";                                                              // 12697
        this.container.insertBefore(scrollAnchor, this.container.firstChild);                                          // 12698
        var onChangeSelection = this.on("changeSelection", function() {                                                // 12699
            shouldScroll = true;                                                                                       // 12700
        });                                                                                                            // 12701
        var onBeforeRender = this.renderer.on("beforeRender", function() {                                             // 12702
            if (shouldScroll)                                                                                          // 12703
                rect = self.renderer.container.getBoundingClientRect();                                                // 12704
        });                                                                                                            // 12705
        var onAfterRender = this.renderer.on("afterRender", function() {                                               // 12706
            if (shouldScroll && rect && (self.isFocused()                                                              // 12707
                || self.searchBox && self.searchBox.isFocused())                                                       // 12708
            ) {                                                                                                        // 12709
                var renderer = self.renderer;                                                                          // 12710
                var pos = renderer.$cursorLayer.$pixelPos;                                                             // 12711
                var config = renderer.layerConfig;                                                                     // 12712
                var top = pos.top - config.offset;                                                                     // 12713
                if (pos.top >= 0 && top + rect.top < 0) {                                                              // 12714
                    shouldScroll = true;                                                                               // 12715
                } else if (pos.top < config.height &&                                                                  // 12716
                    pos.top + rect.top + config.lineHeight > window.innerHeight) {                                     // 12717
                    shouldScroll = false;                                                                              // 12718
                } else {                                                                                               // 12719
                    shouldScroll = null;                                                                               // 12720
                }                                                                                                      // 12721
                if (shouldScroll != null) {                                                                            // 12722
                    scrollAnchor.style.top = top + "px";                                                               // 12723
                    scrollAnchor.style.left = pos.left + "px";                                                         // 12724
                    scrollAnchor.style.height = config.lineHeight + "px";                                              // 12725
                    scrollAnchor.scrollIntoView(shouldScroll);                                                         // 12726
                }                                                                                                      // 12727
                shouldScroll = rect = null;                                                                            // 12728
            }                                                                                                          // 12729
        });                                                                                                            // 12730
        this.setAutoScrollEditorIntoView = function(enable) {                                                          // 12731
            if (enable)                                                                                                // 12732
                return;                                                                                                // 12733
            delete this.setAutoScrollEditorIntoView;                                                                   // 12734
            this.removeEventListener("changeSelection", onChangeSelection);                                            // 12735
            this.renderer.removeEventListener("afterRender", onAfterRender);                                           // 12736
            this.renderer.removeEventListener("beforeRender", onBeforeRender);                                         // 12737
        };                                                                                                             // 12738
    };                                                                                                                 // 12739
                                                                                                                       // 12740
                                                                                                                       // 12741
    this.$resetCursorStyle = function() {                                                                              // 12742
        var style = this.$cursorStyle || "ace";                                                                        // 12743
        var cursorLayer = this.renderer.$cursorLayer;                                                                  // 12744
        if (!cursorLayer)                                                                                              // 12745
            return;                                                                                                    // 12746
        cursorLayer.setSmoothBlinking(/smooth/.test(style));                                                           // 12747
        cursorLayer.isBlinking = !this.$readOnly && style != "wide";                                                   // 12748
        dom.setCssClass(cursorLayer.element, "ace_slim-cursors", /slim/.test(style));                                  // 12749
    };                                                                                                                 // 12750
                                                                                                                       // 12751
}).call(Editor.prototype);                                                                                             // 12752
                                                                                                                       // 12753
                                                                                                                       // 12754
                                                                                                                       // 12755
config.defineOptions(Editor.prototype, "editor", {                                                                     // 12756
    selectionStyle: {                                                                                                  // 12757
        set: function(style) {                                                                                         // 12758
            this.onSelectionChange();                                                                                  // 12759
            this._signal("changeSelectionStyle", {data: style});                                                       // 12760
        },                                                                                                             // 12761
        initialValue: "line"                                                                                           // 12762
    },                                                                                                                 // 12763
    highlightActiveLine: {                                                                                             // 12764
        set: function() {this.$updateHighlightActiveLine();},                                                          // 12765
        initialValue: true                                                                                             // 12766
    },                                                                                                                 // 12767
    highlightSelectedWord: {                                                                                           // 12768
        set: function(shouldHighlight) {this.$onSelectionChange();},                                                   // 12769
        initialValue: true                                                                                             // 12770
    },                                                                                                                 // 12771
    readOnly: {                                                                                                        // 12772
        set: function(readOnly) {                                                                                      // 12773
            this.$resetCursorStyle();                                                                                  // 12774
        },                                                                                                             // 12775
        initialValue: false                                                                                            // 12776
    },                                                                                                                 // 12777
    cursorStyle: {                                                                                                     // 12778
        set: function(val) { this.$resetCursorStyle(); },                                                              // 12779
        values: ["ace", "slim", "smooth", "wide"],                                                                     // 12780
        initialValue: "ace"                                                                                            // 12781
    },                                                                                                                 // 12782
    mergeUndoDeltas: {                                                                                                 // 12783
        values: [false, true, "always"],                                                                               // 12784
        initialValue: true                                                                                             // 12785
    },                                                                                                                 // 12786
    behavioursEnabled: {initialValue: true},                                                                           // 12787
    wrapBehavioursEnabled: {initialValue: true},                                                                       // 12788
    autoScrollEditorIntoView: {                                                                                        // 12789
        set: function(val) {this.setAutoScrollEditorIntoView(val)}                                                     // 12790
    },                                                                                                                 // 12791
                                                                                                                       // 12792
    hScrollBarAlwaysVisible: "renderer",                                                                               // 12793
    vScrollBarAlwaysVisible: "renderer",                                                                               // 12794
    highlightGutterLine: "renderer",                                                                                   // 12795
    animatedScroll: "renderer",                                                                                        // 12796
    showInvisibles: "renderer",                                                                                        // 12797
    showPrintMargin: "renderer",                                                                                       // 12798
    printMarginColumn: "renderer",                                                                                     // 12799
    printMargin: "renderer",                                                                                           // 12800
    fadeFoldWidgets: "renderer",                                                                                       // 12801
    showFoldWidgets: "renderer",                                                                                       // 12802
    showLineNumbers: "renderer",                                                                                       // 12803
    showGutter: "renderer",                                                                                            // 12804
    displayIndentGuides: "renderer",                                                                                   // 12805
    fontSize: "renderer",                                                                                              // 12806
    fontFamily: "renderer",                                                                                            // 12807
    maxLines: "renderer",                                                                                              // 12808
    minLines: "renderer",                                                                                              // 12809
    scrollPastEnd: "renderer",                                                                                         // 12810
    fixedWidthGutter: "renderer",                                                                                      // 12811
    theme: "renderer",                                                                                                 // 12812
                                                                                                                       // 12813
    scrollSpeed: "$mouseHandler",                                                                                      // 12814
    dragDelay: "$mouseHandler",                                                                                        // 12815
    dragEnabled: "$mouseHandler",                                                                                      // 12816
    focusTimout: "$mouseHandler",                                                                                      // 12817
    tooltipFollowsMouse: "$mouseHandler",                                                                              // 12818
                                                                                                                       // 12819
    firstLineNumber: "session",                                                                                        // 12820
    overwrite: "session",                                                                                              // 12821
    newLineMode: "session",                                                                                            // 12822
    useWorker: "session",                                                                                              // 12823
    useSoftTabs: "session",                                                                                            // 12824
    tabSize: "session",                                                                                                // 12825
    wrap: "session",                                                                                                   // 12826
    foldStyle: "session",                                                                                              // 12827
    mode: "session"                                                                                                    // 12828
});                                                                                                                    // 12829
                                                                                                                       // 12830
exports.Editor = Editor;                                                                                               // 12831
});                                                                                                                    // 12832
                                                                                                                       // 12833
define("ace/undomanager",["require","exports","module"], function(require, exports, module) {                          // 12834
"use strict";                                                                                                          // 12835
var UndoManager = function() {                                                                                         // 12836
    this.reset();                                                                                                      // 12837
};                                                                                                                     // 12838
                                                                                                                       // 12839
(function() {                                                                                                          // 12840
    this.execute = function(options) {                                                                                 // 12841
        var deltas = options.args[0];                                                                                  // 12842
        this.$doc  = options.args[1];                                                                                  // 12843
        if (options.merge && this.hasUndo()){                                                                          // 12844
            this.dirtyCounter--;                                                                                       // 12845
            deltas = this.$undoStack.pop().concat(deltas);                                                             // 12846
        }                                                                                                              // 12847
        this.$undoStack.push(deltas);                                                                                  // 12848
        this.$redoStack = [];                                                                                          // 12849
                                                                                                                       // 12850
        if (this.dirtyCounter < 0) {                                                                                   // 12851
            this.dirtyCounter = NaN;                                                                                   // 12852
        }                                                                                                              // 12853
        this.dirtyCounter++;                                                                                           // 12854
    };                                                                                                                 // 12855
    this.undo = function(dontSelect) {                                                                                 // 12856
        var deltas = this.$undoStack.pop();                                                                            // 12857
        var undoSelectionRange = null;                                                                                 // 12858
        if (deltas) {                                                                                                  // 12859
            undoSelectionRange =                                                                                       // 12860
                this.$doc.undoChanges(deltas, dontSelect);                                                             // 12861
            this.$redoStack.push(deltas);                                                                              // 12862
            this.dirtyCounter--;                                                                                       // 12863
        }                                                                                                              // 12864
                                                                                                                       // 12865
        return undoSelectionRange;                                                                                     // 12866
    };                                                                                                                 // 12867
    this.redo = function(dontSelect) {                                                                                 // 12868
        var deltas = this.$redoStack.pop();                                                                            // 12869
        var redoSelectionRange = null;                                                                                 // 12870
        if (deltas) {                                                                                                  // 12871
            redoSelectionRange =                                                                                       // 12872
                this.$doc.redoChanges(deltas, dontSelect);                                                             // 12873
            this.$undoStack.push(deltas);                                                                              // 12874
            this.dirtyCounter++;                                                                                       // 12875
        }                                                                                                              // 12876
                                                                                                                       // 12877
        return redoSelectionRange;                                                                                     // 12878
    };                                                                                                                 // 12879
    this.reset = function() {                                                                                          // 12880
        this.$undoStack = [];                                                                                          // 12881
        this.$redoStack = [];                                                                                          // 12882
        this.dirtyCounter = 0;                                                                                         // 12883
    };                                                                                                                 // 12884
    this.hasUndo = function() {                                                                                        // 12885
        return this.$undoStack.length > 0;                                                                             // 12886
    };                                                                                                                 // 12887
    this.hasRedo = function() {                                                                                        // 12888
        return this.$redoStack.length > 0;                                                                             // 12889
    };                                                                                                                 // 12890
    this.markClean = function() {                                                                                      // 12891
        this.dirtyCounter = 0;                                                                                         // 12892
    };                                                                                                                 // 12893
    this.isClean = function() {                                                                                        // 12894
        return this.dirtyCounter === 0;                                                                                // 12895
    };                                                                                                                 // 12896
                                                                                                                       // 12897
}).call(UndoManager.prototype);                                                                                        // 12898
                                                                                                                       // 12899
exports.UndoManager = UndoManager;                                                                                     // 12900
});                                                                                                                    // 12901
                                                                                                                       // 12902
define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 12904
                                                                                                                       // 12905
var dom = require("../lib/dom");                                                                                       // 12906
var oop = require("../lib/oop");                                                                                       // 12907
var lang = require("../lib/lang");                                                                                     // 12908
var EventEmitter = require("../lib/event_emitter").EventEmitter;                                                       // 12909
                                                                                                                       // 12910
var Gutter = function(parentEl) {                                                                                      // 12911
    this.element = dom.createElement("div");                                                                           // 12912
    this.element.className = "ace_layer ace_gutter-layer";                                                             // 12913
    parentEl.appendChild(this.element);                                                                                // 12914
    this.setShowFoldWidgets(this.$showFoldWidgets);                                                                    // 12915
                                                                                                                       // 12916
    this.gutterWidth = 0;                                                                                              // 12917
                                                                                                                       // 12918
    this.$annotations = [];                                                                                            // 12919
    this.$updateAnnotations = this.$updateAnnotations.bind(this);                                                      // 12920
                                                                                                                       // 12921
    this.$cells = [];                                                                                                  // 12922
};                                                                                                                     // 12923
                                                                                                                       // 12924
(function() {                                                                                                          // 12925
                                                                                                                       // 12926
    oop.implement(this, EventEmitter);                                                                                 // 12927
                                                                                                                       // 12928
    this.setSession = function(session) {                                                                              // 12929
        if (this.session)                                                                                              // 12930
            this.session.removeEventListener("change", this.$updateAnnotations);                                       // 12931
        this.session = session;                                                                                        // 12932
        if (session)                                                                                                   // 12933
            session.on("change", this.$updateAnnotations);                                                             // 12934
    };                                                                                                                 // 12935
                                                                                                                       // 12936
    this.addGutterDecoration = function(row, className){                                                               // 12937
        if (window.console)                                                                                            // 12938
            console.warn && console.warn("deprecated use session.addGutterDecoration");                                // 12939
        this.session.addGutterDecoration(row, className);                                                              // 12940
    };                                                                                                                 // 12941
                                                                                                                       // 12942
    this.removeGutterDecoration = function(row, className){                                                            // 12943
        if (window.console)                                                                                            // 12944
            console.warn && console.warn("deprecated use session.removeGutterDecoration");                             // 12945
        this.session.removeGutterDecoration(row, className);                                                           // 12946
    };                                                                                                                 // 12947
                                                                                                                       // 12948
    this.setAnnotations = function(annotations) {                                                                      // 12949
        this.$annotations = [];                                                                                        // 12950
        for (var i = 0; i < annotations.length; i++) {                                                                 // 12951
            var annotation = annotations[i];                                                                           // 12952
            var row = annotation.row;                                                                                  // 12953
            var rowInfo = this.$annotations[row];                                                                      // 12954
            if (!rowInfo)                                                                                              // 12955
                rowInfo = this.$annotations[row] = {text: []};                                                         // 12956
                                                                                                                       // 12957
            var annoText = annotation.text;                                                                            // 12958
            annoText = annoText ? lang.escapeHTML(annoText) : annotation.html || "";                                   // 12959
                                                                                                                       // 12960
            if (rowInfo.text.indexOf(annoText) === -1)                                                                 // 12961
                rowInfo.text.push(annoText);                                                                           // 12962
                                                                                                                       // 12963
            var type = annotation.type;                                                                                // 12964
            if (type == "error")                                                                                       // 12965
                rowInfo.className = " ace_error";                                                                      // 12966
            else if (type == "warning" && rowInfo.className != " ace_error")                                           // 12967
                rowInfo.className = " ace_warning";                                                                    // 12968
            else if (type == "info" && (!rowInfo.className))                                                           // 12969
                rowInfo.className = " ace_info";                                                                       // 12970
        }                                                                                                              // 12971
    };                                                                                                                 // 12972
                                                                                                                       // 12973
    this.$updateAnnotations = function (e) {                                                                           // 12974
        if (!this.$annotations.length)                                                                                 // 12975
            return;                                                                                                    // 12976
        var delta = e.data;                                                                                            // 12977
        var range = delta.range;                                                                                       // 12978
        var firstRow = range.start.row;                                                                                // 12979
        var len = range.end.row - firstRow;                                                                            // 12980
        if (len === 0) {                                                                                               // 12981
        } else if (delta.action == "removeText" || delta.action == "removeLines") {                                    // 12982
            this.$annotations.splice(firstRow, len + 1, null);                                                         // 12983
        } else {                                                                                                       // 12984
            var args = new Array(len + 1);                                                                             // 12985
            args.unshift(firstRow, 1);                                                                                 // 12986
            this.$annotations.splice.apply(this.$annotations, args);                                                   // 12987
        }                                                                                                              // 12988
    };                                                                                                                 // 12989
                                                                                                                       // 12990
    this.update = function(config) {                                                                                   // 12991
        var session = this.session;                                                                                    // 12992
        var firstRow = config.firstRow;                                                                                // 12993
        var lastRow = Math.min(config.lastRow + config.gutterOffset,  // needed to compensate for hor scollbar         // 12994
            session.getLength() - 1);                                                                                  // 12995
        var fold = session.getNextFoldLine(firstRow);                                                                  // 12996
        var foldStart = fold ? fold.start.row : Infinity;                                                              // 12997
        var foldWidgets = this.$showFoldWidgets && session.foldWidgets;                                                // 12998
        var breakpoints = session.$breakpoints;                                                                        // 12999
        var decorations = session.$decorations;                                                                        // 13000
        var firstLineNumber = session.$firstLineNumber;                                                                // 13001
        var lastLineNumber = 0;                                                                                        // 13002
                                                                                                                       // 13003
        var gutterRenderer = session.gutterRenderer || this.$renderer;                                                 // 13004
                                                                                                                       // 13005
        var cell = null;                                                                                               // 13006
        var index = -1;                                                                                                // 13007
        var row = firstRow;                                                                                            // 13008
        while (true) {                                                                                                 // 13009
            if (row > foldStart) {                                                                                     // 13010
                row = fold.end.row + 1;                                                                                // 13011
                fold = session.getNextFoldLine(row, fold);                                                             // 13012
                foldStart = fold ? fold.start.row : Infinity;                                                          // 13013
            }                                                                                                          // 13014
            if (row > lastRow) {                                                                                       // 13015
                while (this.$cells.length > index + 1) {                                                               // 13016
                    cell = this.$cells.pop();                                                                          // 13017
                    this.element.removeChild(cell.element);                                                            // 13018
                }                                                                                                      // 13019
                break;                                                                                                 // 13020
            }                                                                                                          // 13021
                                                                                                                       // 13022
            cell = this.$cells[++index];                                                                               // 13023
            if (!cell) {                                                                                               // 13024
                cell = {element: null, textNode: null, foldWidget: null};                                              // 13025
                cell.element = dom.createElement("div");                                                               // 13026
                cell.textNode = document.createTextNode('');                                                           // 13027
                cell.element.appendChild(cell.textNode);                                                               // 13028
                this.element.appendChild(cell.element);                                                                // 13029
                this.$cells[index] = cell;                                                                             // 13030
            }                                                                                                          // 13031
                                                                                                                       // 13032
            var className = "ace_gutter-cell ";                                                                        // 13033
            if (breakpoints[row])                                                                                      // 13034
                className += breakpoints[row];                                                                         // 13035
            if (decorations[row])                                                                                      // 13036
                className += decorations[row];                                                                         // 13037
            if (this.$annotations[row])                                                                                // 13038
                className += this.$annotations[row].className;                                                         // 13039
            if (cell.element.className != className)                                                                   // 13040
                cell.element.className = className;                                                                    // 13041
                                                                                                                       // 13042
            var height = session.getRowLength(row) * config.lineHeight + "px";                                         // 13043
            if (height != cell.element.style.height)                                                                   // 13044
                cell.element.style.height = height;                                                                    // 13045
                                                                                                                       // 13046
            if (foldWidgets) {                                                                                         // 13047
                var c = foldWidgets[row];                                                                              // 13048
                if (c == null)                                                                                         // 13049
                    c = foldWidgets[row] = session.getFoldWidget(row);                                                 // 13050
            }                                                                                                          // 13051
                                                                                                                       // 13052
            if (c) {                                                                                                   // 13053
                if (!cell.foldWidget) {                                                                                // 13054
                    cell.foldWidget = dom.createElement("span");                                                       // 13055
                    cell.element.appendChild(cell.foldWidget);                                                         // 13056
                }                                                                                                      // 13057
                var className = "ace_fold-widget ace_" + c;                                                            // 13058
                if (c == "start" && row == foldStart && row < fold.end.row)                                            // 13059
                    className += " ace_closed";                                                                        // 13060
                else                                                                                                   // 13061
                    className += " ace_open";                                                                          // 13062
                if (cell.foldWidget.className != className)                                                            // 13063
                    cell.foldWidget.className = className;                                                             // 13064
                                                                                                                       // 13065
                var height = config.lineHeight + "px";                                                                 // 13066
                if (cell.foldWidget.style.height != height)                                                            // 13067
                    cell.foldWidget.style.height = height;                                                             // 13068
            } else {                                                                                                   // 13069
                if (cell.foldWidget) {                                                                                 // 13070
                    cell.element.removeChild(cell.foldWidget);                                                         // 13071
                    cell.foldWidget = null;                                                                            // 13072
                }                                                                                                      // 13073
            }                                                                                                          // 13074
                                                                                                                       // 13075
            var text = lastLineNumber = gutterRenderer                                                                 // 13076
                ? gutterRenderer.getText(session, row)                                                                 // 13077
                : row + firstLineNumber;                                                                               // 13078
            if (text != cell.textNode.data)                                                                            // 13079
                cell.textNode.data = text;                                                                             // 13080
                                                                                                                       // 13081
            row++;                                                                                                     // 13082
        }                                                                                                              // 13083
                                                                                                                       // 13084
        this.element.style.height = config.minHeight + "px";                                                           // 13085
                                                                                                                       // 13086
        if (this.$fixedWidth || session.$useWrapMode)                                                                  // 13087
            lastLineNumber = session.getLength() + firstLineNumber;                                                    // 13088
                                                                                                                       // 13089
        var gutterWidth = gutterRenderer                                                                               // 13090
            ? gutterRenderer.getWidth(session, lastLineNumber, config)                                                 // 13091
            : lastLineNumber.toString().length * config.characterWidth;                                                // 13092
                                                                                                                       // 13093
        var padding = this.$padding || this.$computePadding();                                                         // 13094
        gutterWidth += padding.left + padding.right;                                                                   // 13095
        if (gutterWidth !== this.gutterWidth && !isNaN(gutterWidth)) {                                                 // 13096
            this.gutterWidth = gutterWidth;                                                                            // 13097
            this.element.style.width = Math.ceil(this.gutterWidth) + "px";                                             // 13098
            this._emit("changeGutterWidth", gutterWidth);                                                              // 13099
        }                                                                                                              // 13100
    };                                                                                                                 // 13101
                                                                                                                       // 13102
    this.$fixedWidth = false;                                                                                          // 13103
                                                                                                                       // 13104
    this.$showLineNumbers = true;                                                                                      // 13105
    this.$renderer = "";                                                                                               // 13106
    this.setShowLineNumbers = function(show) {                                                                         // 13107
        this.$renderer = !show && {                                                                                    // 13108
            getWidth: function() {return ""},                                                                          // 13109
            getText: function() {return ""}                                                                            // 13110
        };                                                                                                             // 13111
    };                                                                                                                 // 13112
                                                                                                                       // 13113
    this.getShowLineNumbers = function() {                                                                             // 13114
        return this.$showLineNumbers;                                                                                  // 13115
    };                                                                                                                 // 13116
                                                                                                                       // 13117
    this.$showFoldWidgets = true;                                                                                      // 13118
    this.setShowFoldWidgets = function(show) {                                                                         // 13119
        if (show)                                                                                                      // 13120
            dom.addCssClass(this.element, "ace_folding-enabled");                                                      // 13121
        else                                                                                                           // 13122
            dom.removeCssClass(this.element, "ace_folding-enabled");                                                   // 13123
                                                                                                                       // 13124
        this.$showFoldWidgets = show;                                                                                  // 13125
        this.$padding = null;                                                                                          // 13126
    };                                                                                                                 // 13127
                                                                                                                       // 13128
    this.getShowFoldWidgets = function() {                                                                             // 13129
        return this.$showFoldWidgets;                                                                                  // 13130
    };                                                                                                                 // 13131
                                                                                                                       // 13132
    this.$computePadding = function() {                                                                                // 13133
        if (!this.element.firstChild)                                                                                  // 13134
            return {left: 0, right: 0};                                                                                // 13135
        var style = dom.computedStyle(this.element.firstChild);                                                        // 13136
        this.$padding = {};                                                                                            // 13137
        this.$padding.left = parseInt(style.paddingLeft) + 1 || 0;                                                     // 13138
        this.$padding.right = parseInt(style.paddingRight) || 0;                                                       // 13139
        return this.$padding;                                                                                          // 13140
    };                                                                                                                 // 13141
                                                                                                                       // 13142
    this.getRegion = function(point) {                                                                                 // 13143
        var padding = this.$padding || this.$computePadding();                                                         // 13144
        var rect = this.element.getBoundingClientRect();                                                               // 13145
        if (point.x < padding.left + rect.left)                                                                        // 13146
            return "markers";                                                                                          // 13147
        if (this.$showFoldWidgets && point.x > rect.right - padding.right)                                             // 13148
            return "foldWidgets";                                                                                      // 13149
    };                                                                                                                 // 13150
                                                                                                                       // 13151
}).call(Gutter.prototype);                                                                                             // 13152
                                                                                                                       // 13153
exports.Gutter = Gutter;                                                                                               // 13154
                                                                                                                       // 13155
});                                                                                                                    // 13156
                                                                                                                       // 13157
define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"], function(require, exports, module) {
"use strict";                                                                                                          // 13159
                                                                                                                       // 13160
var Range = require("../range").Range;                                                                                 // 13161
var dom = require("../lib/dom");                                                                                       // 13162
                                                                                                                       // 13163
var Marker = function(parentEl) {                                                                                      // 13164
    this.element = dom.createElement("div");                                                                           // 13165
    this.element.className = "ace_layer ace_marker-layer";                                                             // 13166
    parentEl.appendChild(this.element);                                                                                // 13167
};                                                                                                                     // 13168
                                                                                                                       // 13169
(function() {                                                                                                          // 13170
                                                                                                                       // 13171
    this.$padding = 0;                                                                                                 // 13172
                                                                                                                       // 13173
    this.setPadding = function(padding) {                                                                              // 13174
        this.$padding = padding;                                                                                       // 13175
    };                                                                                                                 // 13176
    this.setSession = function(session) {                                                                              // 13177
        this.session = session;                                                                                        // 13178
    };                                                                                                                 // 13179
                                                                                                                       // 13180
    this.setMarkers = function(markers) {                                                                              // 13181
        this.markers = markers;                                                                                        // 13182
    };                                                                                                                 // 13183
                                                                                                                       // 13184
    this.update = function(config) {                                                                                   // 13185
        var config = config || this.config;                                                                            // 13186
        if (!config)                                                                                                   // 13187
            return;                                                                                                    // 13188
                                                                                                                       // 13189
        this.config = config;                                                                                          // 13190
                                                                                                                       // 13191
                                                                                                                       // 13192
        var html = [];                                                                                                 // 13193
        for (var key in this.markers) {                                                                                // 13194
            var marker = this.markers[key];                                                                            // 13195
                                                                                                                       // 13196
            if (!marker.range) {                                                                                       // 13197
                marker.update(html, this, this.session, config);                                                       // 13198
                continue;                                                                                              // 13199
            }                                                                                                          // 13200
                                                                                                                       // 13201
            var range = marker.range.clipRows(config.firstRow, config.lastRow);                                        // 13202
            if (range.isEmpty()) continue;                                                                             // 13203
                                                                                                                       // 13204
            range = range.toScreenRange(this.session);                                                                 // 13205
            if (marker.renderer) {                                                                                     // 13206
                var top = this.$getTop(range.start.row, config);                                                       // 13207
                var left = this.$padding + range.start.column * config.characterWidth;                                 // 13208
                marker.renderer(html, range, left, top, config);                                                       // 13209
            } else if (marker.type == "fullLine") {                                                                    // 13210
                this.drawFullLineMarker(html, range, marker.clazz, config);                                            // 13211
            } else if (marker.type == "screenLine") {                                                                  // 13212
                this.drawScreenLineMarker(html, range, marker.clazz, config);                                          // 13213
            } else if (range.isMultiLine()) {                                                                          // 13214
                if (marker.type == "text")                                                                             // 13215
                    this.drawTextMarker(html, range, marker.clazz, config);                                            // 13216
                else                                                                                                   // 13217
                    this.drawMultiLineMarker(html, range, marker.clazz, config);                                       // 13218
            } else {                                                                                                   // 13219
                this.drawSingleLineMarker(html, range, marker.clazz + " ace_start", config);                           // 13220
            }                                                                                                          // 13221
        }                                                                                                              // 13222
        this.element.innerHTML = html.join("");                                                                        // 13223
    };                                                                                                                 // 13224
                                                                                                                       // 13225
    this.$getTop = function(row, layerConfig) {                                                                        // 13226
        return (row - layerConfig.firstRowScreen) * layerConfig.lineHeight;                                            // 13227
    };                                                                                                                 // 13228
    this.drawTextMarker = function(stringBuilder, range, clazz, layerConfig, extraStyle) {                             // 13229
        var row = range.start.row;                                                                                     // 13230
                                                                                                                       // 13231
        var lineRange = new Range(                                                                                     // 13232
            row, range.start.column,                                                                                   // 13233
            row, this.session.getScreenLastRowColumn(row)                                                              // 13234
        );                                                                                                             // 13235
        this.drawSingleLineMarker(stringBuilder, lineRange, clazz + " ace_start", layerConfig, 1, extraStyle);         // 13236
        row = range.end.row;                                                                                           // 13237
        lineRange = new Range(row, 0, row, range.end.column);                                                          // 13238
        this.drawSingleLineMarker(stringBuilder, lineRange, clazz, layerConfig, 0, extraStyle);                        // 13239
                                                                                                                       // 13240
        for (row = range.start.row + 1; row < range.end.row; row++) {                                                  // 13241
            lineRange.start.row = row;                                                                                 // 13242
            lineRange.end.row = row;                                                                                   // 13243
            lineRange.end.column = this.session.getScreenLastRowColumn(row);                                           // 13244
            this.drawSingleLineMarker(stringBuilder, lineRange, clazz, layerConfig, 1, extraStyle);                    // 13245
        }                                                                                                              // 13246
    };                                                                                                                 // 13247
    this.drawMultiLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {                             // 13248
        var padding = this.$padding;                                                                                   // 13249
        var height = config.lineHeight;                                                                                // 13250
        var top = this.$getTop(range.start.row, config);                                                               // 13251
        var left = padding + range.start.column * config.characterWidth;                                               // 13252
        extraStyle = extraStyle || "";                                                                                 // 13253
                                                                                                                       // 13254
        stringBuilder.push(                                                                                            // 13255
            "<div class='", clazz, " ace_start' style='",                                                              // 13256
            "height:", height, "px;",                                                                                  // 13257
            "right:0;",                                                                                                // 13258
            "top:", top, "px;",                                                                                        // 13259
            "left:", left, "px;", extraStyle, "'></div>"                                                               // 13260
        );                                                                                                             // 13261
        top = this.$getTop(range.end.row, config);                                                                     // 13262
        var width = range.end.column * config.characterWidth;                                                          // 13263
                                                                                                                       // 13264
        stringBuilder.push(                                                                                            // 13265
            "<div class='", clazz, "' style='",                                                                        // 13266
            "height:", height, "px;",                                                                                  // 13267
            "width:", width, "px;",                                                                                    // 13268
            "top:", top, "px;",                                                                                        // 13269
            "left:", padding, "px;", extraStyle, "'></div>"                                                            // 13270
        );                                                                                                             // 13271
        height = (range.end.row - range.start.row - 1) * config.lineHeight;                                            // 13272
        if (height < 0)                                                                                                // 13273
            return;                                                                                                    // 13274
        top = this.$getTop(range.start.row + 1, config);                                                               // 13275
                                                                                                                       // 13276
        stringBuilder.push(                                                                                            // 13277
            "<div class='", clazz, "' style='",                                                                        // 13278
            "height:", height, "px;",                                                                                  // 13279
            "right:0;",                                                                                                // 13280
            "top:", top, "px;",                                                                                        // 13281
            "left:", padding, "px;", extraStyle, "'></div>"                                                            // 13282
        );                                                                                                             // 13283
    };                                                                                                                 // 13284
    this.drawSingleLineMarker = function(stringBuilder, range, clazz, config, extraLength, extraStyle) {               // 13285
        var height = config.lineHeight;                                                                                // 13286
        var width = (range.end.column + (extraLength || 0) - range.start.column) * config.characterWidth;              // 13287
                                                                                                                       // 13288
        var top = this.$getTop(range.start.row, config);                                                               // 13289
        var left = this.$padding + range.start.column * config.characterWidth;                                         // 13290
                                                                                                                       // 13291
        stringBuilder.push(                                                                                            // 13292
            "<div class='", clazz, "' style='",                                                                        // 13293
            "height:", height, "px;",                                                                                  // 13294
            "width:", width, "px;",                                                                                    // 13295
            "top:", top, "px;",                                                                                        // 13296
            "left:", left, "px;", extraStyle || "", "'></div>"                                                         // 13297
        );                                                                                                             // 13298
    };                                                                                                                 // 13299
                                                                                                                       // 13300
    this.drawFullLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {                              // 13301
        var top = this.$getTop(range.start.row, config);                                                               // 13302
        var height = config.lineHeight;                                                                                // 13303
        if (range.start.row != range.end.row)                                                                          // 13304
            height += this.$getTop(range.end.row, config) - top;                                                       // 13305
                                                                                                                       // 13306
        stringBuilder.push(                                                                                            // 13307
            "<div class='", clazz, "' style='",                                                                        // 13308
            "height:", height, "px;",                                                                                  // 13309
            "top:", top, "px;",                                                                                        // 13310
            "left:0;right:0;", extraStyle || "", "'></div>"                                                            // 13311
        );                                                                                                             // 13312
    };                                                                                                                 // 13313
                                                                                                                       // 13314
    this.drawScreenLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {                            // 13315
        var top = this.$getTop(range.start.row, config);                                                               // 13316
        var height = config.lineHeight;                                                                                // 13317
                                                                                                                       // 13318
        stringBuilder.push(                                                                                            // 13319
            "<div class='", clazz, "' style='",                                                                        // 13320
            "height:", height, "px;",                                                                                  // 13321
            "top:", top, "px;",                                                                                        // 13322
            "left:0;right:0;", extraStyle || "", "'></div>"                                                            // 13323
        );                                                                                                             // 13324
    };                                                                                                                 // 13325
                                                                                                                       // 13326
}).call(Marker.prototype);                                                                                             // 13327
                                                                                                                       // 13328
exports.Marker = Marker;                                                                                               // 13329
                                                                                                                       // 13330
});                                                                                                                    // 13331
                                                                                                                       // 13332
define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 13334
                                                                                                                       // 13335
var oop = require("../lib/oop");                                                                                       // 13336
var dom = require("../lib/dom");                                                                                       // 13337
var lang = require("../lib/lang");                                                                                     // 13338
var useragent = require("../lib/useragent");                                                                           // 13339
var EventEmitter = require("../lib/event_emitter").EventEmitter;                                                       // 13340
                                                                                                                       // 13341
var Text = function(parentEl) {                                                                                        // 13342
    this.element = dom.createElement("div");                                                                           // 13343
    this.element.className = "ace_layer ace_text-layer";                                                               // 13344
    parentEl.appendChild(this.element);                                                                                // 13345
    this.$updateEolChar = this.$updateEolChar.bind(this);                                                              // 13346
};                                                                                                                     // 13347
                                                                                                                       // 13348
(function() {                                                                                                          // 13349
                                                                                                                       // 13350
    oop.implement(this, EventEmitter);                                                                                 // 13351
                                                                                                                       // 13352
    this.EOF_CHAR = "\xB6";                                                                                            // 13353
    this.EOL_CHAR_LF = "\xAC";                                                                                         // 13354
    this.EOL_CHAR_CRLF = "\xa4";                                                                                       // 13355
    this.EOL_CHAR = this.EOL_CHAR_LF;                                                                                  // 13356
    this.TAB_CHAR = "\u2192"; //"\u21E5";                                                                              // 13357
    this.SPACE_CHAR = "\xB7";                                                                                          // 13358
    this.$padding = 0;                                                                                                 // 13359
                                                                                                                       // 13360
    this.$updateEolChar = function() {                                                                                 // 13361
        var EOL_CHAR = this.session.doc.getNewLineCharacter() == "\n"                                                  // 13362
           ? this.EOL_CHAR_LF                                                                                          // 13363
           : this.EOL_CHAR_CRLF;                                                                                       // 13364
        if (this.EOL_CHAR != EOL_CHAR) {                                                                               // 13365
            this.EOL_CHAR = EOL_CHAR;                                                                                  // 13366
            return true;                                                                                               // 13367
        }                                                                                                              // 13368
    }                                                                                                                  // 13369
                                                                                                                       // 13370
    this.setPadding = function(padding) {                                                                              // 13371
        this.$padding = padding;                                                                                       // 13372
        this.element.style.padding = "0 " + padding + "px";                                                            // 13373
    };                                                                                                                 // 13374
                                                                                                                       // 13375
    this.getLineHeight = function() {                                                                                  // 13376
        return this.$fontMetrics.$characterSize.height || 0;                                                           // 13377
    };                                                                                                                 // 13378
                                                                                                                       // 13379
    this.getCharacterWidth = function() {                                                                              // 13380
        return this.$fontMetrics.$characterSize.width || 0;                                                            // 13381
    };                                                                                                                 // 13382
                                                                                                                       // 13383
    this.$setFontMetrics = function(measure) {                                                                         // 13384
        this.$fontMetrics = measure;                                                                                   // 13385
        this.$fontMetrics.on("changeCharacterSize", function(e) {                                                      // 13386
            this._signal("changeCharacterSize", e);                                                                    // 13387
        }.bind(this));                                                                                                 // 13388
        this.$pollSizeChanges();                                                                                       // 13389
    }                                                                                                                  // 13390
                                                                                                                       // 13391
    this.checkForSizeChanges = function() {                                                                            // 13392
        this.$fontMetrics.checkForSizeChanges();                                                                       // 13393
    };                                                                                                                 // 13394
    this.$pollSizeChanges = function() {                                                                               // 13395
        return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();                                      // 13396
    };                                                                                                                 // 13397
    this.setSession = function(session) {                                                                              // 13398
        this.session = session;                                                                                        // 13399
        if (session)                                                                                                   // 13400
            this.$computeTabString();                                                                                  // 13401
    };                                                                                                                 // 13402
                                                                                                                       // 13403
    this.showInvisibles = false;                                                                                       // 13404
    this.setShowInvisibles = function(showInvisibles) {                                                                // 13405
        if (this.showInvisibles == showInvisibles)                                                                     // 13406
            return false;                                                                                              // 13407
                                                                                                                       // 13408
        this.showInvisibles = showInvisibles;                                                                          // 13409
        this.$computeTabString();                                                                                      // 13410
        return true;                                                                                                   // 13411
    };                                                                                                                 // 13412
                                                                                                                       // 13413
    this.displayIndentGuides = true;                                                                                   // 13414
    this.setDisplayIndentGuides = function(display) {                                                                  // 13415
        if (this.displayIndentGuides == display)                                                                       // 13416
            return false;                                                                                              // 13417
                                                                                                                       // 13418
        this.displayIndentGuides = display;                                                                            // 13419
        this.$computeTabString();                                                                                      // 13420
        return true;                                                                                                   // 13421
    };                                                                                                                 // 13422
                                                                                                                       // 13423
    this.$tabStrings = [];                                                                                             // 13424
    this.onChangeTabSize =                                                                                             // 13425
    this.$computeTabString = function() {                                                                              // 13426
        var tabSize = this.session.getTabSize();                                                                       // 13427
        this.tabSize = tabSize;                                                                                        // 13428
        var tabStr = this.$tabStrings = [0];                                                                           // 13429
        for (var i = 1; i < tabSize + 1; i++) {                                                                        // 13430
            if (this.showInvisibles) {                                                                                 // 13431
                tabStr.push("<span class='ace_invisible ace_invisible_tab'>"                                           // 13432
                    + this.TAB_CHAR                                                                                    // 13433
                    + lang.stringRepeat("\xa0", i - 1)                                                                 // 13434
                    + "</span>");                                                                                      // 13435
            } else {                                                                                                   // 13436
                tabStr.push(lang.stringRepeat("\xa0", i));                                                             // 13437
            }                                                                                                          // 13438
        }                                                                                                              // 13439
        if (this.displayIndentGuides) {                                                                                // 13440
            this.$indentGuideRe =  /\s\S| \t|\t |\s$/;                                                                 // 13441
            var className = "ace_indent-guide";                                                                        // 13442
            var spaceClass = "";                                                                                       // 13443
            var tabClass = "";                                                                                         // 13444
            if (this.showInvisibles) {                                                                                 // 13445
                className += " ace_invisible";                                                                         // 13446
                spaceClass = " ace_invisible_space";                                                                   // 13447
                tabClass = " ace_invisible_tab";                                                                       // 13448
                var spaceContent = lang.stringRepeat(this.SPACE_CHAR, this.tabSize);                                   // 13449
                var tabContent = this.TAB_CHAR + lang.stringRepeat("\xa0", this.tabSize - 1);                          // 13450
            } else{                                                                                                    // 13451
                var spaceContent = lang.stringRepeat("\xa0", this.tabSize);                                            // 13452
                var tabContent = spaceContent;                                                                         // 13453
            }                                                                                                          // 13454
                                                                                                                       // 13455
            this.$tabStrings[" "] = "<span class='" + className + spaceClass + "'>" + spaceContent + "</span>";        // 13456
            this.$tabStrings["\t"] = "<span class='" + className + tabClass + "'>" + tabContent + "</span>";           // 13457
        }                                                                                                              // 13458
    };                                                                                                                 // 13459
                                                                                                                       // 13460
    this.updateLines = function(config, firstRow, lastRow) {                                                           // 13461
        if (this.config.lastRow != config.lastRow ||                                                                   // 13462
            this.config.firstRow != config.firstRow) {                                                                 // 13463
            this.scrollLines(config);                                                                                  // 13464
        }                                                                                                              // 13465
        this.config = config;                                                                                          // 13466
                                                                                                                       // 13467
        var first = Math.max(firstRow, config.firstRow);                                                               // 13468
        var last = Math.min(lastRow, config.lastRow);                                                                  // 13469
                                                                                                                       // 13470
        var lineElements = this.element.childNodes;                                                                    // 13471
        var lineElementsIdx = 0;                                                                                       // 13472
                                                                                                                       // 13473
        for (var row = config.firstRow; row < first; row++) {                                                          // 13474
            var foldLine = this.session.getFoldLine(row);                                                              // 13475
            if (foldLine) {                                                                                            // 13476
                if (foldLine.containsRow(first)) {                                                                     // 13477
                    first = foldLine.start.row;                                                                        // 13478
                    break;                                                                                             // 13479
                } else {                                                                                               // 13480
                    row = foldLine.end.row;                                                                            // 13481
                }                                                                                                      // 13482
            }                                                                                                          // 13483
            lineElementsIdx ++;                                                                                        // 13484
        }                                                                                                              // 13485
                                                                                                                       // 13486
        var row = first;                                                                                               // 13487
        var foldLine = this.session.getNextFoldLine(row);                                                              // 13488
        var foldStart = foldLine ? foldLine.start.row : Infinity;                                                      // 13489
                                                                                                                       // 13490
        while (true) {                                                                                                 // 13491
            if (row > foldStart) {                                                                                     // 13492
                row = foldLine.end.row+1;                                                                              // 13493
                foldLine = this.session.getNextFoldLine(row, foldLine);                                                // 13494
                foldStart = foldLine ? foldLine.start.row :Infinity;                                                   // 13495
            }                                                                                                          // 13496
            if (row > last)                                                                                            // 13497
                break;                                                                                                 // 13498
                                                                                                                       // 13499
            var lineElement = lineElements[lineElementsIdx++];                                                         // 13500
            if (lineElement) {                                                                                         // 13501
                var html = [];                                                                                         // 13502
                this.$renderLine(                                                                                      // 13503
                    html, row, !this.$useLineGroups(), row == foldStart ? foldLine : false                             // 13504
                );                                                                                                     // 13505
                lineElement.style.height = config.lineHeight * this.session.getRowLength(row) + "px";                  // 13506
                lineElement.innerHTML = html.join("");                                                                 // 13507
            }                                                                                                          // 13508
            row++;                                                                                                     // 13509
        }                                                                                                              // 13510
    };                                                                                                                 // 13511
                                                                                                                       // 13512
    this.scrollLines = function(config) {                                                                              // 13513
        var oldConfig = this.config;                                                                                   // 13514
        this.config = config;                                                                                          // 13515
                                                                                                                       // 13516
        if (!oldConfig || oldConfig.lastRow < config.firstRow)                                                         // 13517
            return this.update(config);                                                                                // 13518
                                                                                                                       // 13519
        if (config.lastRow < oldConfig.firstRow)                                                                       // 13520
            return this.update(config);                                                                                // 13521
                                                                                                                       // 13522
        var el = this.element;                                                                                         // 13523
        if (oldConfig.firstRow < config.firstRow)                                                                      // 13524
            for (var row=this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row>0; row--)        // 13525
                el.removeChild(el.firstChild);                                                                         // 13526
                                                                                                                       // 13527
        if (oldConfig.lastRow > config.lastRow)                                                                        // 13528
            for (var row=this.session.getFoldedRowCount(config.lastRow + 1, oldConfig.lastRow); row>0; row--)          // 13529
                el.removeChild(el.lastChild);                                                                          // 13530
                                                                                                                       // 13531
        if (config.firstRow < oldConfig.firstRow) {                                                                    // 13532
            var fragment = this.$renderLinesFragment(config, config.firstRow, oldConfig.firstRow - 1);                 // 13533
            if (el.firstChild)                                                                                         // 13534
                el.insertBefore(fragment, el.firstChild);                                                              // 13535
            else                                                                                                       // 13536
                el.appendChild(fragment);                                                                              // 13537
        }                                                                                                              // 13538
                                                                                                                       // 13539
        if (config.lastRow > oldConfig.lastRow) {                                                                      // 13540
            var fragment = this.$renderLinesFragment(config, oldConfig.lastRow + 1, config.lastRow);                   // 13541
            el.appendChild(fragment);                                                                                  // 13542
        }                                                                                                              // 13543
    };                                                                                                                 // 13544
                                                                                                                       // 13545
    this.$renderLinesFragment = function(config, firstRow, lastRow) {                                                  // 13546
        var fragment = this.element.ownerDocument.createDocumentFragment();                                            // 13547
        var row = firstRow;                                                                                            // 13548
        var foldLine = this.session.getNextFoldLine(row);                                                              // 13549
        var foldStart = foldLine ? foldLine.start.row : Infinity;                                                      // 13550
                                                                                                                       // 13551
        while (true) {                                                                                                 // 13552
            if (row > foldStart) {                                                                                     // 13553
                row = foldLine.end.row+1;                                                                              // 13554
                foldLine = this.session.getNextFoldLine(row, foldLine);                                                // 13555
                foldStart = foldLine ? foldLine.start.row : Infinity;                                                  // 13556
            }                                                                                                          // 13557
            if (row > lastRow)                                                                                         // 13558
                break;                                                                                                 // 13559
                                                                                                                       // 13560
            var container = dom.createElement("div");                                                                  // 13561
                                                                                                                       // 13562
            var html = [];                                                                                             // 13563
            this.$renderLine(html, row, false, row == foldStart ? foldLine : false);                                   // 13564
            container.innerHTML = html.join("");                                                                       // 13565
            if (this.$useLineGroups()) {                                                                               // 13566
                container.className = 'ace_line_group';                                                                // 13567
                fragment.appendChild(container);                                                                       // 13568
                container.style.height = config.lineHeight * this.session.getRowLength(row) + "px";                    // 13569
                                                                                                                       // 13570
            } else {                                                                                                   // 13571
                while(container.firstChild)                                                                            // 13572
                    fragment.appendChild(container.firstChild);                                                        // 13573
            }                                                                                                          // 13574
                                                                                                                       // 13575
            row++;                                                                                                     // 13576
        }                                                                                                              // 13577
        return fragment;                                                                                               // 13578
    };                                                                                                                 // 13579
                                                                                                                       // 13580
    this.update = function(config) {                                                                                   // 13581
        this.config = config;                                                                                          // 13582
                                                                                                                       // 13583
        var html = [];                                                                                                 // 13584
        var firstRow = config.firstRow, lastRow = config.lastRow;                                                      // 13585
                                                                                                                       // 13586
        var row = firstRow;                                                                                            // 13587
        var foldLine = this.session.getNextFoldLine(row);                                                              // 13588
        var foldStart = foldLine ? foldLine.start.row : Infinity;                                                      // 13589
                                                                                                                       // 13590
        while (true) {                                                                                                 // 13591
            if (row > foldStart) {                                                                                     // 13592
                row = foldLine.end.row+1;                                                                              // 13593
                foldLine = this.session.getNextFoldLine(row, foldLine);                                                // 13594
                foldStart = foldLine ? foldLine.start.row :Infinity;                                                   // 13595
            }                                                                                                          // 13596
            if (row > lastRow)                                                                                         // 13597
                break;                                                                                                 // 13598
                                                                                                                       // 13599
            if (this.$useLineGroups())                                                                                 // 13600
                html.push("<div class='ace_line_group' style='height:", config.lineHeight*this.session.getRowLength(row), "px'>")
                                                                                                                       // 13602
            this.$renderLine(html, row, false, row == foldStart ? foldLine : false);                                   // 13603
                                                                                                                       // 13604
            if (this.$useLineGroups())                                                                                 // 13605
                html.push("</div>"); // end the line group                                                             // 13606
                                                                                                                       // 13607
            row++;                                                                                                     // 13608
        }                                                                                                              // 13609
        this.element.innerHTML = html.join("");                                                                        // 13610
    };                                                                                                                 // 13611
                                                                                                                       // 13612
    this.$textToken = {                                                                                                // 13613
        "text": true,                                                                                                  // 13614
        "rparen": true,                                                                                                // 13615
        "lparen": true                                                                                                 // 13616
    };                                                                                                                 // 13617
                                                                                                                       // 13618
    this.$renderToken = function(stringBuilder, screenColumn, token, value) {                                          // 13619
        var self = this;                                                                                               // 13620
        var replaceReg = /\t|&|<|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g;
        var replaceFunc = function(c, a, b, tabIdx, idx4) {                                                            // 13622
            if (a) {                                                                                                   // 13623
                return self.showInvisibles ?                                                                           // 13624
                    "<span class='ace_invisible ace_invisible_space'>" + lang.stringRepeat(self.SPACE_CHAR, c.length) + "</span>" :
                    lang.stringRepeat("\xa0", c.length);                                                               // 13626
            } else if (c == "&") {                                                                                     // 13627
                return "&#38;";                                                                                        // 13628
            } else if (c == "<") {                                                                                     // 13629
                return "&#60;";                                                                                        // 13630
            } else if (c == "\t") {                                                                                    // 13631
                var tabSize = self.session.getScreenTabSize(screenColumn + tabIdx);                                    // 13632
                screenColumn += tabSize - 1;                                                                           // 13633
                return self.$tabStrings[tabSize];                                                                      // 13634
            } else if (c == "\u3000") {                                                                                // 13635
                var classToUse = self.showInvisibles ? "ace_cjk ace_invisible ace_invisible_space" : "ace_cjk";        // 13636
                var space = self.showInvisibles ? self.SPACE_CHAR : "";                                                // 13637
                screenColumn += 1;                                                                                     // 13638
                return "<span class='" + classToUse + "' style='width:" +                                              // 13639
                    (self.config.characterWidth * 2) +                                                                 // 13640
                    "px'>" + space + "</span>";                                                                        // 13641
            } else if (b) {                                                                                            // 13642
                return "<span class='ace_invisible ace_invisible_space ace_invalid'>" + self.SPACE_CHAR + "</span>";   // 13643
            } else {                                                                                                   // 13644
                screenColumn += 1;                                                                                     // 13645
                return "<span class='ace_cjk' style='width:" +                                                         // 13646
                    (self.config.characterWidth * 2) +                                                                 // 13647
                    "px'>" + c + "</span>";                                                                            // 13648
            }                                                                                                          // 13649
        };                                                                                                             // 13650
                                                                                                                       // 13651
        var output = value.replace(replaceReg, replaceFunc);                                                           // 13652
                                                                                                                       // 13653
        if (!this.$textToken[token.type]) {                                                                            // 13654
            var classes = "ace_" + token.type.replace(/\./g, " ace_");                                                 // 13655
            var style = "";                                                                                            // 13656
            if (token.type == "fold")                                                                                  // 13657
                style = " style='width:" + (token.value.length * this.config.characterWidth) + "px;' ";                // 13658
            stringBuilder.push("<span class='", classes, "'", style, ">", output, "</span>");                          // 13659
        }                                                                                                              // 13660
        else {                                                                                                         // 13661
            stringBuilder.push(output);                                                                                // 13662
        }                                                                                                              // 13663
        return screenColumn + value.length;                                                                            // 13664
    };                                                                                                                 // 13665
                                                                                                                       // 13666
    this.renderIndentGuide = function(stringBuilder, value, max) {                                                     // 13667
        var cols = value.search(this.$indentGuideRe);                                                                  // 13668
        if (cols <= 0 || cols >= max)                                                                                  // 13669
            return value;                                                                                              // 13670
        if (value[0] == " ") {                                                                                         // 13671
            cols -= cols % this.tabSize;                                                                               // 13672
            stringBuilder.push(lang.stringRepeat(this.$tabStrings[" "], cols/this.tabSize));                           // 13673
            return value.substr(cols);                                                                                 // 13674
        } else if (value[0] == "\t") {                                                                                 // 13675
            stringBuilder.push(lang.stringRepeat(this.$tabStrings["\t"], cols));                                       // 13676
            return value.substr(cols);                                                                                 // 13677
        }                                                                                                              // 13678
        return value;                                                                                                  // 13679
    };                                                                                                                 // 13680
                                                                                                                       // 13681
    this.$renderWrappedLine = function(stringBuilder, tokens, splits, onlyContents) {                                  // 13682
        var chars = 0;                                                                                                 // 13683
        var split = 0;                                                                                                 // 13684
        var splitChars = splits[0];                                                                                    // 13685
        var screenColumn = 0;                                                                                          // 13686
                                                                                                                       // 13687
        for (var i = 0; i < tokens.length; i++) {                                                                      // 13688
            var token = tokens[i];                                                                                     // 13689
            var value = token.value;                                                                                   // 13690
            if (i == 0 && this.displayIndentGuides) {                                                                  // 13691
                chars = value.length;                                                                                  // 13692
                value = this.renderIndentGuide(stringBuilder, value, splitChars);                                      // 13693
                if (!value)                                                                                            // 13694
                    continue;                                                                                          // 13695
                chars -= value.length;                                                                                 // 13696
            }                                                                                                          // 13697
                                                                                                                       // 13698
            if (chars + value.length < splitChars) {                                                                   // 13699
                screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);                           // 13700
                chars += value.length;                                                                                 // 13701
            } else {                                                                                                   // 13702
                while (chars + value.length >= splitChars) {                                                           // 13703
                    screenColumn = this.$renderToken(                                                                  // 13704
                        stringBuilder, screenColumn,                                                                   // 13705
                        token, value.substring(0, splitChars - chars)                                                  // 13706
                    );                                                                                                 // 13707
                    value = value.substring(splitChars - chars);                                                       // 13708
                    chars = splitChars;                                                                                // 13709
                                                                                                                       // 13710
                    if (!onlyContents) {                                                                               // 13711
                        stringBuilder.push("</div>",                                                                   // 13712
                            "<div class='ace_line' style='height:",                                                    // 13713
                            this.config.lineHeight, "px'>"                                                             // 13714
                        );                                                                                             // 13715
                    }                                                                                                  // 13716
                                                                                                                       // 13717
                    split ++;                                                                                          // 13718
                    screenColumn = 0;                                                                                  // 13719
                    splitChars = splits[split] || Number.MAX_VALUE;                                                    // 13720
                }                                                                                                      // 13721
                if (value.length != 0) {                                                                               // 13722
                    chars += value.length;                                                                             // 13723
                    screenColumn = this.$renderToken(                                                                  // 13724
                        stringBuilder, screenColumn, token, value                                                      // 13725
                    );                                                                                                 // 13726
                }                                                                                                      // 13727
            }                                                                                                          // 13728
        }                                                                                                              // 13729
    };                                                                                                                 // 13730
                                                                                                                       // 13731
    this.$renderSimpleLine = function(stringBuilder, tokens) {                                                         // 13732
        var screenColumn = 0;                                                                                          // 13733
        var token = tokens[0];                                                                                         // 13734
        var value = token.value;                                                                                       // 13735
        if (this.displayIndentGuides)                                                                                  // 13736
            value = this.renderIndentGuide(stringBuilder, value);                                                      // 13737
        if (value)                                                                                                     // 13738
            screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);                               // 13739
        for (var i = 1; i < tokens.length; i++) {                                                                      // 13740
            token = tokens[i];                                                                                         // 13741
            value = token.value;                                                                                       // 13742
            screenColumn = this.$renderToken(stringBuilder, screenColumn, token, value);                               // 13743
        }                                                                                                              // 13744
    };                                                                                                                 // 13745
    this.$renderLine = function(stringBuilder, row, onlyContents, foldLine) {                                          // 13746
        if (!foldLine && foldLine != false)                                                                            // 13747
            foldLine = this.session.getFoldLine(row);                                                                  // 13748
                                                                                                                       // 13749
        if (foldLine)                                                                                                  // 13750
            var tokens = this.$getFoldLineTokens(row, foldLine);                                                       // 13751
        else                                                                                                           // 13752
            var tokens = this.session.getTokens(row);                                                                  // 13753
                                                                                                                       // 13754
                                                                                                                       // 13755
        if (!onlyContents) {                                                                                           // 13756
            stringBuilder.push(                                                                                        // 13757
                "<div class='ace_line' style='height:",                                                                // 13758
                    this.config.lineHeight * (                                                                         // 13759
                        this.$useLineGroups() ? 1 :this.session.getRowLength(row)                                      // 13760
                    ), "px'>"                                                                                          // 13761
            );                                                                                                         // 13762
        }                                                                                                              // 13763
                                                                                                                       // 13764
        if (tokens.length) {                                                                                           // 13765
            var splits = this.session.getRowSplitData(row);                                                            // 13766
            if (splits && splits.length)                                                                               // 13767
                this.$renderWrappedLine(stringBuilder, tokens, splits, onlyContents);                                  // 13768
            else                                                                                                       // 13769
                this.$renderSimpleLine(stringBuilder, tokens);                                                         // 13770
        }                                                                                                              // 13771
                                                                                                                       // 13772
        if (this.showInvisibles) {                                                                                     // 13773
            if (foldLine)                                                                                              // 13774
                row = foldLine.end.row                                                                                 // 13775
                                                                                                                       // 13776
            stringBuilder.push(                                                                                        // 13777
                "<span class='ace_invisible ace_invisible_eol'>",                                                      // 13778
                row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR,                                   // 13779
                "</span>"                                                                                              // 13780
            );                                                                                                         // 13781
        }                                                                                                              // 13782
        if (!onlyContents)                                                                                             // 13783
            stringBuilder.push("</div>");                                                                              // 13784
    };                                                                                                                 // 13785
                                                                                                                       // 13786
    this.$getFoldLineTokens = function(row, foldLine) {                                                                // 13787
        var session = this.session;                                                                                    // 13788
        var renderTokens = [];                                                                                         // 13789
                                                                                                                       // 13790
        function addTokens(tokens, from, to) {                                                                         // 13791
            var idx = 0, col = 0;                                                                                      // 13792
            while ((col + tokens[idx].value.length) < from) {                                                          // 13793
                col += tokens[idx].value.length;                                                                       // 13794
                idx++;                                                                                                 // 13795
                                                                                                                       // 13796
                if (idx == tokens.length)                                                                              // 13797
                    return;                                                                                            // 13798
            }                                                                                                          // 13799
            if (col != from) {                                                                                         // 13800
                var value = tokens[idx].value.substring(from - col);                                                   // 13801
                if (value.length > (to - from))                                                                        // 13802
                    value = value.substring(0, to - from);                                                             // 13803
                                                                                                                       // 13804
                renderTokens.push({                                                                                    // 13805
                    type: tokens[idx].type,                                                                            // 13806
                    value: value                                                                                       // 13807
                });                                                                                                    // 13808
                                                                                                                       // 13809
                col = from + value.length;                                                                             // 13810
                idx += 1;                                                                                              // 13811
            }                                                                                                          // 13812
                                                                                                                       // 13813
            while (col < to && idx < tokens.length) {                                                                  // 13814
                var value = tokens[idx].value;                                                                         // 13815
                if (value.length + col > to) {                                                                         // 13816
                    renderTokens.push({                                                                                // 13817
                        type: tokens[idx].type,                                                                        // 13818
                        value: value.substring(0, to - col)                                                            // 13819
                    });                                                                                                // 13820
                } else                                                                                                 // 13821
                    renderTokens.push(tokens[idx]);                                                                    // 13822
                col += value.length;                                                                                   // 13823
                idx += 1;                                                                                              // 13824
            }                                                                                                          // 13825
        }                                                                                                              // 13826
                                                                                                                       // 13827
        var tokens = session.getTokens(row);                                                                           // 13828
        foldLine.walk(function(placeholder, row, column, lastColumn, isNewRow) {                                       // 13829
            if (placeholder != null) {                                                                                 // 13830
                renderTokens.push({                                                                                    // 13831
                    type: "fold",                                                                                      // 13832
                    value: placeholder                                                                                 // 13833
                });                                                                                                    // 13834
            } else {                                                                                                   // 13835
                if (isNewRow)                                                                                          // 13836
                    tokens = session.getTokens(row);                                                                   // 13837
                                                                                                                       // 13838
                if (tokens.length)                                                                                     // 13839
                    addTokens(tokens, lastColumn, column);                                                             // 13840
            }                                                                                                          // 13841
        }, foldLine.end.row, this.session.getLine(foldLine.end.row).length);                                           // 13842
                                                                                                                       // 13843
        return renderTokens;                                                                                           // 13844
    };                                                                                                                 // 13845
                                                                                                                       // 13846
    this.$useLineGroups = function() {                                                                                 // 13847
        return this.session.getUseWrapMode();                                                                          // 13848
    };                                                                                                                 // 13849
                                                                                                                       // 13850
    this.destroy = function() {                                                                                        // 13851
        clearInterval(this.$pollSizeChangesTimer);                                                                     // 13852
        if (this.$measureNode)                                                                                         // 13853
            this.$measureNode.parentNode.removeChild(this.$measureNode);                                               // 13854
        delete this.$measureNode;                                                                                      // 13855
    };                                                                                                                 // 13856
                                                                                                                       // 13857
}).call(Text.prototype);                                                                                               // 13858
                                                                                                                       // 13859
exports.Text = Text;                                                                                                   // 13860
                                                                                                                       // 13861
});                                                                                                                    // 13862
                                                                                                                       // 13863
define("ace/layer/cursor",["require","exports","module","ace/lib/dom"], function(require, exports, module) {           // 13864
"use strict";                                                                                                          // 13865
                                                                                                                       // 13866
var dom = require("../lib/dom");                                                                                       // 13867
var IE8;                                                                                                               // 13868
                                                                                                                       // 13869
var Cursor = function(parentEl) {                                                                                      // 13870
    this.element = dom.createElement("div");                                                                           // 13871
    this.element.className = "ace_layer ace_cursor-layer";                                                             // 13872
    parentEl.appendChild(this.element);                                                                                // 13873
                                                                                                                       // 13874
    if (IE8 === undefined)                                                                                             // 13875
        IE8 = "opacity" in this.element;                                                                               // 13876
                                                                                                                       // 13877
    this.isVisible = false;                                                                                            // 13878
    this.isBlinking = true;                                                                                            // 13879
    this.blinkInterval = 1000;                                                                                         // 13880
    this.smoothBlinking = false;                                                                                       // 13881
                                                                                                                       // 13882
    this.cursors = [];                                                                                                 // 13883
    this.cursor = this.addCursor();                                                                                    // 13884
    dom.addCssClass(this.element, "ace_hidden-cursors");                                                               // 13885
    this.$updateCursors = this.$updateVisibility.bind(this);                                                           // 13886
};                                                                                                                     // 13887
                                                                                                                       // 13888
(function() {                                                                                                          // 13889
                                                                                                                       // 13890
    this.$updateVisibility = function(val) {                                                                           // 13891
        var cursors = this.cursors;                                                                                    // 13892
        for (var i = cursors.length; i--; )                                                                            // 13893
            cursors[i].style.visibility = val ? "" : "hidden";                                                         // 13894
    };                                                                                                                 // 13895
    this.$updateOpacity = function(val) {                                                                              // 13896
        var cursors = this.cursors;                                                                                    // 13897
        for (var i = cursors.length; i--; )                                                                            // 13898
            cursors[i].style.opacity = val ? "" : "0";                                                                 // 13899
    };                                                                                                                 // 13900
                                                                                                                       // 13901
                                                                                                                       // 13902
    this.$padding = 0;                                                                                                 // 13903
    this.setPadding = function(padding) {                                                                              // 13904
        this.$padding = padding;                                                                                       // 13905
    };                                                                                                                 // 13906
                                                                                                                       // 13907
    this.setSession = function(session) {                                                                              // 13908
        this.session = session;                                                                                        // 13909
    };                                                                                                                 // 13910
                                                                                                                       // 13911
    this.setBlinking = function(blinking) {                                                                            // 13912
        if (blinking != this.isBlinking){                                                                              // 13913
            this.isBlinking = blinking;                                                                                // 13914
            this.restartTimer();                                                                                       // 13915
        }                                                                                                              // 13916
    };                                                                                                                 // 13917
                                                                                                                       // 13918
    this.setBlinkInterval = function(blinkInterval) {                                                                  // 13919
        if (blinkInterval != this.blinkInterval){                                                                      // 13920
            this.blinkInterval = blinkInterval;                                                                        // 13921
            this.restartTimer();                                                                                       // 13922
        }                                                                                                              // 13923
    };                                                                                                                 // 13924
                                                                                                                       // 13925
    this.setSmoothBlinking = function(smoothBlinking) {                                                                // 13926
        if (smoothBlinking != this.smoothBlinking && !IE8) {                                                           // 13927
            this.smoothBlinking = smoothBlinking;                                                                      // 13928
            dom.setCssClass(this.element, "ace_smooth-blinking", smoothBlinking);                                      // 13929
            this.$updateCursors(true);                                                                                 // 13930
            this.$updateCursors = (smoothBlinking                                                                      // 13931
                ? this.$updateOpacity                                                                                  // 13932
                : this.$updateVisibility).bind(this);                                                                  // 13933
            this.restartTimer();                                                                                       // 13934
        }                                                                                                              // 13935
    };                                                                                                                 // 13936
                                                                                                                       // 13937
    this.addCursor = function() {                                                                                      // 13938
        var el = dom.createElement("div");                                                                             // 13939
        el.className = "ace_cursor";                                                                                   // 13940
        this.element.appendChild(el);                                                                                  // 13941
        this.cursors.push(el);                                                                                         // 13942
        return el;                                                                                                     // 13943
    };                                                                                                                 // 13944
                                                                                                                       // 13945
    this.removeCursor = function() {                                                                                   // 13946
        if (this.cursors.length > 1) {                                                                                 // 13947
            var el = this.cursors.pop();                                                                               // 13948
            el.parentNode.removeChild(el);                                                                             // 13949
            return el;                                                                                                 // 13950
        }                                                                                                              // 13951
    };                                                                                                                 // 13952
                                                                                                                       // 13953
    this.hideCursor = function() {                                                                                     // 13954
        this.isVisible = false;                                                                                        // 13955
        dom.addCssClass(this.element, "ace_hidden-cursors");                                                           // 13956
        this.restartTimer();                                                                                           // 13957
    };                                                                                                                 // 13958
                                                                                                                       // 13959
    this.showCursor = function() {                                                                                     // 13960
        this.isVisible = true;                                                                                         // 13961
        dom.removeCssClass(this.element, "ace_hidden-cursors");                                                        // 13962
        this.restartTimer();                                                                                           // 13963
    };                                                                                                                 // 13964
                                                                                                                       // 13965
    this.restartTimer = function() {                                                                                   // 13966
        var update = this.$updateCursors;                                                                              // 13967
        clearInterval(this.intervalId);                                                                                // 13968
        clearTimeout(this.timeoutId);                                                                                  // 13969
        if (this.smoothBlinking) {                                                                                     // 13970
            dom.removeCssClass(this.element, "ace_smooth-blinking");                                                   // 13971
        }                                                                                                              // 13972
                                                                                                                       // 13973
        update(true);                                                                                                  // 13974
                                                                                                                       // 13975
        if (!this.isBlinking || !this.blinkInterval || !this.isVisible)                                                // 13976
            return;                                                                                                    // 13977
                                                                                                                       // 13978
        if (this.smoothBlinking) {                                                                                     // 13979
            setTimeout(function(){                                                                                     // 13980
                dom.addCssClass(this.element, "ace_smooth-blinking");                                                  // 13981
            }.bind(this));                                                                                             // 13982
        }                                                                                                              // 13983
                                                                                                                       // 13984
        var blink = function(){                                                                                        // 13985
            this.timeoutId = setTimeout(function() {                                                                   // 13986
                update(false);                                                                                         // 13987
            }, 0.6 * this.blinkInterval);                                                                              // 13988
        }.bind(this);                                                                                                  // 13989
                                                                                                                       // 13990
        this.intervalId = setInterval(function() {                                                                     // 13991
            update(true);                                                                                              // 13992
            blink();                                                                                                   // 13993
        }, this.blinkInterval);                                                                                        // 13994
                                                                                                                       // 13995
        blink();                                                                                                       // 13996
    };                                                                                                                 // 13997
                                                                                                                       // 13998
    this.getPixelPosition = function(position, onScreen) {                                                             // 13999
        if (!this.config || !this.session)                                                                             // 14000
            return {left : 0, top : 0};                                                                                // 14001
                                                                                                                       // 14002
        if (!position)                                                                                                 // 14003
            position = this.session.selection.getCursor();                                                             // 14004
        var pos = this.session.documentToScreenPosition(position);                                                     // 14005
        var cursorLeft = this.$padding + pos.column * this.config.characterWidth;                                      // 14006
        var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) *                                      // 14007
            this.config.lineHeight;                                                                                    // 14008
                                                                                                                       // 14009
        return {left : cursorLeft, top : cursorTop};                                                                   // 14010
    };                                                                                                                 // 14011
                                                                                                                       // 14012
    this.update = function(config) {                                                                                   // 14013
        this.config = config;                                                                                          // 14014
                                                                                                                       // 14015
        var selections = this.session.$selectionMarkers;                                                               // 14016
        var i = 0, cursorIndex = 0;                                                                                    // 14017
                                                                                                                       // 14018
        if (selections === undefined || selections.length === 0){                                                      // 14019
            selections = [{cursor: null}];                                                                             // 14020
        }                                                                                                              // 14021
                                                                                                                       // 14022
        for (var i = 0, n = selections.length; i < n; i++) {                                                           // 14023
            var pixelPos = this.getPixelPosition(selections[i].cursor, true);                                          // 14024
            if ((pixelPos.top > config.height + config.offset ||                                                       // 14025
                 pixelPos.top < 0) && i > 1) {                                                                         // 14026
                continue;                                                                                              // 14027
            }                                                                                                          // 14028
                                                                                                                       // 14029
            var style = (this.cursors[cursorIndex++] || this.addCursor()).style;                                       // 14030
                                                                                                                       // 14031
            style.left = pixelPos.left + "px";                                                                         // 14032
            style.top = pixelPos.top + "px";                                                                           // 14033
            style.width = config.characterWidth + "px";                                                                // 14034
            style.height = config.lineHeight + "px";                                                                   // 14035
        }                                                                                                              // 14036
        while (this.cursors.length > cursorIndex)                                                                      // 14037
            this.removeCursor();                                                                                       // 14038
                                                                                                                       // 14039
        var overwrite = this.session.getOverwrite();                                                                   // 14040
        this.$setOverwrite(overwrite);                                                                                 // 14041
        this.$pixelPos = pixelPos;                                                                                     // 14042
        this.restartTimer();                                                                                           // 14043
    };                                                                                                                 // 14044
                                                                                                                       // 14045
    this.$setOverwrite = function(overwrite) {                                                                         // 14046
        if (overwrite != this.overwrite) {                                                                             // 14047
            this.overwrite = overwrite;                                                                                // 14048
            if (overwrite)                                                                                             // 14049
                dom.addCssClass(this.element, "ace_overwrite-cursors");                                                // 14050
            else                                                                                                       // 14051
                dom.removeCssClass(this.element, "ace_overwrite-cursors");                                             // 14052
        }                                                                                                              // 14053
    };                                                                                                                 // 14054
                                                                                                                       // 14055
    this.destroy = function() {                                                                                        // 14056
        clearInterval(this.intervalId);                                                                                // 14057
        clearTimeout(this.timeoutId);                                                                                  // 14058
    };                                                                                                                 // 14059
                                                                                                                       // 14060
}).call(Cursor.prototype);                                                                                             // 14061
                                                                                                                       // 14062
exports.Cursor = Cursor;                                                                                               // 14063
                                                                                                                       // 14064
});                                                                                                                    // 14065
                                                                                                                       // 14066
define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 14068
                                                                                                                       // 14069
var oop = require("./lib/oop");                                                                                        // 14070
var dom = require("./lib/dom");                                                                                        // 14071
var event = require("./lib/event");                                                                                    // 14072
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 14073
var ScrollBar = function(parent) {                                                                                     // 14074
    this.element = dom.createElement("div");                                                                           // 14075
    this.element.className = "ace_scrollbar ace_scrollbar" + this.classSuffix;                                         // 14076
                                                                                                                       // 14077
    this.inner = dom.createElement("div");                                                                             // 14078
    this.inner.className = "ace_scrollbar-inner";                                                                      // 14079
    this.element.appendChild(this.inner);                                                                              // 14080
                                                                                                                       // 14081
    parent.appendChild(this.element);                                                                                  // 14082
                                                                                                                       // 14083
    this.setVisible(false);                                                                                            // 14084
    this.skipEvent = false;                                                                                            // 14085
                                                                                                                       // 14086
    event.addListener(this.element, "scroll", this.onScroll.bind(this));                                               // 14087
    event.addListener(this.element, "mousedown", event.preventDefault);                                                // 14088
};                                                                                                                     // 14089
                                                                                                                       // 14090
(function() {                                                                                                          // 14091
    oop.implement(this, EventEmitter);                                                                                 // 14092
                                                                                                                       // 14093
    this.setVisible = function(isVisible) {                                                                            // 14094
        this.element.style.display = isVisible ? "" : "none";                                                          // 14095
        this.isVisible = isVisible;                                                                                    // 14096
    };                                                                                                                 // 14097
}).call(ScrollBar.prototype);                                                                                          // 14098
var VScrollBar = function(parent, renderer) {                                                                          // 14099
    ScrollBar.call(this, parent);                                                                                      // 14100
    this.scrollTop = 0;                                                                                                // 14101
    renderer.$scrollbarWidth =                                                                                         // 14102
    this.width = dom.scrollbarWidth(parent.ownerDocument);                                                             // 14103
    this.inner.style.width =                                                                                           // 14104
    this.element.style.width = (this.width || 15) + 5 + "px";                                                          // 14105
};                                                                                                                     // 14106
                                                                                                                       // 14107
oop.inherits(VScrollBar, ScrollBar);                                                                                   // 14108
                                                                                                                       // 14109
(function() {                                                                                                          // 14110
                                                                                                                       // 14111
    this.classSuffix = '-v';                                                                                           // 14112
    this.onScroll = function() {                                                                                       // 14113
        if (!this.skipEvent) {                                                                                         // 14114
            this.scrollTop = this.element.scrollTop;                                                                   // 14115
            this._emit("scroll", {data: this.scrollTop});                                                              // 14116
        }                                                                                                              // 14117
        this.skipEvent = false;                                                                                        // 14118
    };                                                                                                                 // 14119
    this.getWidth = function() {                                                                                       // 14120
        return this.isVisible ? this.width : 0;                                                                        // 14121
    };                                                                                                                 // 14122
    this.setHeight = function(height) {                                                                                // 14123
        this.element.style.height = height + "px";                                                                     // 14124
    };                                                                                                                 // 14125
    this.setInnerHeight = function(height) {                                                                           // 14126
        this.inner.style.height = height + "px";                                                                       // 14127
    };                                                                                                                 // 14128
    this.setScrollHeight = function(height) {                                                                          // 14129
        this.inner.style.height = height + "px";                                                                       // 14130
    };                                                                                                                 // 14131
    this.setScrollTop = function(scrollTop) {                                                                          // 14132
        if (this.scrollTop != scrollTop) {                                                                             // 14133
            this.skipEvent = true;                                                                                     // 14134
            this.scrollTop = this.element.scrollTop = scrollTop;                                                       // 14135
        }                                                                                                              // 14136
    };                                                                                                                 // 14137
                                                                                                                       // 14138
}).call(VScrollBar.prototype);                                                                                         // 14139
var HScrollBar = function(parent, renderer) {                                                                          // 14140
    ScrollBar.call(this, parent);                                                                                      // 14141
    this.scrollLeft = 0;                                                                                               // 14142
    this.height = renderer.$scrollbarWidth;                                                                            // 14143
    this.inner.style.height =                                                                                          // 14144
    this.element.style.height = (this.height || 15) + 5 + "px";                                                        // 14145
};                                                                                                                     // 14146
                                                                                                                       // 14147
oop.inherits(HScrollBar, ScrollBar);                                                                                   // 14148
                                                                                                                       // 14149
(function() {                                                                                                          // 14150
                                                                                                                       // 14151
    this.classSuffix = '-h';                                                                                           // 14152
    this.onScroll = function() {                                                                                       // 14153
        if (!this.skipEvent) {                                                                                         // 14154
            this.scrollLeft = this.element.scrollLeft;                                                                 // 14155
            this._emit("scroll", {data: this.scrollLeft});                                                             // 14156
        }                                                                                                              // 14157
        this.skipEvent = false;                                                                                        // 14158
    };                                                                                                                 // 14159
    this.getHeight = function() {                                                                                      // 14160
        return this.isVisible ? this.height : 0;                                                                       // 14161
    };                                                                                                                 // 14162
    this.setWidth = function(width) {                                                                                  // 14163
        this.element.style.width = width + "px";                                                                       // 14164
    };                                                                                                                 // 14165
    this.setInnerWidth = function(width) {                                                                             // 14166
        this.inner.style.width = width + "px";                                                                         // 14167
    };                                                                                                                 // 14168
    this.setScrollWidth = function(width) {                                                                            // 14169
        this.inner.style.width = width + "px";                                                                         // 14170
    };                                                                                                                 // 14171
    this.setScrollLeft = function(scrollLeft) {                                                                        // 14172
        if (this.scrollLeft != scrollLeft) {                                                                           // 14173
            this.skipEvent = true;                                                                                     // 14174
            this.scrollLeft = this.element.scrollLeft = scrollLeft;                                                    // 14175
        }                                                                                                              // 14176
    };                                                                                                                 // 14177
                                                                                                                       // 14178
}).call(HScrollBar.prototype);                                                                                         // 14179
                                                                                                                       // 14180
                                                                                                                       // 14181
exports.ScrollBar = VScrollBar; // backward compatibility                                                              // 14182
exports.ScrollBarV = VScrollBar; // backward compatibility                                                             // 14183
exports.ScrollBarH = HScrollBar; // backward compatibility                                                             // 14184
                                                                                                                       // 14185
exports.VScrollBar = VScrollBar;                                                                                       // 14186
exports.HScrollBar = HScrollBar;                                                                                       // 14187
});                                                                                                                    // 14188
                                                                                                                       // 14189
define("ace/renderloop",["require","exports","module","ace/lib/event"], function(require, exports, module) {           // 14190
"use strict";                                                                                                          // 14191
                                                                                                                       // 14192
var event = require("./lib/event");                                                                                    // 14193
                                                                                                                       // 14194
                                                                                                                       // 14195
var RenderLoop = function(onRender, win) {                                                                             // 14196
    this.onRender = onRender;                                                                                          // 14197
    this.pending = false;                                                                                              // 14198
    this.changes = 0;                                                                                                  // 14199
    this.window = win || window;                                                                                       // 14200
};                                                                                                                     // 14201
                                                                                                                       // 14202
(function() {                                                                                                          // 14203
                                                                                                                       // 14204
                                                                                                                       // 14205
    this.schedule = function(change) {                                                                                 // 14206
        this.changes = this.changes | change;                                                                          // 14207
        if (!this.pending && this.changes) {                                                                           // 14208
            this.pending = true;                                                                                       // 14209
            var _self = this;                                                                                          // 14210
            event.nextFrame(function() {                                                                               // 14211
                _self.pending = false;                                                                                 // 14212
                var changes;                                                                                           // 14213
                while (changes = _self.changes) {                                                                      // 14214
                    _self.changes = 0;                                                                                 // 14215
                    _self.onRender(changes);                                                                           // 14216
                }                                                                                                      // 14217
            }, this.window);                                                                                           // 14218
        }                                                                                                              // 14219
    };                                                                                                                 // 14220
                                                                                                                       // 14221
}).call(RenderLoop.prototype);                                                                                         // 14222
                                                                                                                       // 14223
exports.RenderLoop = RenderLoop;                                                                                       // 14224
});                                                                                                                    // 14225
                                                                                                                       // 14226
define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"], function(require, exports, module) {
                                                                                                                       // 14228
var oop = require("../lib/oop");                                                                                       // 14229
var dom = require("../lib/dom");                                                                                       // 14230
var lang = require("../lib/lang");                                                                                     // 14231
var useragent = require("../lib/useragent");                                                                           // 14232
var EventEmitter = require("../lib/event_emitter").EventEmitter;                                                       // 14233
                                                                                                                       // 14234
var CHAR_COUNT = 0;                                                                                                    // 14235
                                                                                                                       // 14236
var FontMetrics = exports.FontMetrics = function(parentEl, interval) {                                                 // 14237
    this.el = dom.createElement("div");                                                                                // 14238
    this.$setMeasureNodeStyles(this.el.style, true);                                                                   // 14239
                                                                                                                       // 14240
    this.$main = dom.createElement("div");                                                                             // 14241
    this.$setMeasureNodeStyles(this.$main.style);                                                                      // 14242
                                                                                                                       // 14243
    this.$measureNode = dom.createElement("div");                                                                      // 14244
    this.$setMeasureNodeStyles(this.$measureNode.style);                                                               // 14245
                                                                                                                       // 14246
                                                                                                                       // 14247
    this.el.appendChild(this.$main);                                                                                   // 14248
    this.el.appendChild(this.$measureNode);                                                                            // 14249
    parentEl.appendChild(this.el);                                                                                     // 14250
                                                                                                                       // 14251
    if (!CHAR_COUNT)                                                                                                   // 14252
        this.$testFractionalRect();                                                                                    // 14253
    this.$measureNode.innerHTML = lang.stringRepeat("X", CHAR_COUNT);                                                  // 14254
                                                                                                                       // 14255
    this.$characterSize = {width: 0, height: 0};                                                                       // 14256
    this.checkForSizeChanges();                                                                                        // 14257
};                                                                                                                     // 14258
                                                                                                                       // 14259
(function() {                                                                                                          // 14260
                                                                                                                       // 14261
    oop.implement(this, EventEmitter);                                                                                 // 14262
                                                                                                                       // 14263
    this.$characterSize = {width: 0, height: 0};                                                                       // 14264
                                                                                                                       // 14265
    this.$testFractionalRect = function() {                                                                            // 14266
        var el = dom.createElement("div");                                                                             // 14267
        this.$setMeasureNodeStyles(el.style);                                                                          // 14268
        el.style.width = "0.2px";                                                                                      // 14269
        document.documentElement.appendChild(el);                                                                      // 14270
        var w = el.getBoundingClientRect().width;                                                                      // 14271
        if (w > 0 && w < 1)                                                                                            // 14272
            CHAR_COUNT = 50;                                                                                           // 14273
        else                                                                                                           // 14274
            CHAR_COUNT = 100;                                                                                          // 14275
        el.parentNode.removeChild(el);                                                                                 // 14276
    };                                                                                                                 // 14277
                                                                                                                       // 14278
    this.$setMeasureNodeStyles = function(style, isRoot) {                                                             // 14279
        style.width = style.height = "auto";                                                                           // 14280
        style.left = style.top = "-100px";                                                                             // 14281
        style.visibility = "hidden";                                                                                   // 14282
        style.position = "fixed";                                                                                      // 14283
        style.whiteSpace = "pre";                                                                                      // 14284
                                                                                                                       // 14285
        if (useragent.isIE < 8) {                                                                                      // 14286
            style["font-family"] = "inherit";                                                                          // 14287
        } else {                                                                                                       // 14288
            style.font = "inherit";                                                                                    // 14289
        }                                                                                                              // 14290
        style.overflow = isRoot ? "hidden" : "visible";                                                                // 14291
    };                                                                                                                 // 14292
                                                                                                                       // 14293
    this.checkForSizeChanges = function() {                                                                            // 14294
        var size = this.$measureSizes();                                                                               // 14295
        if (size && (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) {        // 14296
            this.$measureNode.style.fontWeight = "bold";                                                               // 14297
            var boldSize = this.$measureSizes();                                                                       // 14298
            this.$measureNode.style.fontWeight = "";                                                                   // 14299
            this.$characterSize = size;                                                                                // 14300
            this.charSizes = Object.create(null);                                                                      // 14301
            this.allowBoldFonts = boldSize && boldSize.width === size.width && boldSize.height === size.height;        // 14302
            this._emit("changeCharacterSize", {data: size});                                                           // 14303
        }                                                                                                              // 14304
    };                                                                                                                 // 14305
                                                                                                                       // 14306
    this.$pollSizeChanges = function() {                                                                               // 14307
        if (this.$pollSizeChangesTimer)                                                                                // 14308
            return this.$pollSizeChangesTimer;                                                                         // 14309
        var self = this;                                                                                               // 14310
        return this.$pollSizeChangesTimer = setInterval(function() {                                                   // 14311
            self.checkForSizeChanges();                                                                                // 14312
        }, 500);                                                                                                       // 14313
    };                                                                                                                 // 14314
                                                                                                                       // 14315
    this.setPolling = function(val) {                                                                                  // 14316
        if (val) {                                                                                                     // 14317
            this.$pollSizeChanges();                                                                                   // 14318
        } else {                                                                                                       // 14319
            if (this.$pollSizeChangesTimer)                                                                            // 14320
                this.$pollSizeChangesTimer;                                                                            // 14321
        }                                                                                                              // 14322
    };                                                                                                                 // 14323
                                                                                                                       // 14324
    this.$measureSizes = function() {                                                                                  // 14325
        if (CHAR_COUNT === 50) {                                                                                       // 14326
            var rect = null;                                                                                           // 14327
            try {                                                                                                      // 14328
               rect = this.$measureNode.getBoundingClientRect();                                                       // 14329
            } catch(e) {                                                                                               // 14330
               rect = {width: 0, height:0 };                                                                           // 14331
            };                                                                                                         // 14332
            var size = {                                                                                               // 14333
                height: rect.height,                                                                                   // 14334
                width: rect.width / CHAR_COUNT                                                                         // 14335
            };                                                                                                         // 14336
        } else {                                                                                                       // 14337
            var size = {                                                                                               // 14338
                height: this.$measureNode.clientHeight,                                                                // 14339
                width: this.$measureNode.clientWidth / CHAR_COUNT                                                      // 14340
            };                                                                                                         // 14341
        }                                                                                                              // 14342
        if (size.width === 0 || size.height === 0)                                                                     // 14343
            return null;                                                                                               // 14344
        return size;                                                                                                   // 14345
    };                                                                                                                 // 14346
                                                                                                                       // 14347
    this.$measureCharWidth = function(ch) {                                                                            // 14348
        this.$main.innerHTML = lang.stringRepeat(ch, CHAR_COUNT);                                                      // 14349
        var rect = this.$main.getBoundingClientRect();                                                                 // 14350
        return rect.width / CHAR_COUNT;                                                                                // 14351
    };                                                                                                                 // 14352
                                                                                                                       // 14353
    this.getCharacterWidth = function(ch) {                                                                            // 14354
        var w = this.charSizes[ch];                                                                                    // 14355
        if (w === undefined) {                                                                                         // 14356
            this.charSizes[ch] = this.$measureCharWidth(ch) / this.$characterSize.width;                               // 14357
        }                                                                                                              // 14358
        return w;                                                                                                      // 14359
    };                                                                                                                 // 14360
                                                                                                                       // 14361
    this.destroy = function() {                                                                                        // 14362
        clearInterval(this.$pollSizeChangesTimer);                                                                     // 14363
        if (this.el && this.el.parentNode)                                                                             // 14364
            this.el.parentNode.removeChild(this.el);                                                                   // 14365
    };                                                                                                                 // 14366
                                                                                                                       // 14367
}).call(FontMetrics.prototype);                                                                                        // 14368
                                                                                                                       // 14369
});                                                                                                                    // 14370
                                                                                                                       // 14371
define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"], function(require, exports, module) {
"use strict";                                                                                                          // 14373
                                                                                                                       // 14374
var oop = require("./lib/oop");                                                                                        // 14375
var dom = require("./lib/dom");                                                                                        // 14376
var config = require("./config");                                                                                      // 14377
var useragent = require("./lib/useragent");                                                                            // 14378
var GutterLayer = require("./layer/gutter").Gutter;                                                                    // 14379
var MarkerLayer = require("./layer/marker").Marker;                                                                    // 14380
var TextLayer = require("./layer/text").Text;                                                                          // 14381
var CursorLayer = require("./layer/cursor").Cursor;                                                                    // 14382
var HScrollBar = require("./scrollbar").HScrollBar;                                                                    // 14383
var VScrollBar = require("./scrollbar").VScrollBar;                                                                    // 14384
var RenderLoop = require("./renderloop").RenderLoop;                                                                   // 14385
var FontMetrics = require("./layer/font_metrics").FontMetrics;                                                         // 14386
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 14387
var editorCss = ".ace_editor {\
position: relative;\
overflow: hidden;\
font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;\
direction: ltr;\
}\
.ace_scroller {\
position: absolute;\
overflow: hidden;\
top: 0;\
bottom: 0;\
background-color: inherit;\
-ms-user-select: none;\
-moz-user-select: none;\
-webkit-user-select: none;\
user-select: none;\
cursor: text;\
}\
.ace_content {\
position: absolute;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
min-width: 100%;\
}\
.ace_dragging .ace_scroller:before{\
position: absolute;\
top: 0;\
left: 0;\
right: 0;\
bottom: 0;\
content: '';\
background: rgba(250, 250, 250, 0.01);\
z-index: 1000;\
}\
.ace_dragging.ace_dark .ace_scroller:before{\
background: rgba(0, 0, 0, 0.01);\
}\
.ace_selecting, .ace_selecting * {\
cursor: text !important;\
}\
.ace_gutter {\
position: absolute;\
overflow : hidden;\
width: auto;\
top: 0;\
bottom: 0;\
left: 0;\
cursor: default;\
z-index: 4;\
-ms-user-select: none;\
-moz-user-select: none;\
-webkit-user-select: none;\
user-select: none;\
}\
.ace_gutter-active-line {\
position: absolute;\
left: 0;\
right: 0;\
}\
.ace_scroller.ace_scroll-left {\
box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\
}\
.ace_gutter-cell {\
padding-left: 19px;\
padding-right: 6px;\
background-repeat: no-repeat;\
}\
.ace_gutter-cell.ace_error {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\");\
background-repeat: no-repeat;\
background-position: 2px center;\
}\
.ace_gutter-cell.ace_warning {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\");\
background-position: 2px center;\
}\
.ace_gutter-cell.ace_info {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\");\
background-position: 2px center;\
}\
.ace_dark .ace_gutter-cell.ace_info {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\");\
}\
.ace_scrollbar {\
position: absolute;\
right: 0;\
bottom: 0;\
z-index: 6;\
}\
.ace_scrollbar-inner {\
position: absolute;\
cursor: text;\
left: 0;\
top: 0;\
}\
.ace_scrollbar-v{\
overflow-x: hidden;\
overflow-y: scroll;\
top: 0;\
}\
.ace_scrollbar-h {\
overflow-x: scroll;\
overflow-y: hidden;\
left: 0;\
}\
.ace_print-margin {\
position: absolute;\
height: 100%;\
}\
.ace_text-input {\
position: absolute;\
z-index: 0;\
width: 0.5em;\
height: 1em;\
opacity: 0;\
background: transparent;\
-moz-appearance: none;\
appearance: none;\
border: none;\
resize: none;\
outline: none;\
overflow: hidden;\
font: inherit;\
padding: 0 1px;\
margin: 0 -1px;\
text-indent: -1em;\
-ms-user-select: text;\
-moz-user-select: text;\
-webkit-user-select: text;\
user-select: text;\
}\
.ace_text-input.ace_composition {\
background: inherit;\
color: inherit;\
z-index: 1000;\
opacity: 1;\
text-indent: 0;\
}\
.ace_layer {\
z-index: 1;\
position: absolute;\
overflow: hidden;\
white-space: pre;\
height: 100%;\
width: 100%;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
pointer-events: none;\
}\
.ace_gutter-layer {\
position: relative;\
width: auto;\
text-align: right;\
pointer-events: auto;\
}\
.ace_text-layer {\
font: inherit !important;\
}\
.ace_cjk {\
display: inline-block;\
text-align: center;\
}\
.ace_cursor-layer {\
z-index: 4;\
}\
.ace_cursor {\
z-index: 4;\
position: absolute;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
border-left: 2px solid\
}\
.ace_slim-cursors .ace_cursor {\
border-left-width: 1px;\
}\
.ace_overwrite-cursors .ace_cursor {\
border-left-width: 0;\
border-bottom: 1px solid;\
}\
.ace_hidden-cursors .ace_cursor {\
opacity: 0.2;\
}\
.ace_smooth-blinking .ace_cursor {\
-webkit-transition: opacity 0.18s;\
transition: opacity 0.18s;\
}\
.ace_editor.ace_multiselect .ace_cursor {\
border-left-width: 1px;\
}\
.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\
position: absolute;\
z-index: 3;\
}\
.ace_marker-layer .ace_selection {\
position: absolute;\
z-index: 5;\
}\
.ace_marker-layer .ace_bracket {\
position: absolute;\
z-index: 6;\
}\
.ace_marker-layer .ace_active-line {\
position: absolute;\
z-index: 2;\
}\
.ace_marker-layer .ace_selected-word {\
position: absolute;\
z-index: 4;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
}\
.ace_line .ace_fold {\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
display: inline-block;\
height: 11px;\
margin-top: -2px;\
vertical-align: middle;\
background-image:\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\");\
background-repeat: no-repeat, repeat-x;\
background-position: center center, top left;\
color: transparent;\
border: 1px solid black;\
border-radius: 2px;\
cursor: pointer;\
pointer-events: auto;\
}\
.ace_dark .ace_fold {\
}\
.ace_fold:hover{\
background-image:\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\
url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\");\
}\
.ace_tooltip {\
background-color: #FFF;\
background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));\
background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\
border: 1px solid gray;\
border-radius: 1px;\
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\
color: black;\
max-width: 100%;\
padding: 3px 4px;\
position: fixed;\
z-index: 999999;\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
cursor: default;\
white-space: pre;\
word-wrap: break-word;\
line-height: normal;\
font-style: normal;\
font-weight: normal;\
letter-spacing: normal;\
pointer-events: none;\
}\
.ace_folding-enabled > .ace_gutter-cell {\
padding-right: 13px;\
}\
.ace_fold-widget {\
-moz-box-sizing: border-box;\
-webkit-box-sizing: border-box;\
box-sizing: border-box;\
margin: 0 -12px 0 1px;\
display: none;\
width: 11px;\
vertical-align: top;\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\");\
background-repeat: no-repeat;\
background-position: center;\
border-radius: 3px;\
border: 1px solid transparent;\
cursor: pointer;\
}\
.ace_folding-enabled .ace_fold-widget {\
display: inline-block;   \
}\
.ace_fold-widget.ace_end {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\");\
}\
.ace_fold-widget.ace_closed {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\");\
}\
.ace_fold-widget:hover {\
border: 1px solid rgba(0, 0, 0, 0.3);\
background-color: rgba(255, 255, 255, 0.2);\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\
}\
.ace_fold-widget:active {\
border: 1px solid rgba(0, 0, 0, 0.4);\
background-color: rgba(0, 0, 0, 0.05);\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\
}\
.ace_dark .ace_fold-widget {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\");\
}\
.ace_dark .ace_fold-widget.ace_end {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\");\
}\
.ace_dark .ace_fold-widget.ace_closed {\
background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\");\
}\
.ace_dark .ace_fold-widget:hover {\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\
background-color: rgba(255, 255, 255, 0.1);\
}\
.ace_dark .ace_fold-widget:active {\
box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\
}\
.ace_fold-widget.ace_invalid {\
background-color: #FFB4B4;\
border-color: #DE5555;\
}\
.ace_fade-fold-widgets .ace_fold-widget {\
-webkit-transition: opacity 0.4s ease 0.05s;\
transition: opacity 0.4s ease 0.05s;\
opacity: 0;\
}\
.ace_fade-fold-widgets:hover .ace_fold-widget {\
-webkit-transition: opacity 0.05s ease 0.05s;\
transition: opacity 0.05s ease 0.05s;\
opacity:1;\
}\
.ace_underline {\
text-decoration: underline;\
}\
.ace_bold {\
font-weight: bold;\
}\
.ace_nobold .ace_bold {\
font-weight: normal;\
}\
.ace_italic {\
font-style: italic;\
}\
.ace_error-marker {\
background-color: rgba(255, 0, 0,0.2);\
position: absolute;\
z-index: 9;\
}\
.ace_highlight-marker {\
background-color: rgba(255, 255, 0,0.2);\
position: absolute;\
z-index: 8;\
}\
";                                                                                                                     // 14742
                                                                                                                       // 14743
dom.importCssString(editorCss, "ace_editor");                                                                          // 14744
                                                                                                                       // 14745
var VirtualRenderer = function(container, theme) {                                                                     // 14746
    var _self = this;                                                                                                  // 14747
                                                                                                                       // 14748
    this.container = container || dom.createElement("div");                                                            // 14749
    this.$keepTextAreaAtCursor = !useragent.isOldIE;                                                                   // 14750
                                                                                                                       // 14751
    dom.addCssClass(this.container, "ace_editor");                                                                     // 14752
                                                                                                                       // 14753
    this.setTheme(theme);                                                                                              // 14754
                                                                                                                       // 14755
    this.$gutter = dom.createElement("div");                                                                           // 14756
    this.$gutter.className = "ace_gutter";                                                                             // 14757
    this.container.appendChild(this.$gutter);                                                                          // 14758
                                                                                                                       // 14759
    this.scroller = dom.createElement("div");                                                                          // 14760
    this.scroller.className = "ace_scroller";                                                                          // 14761
    this.container.appendChild(this.scroller);                                                                         // 14762
                                                                                                                       // 14763
    this.content = dom.createElement("div");                                                                           // 14764
    this.content.className = "ace_content";                                                                            // 14765
    this.scroller.appendChild(this.content);                                                                           // 14766
                                                                                                                       // 14767
    this.$gutterLayer = new GutterLayer(this.$gutter);                                                                 // 14768
    this.$gutterLayer.on("changeGutterWidth", this.onGutterResize.bind(this));                                         // 14769
                                                                                                                       // 14770
    this.$markerBack = new MarkerLayer(this.content);                                                                  // 14771
                                                                                                                       // 14772
    var textLayer = this.$textLayer = new TextLayer(this.content);                                                     // 14773
    this.canvas = textLayer.element;                                                                                   // 14774
                                                                                                                       // 14775
    this.$markerFront = new MarkerLayer(this.content);                                                                 // 14776
                                                                                                                       // 14777
    this.$cursorLayer = new CursorLayer(this.content);                                                                 // 14778
    this.$horizScroll = false;                                                                                         // 14779
    this.$vScroll = false;                                                                                             // 14780
                                                                                                                       // 14781
    this.scrollBar =                                                                                                   // 14782
    this.scrollBarV = new VScrollBar(this.container, this);                                                            // 14783
    this.scrollBarH = new HScrollBar(this.container, this);                                                            // 14784
    this.scrollBarV.addEventListener("scroll", function(e) {                                                           // 14785
        if (!_self.$scrollAnimation)                                                                                   // 14786
            _self.session.setScrollTop(e.data - _self.scrollMargin.top);                                               // 14787
    });                                                                                                                // 14788
    this.scrollBarH.addEventListener("scroll", function(e) {                                                           // 14789
        if (!_self.$scrollAnimation)                                                                                   // 14790
            _self.session.setScrollLeft(e.data - _self.scrollMargin.left);                                             // 14791
    });                                                                                                                // 14792
                                                                                                                       // 14793
    this.scrollTop = 0;                                                                                                // 14794
    this.scrollLeft = 0;                                                                                               // 14795
                                                                                                                       // 14796
    this.cursorPos = {                                                                                                 // 14797
        row : 0,                                                                                                       // 14798
        column : 0                                                                                                     // 14799
    };                                                                                                                 // 14800
                                                                                                                       // 14801
    this.$fontMetrics = new FontMetrics(this.container, 500);                                                          // 14802
    this.$textLayer.$setFontMetrics(this.$fontMetrics);                                                                // 14803
    this.$textLayer.addEventListener("changeCharacterSize", function(e) {                                              // 14804
        _self.updateCharacterSize();                                                                                   // 14805
        _self.onResize(true, _self.gutterWidth, _self.$size.width, _self.$size.height);                                // 14806
        _self._signal("changeCharacterSize", e);                                                                       // 14807
    });                                                                                                                // 14808
                                                                                                                       // 14809
    this.$size = {                                                                                                     // 14810
        width: 0,                                                                                                      // 14811
        height: 0,                                                                                                     // 14812
        scrollerHeight: 0,                                                                                             // 14813
        scrollerWidth: 0,                                                                                              // 14814
        $dirty: true                                                                                                   // 14815
    };                                                                                                                 // 14816
                                                                                                                       // 14817
    this.layerConfig = {                                                                                               // 14818
        width : 1,                                                                                                     // 14819
        padding : 0,                                                                                                   // 14820
        firstRow : 0,                                                                                                  // 14821
        firstRowScreen: 0,                                                                                             // 14822
        lastRow : 0,                                                                                                   // 14823
        lineHeight : 0,                                                                                                // 14824
        characterWidth : 0,                                                                                            // 14825
        minHeight : 1,                                                                                                 // 14826
        maxHeight : 1,                                                                                                 // 14827
        offset : 0,                                                                                                    // 14828
        height : 1,                                                                                                    // 14829
        gutterOffset: 1                                                                                                // 14830
    };                                                                                                                 // 14831
                                                                                                                       // 14832
    this.scrollMargin = {                                                                                              // 14833
        left: 0,                                                                                                       // 14834
        right: 0,                                                                                                      // 14835
        top: 0,                                                                                                        // 14836
        bottom: 0,                                                                                                     // 14837
        v: 0,                                                                                                          // 14838
        h: 0                                                                                                           // 14839
    };                                                                                                                 // 14840
                                                                                                                       // 14841
    this.$loop = new RenderLoop(                                                                                       // 14842
        this.$renderChanges.bind(this),                                                                                // 14843
        this.container.ownerDocument.defaultView                                                                       // 14844
    );                                                                                                                 // 14845
    this.$loop.schedule(this.CHANGE_FULL);                                                                             // 14846
                                                                                                                       // 14847
    this.updateCharacterSize();                                                                                        // 14848
    this.setPadding(4);                                                                                                // 14849
    config.resetOptions(this);                                                                                         // 14850
    config._emit("renderer", this);                                                                                    // 14851
};                                                                                                                     // 14852
                                                                                                                       // 14853
(function() {                                                                                                          // 14854
                                                                                                                       // 14855
    this.CHANGE_CURSOR = 1;                                                                                            // 14856
    this.CHANGE_MARKER = 2;                                                                                            // 14857
    this.CHANGE_GUTTER = 4;                                                                                            // 14858
    this.CHANGE_SCROLL = 8;                                                                                            // 14859
    this.CHANGE_LINES = 16;                                                                                            // 14860
    this.CHANGE_TEXT = 32;                                                                                             // 14861
    this.CHANGE_SIZE = 64;                                                                                             // 14862
    this.CHANGE_MARKER_BACK = 128;                                                                                     // 14863
    this.CHANGE_MARKER_FRONT = 256;                                                                                    // 14864
    this.CHANGE_FULL = 512;                                                                                            // 14865
    this.CHANGE_H_SCROLL = 1024;                                                                                       // 14866
                                                                                                                       // 14867
    oop.implement(this, EventEmitter);                                                                                 // 14868
                                                                                                                       // 14869
    this.updateCharacterSize = function() {                                                                            // 14870
        if (this.$textLayer.allowBoldFonts != this.$allowBoldFonts) {                                                  // 14871
            this.$allowBoldFonts = this.$textLayer.allowBoldFonts;                                                     // 14872
            this.setStyle("ace_nobold", !this.$allowBoldFonts);                                                        // 14873
        }                                                                                                              // 14874
                                                                                                                       // 14875
        this.layerConfig.characterWidth =                                                                              // 14876
        this.characterWidth = this.$textLayer.getCharacterWidth();                                                     // 14877
        this.layerConfig.lineHeight =                                                                                  // 14878
        this.lineHeight = this.$textLayer.getLineHeight();                                                             // 14879
        this.$updatePrintMargin();                                                                                     // 14880
    };                                                                                                                 // 14881
    this.setSession = function(session) {                                                                              // 14882
        if (this.session)                                                                                              // 14883
            this.session.doc.off("changeNewLineMode", this.onChangeNewLineMode);                                       // 14884
                                                                                                                       // 14885
        this.session = session;                                                                                        // 14886
        if (session && this.scrollMargin.top && session.getScrollTop() <= 0)                                           // 14887
            session.setScrollTop(-this.scrollMargin.top);                                                              // 14888
                                                                                                                       // 14889
        this.$cursorLayer.setSession(session);                                                                         // 14890
        this.$markerBack.setSession(session);                                                                          // 14891
        this.$markerFront.setSession(session);                                                                         // 14892
        this.$gutterLayer.setSession(session);                                                                         // 14893
        this.$textLayer.setSession(session);                                                                           // 14894
        if (!session)                                                                                                  // 14895
            return;                                                                                                    // 14896
                                                                                                                       // 14897
        this.$loop.schedule(this.CHANGE_FULL);                                                                         // 14898
        this.session.$setFontMetrics(this.$fontMetrics);                                                               // 14899
                                                                                                                       // 14900
        this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this);                                                // 14901
        this.onChangeNewLineMode()                                                                                     // 14902
        this.session.doc.on("changeNewLineMode", this.onChangeNewLineMode);                                            // 14903
    };                                                                                                                 // 14904
    this.updateLines = function(firstRow, lastRow, force) {                                                            // 14905
        if (lastRow === undefined)                                                                                     // 14906
            lastRow = Infinity;                                                                                        // 14907
                                                                                                                       // 14908
        if (!this.$changedLines) {                                                                                     // 14909
            this.$changedLines = {                                                                                     // 14910
                firstRow: firstRow,                                                                                    // 14911
                lastRow: lastRow                                                                                       // 14912
            };                                                                                                         // 14913
        }                                                                                                              // 14914
        else {                                                                                                         // 14915
            if (this.$changedLines.firstRow > firstRow)                                                                // 14916
                this.$changedLines.firstRow = firstRow;                                                                // 14917
                                                                                                                       // 14918
            if (this.$changedLines.lastRow < lastRow)                                                                  // 14919
                this.$changedLines.lastRow = lastRow;                                                                  // 14920
        }                                                                                                              // 14921
        if (this.$changedLines.lastRow < this.layerConfig.firstRow) {                                                  // 14922
            if (force)                                                                                                 // 14923
                this.$changedLines.lastRow = this.layerConfig.lastRow;                                                 // 14924
            else                                                                                                       // 14925
                return;                                                                                                // 14926
        }                                                                                                              // 14927
        if (this.$changedLines.firstRow > this.layerConfig.lastRow)                                                    // 14928
            return;                                                                                                    // 14929
        this.$loop.schedule(this.CHANGE_LINES);                                                                        // 14930
    };                                                                                                                 // 14931
                                                                                                                       // 14932
    this.onChangeNewLineMode = function() {                                                                            // 14933
        this.$loop.schedule(this.CHANGE_TEXT);                                                                         // 14934
        this.$textLayer.$updateEolChar();                                                                              // 14935
    };                                                                                                                 // 14936
                                                                                                                       // 14937
    this.onChangeTabSize = function() {                                                                                // 14938
        this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER);                                                    // 14939
        this.$textLayer.onChangeTabSize();                                                                             // 14940
    };                                                                                                                 // 14941
    this.updateText = function() {                                                                                     // 14942
        this.$loop.schedule(this.CHANGE_TEXT);                                                                         // 14943
    };                                                                                                                 // 14944
    this.updateFull = function(force) {                                                                                // 14945
        if (force)                                                                                                     // 14946
            this.$renderChanges(this.CHANGE_FULL, true);                                                               // 14947
        else                                                                                                           // 14948
            this.$loop.schedule(this.CHANGE_FULL);                                                                     // 14949
    };                                                                                                                 // 14950
    this.updateFontSize = function() {                                                                                 // 14951
        this.$textLayer.checkForSizeChanges();                                                                         // 14952
    };                                                                                                                 // 14953
                                                                                                                       // 14954
    this.$changes = 0;                                                                                                 // 14955
    this.$updateSizeAsync = function() {                                                                               // 14956
        if (this.$loop.pending)                                                                                        // 14957
            this.$size.$dirty = true;                                                                                  // 14958
        else                                                                                                           // 14959
            this.onResize();                                                                                           // 14960
    };                                                                                                                 // 14961
    this.onResize = function(force, gutterWidth, width, height) {                                                      // 14962
        if (this.resizing > 2)                                                                                         // 14963
            return;                                                                                                    // 14964
        else if (this.resizing > 0)                                                                                    // 14965
            this.resizing++;                                                                                           // 14966
        else                                                                                                           // 14967
            this.resizing = force ? 1 : 0;                                                                             // 14968
        var el = this.container;                                                                                       // 14969
        if (!height)                                                                                                   // 14970
            height = el.clientHeight || el.scrollHeight;                                                               // 14971
        if (!width)                                                                                                    // 14972
            width = el.clientWidth || el.scrollWidth;                                                                  // 14973
        var changes = this.$updateCachedSize(force, gutterWidth, width, height);                                       // 14974
                                                                                                                       // 14975
                                                                                                                       // 14976
        if (!this.$size.scrollerHeight || (!width && !height))                                                         // 14977
            return this.resizing = 0;                                                                                  // 14978
                                                                                                                       // 14979
        if (force)                                                                                                     // 14980
            this.$gutterLayer.$padding = null;                                                                         // 14981
                                                                                                                       // 14982
        if (force)                                                                                                     // 14983
            this.$renderChanges(changes | this.$changes, true);                                                        // 14984
        else                                                                                                           // 14985
            this.$loop.schedule(changes | this.$changes);                                                              // 14986
                                                                                                                       // 14987
        if (this.resizing)                                                                                             // 14988
            this.resizing = 0;                                                                                         // 14989
    };                                                                                                                 // 14990
                                                                                                                       // 14991
    this.$updateCachedSize = function(force, gutterWidth, width, height) {                                             // 14992
        height -= (this.$extraHeight || 0);                                                                            // 14993
        var changes = 0;                                                                                               // 14994
        var size = this.$size;                                                                                         // 14995
        var oldSize = {                                                                                                // 14996
            width: size.width,                                                                                         // 14997
            height: size.height,                                                                                       // 14998
            scrollerHeight: size.scrollerHeight,                                                                       // 14999
            scrollerWidth: size.scrollerWidth                                                                          // 15000
        };                                                                                                             // 15001
        if (height && (force || size.height != height)) {                                                              // 15002
            size.height = height;                                                                                      // 15003
            changes |= this.CHANGE_SIZE;                                                                               // 15004
                                                                                                                       // 15005
            size.scrollerHeight = size.height;                                                                         // 15006
            if (this.$horizScroll)                                                                                     // 15007
                size.scrollerHeight -= this.scrollBarH.getHeight();                                                    // 15008
            this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + "px";                                 // 15009
                                                                                                                       // 15010
            changes = changes | this.CHANGE_SCROLL;                                                                    // 15011
        }                                                                                                              // 15012
                                                                                                                       // 15013
        if (width && (force || size.width != width)) {                                                                 // 15014
            changes |= this.CHANGE_SIZE;                                                                               // 15015
            size.width = width;                                                                                        // 15016
                                                                                                                       // 15017
            if (gutterWidth == null)                                                                                   // 15018
                gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;                                         // 15019
                                                                                                                       // 15020
            this.gutterWidth = gutterWidth;                                                                            // 15021
                                                                                                                       // 15022
            this.scrollBarH.element.style.left =                                                                       // 15023
            this.scroller.style.left = gutterWidth + "px";                                                             // 15024
            size.scrollerWidth = Math.max(0, width - gutterWidth - this.scrollBarV.getWidth());                        // 15025
                                                                                                                       // 15026
            this.scrollBarH.element.style.right =                                                                      // 15027
            this.scroller.style.right = this.scrollBarV.getWidth() + "px";                                             // 15028
            this.scroller.style.bottom = this.scrollBarH.getHeight() + "px";                                           // 15029
                                                                                                                       // 15030
            if (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || force)                      // 15031
                changes |= this.CHANGE_FULL;                                                                           // 15032
        }                                                                                                              // 15033
                                                                                                                       // 15034
        size.$dirty = !width || !height;                                                                               // 15035
                                                                                                                       // 15036
        if (changes)                                                                                                   // 15037
            this._signal("resize", oldSize);                                                                           // 15038
                                                                                                                       // 15039
        return changes;                                                                                                // 15040
    };                                                                                                                 // 15041
                                                                                                                       // 15042
    this.onGutterResize = function() {                                                                                 // 15043
        var gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;                                             // 15044
        if (gutterWidth != this.gutterWidth)                                                                           // 15045
            this.$changes |= this.$updateCachedSize(true, gutterWidth, this.$size.width, this.$size.height);           // 15046
                                                                                                                       // 15047
        if (this.session.getUseWrapMode() && this.adjustWrapLimit()) {                                                 // 15048
            this.$loop.schedule(this.CHANGE_FULL);                                                                     // 15049
        } else if (this.$size.$dirty) {                                                                                // 15050
            this.$loop.schedule(this.CHANGE_FULL);                                                                     // 15051
        } else {                                                                                                       // 15052
            this.$computeLayerConfig();                                                                                // 15053
            this.$loop.schedule(this.CHANGE_MARKER);                                                                   // 15054
        }                                                                                                              // 15055
    };                                                                                                                 // 15056
    this.adjustWrapLimit = function() {                                                                                // 15057
        var availableWidth = this.$size.scrollerWidth - this.$padding * 2;                                             // 15058
        var limit = Math.floor(availableWidth / this.characterWidth);                                                  // 15059
        return this.session.adjustWrapLimit(limit, this.$showPrintMargin && this.$printMarginColumn);                  // 15060
    };                                                                                                                 // 15061
    this.setAnimatedScroll = function(shouldAnimate){                                                                  // 15062
        this.setOption("animatedScroll", shouldAnimate);                                                               // 15063
    };                                                                                                                 // 15064
    this.getAnimatedScroll = function() {                                                                              // 15065
        return this.$animatedScroll;                                                                                   // 15066
    };                                                                                                                 // 15067
    this.setShowInvisibles = function(showInvisibles) {                                                                // 15068
        this.setOption("showInvisibles", showInvisibles);                                                              // 15069
    };                                                                                                                 // 15070
    this.getShowInvisibles = function() {                                                                              // 15071
        return this.getOption("showInvisibles");                                                                       // 15072
    };                                                                                                                 // 15073
    this.getDisplayIndentGuides = function() {                                                                         // 15074
        return this.getOption("displayIndentGuides");                                                                  // 15075
    };                                                                                                                 // 15076
                                                                                                                       // 15077
    this.setDisplayIndentGuides = function(display) {                                                                  // 15078
        this.setOption("displayIndentGuides", display);                                                                // 15079
    };                                                                                                                 // 15080
    this.setShowPrintMargin = function(showPrintMargin) {                                                              // 15081
        this.setOption("showPrintMargin", showPrintMargin);                                                            // 15082
    };                                                                                                                 // 15083
    this.getShowPrintMargin = function() {                                                                             // 15084
        return this.getOption("showPrintMargin");                                                                      // 15085
    };                                                                                                                 // 15086
    this.setPrintMarginColumn = function(showPrintMargin) {                                                            // 15087
        this.setOption("printMarginColumn", showPrintMargin);                                                          // 15088
    };                                                                                                                 // 15089
    this.getPrintMarginColumn = function() {                                                                           // 15090
        return this.getOption("printMarginColumn");                                                                    // 15091
    };                                                                                                                 // 15092
    this.getShowGutter = function(){                                                                                   // 15093
        return this.getOption("showGutter");                                                                           // 15094
    };                                                                                                                 // 15095
    this.setShowGutter = function(show){                                                                               // 15096
        return this.setOption("showGutter", show);                                                                     // 15097
    };                                                                                                                 // 15098
                                                                                                                       // 15099
    this.getFadeFoldWidgets = function(){                                                                              // 15100
        return this.getOption("fadeFoldWidgets")                                                                       // 15101
    };                                                                                                                 // 15102
                                                                                                                       // 15103
    this.setFadeFoldWidgets = function(show) {                                                                         // 15104
        this.setOption("fadeFoldWidgets", show);                                                                       // 15105
    };                                                                                                                 // 15106
                                                                                                                       // 15107
    this.setHighlightGutterLine = function(shouldHighlight) {                                                          // 15108
        this.setOption("highlightGutterLine", shouldHighlight);                                                        // 15109
    };                                                                                                                 // 15110
                                                                                                                       // 15111
    this.getHighlightGutterLine = function() {                                                                         // 15112
        return this.getOption("highlightGutterLine");                                                                  // 15113
    };                                                                                                                 // 15114
                                                                                                                       // 15115
    this.$updateGutterLineHighlight = function() {                                                                     // 15116
        var pos = this.$cursorLayer.$pixelPos;                                                                         // 15117
        var height = this.layerConfig.lineHeight;                                                                      // 15118
        if (this.session.getUseWrapMode()) {                                                                           // 15119
            var cursor = this.session.selection.getCursor();                                                           // 15120
            cursor.column = 0;                                                                                         // 15121
            pos = this.$cursorLayer.getPixelPosition(cursor, true);                                                    // 15122
            height *= this.session.getRowLength(cursor.row);                                                           // 15123
        }                                                                                                              // 15124
        this.$gutterLineHighlight.style.top = pos.top - this.layerConfig.offset + "px";                                // 15125
        this.$gutterLineHighlight.style.height = height + "px";                                                        // 15126
    };                                                                                                                 // 15127
                                                                                                                       // 15128
    this.$updatePrintMargin = function() {                                                                             // 15129
        if (!this.$showPrintMargin && !this.$printMarginEl)                                                            // 15130
            return;                                                                                                    // 15131
                                                                                                                       // 15132
        if (!this.$printMarginEl) {                                                                                    // 15133
            var containerEl = dom.createElement("div");                                                                // 15134
            containerEl.className = "ace_layer ace_print-margin-layer";                                                // 15135
            this.$printMarginEl = dom.createElement("div");                                                            // 15136
            this.$printMarginEl.className = "ace_print-margin";                                                        // 15137
            containerEl.appendChild(this.$printMarginEl);                                                              // 15138
            this.content.insertBefore(containerEl, this.content.firstChild);                                           // 15139
        }                                                                                                              // 15140
                                                                                                                       // 15141
        var style = this.$printMarginEl.style;                                                                         // 15142
        style.left = ((this.characterWidth * this.$printMarginColumn) + this.$padding) + "px";                         // 15143
        style.visibility = this.$showPrintMargin ? "visible" : "hidden";                                               // 15144
                                                                                                                       // 15145
        if (this.session && this.session.$wrap == -1)                                                                  // 15146
            this.adjustWrapLimit();                                                                                    // 15147
    };                                                                                                                 // 15148
    this.getContainerElement = function() {                                                                            // 15149
        return this.container;                                                                                         // 15150
    };                                                                                                                 // 15151
    this.getMouseEventTarget = function() {                                                                            // 15152
        return this.content;                                                                                           // 15153
    };                                                                                                                 // 15154
    this.getTextAreaContainer = function() {                                                                           // 15155
        return this.container;                                                                                         // 15156
    };                                                                                                                 // 15157
    this.$moveTextAreaToCursor = function() {                                                                          // 15158
        if (!this.$keepTextAreaAtCursor)                                                                               // 15159
            return;                                                                                                    // 15160
        var config = this.layerConfig;                                                                                 // 15161
        var posTop = this.$cursorLayer.$pixelPos.top;                                                                  // 15162
        var posLeft = this.$cursorLayer.$pixelPos.left;                                                                // 15163
        posTop -= config.offset;                                                                                       // 15164
                                                                                                                       // 15165
        var h = this.lineHeight;                                                                                       // 15166
        if (posTop < 0 || posTop > config.height - h)                                                                  // 15167
            return;                                                                                                    // 15168
                                                                                                                       // 15169
        var w = this.characterWidth;                                                                                   // 15170
        if (this.$composition) {                                                                                       // 15171
            var val = this.textarea.value.replace(/^\x01+/, "");                                                       // 15172
            w *= (this.session.$getStringScreenWidth(val)[0]+2);                                                       // 15173
            h += 2;                                                                                                    // 15174
        }                                                                                                              // 15175
        posLeft -= this.scrollLeft;                                                                                    // 15176
        if (posLeft > this.$size.scrollerWidth - w)                                                                    // 15177
            posLeft = this.$size.scrollerWidth - w;                                                                    // 15178
                                                                                                                       // 15179
        posLeft += this.gutterWidth;                                                                                   // 15180
                                                                                                                       // 15181
        this.textarea.style.height = h + "px";                                                                         // 15182
        this.textarea.style.width = w + "px";                                                                          // 15183
        this.textarea.style.left = Math.min(posLeft, this.$size.scrollerWidth - w) + "px";                             // 15184
        this.textarea.style.top = Math.min(posTop, this.$size.height - h) + "px";                                      // 15185
    };                                                                                                                 // 15186
    this.getFirstVisibleRow = function() {                                                                             // 15187
        return this.layerConfig.firstRow;                                                                              // 15188
    };                                                                                                                 // 15189
    this.getFirstFullyVisibleRow = function() {                                                                        // 15190
        return this.layerConfig.firstRow + (this.layerConfig.offset === 0 ? 0 : 1);                                    // 15191
    };                                                                                                                 // 15192
    this.getLastFullyVisibleRow = function() {                                                                         // 15193
        var flint = Math.floor((this.layerConfig.height + this.layerConfig.offset) / this.layerConfig.lineHeight);     // 15194
        return this.layerConfig.firstRow - 1 + flint;                                                                  // 15195
    };                                                                                                                 // 15196
    this.getLastVisibleRow = function() {                                                                              // 15197
        return this.layerConfig.lastRow;                                                                               // 15198
    };                                                                                                                 // 15199
                                                                                                                       // 15200
    this.$padding = null;                                                                                              // 15201
    this.setPadding = function(padding) {                                                                              // 15202
        this.$padding = padding;                                                                                       // 15203
        this.$textLayer.setPadding(padding);                                                                           // 15204
        this.$cursorLayer.setPadding(padding);                                                                         // 15205
        this.$markerFront.setPadding(padding);                                                                         // 15206
        this.$markerBack.setPadding(padding);                                                                          // 15207
        this.$loop.schedule(this.CHANGE_FULL);                                                                         // 15208
        this.$updatePrintMargin();                                                                                     // 15209
    };                                                                                                                 // 15210
                                                                                                                       // 15211
    this.setScrollMargin = function(top, bottom, left, right) {                                                        // 15212
        var sm = this.scrollMargin;                                                                                    // 15213
        sm.top = top|0;                                                                                                // 15214
        sm.bottom = bottom|0;                                                                                          // 15215
        sm.right = right|0;                                                                                            // 15216
        sm.left = left|0;                                                                                              // 15217
        sm.v = sm.top + sm.bottom;                                                                                     // 15218
        sm.h = sm.left + sm.right;                                                                                     // 15219
        if (sm.top && this.scrollTop <= 0 && this.session)                                                             // 15220
            this.session.setScrollTop(-sm.top);                                                                        // 15221
        this.updateFull();                                                                                             // 15222
    };                                                                                                                 // 15223
    this.getHScrollBarAlwaysVisible = function() {                                                                     // 15224
        return this.$hScrollBarAlwaysVisible;                                                                          // 15225
    };                                                                                                                 // 15226
    this.setHScrollBarAlwaysVisible = function(alwaysVisible) {                                                        // 15227
        this.setOption("hScrollBarAlwaysVisible", alwaysVisible);                                                      // 15228
    };                                                                                                                 // 15229
    this.getVScrollBarAlwaysVisible = function() {                                                                     // 15230
        return this.$hScrollBarAlwaysVisible;                                                                          // 15231
    };                                                                                                                 // 15232
    this.setVScrollBarAlwaysVisible = function(alwaysVisible) {                                                        // 15233
        this.setOption("vScrollBarAlwaysVisible", alwaysVisible);                                                      // 15234
    };                                                                                                                 // 15235
                                                                                                                       // 15236
    this.$updateScrollBarV = function() {                                                                              // 15237
        var scrollHeight = this.layerConfig.maxHeight;                                                                 // 15238
        var scrollerHeight = this.$size.scrollerHeight;                                                                // 15239
        if (!this.$maxLines && this.$scrollPastEnd) {                                                                  // 15240
            scrollHeight -= (scrollerHeight - this.lineHeight) * this.$scrollPastEnd;                                  // 15241
            if (this.scrollTop > scrollHeight - scrollerHeight) {                                                      // 15242
                scrollHeight = this.scrollTop + scrollerHeight;                                                        // 15243
                this.scrollBarV.scrollTop = null;                                                                      // 15244
            }                                                                                                          // 15245
        }                                                                                                              // 15246
        this.scrollBarV.setScrollHeight(scrollHeight + this.scrollMargin.v);                                           // 15247
        this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);                                          // 15248
    };                                                                                                                 // 15249
    this.$updateScrollBarH = function() {                                                                              // 15250
        this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h);              // 15251
        this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);                                       // 15252
    };                                                                                                                 // 15253
                                                                                                                       // 15254
    this.$frozen = false;                                                                                              // 15255
    this.freeze = function() {                                                                                         // 15256
        this.$frozen = true;                                                                                           // 15257
    };                                                                                                                 // 15258
                                                                                                                       // 15259
    this.unfreeze = function() {                                                                                       // 15260
        this.$frozen = false;                                                                                          // 15261
    };                                                                                                                 // 15262
                                                                                                                       // 15263
    this.$renderChanges = function(changes, force) {                                                                   // 15264
        if (this.$changes) {                                                                                           // 15265
            changes |= this.$changes;                                                                                  // 15266
            this.$changes = 0;                                                                                         // 15267
        }                                                                                                              // 15268
        if ((!this.session || !this.container.offsetWidth || this.$frozen) || (!changes && !force)) {                  // 15269
            this.$changes |= changes;                                                                                  // 15270
            return;                                                                                                    // 15271
        }                                                                                                              // 15272
        if (this.$size.$dirty) {                                                                                       // 15273
            this.$changes |= changes;                                                                                  // 15274
            return this.onResize(true);                                                                                // 15275
        }                                                                                                              // 15276
        if (!this.lineHeight) {                                                                                        // 15277
            this.$textLayer.checkForSizeChanges();                                                                     // 15278
        }                                                                                                              // 15279
                                                                                                                       // 15280
        this._signal("beforeRender");                                                                                  // 15281
        var config = this.layerConfig;                                                                                 // 15282
        if (changes & this.CHANGE_FULL ||                                                                              // 15283
            changes & this.CHANGE_SIZE ||                                                                              // 15284
            changes & this.CHANGE_TEXT ||                                                                              // 15285
            changes & this.CHANGE_LINES ||                                                                             // 15286
            changes & this.CHANGE_SCROLL ||                                                                            // 15287
            changes & this.CHANGE_H_SCROLL                                                                             // 15288
        ) {                                                                                                            // 15289
            changes |= this.$computeLayerConfig();                                                                     // 15290
            if (config.firstRow != this.layerConfig.firstRow && config.firstRowScreen == this.layerConfig.firstRowScreen) {
                var st = this.scrollTop + (config.firstRow - this.layerConfig.firstRow) * this.lineHeight;             // 15292
                if (st > 0) {                                                                                          // 15293
                    this.scrollTop = st;                                                                               // 15294
                    changes = changes | this.CHANGE_SCROLL;                                                            // 15295
                    changes |= this.$computeLayerConfig();                                                             // 15296
                }                                                                                                      // 15297
            }                                                                                                          // 15298
            config = this.layerConfig;                                                                                 // 15299
            this.$updateScrollBarV();                                                                                  // 15300
            if (changes & this.CHANGE_H_SCROLL)                                                                        // 15301
                this.$updateScrollBarH();                                                                              // 15302
            this.$gutterLayer.element.style.marginTop = (-config.offset) + "px";                                       // 15303
            this.content.style.marginTop = (-config.offset) + "px";                                                    // 15304
            this.content.style.width = config.width + 2 * this.$padding + "px";                                        // 15305
            this.content.style.height = config.minHeight + "px";                                                       // 15306
        }                                                                                                              // 15307
        if (changes & this.CHANGE_H_SCROLL) {                                                                          // 15308
            this.content.style.marginLeft = -this.scrollLeft + "px";                                                   // 15309
            this.scroller.className = this.scrollLeft <= 0 ? "ace_scroller" : "ace_scroller ace_scroll-left";          // 15310
        }                                                                                                              // 15311
        if (changes & this.CHANGE_FULL) {                                                                              // 15312
            this.$textLayer.update(config);                                                                            // 15313
            if (this.$showGutter)                                                                                      // 15314
                this.$gutterLayer.update(config);                                                                      // 15315
            this.$markerBack.update(config);                                                                           // 15316
            this.$markerFront.update(config);                                                                          // 15317
            this.$cursorLayer.update(config);                                                                          // 15318
            this.$moveTextAreaToCursor();                                                                              // 15319
            this.$highlightGutterLine && this.$updateGutterLineHighlight();                                            // 15320
            this._signal("afterRender");                                                                               // 15321
            return;                                                                                                    // 15322
        }                                                                                                              // 15323
        if (changes & this.CHANGE_SCROLL) {                                                                            // 15324
            if (changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES)                                             // 15325
                this.$textLayer.update(config);                                                                        // 15326
            else                                                                                                       // 15327
                this.$textLayer.scrollLines(config);                                                                   // 15328
                                                                                                                       // 15329
            if (this.$showGutter)                                                                                      // 15330
                this.$gutterLayer.update(config);                                                                      // 15331
            this.$markerBack.update(config);                                                                           // 15332
            this.$markerFront.update(config);                                                                          // 15333
            this.$cursorLayer.update(config);                                                                          // 15334
            this.$highlightGutterLine && this.$updateGutterLineHighlight();                                            // 15335
            this.$moveTextAreaToCursor();                                                                              // 15336
            this._signal("afterRender");                                                                               // 15337
            return;                                                                                                    // 15338
        }                                                                                                              // 15339
                                                                                                                       // 15340
        if (changes & this.CHANGE_TEXT) {                                                                              // 15341
            this.$textLayer.update(config);                                                                            // 15342
            if (this.$showGutter)                                                                                      // 15343
                this.$gutterLayer.update(config);                                                                      // 15344
        }                                                                                                              // 15345
        else if (changes & this.CHANGE_LINES) {                                                                        // 15346
            if (this.$updateLines() || (changes & this.CHANGE_GUTTER) && this.$showGutter)                             // 15347
                this.$gutterLayer.update(config);                                                                      // 15348
        }                                                                                                              // 15349
        else if (changes & this.CHANGE_TEXT || changes & this.CHANGE_GUTTER) {                                         // 15350
            if (this.$showGutter)                                                                                      // 15351
                this.$gutterLayer.update(config);                                                                      // 15352
        }                                                                                                              // 15353
                                                                                                                       // 15354
        if (changes & this.CHANGE_CURSOR) {                                                                            // 15355
            this.$cursorLayer.update(config);                                                                          // 15356
            this.$moveTextAreaToCursor();                                                                              // 15357
            this.$highlightGutterLine && this.$updateGutterLineHighlight();                                            // 15358
        }                                                                                                              // 15359
                                                                                                                       // 15360
        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT)) {                                               // 15361
            this.$markerFront.update(config);                                                                          // 15362
        }                                                                                                              // 15363
                                                                                                                       // 15364
        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK)) {                                                // 15365
            this.$markerBack.update(config);                                                                           // 15366
        }                                                                                                              // 15367
                                                                                                                       // 15368
        this._signal("afterRender");                                                                                   // 15369
    };                                                                                                                 // 15370
                                                                                                                       // 15371
                                                                                                                       // 15372
    this.$autosize = function() {                                                                                      // 15373
        var height = this.session.getScreenLength() * this.lineHeight;                                                 // 15374
        var maxHeight = this.$maxLines * this.lineHeight;                                                              // 15375
        var desiredHeight = Math.max(                                                                                  // 15376
            (this.$minLines||1) * this.lineHeight,                                                                     // 15377
            Math.min(maxHeight, height)                                                                                // 15378
        ) + this.scrollMargin.v + (this.$extraHeight || 0);                                                            // 15379
        var vScroll = height > maxHeight;                                                                              // 15380
                                                                                                                       // 15381
        if (desiredHeight != this.desiredHeight ||                                                                     // 15382
            this.$size.height != this.desiredHeight || vScroll != this.$vScroll) {                                     // 15383
            if (vScroll != this.$vScroll) {                                                                            // 15384
                this.$vScroll = vScroll;                                                                               // 15385
                this.scrollBarV.setVisible(vScroll);                                                                   // 15386
            }                                                                                                          // 15387
                                                                                                                       // 15388
            var w = this.container.clientWidth;                                                                        // 15389
            this.container.style.height = desiredHeight + "px";                                                        // 15390
            this.$updateCachedSize(true, this.$gutterWidth, w, desiredHeight);                                         // 15391
            this.desiredHeight = desiredHeight;                                                                        // 15392
                                                                                                                       // 15393
            this._signal("autosize");                                                                                  // 15394
        }                                                                                                              // 15395
    };                                                                                                                 // 15396
                                                                                                                       // 15397
    this.$computeLayerConfig = function() {                                                                            // 15398
        if (this.$maxLines && this.lineHeight > 1)                                                                     // 15399
            this.$autosize();                                                                                          // 15400
                                                                                                                       // 15401
        var session = this.session;                                                                                    // 15402
        var size = this.$size;                                                                                         // 15403
                                                                                                                       // 15404
        var hideScrollbars = size.height <= 2 * this.lineHeight;                                                       // 15405
        var screenLines = this.session.getScreenLength();                                                              // 15406
        var maxHeight = screenLines * this.lineHeight;                                                                 // 15407
                                                                                                                       // 15408
        var offset = this.scrollTop % this.lineHeight;                                                                 // 15409
        var minHeight = size.scrollerHeight + this.lineHeight;                                                         // 15410
                                                                                                                       // 15411
        var longestLine = this.$getLongestLine();                                                                      // 15412
                                                                                                                       // 15413
        var horizScroll = !hideScrollbars && (this.$hScrollBarAlwaysVisible ||                                         // 15414
            size.scrollerWidth - longestLine - 2 * this.$padding < 0);                                                 // 15415
                                                                                                                       // 15416
        var hScrollChanged = this.$horizScroll !== horizScroll;                                                        // 15417
        if (hScrollChanged) {                                                                                          // 15418
            this.$horizScroll = horizScroll;                                                                           // 15419
            this.scrollBarH.setVisible(horizScroll);                                                                   // 15420
        }                                                                                                              // 15421
                                                                                                                       // 15422
        var scrollPastEnd = !this.$maxLines && this.$scrollPastEnd                                                     // 15423
            ? (size.scrollerHeight - this.lineHeight) * this.$scrollPastEnd                                            // 15424
            : 0;                                                                                                       // 15425
        maxHeight += scrollPastEnd;                                                                                    // 15426
                                                                                                                       // 15427
        this.session.setScrollTop(Math.max(-this.scrollMargin.top,                                                     // 15428
            Math.min(this.scrollTop, maxHeight - size.scrollerHeight + this.scrollMargin.bottom)));                    // 15429
                                                                                                                       // 15430
        this.session.setScrollLeft(Math.max(-this.scrollMargin.left, Math.min(this.scrollLeft,                         // 15431
            longestLine + 2 * this.$padding - size.scrollerWidth + this.scrollMargin.right)));                         // 15432
                                                                                                                       // 15433
        var vScroll = !hideScrollbars && (this.$vScrollBarAlwaysVisible ||                                             // 15434
            size.scrollerHeight - maxHeight + scrollPastEnd < 0 || this.scrollTop);                                    // 15435
        var vScrollChanged = this.$vScroll !== vScroll;                                                                // 15436
        if (vScrollChanged) {                                                                                          // 15437
            this.$vScroll = vScroll;                                                                                   // 15438
            this.scrollBarV.setVisible(vScroll);                                                                       // 15439
        }                                                                                                              // 15440
                                                                                                                       // 15441
        var lineCount = Math.ceil(minHeight / this.lineHeight) - 1;                                                    // 15442
        var firstRow = Math.max(0, Math.round((this.scrollTop - offset) / this.lineHeight));                           // 15443
        var lastRow = firstRow + lineCount;                                                                            // 15444
        var firstRowScreen, firstRowHeight;                                                                            // 15445
        var lineHeight = this.lineHeight;                                                                              // 15446
        firstRow = session.screenToDocumentRow(firstRow, 0);                                                           // 15447
        var foldLine = session.getFoldLine(firstRow);                                                                  // 15448
        if (foldLine) {                                                                                                // 15449
            firstRow = foldLine.start.row;                                                                             // 15450
        }                                                                                                              // 15451
                                                                                                                       // 15452
        firstRowScreen = session.documentToScreenRow(firstRow, 0);                                                     // 15453
        firstRowHeight = session.getRowLength(firstRow) * lineHeight;                                                  // 15454
                                                                                                                       // 15455
        lastRow = Math.min(session.screenToDocumentRow(lastRow, 0), session.getLength() - 1);                          // 15456
        minHeight = size.scrollerHeight + session.getRowLength(lastRow) * lineHeight +                                 // 15457
                                                firstRowHeight;                                                        // 15458
                                                                                                                       // 15459
        offset = this.scrollTop - firstRowScreen * lineHeight;                                                         // 15460
                                                                                                                       // 15461
        var changes = 0;                                                                                               // 15462
        if (this.layerConfig.width != longestLine)                                                                     // 15463
            changes = this.CHANGE_H_SCROLL;                                                                            // 15464
        if (hScrollChanged || vScrollChanged) {                                                                        // 15465
            changes = this.$updateCachedSize(true, this.gutterWidth, size.width, size.height);                         // 15466
            this._signal("scrollbarVisibilityChanged");                                                                // 15467
            if (vScrollChanged)                                                                                        // 15468
                longestLine = this.$getLongestLine();                                                                  // 15469
        }                                                                                                              // 15470
                                                                                                                       // 15471
        this.layerConfig = {                                                                                           // 15472
            width : longestLine,                                                                                       // 15473
            padding : this.$padding,                                                                                   // 15474
            firstRow : firstRow,                                                                                       // 15475
            firstRowScreen: firstRowScreen,                                                                            // 15476
            lastRow : lastRow,                                                                                         // 15477
            lineHeight : lineHeight,                                                                                   // 15478
            characterWidth : this.characterWidth,                                                                      // 15479
            minHeight : minHeight,                                                                                     // 15480
            maxHeight : maxHeight,                                                                                     // 15481
            offset : offset,                                                                                           // 15482
            gutterOffset : Math.max(0, Math.ceil((offset + size.height - size.scrollerHeight) / lineHeight)),          // 15483
            height : this.$size.scrollerHeight                                                                         // 15484
        };                                                                                                             // 15485
                                                                                                                       // 15486
        return changes;                                                                                                // 15487
    };                                                                                                                 // 15488
                                                                                                                       // 15489
    this.$updateLines = function() {                                                                                   // 15490
        var firstRow = this.$changedLines.firstRow;                                                                    // 15491
        var lastRow = this.$changedLines.lastRow;                                                                      // 15492
        this.$changedLines = null;                                                                                     // 15493
                                                                                                                       // 15494
        var layerConfig = this.layerConfig;                                                                            // 15495
                                                                                                                       // 15496
        if (firstRow > layerConfig.lastRow + 1) { return; }                                                            // 15497
        if (lastRow < layerConfig.firstRow) { return; }                                                                // 15498
        if (lastRow === Infinity) {                                                                                    // 15499
            if (this.$showGutter)                                                                                      // 15500
                this.$gutterLayer.update(layerConfig);                                                                 // 15501
            this.$textLayer.update(layerConfig);                                                                       // 15502
            return;                                                                                                    // 15503
        }                                                                                                              // 15504
        this.$textLayer.updateLines(layerConfig, firstRow, lastRow);                                                   // 15505
        return true;                                                                                                   // 15506
    };                                                                                                                 // 15507
                                                                                                                       // 15508
    this.$getLongestLine = function() {                                                                                // 15509
        var charCount = this.session.getScreenWidth();                                                                 // 15510
        if (this.showInvisibles && !this.session.$useWrapMode)                                                         // 15511
            charCount += 1;                                                                                            // 15512
                                                                                                                       // 15513
        return Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(charCount * this.characterWidth));    // 15514
    };                                                                                                                 // 15515
    this.updateFrontMarkers = function() {                                                                             // 15516
        this.$markerFront.setMarkers(this.session.getMarkers(true));                                                   // 15517
        this.$loop.schedule(this.CHANGE_MARKER_FRONT);                                                                 // 15518
    };                                                                                                                 // 15519
    this.updateBackMarkers = function() {                                                                              // 15520
        this.$markerBack.setMarkers(this.session.getMarkers());                                                        // 15521
        this.$loop.schedule(this.CHANGE_MARKER_BACK);                                                                  // 15522
    };                                                                                                                 // 15523
    this.addGutterDecoration = function(row, className){                                                               // 15524
        this.$gutterLayer.addGutterDecoration(row, className);                                                         // 15525
    };                                                                                                                 // 15526
    this.removeGutterDecoration = function(row, className){                                                            // 15527
        this.$gutterLayer.removeGutterDecoration(row, className);                                                      // 15528
    };                                                                                                                 // 15529
    this.updateBreakpoints = function(rows) {                                                                          // 15530
        this.$loop.schedule(this.CHANGE_GUTTER);                                                                       // 15531
    };                                                                                                                 // 15532
    this.setAnnotations = function(annotations) {                                                                      // 15533
        this.$gutterLayer.setAnnotations(annotations);                                                                 // 15534
        this.$loop.schedule(this.CHANGE_GUTTER);                                                                       // 15535
    };                                                                                                                 // 15536
    this.updateCursor = function() {                                                                                   // 15537
        this.$loop.schedule(this.CHANGE_CURSOR);                                                                       // 15538
    };                                                                                                                 // 15539
    this.hideCursor = function() {                                                                                     // 15540
        this.$cursorLayer.hideCursor();                                                                                // 15541
    };                                                                                                                 // 15542
    this.showCursor = function() {                                                                                     // 15543
        this.$cursorLayer.showCursor();                                                                                // 15544
    };                                                                                                                 // 15545
                                                                                                                       // 15546
    this.scrollSelectionIntoView = function(anchor, lead, offset) {                                                    // 15547
        this.scrollCursorIntoView(anchor, offset);                                                                     // 15548
        this.scrollCursorIntoView(lead, offset);                                                                       // 15549
    };                                                                                                                 // 15550
    this.scrollCursorIntoView = function(cursor, offset, $viewMargin) {                                                // 15551
        if (this.$size.scrollerHeight === 0)                                                                           // 15552
            return;                                                                                                    // 15553
                                                                                                                       // 15554
        var pos = this.$cursorLayer.getPixelPosition(cursor);                                                          // 15555
                                                                                                                       // 15556
        var left = pos.left;                                                                                           // 15557
        var top = pos.top;                                                                                             // 15558
                                                                                                                       // 15559
        var topMargin = $viewMargin && $viewMargin.top || 0;                                                           // 15560
        var bottomMargin = $viewMargin && $viewMargin.bottom || 0;                                                     // 15561
                                                                                                                       // 15562
        var scrollTop = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;                          // 15563
                                                                                                                       // 15564
        if (scrollTop + topMargin > top) {                                                                             // 15565
            if (offset)                                                                                                // 15566
                top -= offset * this.$size.scrollerHeight;                                                             // 15567
            if (top === 0)                                                                                             // 15568
                top = -this.scrollMargin.top;                                                                          // 15569
            this.session.setScrollTop(top);                                                                            // 15570
        } else if (scrollTop + this.$size.scrollerHeight - bottomMargin < top + this.lineHeight) {                     // 15571
            if (offset)                                                                                                // 15572
                top += offset * this.$size.scrollerHeight;                                                             // 15573
            this.session.setScrollTop(top + this.lineHeight - this.$size.scrollerHeight);                              // 15574
        }                                                                                                              // 15575
                                                                                                                       // 15576
        var scrollLeft = this.scrollLeft;                                                                              // 15577
                                                                                                                       // 15578
        if (scrollLeft > left) {                                                                                       // 15579
            if (left < this.$padding + 2 * this.layerConfig.characterWidth)                                            // 15580
                left = -this.scrollMargin.left;                                                                        // 15581
            this.session.setScrollLeft(left);                                                                          // 15582
        } else if (scrollLeft + this.$size.scrollerWidth < left + this.characterWidth) {                               // 15583
            this.session.setScrollLeft(Math.round(left + this.characterWidth - this.$size.scrollerWidth));             // 15584
        } else if (scrollLeft <= this.$padding && left - scrollLeft < this.characterWidth) {                           // 15585
            this.session.setScrollLeft(0);                                                                             // 15586
        }                                                                                                              // 15587
    };                                                                                                                 // 15588
    this.getScrollTop = function() {                                                                                   // 15589
        return this.session.getScrollTop();                                                                            // 15590
    };                                                                                                                 // 15591
    this.getScrollLeft = function() {                                                                                  // 15592
        return this.session.getScrollLeft();                                                                           // 15593
    };                                                                                                                 // 15594
    this.getScrollTopRow = function() {                                                                                // 15595
        return this.scrollTop / this.lineHeight;                                                                       // 15596
    };                                                                                                                 // 15597
    this.getScrollBottomRow = function() {                                                                             // 15598
        return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);            // 15599
    };                                                                                                                 // 15600
    this.scrollToRow = function(row) {                                                                                 // 15601
        this.session.setScrollTop(row * this.lineHeight);                                                              // 15602
    };                                                                                                                 // 15603
                                                                                                                       // 15604
    this.alignCursor = function(cursor, alignment) {                                                                   // 15605
        if (typeof cursor == "number")                                                                                 // 15606
            cursor = {row: cursor, column: 0};                                                                         // 15607
                                                                                                                       // 15608
        var pos = this.$cursorLayer.getPixelPosition(cursor);                                                          // 15609
        var h = this.$size.scrollerHeight - this.lineHeight;                                                           // 15610
        var offset = pos.top - h * (alignment || 0);                                                                   // 15611
                                                                                                                       // 15612
        this.session.setScrollTop(offset);                                                                             // 15613
        return offset;                                                                                                 // 15614
    };                                                                                                                 // 15615
                                                                                                                       // 15616
    this.STEPS = 8;                                                                                                    // 15617
    this.$calcSteps = function(fromValue, toValue){                                                                    // 15618
        var i = 0;                                                                                                     // 15619
        var l = this.STEPS;                                                                                            // 15620
        var steps = [];                                                                                                // 15621
                                                                                                                       // 15622
        var func  = function(t, x_min, dx) {                                                                           // 15623
            return dx * (Math.pow(t - 1, 3) + 1) + x_min;                                                              // 15624
        };                                                                                                             // 15625
                                                                                                                       // 15626
        for (i = 0; i < l; ++i)                                                                                        // 15627
            steps.push(func(i / this.STEPS, fromValue, toValue - fromValue));                                          // 15628
                                                                                                                       // 15629
        return steps;                                                                                                  // 15630
    };                                                                                                                 // 15631
    this.scrollToLine = function(line, center, animate, callback) {                                                    // 15632
        var pos = this.$cursorLayer.getPixelPosition({row: line, column: 0});                                          // 15633
        var offset = pos.top;                                                                                          // 15634
        if (center)                                                                                                    // 15635
            offset -= this.$size.scrollerHeight / 2;                                                                   // 15636
                                                                                                                       // 15637
        var initialScroll = this.scrollTop;                                                                            // 15638
        this.session.setScrollTop(offset);                                                                             // 15639
        if (animate !== false)                                                                                         // 15640
            this.animateScrolling(initialScroll, callback);                                                            // 15641
    };                                                                                                                 // 15642
                                                                                                                       // 15643
    this.animateScrolling = function(fromValue, callback) {                                                            // 15644
        var toValue = this.scrollTop;                                                                                  // 15645
        if (!this.$animatedScroll)                                                                                     // 15646
            return;                                                                                                    // 15647
        var _self = this;                                                                                              // 15648
                                                                                                                       // 15649
        if (fromValue == toValue)                                                                                      // 15650
            return;                                                                                                    // 15651
                                                                                                                       // 15652
        if (this.$scrollAnimation) {                                                                                   // 15653
            var oldSteps = this.$scrollAnimation.steps;                                                                // 15654
            if (oldSteps.length) {                                                                                     // 15655
                fromValue = oldSteps[0];                                                                               // 15656
                if (fromValue == toValue)                                                                              // 15657
                    return;                                                                                            // 15658
            }                                                                                                          // 15659
        }                                                                                                              // 15660
                                                                                                                       // 15661
        var steps = _self.$calcSteps(fromValue, toValue);                                                              // 15662
        this.$scrollAnimation = {from: fromValue, to: toValue, steps: steps};                                          // 15663
                                                                                                                       // 15664
        clearInterval(this.$timer);                                                                                    // 15665
                                                                                                                       // 15666
        _self.session.setScrollTop(steps.shift());                                                                     // 15667
        _self.session.$scrollTop = toValue;                                                                            // 15668
        this.$timer = setInterval(function() {                                                                         // 15669
            if (steps.length) {                                                                                        // 15670
                _self.session.setScrollTop(steps.shift());                                                             // 15671
                _self.session.$scrollTop = toValue;                                                                    // 15672
            } else if (toValue != null) {                                                                              // 15673
                _self.session.$scrollTop = -1;                                                                         // 15674
                _self.session.setScrollTop(toValue);                                                                   // 15675
                toValue = null;                                                                                        // 15676
            } else {                                                                                                   // 15677
                _self.$timer = clearInterval(_self.$timer);                                                            // 15678
                _self.$scrollAnimation = null;                                                                         // 15679
                callback && callback();                                                                                // 15680
            }                                                                                                          // 15681
        }, 10);                                                                                                        // 15682
    };                                                                                                                 // 15683
    this.scrollToY = function(scrollTop) {                                                                             // 15684
        if (this.scrollTop !== scrollTop) {                                                                            // 15685
            this.$loop.schedule(this.CHANGE_SCROLL);                                                                   // 15686
            this.scrollTop = scrollTop;                                                                                // 15687
        }                                                                                                              // 15688
    };                                                                                                                 // 15689
    this.scrollToX = function(scrollLeft) {                                                                            // 15690
        if (this.scrollLeft !== scrollLeft)                                                                            // 15691
            this.scrollLeft = scrollLeft;                                                                              // 15692
        this.$loop.schedule(this.CHANGE_H_SCROLL);                                                                     // 15693
    };                                                                                                                 // 15694
    this.scrollTo = function(x, y) {                                                                                   // 15695
        this.session.setScrollTop(y);                                                                                  // 15696
        this.session.setScrollLeft(y);                                                                                 // 15697
    };                                                                                                                 // 15698
    this.scrollBy = function(deltaX, deltaY) {                                                                         // 15699
        deltaY && this.session.setScrollTop(this.session.getScrollTop() + deltaY);                                     // 15700
        deltaX && this.session.setScrollLeft(this.session.getScrollLeft() + deltaX);                                   // 15701
    };                                                                                                                 // 15702
    this.isScrollableBy = function(deltaX, deltaY) {                                                                   // 15703
        if (deltaY < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top)                                    // 15704
           return true;                                                                                                // 15705
        if (deltaY > 0 && this.session.getScrollTop() + this.$size.scrollerHeight                                      // 15706
            - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom)                                              // 15707
           return true;                                                                                                // 15708
        if (deltaX < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left)                                  // 15709
            return true;                                                                                               // 15710
        if (deltaX > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth                                      // 15711
            - this.layerConfig.width < -1 + this.scrollMargin.right)                                                   // 15712
           return true;                                                                                                // 15713
    };                                                                                                                 // 15714
                                                                                                                       // 15715
    this.pixelToScreenCoordinates = function(x, y) {                                                                   // 15716
        var canvasPos = this.scroller.getBoundingClientRect();                                                         // 15717
                                                                                                                       // 15718
        var offset = (x + this.scrollLeft - canvasPos.left - this.$padding) / this.characterWidth;                     // 15719
        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);                                  // 15720
        var col = Math.round(offset);                                                                                  // 15721
                                                                                                                       // 15722
        return {row: row, column: col, side: offset - col > 0 ? 1 : -1};                                               // 15723
    };                                                                                                                 // 15724
                                                                                                                       // 15725
    this.screenToTextCoordinates = function(x, y) {                                                                    // 15726
        var canvasPos = this.scroller.getBoundingClientRect();                                                         // 15727
                                                                                                                       // 15728
        var col = Math.round(                                                                                          // 15729
            (x + this.scrollLeft - canvasPos.left - this.$padding) / this.characterWidth                               // 15730
        );                                                                                                             // 15731
                                                                                                                       // 15732
        var row = (y + this.scrollTop - canvasPos.top) / this.lineHeight;                                              // 15733
                                                                                                                       // 15734
        return this.session.screenToDocumentPosition(row, Math.max(col, 0));                                           // 15735
    };                                                                                                                 // 15736
    this.textToScreenCoordinates = function(row, column) {                                                             // 15737
        var canvasPos = this.scroller.getBoundingClientRect();                                                         // 15738
        var pos = this.session.documentToScreenPosition(row, column);                                                  // 15739
                                                                                                                       // 15740
        var x = this.$padding + Math.round(pos.column * this.characterWidth);                                          // 15741
        var y = pos.row * this.lineHeight;                                                                             // 15742
                                                                                                                       // 15743
        return {                                                                                                       // 15744
            pageX: canvasPos.left + x - this.scrollLeft,                                                               // 15745
            pageY: canvasPos.top + y - this.scrollTop                                                                  // 15746
        };                                                                                                             // 15747
    };                                                                                                                 // 15748
    this.visualizeFocus = function() {                                                                                 // 15749
        dom.addCssClass(this.container, "ace_focus");                                                                  // 15750
    };                                                                                                                 // 15751
    this.visualizeBlur = function() {                                                                                  // 15752
        dom.removeCssClass(this.container, "ace_focus");                                                               // 15753
    };                                                                                                                 // 15754
    this.showComposition = function(position) {                                                                        // 15755
        if (!this.$composition)                                                                                        // 15756
            this.$composition = {                                                                                      // 15757
                keepTextAreaAtCursor: this.$keepTextAreaAtCursor,                                                      // 15758
                cssText: this.textarea.style.cssText                                                                   // 15759
            };                                                                                                         // 15760
                                                                                                                       // 15761
        this.$keepTextAreaAtCursor = true;                                                                             // 15762
        dom.addCssClass(this.textarea, "ace_composition");                                                             // 15763
        this.textarea.style.cssText = "";                                                                              // 15764
        this.$moveTextAreaToCursor();                                                                                  // 15765
    };                                                                                                                 // 15766
    this.setCompositionText = function(text) {                                                                         // 15767
        this.$moveTextAreaToCursor();                                                                                  // 15768
    };                                                                                                                 // 15769
    this.hideComposition = function() {                                                                                // 15770
        if (!this.$composition)                                                                                        // 15771
            return;                                                                                                    // 15772
                                                                                                                       // 15773
        dom.removeCssClass(this.textarea, "ace_composition");                                                          // 15774
        this.$keepTextAreaAtCursor = this.$composition.keepTextAreaAtCursor;                                           // 15775
        this.textarea.style.cssText = this.$composition.cssText;                                                       // 15776
        this.$composition = null;                                                                                      // 15777
    };                                                                                                                 // 15778
    this.setTheme = function(theme, cb) {                                                                              // 15779
        var _self = this;                                                                                              // 15780
        this.$themeId = theme;                                                                                         // 15781
        _self._dispatchEvent('themeChange',{theme:theme});                                                             // 15782
                                                                                                                       // 15783
        if (!theme || typeof theme == "string") {                                                                      // 15784
            var moduleName = theme || this.$options.theme.initialValue;                                                // 15785
            config.loadModule(["theme", moduleName], afterLoad);                                                       // 15786
        } else {                                                                                                       // 15787
            afterLoad(theme);                                                                                          // 15788
        }                                                                                                              // 15789
                                                                                                                       // 15790
        function afterLoad(module) {                                                                                   // 15791
            if (_self.$themeId != theme)                                                                               // 15792
                return cb && cb();                                                                                     // 15793
            if (!module.cssClass)                                                                                      // 15794
                return;                                                                                                // 15795
            dom.importCssString(                                                                                       // 15796
                module.cssText,                                                                                        // 15797
                module.cssClass,                                                                                       // 15798
                _self.container.ownerDocument                                                                          // 15799
            );                                                                                                         // 15800
                                                                                                                       // 15801
            if (_self.theme)                                                                                           // 15802
                dom.removeCssClass(_self.container, _self.theme.cssClass);                                             // 15803
                                                                                                                       // 15804
            var padding = "padding" in module ? module.padding                                                         // 15805
                : "padding" in (_self.theme || {}) ? 4 : _self.$padding;                                               // 15806
            if (_self.$padding && padding != _self.$padding)                                                           // 15807
                _self.setPadding(padding);                                                                             // 15808
            _self.$theme = module.cssClass;                                                                            // 15809
                                                                                                                       // 15810
            _self.theme = module;                                                                                      // 15811
            dom.addCssClass(_self.container, module.cssClass);                                                         // 15812
            dom.setCssClass(_self.container, "ace_dark", module.isDark);                                               // 15813
            if (_self.$size) {                                                                                         // 15814
                _self.$size.width = 0;                                                                                 // 15815
                _self.$updateSizeAsync();                                                                              // 15816
            }                                                                                                          // 15817
                                                                                                                       // 15818
            _self._dispatchEvent('themeLoaded', {theme:module});                                                       // 15819
            cb && cb();                                                                                                // 15820
        }                                                                                                              // 15821
    };                                                                                                                 // 15822
    this.getTheme = function() {                                                                                       // 15823
        return this.$themeId;                                                                                          // 15824
    };                                                                                                                 // 15825
    this.setStyle = function(style, include) {                                                                         // 15826
        dom.setCssClass(this.container, style, include !== false);                                                     // 15827
    };                                                                                                                 // 15828
    this.unsetStyle = function(style) {                                                                                // 15829
        dom.removeCssClass(this.container, style);                                                                     // 15830
    };                                                                                                                 // 15831
                                                                                                                       // 15832
    this.setCursorStyle = function(style) {                                                                            // 15833
        if (this.scroller.style.cursor != style)                                                                       // 15834
            this.scroller.style.cursor = style;                                                                        // 15835
    };                                                                                                                 // 15836
    this.setMouseCursor = function(cursorStyle) {                                                                      // 15837
        this.scroller.style.cursor = cursorStyle;                                                                      // 15838
    };                                                                                                                 // 15839
    this.destroy = function() {                                                                                        // 15840
        this.$textLayer.destroy();                                                                                     // 15841
        this.$cursorLayer.destroy();                                                                                   // 15842
    };                                                                                                                 // 15843
                                                                                                                       // 15844
}).call(VirtualRenderer.prototype);                                                                                    // 15845
                                                                                                                       // 15846
                                                                                                                       // 15847
config.defineOptions(VirtualRenderer.prototype, "renderer", {                                                          // 15848
    animatedScroll: {initialValue: false},                                                                             // 15849
    showInvisibles: {                                                                                                  // 15850
        set: function(value) {                                                                                         // 15851
            if (this.$textLayer.setShowInvisibles(value))                                                              // 15852
                this.$loop.schedule(this.CHANGE_TEXT);                                                                 // 15853
        },                                                                                                             // 15854
        initialValue: false                                                                                            // 15855
    },                                                                                                                 // 15856
    showPrintMargin: {                                                                                                 // 15857
        set: function() { this.$updatePrintMargin(); },                                                                // 15858
        initialValue: true                                                                                             // 15859
    },                                                                                                                 // 15860
    printMarginColumn: {                                                                                               // 15861
        set: function() { this.$updatePrintMargin(); },                                                                // 15862
        initialValue: 80                                                                                               // 15863
    },                                                                                                                 // 15864
    printMargin: {                                                                                                     // 15865
        set: function(val) {                                                                                           // 15866
            if (typeof val == "number")                                                                                // 15867
                this.$printMarginColumn = val;                                                                         // 15868
            this.$showPrintMargin = !!val;                                                                             // 15869
            this.$updatePrintMargin();                                                                                 // 15870
        },                                                                                                             // 15871
        get: function() {                                                                                              // 15872
            return this.$showPrintMargin && this.$printMarginColumn;                                                   // 15873
        }                                                                                                              // 15874
    },                                                                                                                 // 15875
    showGutter: {                                                                                                      // 15876
        set: function(show){                                                                                           // 15877
            this.$gutter.style.display = show ? "block" : "none";                                                      // 15878
            this.$loop.schedule(this.CHANGE_FULL);                                                                     // 15879
            this.onGutterResize();                                                                                     // 15880
        },                                                                                                             // 15881
        initialValue: true                                                                                             // 15882
    },                                                                                                                 // 15883
    fadeFoldWidgets: {                                                                                                 // 15884
        set: function(show) {                                                                                          // 15885
            dom.setCssClass(this.$gutter, "ace_fade-fold-widgets", show);                                              // 15886
        },                                                                                                             // 15887
        initialValue: false                                                                                            // 15888
    },                                                                                                                 // 15889
    showFoldWidgets: {                                                                                                 // 15890
        set: function(show) {this.$gutterLayer.setShowFoldWidgets(show)},                                              // 15891
        initialValue: true                                                                                             // 15892
    },                                                                                                                 // 15893
    showLineNumbers: {                                                                                                 // 15894
        set: function(show) {                                                                                          // 15895
            this.$gutterLayer.setShowLineNumbers(show);                                                                // 15896
            this.$loop.schedule(this.CHANGE_GUTTER);                                                                   // 15897
        },                                                                                                             // 15898
        initialValue: true                                                                                             // 15899
    },                                                                                                                 // 15900
    displayIndentGuides: {                                                                                             // 15901
        set: function(show) {                                                                                          // 15902
            if (this.$textLayer.setDisplayIndentGuides(show))                                                          // 15903
                this.$loop.schedule(this.CHANGE_TEXT);                                                                 // 15904
        },                                                                                                             // 15905
        initialValue: true                                                                                             // 15906
    },                                                                                                                 // 15907
    highlightGutterLine: {                                                                                             // 15908
        set: function(shouldHighlight) {                                                                               // 15909
            if (!this.$gutterLineHighlight) {                                                                          // 15910
                this.$gutterLineHighlight = dom.createElement("div");                                                  // 15911
                this.$gutterLineHighlight.className = "ace_gutter-active-line";                                        // 15912
                this.$gutter.appendChild(this.$gutterLineHighlight);                                                   // 15913
                return;                                                                                                // 15914
            }                                                                                                          // 15915
                                                                                                                       // 15916
            this.$gutterLineHighlight.style.display = shouldHighlight ? "" : "none";                                   // 15917
            if (this.$cursorLayer.$pixelPos)                                                                           // 15918
                this.$updateGutterLineHighlight();                                                                     // 15919
        },                                                                                                             // 15920
        initialValue: false,                                                                                           // 15921
        value: true                                                                                                    // 15922
    },                                                                                                                 // 15923
    hScrollBarAlwaysVisible: {                                                                                         // 15924
        set: function(val) {                                                                                           // 15925
            if (!this.$hScrollBarAlwaysVisible || !this.$horizScroll)                                                  // 15926
                this.$loop.schedule(this.CHANGE_SCROLL);                                                               // 15927
        },                                                                                                             // 15928
        initialValue: false                                                                                            // 15929
    },                                                                                                                 // 15930
    vScrollBarAlwaysVisible: {                                                                                         // 15931
        set: function(val) {                                                                                           // 15932
            if (!this.$vScrollBarAlwaysVisible || !this.$vScroll)                                                      // 15933
                this.$loop.schedule(this.CHANGE_SCROLL);                                                               // 15934
        },                                                                                                             // 15935
        initialValue: false                                                                                            // 15936
    },                                                                                                                 // 15937
    fontSize:  {                                                                                                       // 15938
        set: function(size) {                                                                                          // 15939
            if (typeof size == "number")                                                                               // 15940
                size = size + "px";                                                                                    // 15941
            this.container.style.fontSize = size;                                                                      // 15942
            this.updateFontSize();                                                                                     // 15943
        },                                                                                                             // 15944
        initialValue: 12                                                                                               // 15945
    },                                                                                                                 // 15946
    fontFamily: {                                                                                                      // 15947
        set: function(name) {                                                                                          // 15948
            this.container.style.fontFamily = name;                                                                    // 15949
            this.updateFontSize();                                                                                     // 15950
        }                                                                                                              // 15951
    },                                                                                                                 // 15952
    maxLines: {                                                                                                        // 15953
        set: function(val) {                                                                                           // 15954
            this.updateFull();                                                                                         // 15955
        }                                                                                                              // 15956
    },                                                                                                                 // 15957
    minLines: {                                                                                                        // 15958
        set: function(val) {                                                                                           // 15959
            this.updateFull();                                                                                         // 15960
        }                                                                                                              // 15961
    },                                                                                                                 // 15962
    scrollPastEnd: {                                                                                                   // 15963
        set: function(val) {                                                                                           // 15964
            val = +val || 0;                                                                                           // 15965
            if (this.$scrollPastEnd == val)                                                                            // 15966
                return;                                                                                                // 15967
            this.$scrollPastEnd = val;                                                                                 // 15968
            this.$loop.schedule(this.CHANGE_SCROLL);                                                                   // 15969
        },                                                                                                             // 15970
        initialValue: 0,                                                                                               // 15971
        handlesSet: true                                                                                               // 15972
    },                                                                                                                 // 15973
    fixedWidthGutter: {                                                                                                // 15974
        set: function(val) {                                                                                           // 15975
            this.$gutterLayer.$fixedWidth = !!val;                                                                     // 15976
            this.$loop.schedule(this.CHANGE_GUTTER);                                                                   // 15977
        }                                                                                                              // 15978
    },                                                                                                                 // 15979
    theme: {                                                                                                           // 15980
        set: function(val) { this.setTheme(val) },                                                                     // 15981
        get: function() { return this.$themeId || this.theme; },                                                       // 15982
        initialValue: "./theme/textmate",                                                                              // 15983
        handlesSet: true                                                                                               // 15984
    }                                                                                                                  // 15985
});                                                                                                                    // 15986
                                                                                                                       // 15987
exports.VirtualRenderer = VirtualRenderer;                                                                             // 15988
});                                                                                                                    // 15989
                                                                                                                       // 15990
define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"], function(require, exports, module) {
"use strict";                                                                                                          // 15992
                                                                                                                       // 15993
var oop = require("../lib/oop");                                                                                       // 15994
var net = require("../lib/net");                                                                                       // 15995
var EventEmitter = require("../lib/event_emitter").EventEmitter;                                                       // 15996
var config = require("../config");                                                                                     // 15997
                                                                                                                       // 15998
var WorkerClient = function(topLevelNamespaces, mod, classname, workerUrl) {                                           // 15999
    this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);                                                            // 16000
    this.changeListener = this.changeListener.bind(this);                                                              // 16001
    this.onMessage = this.onMessage.bind(this);                                                                        // 16002
    if (require.nameToUrl && !require.toUrl)                                                                           // 16003
        require.toUrl = require.nameToUrl;                                                                             // 16004
                                                                                                                       // 16005
    if (config.get("packaged") || !require.toUrl) {                                                                    // 16006
        workerUrl = workerUrl || config.moduleUrl(mod, "worker");                                                      // 16007
    } else {                                                                                                           // 16008
        var normalizePath = this.$normalizePath;                                                                       // 16009
        workerUrl = workerUrl || normalizePath(require.toUrl("ace/worker/worker.js", null, "_"));                      // 16010
                                                                                                                       // 16011
        var tlns = {};                                                                                                 // 16012
        topLevelNamespaces.forEach(function(ns) {                                                                      // 16013
            tlns[ns] = normalizePath(require.toUrl(ns, null, "_").replace(/(\.js)?(\?.*)?$/, ""));                     // 16014
        });                                                                                                            // 16015
    }                                                                                                                  // 16016
                                                                                                                       // 16017
    try {                                                                                                              // 16018
        this.$worker = new Worker(workerUrl);                                                                          // 16019
    } catch(e) {                                                                                                       // 16020
        if (e instanceof window.DOMException) {                                                                        // 16021
            var blob = this.$workerBlob(workerUrl);                                                                    // 16022
            var URL = window.URL || window.webkitURL;                                                                  // 16023
            var blobURL = URL.createObjectURL(blob);                                                                   // 16024
                                                                                                                       // 16025
            this.$worker = new Worker(blobURL);                                                                        // 16026
            URL.revokeObjectURL(blobURL);                                                                              // 16027
        } else {                                                                                                       // 16028
            throw e;                                                                                                   // 16029
        }                                                                                                              // 16030
    }                                                                                                                  // 16031
    this.$worker.postMessage({                                                                                         // 16032
        init : true,                                                                                                   // 16033
        tlns : tlns,                                                                                                   // 16034
        module : mod,                                                                                                  // 16035
        classname : classname                                                                                          // 16036
    });                                                                                                                // 16037
                                                                                                                       // 16038
    this.callbackId = 1;                                                                                               // 16039
    this.callbacks = {};                                                                                               // 16040
                                                                                                                       // 16041
    this.$worker.onmessage = this.onMessage;                                                                           // 16042
};                                                                                                                     // 16043
                                                                                                                       // 16044
(function(){                                                                                                           // 16045
                                                                                                                       // 16046
    oop.implement(this, EventEmitter);                                                                                 // 16047
                                                                                                                       // 16048
    this.onMessage = function(e) {                                                                                     // 16049
        var msg = e.data;                                                                                              // 16050
        switch(msg.type) {                                                                                             // 16051
            case "event":                                                                                              // 16052
                this._signal(msg.name, {data: msg.data});                                                              // 16053
                break;                                                                                                 // 16054
            case "call":                                                                                               // 16055
                var callback = this.callbacks[msg.id];                                                                 // 16056
                if (callback) {                                                                                        // 16057
                    callback(msg.data);                                                                                // 16058
                    delete this.callbacks[msg.id];                                                                     // 16059
                }                                                                                                      // 16060
                break;                                                                                                 // 16061
            case "error":                                                                                              // 16062
                this.reportError(msg.data);                                                                            // 16063
                break;                                                                                                 // 16064
            case "log":                                                                                                // 16065
                window.console && console.log && console.log.apply(console, msg.data);                                 // 16066
                break;                                                                                                 // 16067
        }                                                                                                              // 16068
    };                                                                                                                 // 16069
                                                                                                                       // 16070
    this.reportError = function(err) {                                                                                 // 16071
        window.console && console.error && console.error(err);                                                         // 16072
    };                                                                                                                 // 16073
                                                                                                                       // 16074
    this.$normalizePath = function(path) {                                                                             // 16075
        return net.qualifyURL(path);                                                                                   // 16076
    };                                                                                                                 // 16077
                                                                                                                       // 16078
    this.terminate = function() {                                                                                      // 16079
        this._signal("terminate", {});                                                                                 // 16080
        this.deltaQueue = null;                                                                                        // 16081
        this.$worker.terminate();                                                                                      // 16082
        this.$worker = null;                                                                                           // 16083
        if (this.$doc)                                                                                                 // 16084
            this.$doc.off("change", this.changeListener);                                                              // 16085
        this.$doc = null;                                                                                              // 16086
    };                                                                                                                 // 16087
                                                                                                                       // 16088
    this.send = function(cmd, args) {                                                                                  // 16089
        this.$worker.postMessage({command: cmd, args: args});                                                          // 16090
    };                                                                                                                 // 16091
                                                                                                                       // 16092
    this.call = function(cmd, args, callback) {                                                                        // 16093
        if (callback) {                                                                                                // 16094
            var id = this.callbackId++;                                                                                // 16095
            this.callbacks[id] = callback;                                                                             // 16096
            args.push(id);                                                                                             // 16097
        }                                                                                                              // 16098
        this.send(cmd, args);                                                                                          // 16099
    };                                                                                                                 // 16100
                                                                                                                       // 16101
    this.emit = function(event, data) {                                                                                // 16102
        try {                                                                                                          // 16103
            this.$worker.postMessage({event: event, data: {data: data.data}});                                         // 16104
        }                                                                                                              // 16105
        catch(ex) {                                                                                                    // 16106
            console.error(ex.stack);                                                                                   // 16107
        }                                                                                                              // 16108
    };                                                                                                                 // 16109
                                                                                                                       // 16110
    this.attachToDocument = function(doc) {                                                                            // 16111
        if(this.$doc)                                                                                                  // 16112
            this.terminate();                                                                                          // 16113
                                                                                                                       // 16114
        this.$doc = doc;                                                                                               // 16115
        this.call("setValue", [doc.getValue()]);                                                                       // 16116
        doc.on("change", this.changeListener);                                                                         // 16117
    };                                                                                                                 // 16118
                                                                                                                       // 16119
    this.changeListener = function(e) {                                                                                // 16120
        if (!this.deltaQueue) {                                                                                        // 16121
            this.deltaQueue = [e.data];                                                                                // 16122
            setTimeout(this.$sendDeltaQueue, 0);                                                                       // 16123
        } else                                                                                                         // 16124
            this.deltaQueue.push(e.data);                                                                              // 16125
    };                                                                                                                 // 16126
                                                                                                                       // 16127
    this.$sendDeltaQueue = function() {                                                                                // 16128
        var q = this.deltaQueue;                                                                                       // 16129
        if (!q) return;                                                                                                // 16130
        this.deltaQueue = null;                                                                                        // 16131
        if (q.length > 20 && q.length > this.$doc.getLength() >> 1) {                                                  // 16132
            this.call("setValue", [this.$doc.getValue()]);                                                             // 16133
        } else                                                                                                         // 16134
            this.emit("change", {data: q});                                                                            // 16135
    };                                                                                                                 // 16136
                                                                                                                       // 16137
    this.$workerBlob = function(workerUrl) {                                                                           // 16138
        var script = "importScripts('" + net.qualifyURL(workerUrl) + "');";                                            // 16139
        try {                                                                                                          // 16140
            return new Blob([script], {"type": "application/javascript"});                                             // 16141
        } catch (e) { // Backwards-compatibility                                                                       // 16142
            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;                 // 16143
            var blobBuilder = new BlobBuilder();                                                                       // 16144
            blobBuilder.append(script);                                                                                // 16145
            return blobBuilder.getBlob("application/javascript");                                                      // 16146
        }                                                                                                              // 16147
    };                                                                                                                 // 16148
                                                                                                                       // 16149
}).call(WorkerClient.prototype);                                                                                       // 16150
                                                                                                                       // 16151
                                                                                                                       // 16152
var UIWorkerClient = function(topLevelNamespaces, mod, classname) {                                                    // 16153
    this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);                                                            // 16154
    this.changeListener = this.changeListener.bind(this);                                                              // 16155
    this.callbackId = 1;                                                                                               // 16156
    this.callbacks = {};                                                                                               // 16157
    this.messageBuffer = [];                                                                                           // 16158
                                                                                                                       // 16159
    var main = null;                                                                                                   // 16160
    var emitSync = false;                                                                                              // 16161
    var sender = Object.create(EventEmitter);                                                                          // 16162
    var _self = this;                                                                                                  // 16163
                                                                                                                       // 16164
    this.$worker = {};                                                                                                 // 16165
    this.$worker.terminate = function() {};                                                                            // 16166
    this.$worker.postMessage = function(e) {                                                                           // 16167
        _self.messageBuffer.push(e);                                                                                   // 16168
        if (main) {                                                                                                    // 16169
            if (emitSync)                                                                                              // 16170
                setTimeout(processNext);                                                                               // 16171
            else                                                                                                       // 16172
                processNext();                                                                                         // 16173
        }                                                                                                              // 16174
    };                                                                                                                 // 16175
    this.setEmitSync = function(val) { emitSync = val };                                                               // 16176
                                                                                                                       // 16177
    var processNext = function() {                                                                                     // 16178
        var msg = _self.messageBuffer.shift();                                                                         // 16179
        if (msg.command)                                                                                               // 16180
            main[msg.command].apply(main, msg.args);                                                                   // 16181
        else if (msg.event)                                                                                            // 16182
            sender._signal(msg.event, msg.data);                                                                       // 16183
    };                                                                                                                 // 16184
                                                                                                                       // 16185
    sender.postMessage = function(msg) {                                                                               // 16186
        _self.onMessage({data: msg});                                                                                  // 16187
    };                                                                                                                 // 16188
    sender.callback = function(data, callbackId) {                                                                     // 16189
        this.postMessage({type: "call", id: callbackId, data: data});                                                  // 16190
    };                                                                                                                 // 16191
    sender.emit = function(name, data) {                                                                               // 16192
        this.postMessage({type: "event", name: name, data: data});                                                     // 16193
    };                                                                                                                 // 16194
                                                                                                                       // 16195
    config.loadModule(["worker", mod], function(Main) {                                                                // 16196
        main = new Main[classname](sender);                                                                            // 16197
        while (_self.messageBuffer.length)                                                                             // 16198
            processNext();                                                                                             // 16199
    });                                                                                                                // 16200
};                                                                                                                     // 16201
                                                                                                                       // 16202
UIWorkerClient.prototype = WorkerClient.prototype;                                                                     // 16203
                                                                                                                       // 16204
exports.UIWorkerClient = UIWorkerClient;                                                                               // 16205
exports.WorkerClient = WorkerClient;                                                                                   // 16206
                                                                                                                       // 16207
});                                                                                                                    // 16208
                                                                                                                       // 16209
define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"], function(require, exports, module) {
"use strict";                                                                                                          // 16211
                                                                                                                       // 16212
var Range = require("./range").Range;                                                                                  // 16213
var EventEmitter = require("./lib/event_emitter").EventEmitter;                                                        // 16214
var oop = require("./lib/oop");                                                                                        // 16215
                                                                                                                       // 16216
var PlaceHolder = function(session, length, pos, others, mainClass, othersClass) {                                     // 16217
    var _self = this;                                                                                                  // 16218
    this.length = length;                                                                                              // 16219
    this.session = session;                                                                                            // 16220
    this.doc = session.getDocument();                                                                                  // 16221
    this.mainClass = mainClass;                                                                                        // 16222
    this.othersClass = othersClass;                                                                                    // 16223
    this.$onUpdate = this.onUpdate.bind(this);                                                                         // 16224
    this.doc.on("change", this.$onUpdate);                                                                             // 16225
    this.$others = others;                                                                                             // 16226
                                                                                                                       // 16227
    this.$onCursorChange = function() {                                                                                // 16228
        setTimeout(function() {                                                                                        // 16229
            _self.onCursorChange();                                                                                    // 16230
        });                                                                                                            // 16231
    };                                                                                                                 // 16232
                                                                                                                       // 16233
    this.$pos = pos;                                                                                                   // 16234
    var undoStack = session.getUndoManager().$undoStack || session.getUndoManager().$undostack || {length: -1};        // 16235
    this.$undoStackDepth =  undoStack.length;                                                                          // 16236
    this.setup();                                                                                                      // 16237
                                                                                                                       // 16238
    session.selection.on("changeCursor", this.$onCursorChange);                                                        // 16239
};                                                                                                                     // 16240
                                                                                                                       // 16241
(function() {                                                                                                          // 16242
                                                                                                                       // 16243
    oop.implement(this, EventEmitter);                                                                                 // 16244
    this.setup = function() {                                                                                          // 16245
        var _self = this;                                                                                              // 16246
        var doc = this.doc;                                                                                            // 16247
        var session = this.session;                                                                                    // 16248
        var pos = this.$pos;                                                                                           // 16249
                                                                                                                       // 16250
        this.selectionBefore = session.selection.toJSON();                                                             // 16251
        if (session.selection.inMultiSelectMode)                                                                       // 16252
            session.selection.toSingleRange();                                                                         // 16253
                                                                                                                       // 16254
        this.pos = doc.createAnchor(pos.row, pos.column);                                                              // 16255
        this.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + this.length), this.mainClass, null, false);
        this.pos.on("change", function(event) {                                                                        // 16257
            session.removeMarker(_self.markerId);                                                                      // 16258
            _self.markerId = session.addMarker(new Range(event.value.row, event.value.column, event.value.row, event.value.column+_self.length), _self.mainClass, null, false);
        });                                                                                                            // 16260
        this.others = [];                                                                                              // 16261
        this.$others.forEach(function(other) {                                                                         // 16262
            var anchor = doc.createAnchor(other.row, other.column);                                                    // 16263
            _self.others.push(anchor);                                                                                 // 16264
        });                                                                                                            // 16265
        session.setUndoSelect(false);                                                                                  // 16266
    };                                                                                                                 // 16267
    this.showOtherMarkers = function() {                                                                               // 16268
        if(this.othersActive) return;                                                                                  // 16269
        var session = this.session;                                                                                    // 16270
        var _self = this;                                                                                              // 16271
        this.othersActive = true;                                                                                      // 16272
        this.others.forEach(function(anchor) {                                                                         // 16273
            anchor.markerId = session.addMarker(new Range(anchor.row, anchor.column, anchor.row, anchor.column+_self.length), _self.othersClass, null, false);
            anchor.on("change", function(event) {                                                                      // 16275
                session.removeMarker(anchor.markerId);                                                                 // 16276
                anchor.markerId = session.addMarker(new Range(event.value.row, event.value.column, event.value.row, event.value.column+_self.length), _self.othersClass, null, false);
            });                                                                                                        // 16278
        });                                                                                                            // 16279
    };                                                                                                                 // 16280
    this.hideOtherMarkers = function() {                                                                               // 16281
        if(!this.othersActive) return;                                                                                 // 16282
        this.othersActive = false;                                                                                     // 16283
        for (var i = 0; i < this.others.length; i++) {                                                                 // 16284
            this.session.removeMarker(this.others[i].markerId);                                                        // 16285
        }                                                                                                              // 16286
    };                                                                                                                 // 16287
    this.onUpdate = function(event) {                                                                                  // 16288
        var delta = event.data;                                                                                        // 16289
        var range = delta.range;                                                                                       // 16290
        if(range.start.row !== range.end.row) return;                                                                  // 16291
        if(range.start.row !== this.pos.row) return;                                                                   // 16292
        if (this.$updating) return;                                                                                    // 16293
        this.$updating = true;                                                                                         // 16294
        var lengthDiff = delta.action === "insertText" ? range.end.column - range.start.column : range.start.column - range.end.column;
                                                                                                                       // 16296
        if(range.start.column >= this.pos.column && range.start.column <= this.pos.column + this.length + 1) {         // 16297
            var distanceFromStart = range.start.column - this.pos.column;                                              // 16298
            this.length += lengthDiff;                                                                                 // 16299
            if(!this.session.$fromUndo) {                                                                              // 16300
                if(delta.action === "insertText") {                                                                    // 16301
                    for (var i = this.others.length - 1; i >= 0; i--) {                                                // 16302
                        var otherPos = this.others[i];                                                                 // 16303
                        var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};                 // 16304
                        if(otherPos.row === range.start.row && range.start.column < otherPos.column)                   // 16305
                            newPos.column += lengthDiff;                                                               // 16306
                        this.doc.insert(newPos, delta.text);                                                           // 16307
                    }                                                                                                  // 16308
                } else if(delta.action === "removeText") {                                                             // 16309
                    for (var i = this.others.length - 1; i >= 0; i--) {                                                // 16310
                        var otherPos = this.others[i];                                                                 // 16311
                        var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};                 // 16312
                        if(otherPos.row === range.start.row && range.start.column < otherPos.column)                   // 16313
                            newPos.column += lengthDiff;                                                               // 16314
                        this.doc.remove(new Range(newPos.row, newPos.column, newPos.row, newPos.column - lengthDiff)); // 16315
                    }                                                                                                  // 16316
                }                                                                                                      // 16317
                if(range.start.column === this.pos.column && delta.action === "insertText") {                          // 16318
                    setTimeout(function() {                                                                            // 16319
                        this.pos.setPosition(this.pos.row, this.pos.column - lengthDiff);                              // 16320
                        for (var i = 0; i < this.others.length; i++) {                                                 // 16321
                            var other = this.others[i];                                                                // 16322
                            var newPos = {row: other.row, column: other.column - lengthDiff};                          // 16323
                            if(other.row === range.start.row && range.start.column < other.column)                     // 16324
                                newPos.column += lengthDiff;                                                           // 16325
                            other.setPosition(newPos.row, newPos.column);                                              // 16326
                        }                                                                                              // 16327
                    }.bind(this), 0);                                                                                  // 16328
                }                                                                                                      // 16329
                else if(range.start.column === this.pos.column && delta.action === "removeText") {                     // 16330
                    setTimeout(function() {                                                                            // 16331
                        for (var i = 0; i < this.others.length; i++) {                                                 // 16332
                            var other = this.others[i];                                                                // 16333
                            if(other.row === range.start.row && range.start.column < other.column) {                   // 16334
                                other.setPosition(other.row, other.column - lengthDiff);                               // 16335
                            }                                                                                          // 16336
                        }                                                                                              // 16337
                    }.bind(this), 0);                                                                                  // 16338
                }                                                                                                      // 16339
            }                                                                                                          // 16340
            this.pos._emit("change", {value: this.pos});                                                               // 16341
            for (var i = 0; i < this.others.length; i++) {                                                             // 16342
                this.others[i]._emit("change", {value: this.others[i]});                                               // 16343
            }                                                                                                          // 16344
        }                                                                                                              // 16345
        this.$updating = false;                                                                                        // 16346
    };                                                                                                                 // 16347
                                                                                                                       // 16348
    this.onCursorChange = function(event) {                                                                            // 16349
        if (this.$updating || !this.session) return;                                                                   // 16350
        var pos = this.session.selection.getCursor();                                                                  // 16351
        if (pos.row === this.pos.row && pos.column >= this.pos.column && pos.column <= this.pos.column + this.length) {
            this.showOtherMarkers();                                                                                   // 16353
            this._emit("cursorEnter", event);                                                                          // 16354
        } else {                                                                                                       // 16355
            this.hideOtherMarkers();                                                                                   // 16356
            this._emit("cursorLeave", event);                                                                          // 16357
        }                                                                                                              // 16358
    };                                                                                                                 // 16359
    this.detach = function() {                                                                                         // 16360
        this.session.removeMarker(this.markerId);                                                                      // 16361
        this.hideOtherMarkers();                                                                                       // 16362
        this.doc.removeEventListener("change", this.$onUpdate);                                                        // 16363
        this.session.selection.removeEventListener("changeCursor", this.$onCursorChange);                              // 16364
        this.pos.detach();                                                                                             // 16365
        for (var i = 0; i < this.others.length; i++) {                                                                 // 16366
            this.others[i].detach();                                                                                   // 16367
        }                                                                                                              // 16368
        this.session.setUndoSelect(true);                                                                              // 16369
        this.session = null;                                                                                           // 16370
    };                                                                                                                 // 16371
    this.cancel = function() {                                                                                         // 16372
        if(this.$undoStackDepth === -1)                                                                                // 16373
            throw Error("Canceling placeholders only supported with undo manager attached to session.");               // 16374
        var undoManager = this.session.getUndoManager();                                                               // 16375
        var undosRequired = (undoManager.$undoStack || undoManager.$undostack).length - this.$undoStackDepth;          // 16376
        for (var i = 0; i < undosRequired; i++) {                                                                      // 16377
            undoManager.undo(true);                                                                                    // 16378
        }                                                                                                              // 16379
        if (this.selectionBefore)                                                                                      // 16380
            this.session.selection.fromJSON(this.selectionBefore);                                                     // 16381
    };                                                                                                                 // 16382
}).call(PlaceHolder.prototype);                                                                                        // 16383
                                                                                                                       // 16384
                                                                                                                       // 16385
exports.PlaceHolder = PlaceHolder;                                                                                     // 16386
});                                                                                                                    // 16387
                                                                                                                       // 16388
define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"], function(require, exports, module) {
                                                                                                                       // 16390
var event = require("../lib/event");                                                                                   // 16391
var useragent = require("../lib/useragent");                                                                           // 16392
function isSamePoint(p1, p2) {                                                                                         // 16393
    return p1.row == p2.row && p1.column == p2.column;                                                                 // 16394
}                                                                                                                      // 16395
                                                                                                                       // 16396
function onMouseDown(e) {                                                                                              // 16397
    var ev = e.domEvent;                                                                                               // 16398
    var alt = ev.altKey;                                                                                               // 16399
    var shift = ev.shiftKey;                                                                                           // 16400
    var ctrl = ev.ctrlKey;                                                                                             // 16401
    var accel = e.getAccelKey();                                                                                       // 16402
    var button = e.getButton();                                                                                        // 16403
                                                                                                                       // 16404
    if (ctrl && useragent.isMac)                                                                                       // 16405
        button = ev.button;                                                                                            // 16406
                                                                                                                       // 16407
    if (e.editor.inMultiSelectMode && button == 2) {                                                                   // 16408
        e.editor.textInput.onContextMenu(e.domEvent);                                                                  // 16409
        return;                                                                                                        // 16410
    }                                                                                                                  // 16411
                                                                                                                       // 16412
    if (!ctrl && !alt && !accel) {                                                                                     // 16413
        if (button === 0 && e.editor.inMultiSelectMode)                                                                // 16414
            e.editor.exitMultiSelectMode();                                                                            // 16415
        return;                                                                                                        // 16416
    }                                                                                                                  // 16417
                                                                                                                       // 16418
    if (button !== 0)                                                                                                  // 16419
        return;                                                                                                        // 16420
                                                                                                                       // 16421
    var editor = e.editor;                                                                                             // 16422
    var selection = editor.selection;                                                                                  // 16423
    var isMultiSelect = editor.inMultiSelectMode;                                                                      // 16424
    var pos = e.getDocumentPosition();                                                                                 // 16425
    var cursor = selection.getCursor();                                                                                // 16426
    var inSelection = e.inSelection() || (selection.isEmpty() && isSamePoint(pos, cursor));                            // 16427
                                                                                                                       // 16428
    var mouseX = e.x, mouseY = e.y;                                                                                    // 16429
    var onMouseSelection = function(e) {                                                                               // 16430
        mouseX = e.clientX;                                                                                            // 16431
        mouseY = e.clientY;                                                                                            // 16432
    };                                                                                                                 // 16433
                                                                                                                       // 16434
    var session = editor.session;                                                                                      // 16435
    var screenAnchor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);                                       // 16436
    var screenCursor = screenAnchor;                                                                                   // 16437
                                                                                                                       // 16438
    var selectionMode;                                                                                                 // 16439
    if (editor.$mouseHandler.$enableJumpToDef) {                                                                       // 16440
        if (ctrl && alt || accel && alt)                                                                               // 16441
            selectionMode = "add";                                                                                     // 16442
        else if (alt)                                                                                                  // 16443
            selectionMode = "block";                                                                                   // 16444
    } else {                                                                                                           // 16445
        if (accel && !alt) {                                                                                           // 16446
            selectionMode = "add";                                                                                     // 16447
            if (!isMultiSelect && shift)                                                                               // 16448
                return;                                                                                                // 16449
        } else if (alt) {                                                                                              // 16450
            selectionMode = "block";                                                                                   // 16451
        }                                                                                                              // 16452
    }                                                                                                                  // 16453
                                                                                                                       // 16454
    if (selectionMode && useragent.isMac && ev.ctrlKey) {                                                              // 16455
        editor.$mouseHandler.cancelContextMenu();                                                                      // 16456
    }                                                                                                                  // 16457
                                                                                                                       // 16458
    if (selectionMode == "add") {                                                                                      // 16459
        if (!isMultiSelect && inSelection)                                                                             // 16460
            return; // dragging                                                                                        // 16461
                                                                                                                       // 16462
        if (!isMultiSelect) {                                                                                          // 16463
            var range = selection.toOrientedRange();                                                                   // 16464
            editor.addSelectionMarker(range);                                                                          // 16465
        }                                                                                                              // 16466
                                                                                                                       // 16467
        var oldRange = selection.rangeList.rangeAtPoint(pos);                                                          // 16468
                                                                                                                       // 16469
                                                                                                                       // 16470
        editor.$blockScrolling++;                                                                                      // 16471
        editor.inVirtualSelectionMode = true;                                                                          // 16472
                                                                                                                       // 16473
        if (shift) {                                                                                                   // 16474
            oldRange = null;                                                                                           // 16475
            range = selection.ranges[0];                                                                               // 16476
            editor.removeSelectionMarker(range);                                                                       // 16477
        }                                                                                                              // 16478
        editor.once("mouseup", function() {                                                                            // 16479
            var tmpSel = selection.toOrientedRange();                                                                  // 16480
                                                                                                                       // 16481
            if (oldRange && tmpSel.isEmpty() && isSamePoint(oldRange.cursor, tmpSel.cursor))                           // 16482
                selection.substractPoint(tmpSel.cursor);                                                               // 16483
            else {                                                                                                     // 16484
                if (shift) {                                                                                           // 16485
                    selection.substractPoint(range.cursor);                                                            // 16486
                } else if (range) {                                                                                    // 16487
                    editor.removeSelectionMarker(range);                                                               // 16488
                    selection.addRange(range);                                                                         // 16489
                }                                                                                                      // 16490
                selection.addRange(tmpSel);                                                                            // 16491
            }                                                                                                          // 16492
            editor.$blockScrolling--;                                                                                  // 16493
            editor.inVirtualSelectionMode = false;                                                                     // 16494
        });                                                                                                            // 16495
                                                                                                                       // 16496
    } else if (selectionMode == "block") {                                                                             // 16497
        e.stop();                                                                                                      // 16498
        editor.inVirtualSelectionMode = true;                                                                          // 16499
        var initialRange;                                                                                              // 16500
        var rectSel = [];                                                                                              // 16501
        var blockSelect = function() {                                                                                 // 16502
            var newCursor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);                                  // 16503
            var cursor = session.screenToDocumentPosition(newCursor.row, newCursor.column);                            // 16504
                                                                                                                       // 16505
            if (isSamePoint(screenCursor, newCursor) && isSamePoint(cursor, selection.lead))                           // 16506
                return;                                                                                                // 16507
            screenCursor = newCursor;                                                                                  // 16508
                                                                                                                       // 16509
            editor.selection.moveToPosition(cursor);                                                                   // 16510
            editor.renderer.scrollCursorIntoView();                                                                    // 16511
                                                                                                                       // 16512
            editor.removeSelectionMarkers(rectSel);                                                                    // 16513
            rectSel = selection.rectangularRangeBlock(screenCursor, screenAnchor);                                     // 16514
            if (editor.$mouseHandler.$clickSelection && rectSel.length == 1 && rectSel[0].isEmpty())                   // 16515
                rectSel[0] = editor.$mouseHandler.$clickSelection.clone();                                             // 16516
            rectSel.forEach(editor.addSelectionMarker, editor);                                                        // 16517
            editor.updateSelectionMarkers();                                                                           // 16518
        };                                                                                                             // 16519
                                                                                                                       // 16520
        if (isMultiSelect && !accel) {                                                                                 // 16521
            selection.toSingleRange();                                                                                 // 16522
        } else if (!isMultiSelect && accel) {                                                                          // 16523
            initialRange = selection.toOrientedRange();                                                                // 16524
            editor.addSelectionMarker(initialRange);                                                                   // 16525
        }                                                                                                              // 16526
                                                                                                                       // 16527
        if (shift)                                                                                                     // 16528
            screenAnchor = session.documentToScreenPosition(selection.lead);                                           // 16529
        else                                                                                                           // 16530
            selection.moveToPosition(pos);                                                                             // 16531
                                                                                                                       // 16532
        screenCursor = {row: -1, column: -1};                                                                          // 16533
                                                                                                                       // 16534
        var onMouseSelectionEnd = function(e) {                                                                        // 16535
            clearInterval(timerId);                                                                                    // 16536
            editor.removeSelectionMarkers(rectSel);                                                                    // 16537
            if (!rectSel.length)                                                                                       // 16538
                rectSel = [selection.toOrientedRange()];                                                               // 16539
            editor.$blockScrolling++;                                                                                  // 16540
            if (initialRange) {                                                                                        // 16541
                editor.removeSelectionMarker(initialRange);                                                            // 16542
                selection.toSingleRange(initialRange);                                                                 // 16543
            }                                                                                                          // 16544
            for (var i = 0; i < rectSel.length; i++)                                                                   // 16545
                selection.addRange(rectSel[i]);                                                                        // 16546
            editor.inVirtualSelectionMode = false;                                                                     // 16547
            editor.$mouseHandler.$clickSelection = null;                                                               // 16548
            editor.$blockScrolling--;                                                                                  // 16549
        };                                                                                                             // 16550
                                                                                                                       // 16551
        var onSelectionInterval = blockSelect;                                                                         // 16552
                                                                                                                       // 16553
        event.capture(editor.container, onMouseSelection, onMouseSelectionEnd);                                        // 16554
        var timerId = setInterval(function() {onSelectionInterval();}, 20);                                            // 16555
                                                                                                                       // 16556
        return e.preventDefault();                                                                                     // 16557
    }                                                                                                                  // 16558
}                                                                                                                      // 16559
                                                                                                                       // 16560
                                                                                                                       // 16561
exports.onMouseDown = onMouseDown;                                                                                     // 16562
                                                                                                                       // 16563
});                                                                                                                    // 16564
                                                                                                                       // 16565
define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"], function(require, exports, module) {
exports.defaultCommands = [{                                                                                           // 16567
    name: "addCursorAbove",                                                                                            // 16568
    exec: function(editor) { editor.selectMoreLines(-1); },                                                            // 16569
    bindKey: {win: "Ctrl-Alt-Up", mac: "Ctrl-Alt-Up"},                                                                 // 16570
    readonly: true                                                                                                     // 16571
}, {                                                                                                                   // 16572
    name: "addCursorBelow",                                                                                            // 16573
    exec: function(editor) { editor.selectMoreLines(1); },                                                             // 16574
    bindKey: {win: "Ctrl-Alt-Down", mac: "Ctrl-Alt-Down"},                                                             // 16575
    readonly: true                                                                                                     // 16576
}, {                                                                                                                   // 16577
    name: "addCursorAboveSkipCurrent",                                                                                 // 16578
    exec: function(editor) { editor.selectMoreLines(-1, true); },                                                      // 16579
    bindKey: {win: "Ctrl-Alt-Shift-Up", mac: "Ctrl-Alt-Shift-Up"},                                                     // 16580
    readonly: true                                                                                                     // 16581
}, {                                                                                                                   // 16582
    name: "addCursorBelowSkipCurrent",                                                                                 // 16583
    exec: function(editor) { editor.selectMoreLines(1, true); },                                                       // 16584
    bindKey: {win: "Ctrl-Alt-Shift-Down", mac: "Ctrl-Alt-Shift-Down"},                                                 // 16585
    readonly: true                                                                                                     // 16586
}, {                                                                                                                   // 16587
    name: "selectMoreBefore",                                                                                          // 16588
    exec: function(editor) { editor.selectMore(-1); },                                                                 // 16589
    bindKey: {win: "Ctrl-Alt-Left", mac: "Ctrl-Alt-Left"},                                                             // 16590
    readonly: true                                                                                                     // 16591
}, {                                                                                                                   // 16592
    name: "selectMoreAfter",                                                                                           // 16593
    exec: function(editor) { editor.selectMore(1); },                                                                  // 16594
    bindKey: {win: "Ctrl-Alt-Right", mac: "Ctrl-Alt-Right"},                                                           // 16595
    readonly: true                                                                                                     // 16596
}, {                                                                                                                   // 16597
    name: "selectNextBefore",                                                                                          // 16598
    exec: function(editor) { editor.selectMore(-1, true); },                                                           // 16599
    bindKey: {win: "Ctrl-Alt-Shift-Left", mac: "Ctrl-Alt-Shift-Left"},                                                 // 16600
    readonly: true                                                                                                     // 16601
}, {                                                                                                                   // 16602
    name: "selectNextAfter",                                                                                           // 16603
    exec: function(editor) { editor.selectMore(1, true); },                                                            // 16604
    bindKey: {win: "Ctrl-Alt-Shift-Right", mac: "Ctrl-Alt-Shift-Right"},                                               // 16605
    readonly: true                                                                                                     // 16606
}, {                                                                                                                   // 16607
    name: "splitIntoLines",                                                                                            // 16608
    exec: function(editor) { editor.multiSelect.splitIntoLines(); },                                                   // 16609
    bindKey: {win: "Ctrl-Alt-L", mac: "Ctrl-Alt-L"},                                                                   // 16610
    readonly: true                                                                                                     // 16611
}, {                                                                                                                   // 16612
    name: "alignCursors",                                                                                              // 16613
    exec: function(editor) { editor.alignCursors(); },                                                                 // 16614
    bindKey: {win: "Ctrl-Alt-A", mac: "Ctrl-Alt-A"}                                                                    // 16615
}, {                                                                                                                   // 16616
    name: "findAll",                                                                                                   // 16617
    exec: function(editor) { editor.findAll(); },                                                                      // 16618
    bindKey: {win: "Ctrl-Alt-K", mac: "Ctrl-Alt-G"},                                                                   // 16619
    readonly: true                                                                                                     // 16620
}];                                                                                                                    // 16621
exports.multiSelectCommands = [{                                                                                       // 16622
    name: "singleSelection",                                                                                           // 16623
    bindKey: "esc",                                                                                                    // 16624
    exec: function(editor) { editor.exitMultiSelectMode(); },                                                          // 16625
    readonly: true,                                                                                                    // 16626
    isAvailable: function(editor) {return editor && editor.inMultiSelectMode}                                          // 16627
}];                                                                                                                    // 16628
                                                                                                                       // 16629
var HashHandler = require("../keyboard/hash_handler").HashHandler;                                                     // 16630
exports.keyboardHandler = new HashHandler(exports.multiSelectCommands);                                                // 16631
                                                                                                                       // 16632
});                                                                                                                    // 16633
                                                                                                                       // 16634
define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"], function(require, exports, module) {
                                                                                                                       // 16636
var RangeList = require("./range_list").RangeList;                                                                     // 16637
var Range = require("./range").Range;                                                                                  // 16638
var Selection = require("./selection").Selection;                                                                      // 16639
var onMouseDown = require("./mouse/multi_select_handler").onMouseDown;                                                 // 16640
var event = require("./lib/event");                                                                                    // 16641
var lang = require("./lib/lang");                                                                                      // 16642
var commands = require("./commands/multi_select_commands");                                                            // 16643
exports.commands = commands.defaultCommands.concat(commands.multiSelectCommands);                                      // 16644
var Search = require("./search").Search;                                                                               // 16645
var search = new Search();                                                                                             // 16646
                                                                                                                       // 16647
function find(session, needle, dir) {                                                                                  // 16648
    search.$options.wrap = true;                                                                                       // 16649
    search.$options.needle = needle;                                                                                   // 16650
    search.$options.backwards = dir == -1;                                                                             // 16651
    return search.find(session);                                                                                       // 16652
}                                                                                                                      // 16653
var EditSession = require("./edit_session").EditSession;                                                               // 16654
(function() {                                                                                                          // 16655
    this.getSelectionMarkers = function() {                                                                            // 16656
        return this.$selectionMarkers;                                                                                 // 16657
    };                                                                                                                 // 16658
}).call(EditSession.prototype);                                                                                        // 16659
(function() {                                                                                                          // 16660
    this.ranges = null;                                                                                                // 16661
    this.rangeList = null;                                                                                             // 16662
    this.addRange = function(range, $blockChangeEvents) {                                                              // 16663
        if (!range)                                                                                                    // 16664
            return;                                                                                                    // 16665
                                                                                                                       // 16666
        if (!this.inMultiSelectMode && this.rangeCount === 0) {                                                        // 16667
            var oldRange = this.toOrientedRange();                                                                     // 16668
            this.rangeList.add(oldRange);                                                                              // 16669
            this.rangeList.add(range);                                                                                 // 16670
            if (this.rangeList.ranges.length != 2) {                                                                   // 16671
                this.rangeList.removeAll();                                                                            // 16672
                return $blockChangeEvents || this.fromOrientedRange(range);                                            // 16673
            }                                                                                                          // 16674
            this.rangeList.removeAll();                                                                                // 16675
            this.rangeList.add(oldRange);                                                                              // 16676
            this.$onAddRange(oldRange);                                                                                // 16677
        }                                                                                                              // 16678
                                                                                                                       // 16679
        if (!range.cursor)                                                                                             // 16680
            range.cursor = range.end;                                                                                  // 16681
                                                                                                                       // 16682
        var removed = this.rangeList.add(range);                                                                       // 16683
                                                                                                                       // 16684
        this.$onAddRange(range);                                                                                       // 16685
                                                                                                                       // 16686
        if (removed.length)                                                                                            // 16687
            this.$onRemoveRange(removed);                                                                              // 16688
                                                                                                                       // 16689
        if (this.rangeCount > 1 && !this.inMultiSelectMode) {                                                          // 16690
            this._signal("multiSelect");                                                                               // 16691
            this.inMultiSelectMode = true;                                                                             // 16692
            this.session.$undoSelect = false;                                                                          // 16693
            this.rangeList.attach(this.session);                                                                       // 16694
        }                                                                                                              // 16695
                                                                                                                       // 16696
        return $blockChangeEvents || this.fromOrientedRange(range);                                                    // 16697
    };                                                                                                                 // 16698
                                                                                                                       // 16699
    this.toSingleRange = function(range) {                                                                             // 16700
        range = range || this.ranges[0];                                                                               // 16701
        var removed = this.rangeList.removeAll();                                                                      // 16702
        if (removed.length)                                                                                            // 16703
            this.$onRemoveRange(removed);                                                                              // 16704
                                                                                                                       // 16705
        range && this.fromOrientedRange(range);                                                                        // 16706
    };                                                                                                                 // 16707
    this.substractPoint = function(pos) {                                                                              // 16708
        var removed = this.rangeList.substractPoint(pos);                                                              // 16709
        if (removed) {                                                                                                 // 16710
            this.$onRemoveRange(removed);                                                                              // 16711
            return removed[0];                                                                                         // 16712
        }                                                                                                              // 16713
    };                                                                                                                 // 16714
    this.mergeOverlappingRanges = function() {                                                                         // 16715
        var removed = this.rangeList.merge();                                                                          // 16716
        if (removed.length)                                                                                            // 16717
            this.$onRemoveRange(removed);                                                                              // 16718
        else if(this.ranges[0])                                                                                        // 16719
            this.fromOrientedRange(this.ranges[0]);                                                                    // 16720
    };                                                                                                                 // 16721
                                                                                                                       // 16722
    this.$onAddRange = function(range) {                                                                               // 16723
        this.rangeCount = this.rangeList.ranges.length;                                                                // 16724
        this.ranges.unshift(range);                                                                                    // 16725
        this._signal("addRange", {range: range});                                                                      // 16726
    };                                                                                                                 // 16727
                                                                                                                       // 16728
    this.$onRemoveRange = function(removed) {                                                                          // 16729
        this.rangeCount = this.rangeList.ranges.length;                                                                // 16730
        if (this.rangeCount == 1 && this.inMultiSelectMode) {                                                          // 16731
            var lastRange = this.rangeList.ranges.pop();                                                               // 16732
            removed.push(lastRange);                                                                                   // 16733
            this.rangeCount = 0;                                                                                       // 16734
        }                                                                                                              // 16735
                                                                                                                       // 16736
        for (var i = removed.length; i--; ) {                                                                          // 16737
            var index = this.ranges.indexOf(removed[i]);                                                               // 16738
            this.ranges.splice(index, 1);                                                                              // 16739
        }                                                                                                              // 16740
                                                                                                                       // 16741
        this._signal("removeRange", {ranges: removed});                                                                // 16742
                                                                                                                       // 16743
        if (this.rangeCount === 0 && this.inMultiSelectMode) {                                                         // 16744
            this.inMultiSelectMode = false;                                                                            // 16745
            this._signal("singleSelect");                                                                              // 16746
            this.session.$undoSelect = true;                                                                           // 16747
            this.rangeList.detach(this.session);                                                                       // 16748
        }                                                                                                              // 16749
                                                                                                                       // 16750
        lastRange = lastRange || this.ranges[0];                                                                       // 16751
        if (lastRange && !lastRange.isEqual(this.getRange()))                                                          // 16752
            this.fromOrientedRange(lastRange);                                                                         // 16753
    };                                                                                                                 // 16754
    this.$initRangeList = function() {                                                                                 // 16755
        if (this.rangeList)                                                                                            // 16756
            return;                                                                                                    // 16757
                                                                                                                       // 16758
        this.rangeList = new RangeList();                                                                              // 16759
        this.ranges = [];                                                                                              // 16760
        this.rangeCount = 0;                                                                                           // 16761
    };                                                                                                                 // 16762
    this.getAllRanges = function() {                                                                                   // 16763
        return this.rangeCount ? this.rangeList.ranges.concat() : [this.getRange()];                                   // 16764
    };                                                                                                                 // 16765
                                                                                                                       // 16766
    this.splitIntoLines = function () {                                                                                // 16767
        if (this.rangeCount > 1) {                                                                                     // 16768
            var ranges = this.rangeList.ranges;                                                                        // 16769
            var lastRange = ranges[ranges.length - 1];                                                                 // 16770
            var range = Range.fromPoints(ranges[0].start, lastRange.end);                                              // 16771
                                                                                                                       // 16772
            this.toSingleRange();                                                                                      // 16773
            this.setSelectionRange(range, lastRange.cursor == lastRange.start);                                        // 16774
        } else {                                                                                                       // 16775
            var range = this.getRange();                                                                               // 16776
            var isBackwards = this.isBackwards();                                                                      // 16777
            var startRow = range.start.row;                                                                            // 16778
            var endRow = range.end.row;                                                                                // 16779
            if (startRow == endRow) {                                                                                  // 16780
                if (isBackwards)                                                                                       // 16781
                    var start = range.end, end = range.start;                                                          // 16782
                else                                                                                                   // 16783
                    var start = range.start, end = range.end;                                                          // 16784
                                                                                                                       // 16785
                this.addRange(Range.fromPoints(end, end));                                                             // 16786
                this.addRange(Range.fromPoints(start, start));                                                         // 16787
                return;                                                                                                // 16788
            }                                                                                                          // 16789
                                                                                                                       // 16790
            var rectSel = [];                                                                                          // 16791
            var r = this.getLineRange(startRow, true);                                                                 // 16792
            r.start.column = range.start.column;                                                                       // 16793
            rectSel.push(r);                                                                                           // 16794
                                                                                                                       // 16795
            for (var i = startRow + 1; i < endRow; i++)                                                                // 16796
                rectSel.push(this.getLineRange(i, true));                                                              // 16797
                                                                                                                       // 16798
            r = this.getLineRange(endRow, true);                                                                       // 16799
            r.end.column = range.end.column;                                                                           // 16800
            rectSel.push(r);                                                                                           // 16801
                                                                                                                       // 16802
            rectSel.forEach(this.addRange, this);                                                                      // 16803
        }                                                                                                              // 16804
    };                                                                                                                 // 16805
    this.toggleBlockSelection = function () {                                                                          // 16806
        if (this.rangeCount > 1) {                                                                                     // 16807
            var ranges = this.rangeList.ranges;                                                                        // 16808
            var lastRange = ranges[ranges.length - 1];                                                                 // 16809
            var range = Range.fromPoints(ranges[0].start, lastRange.end);                                              // 16810
                                                                                                                       // 16811
            this.toSingleRange();                                                                                      // 16812
            this.setSelectionRange(range, lastRange.cursor == lastRange.start);                                        // 16813
        } else {                                                                                                       // 16814
            var cursor = this.session.documentToScreenPosition(this.selectionLead);                                    // 16815
            var anchor = this.session.documentToScreenPosition(this.selectionAnchor);                                  // 16816
                                                                                                                       // 16817
            var rectSel = this.rectangularRangeBlock(cursor, anchor);                                                  // 16818
            rectSel.forEach(this.addRange, this);                                                                      // 16819
        }                                                                                                              // 16820
    };                                                                                                                 // 16821
    this.rectangularRangeBlock = function(screenCursor, screenAnchor, includeEmptyLines) {                             // 16822
        var rectSel = [];                                                                                              // 16823
                                                                                                                       // 16824
        var xBackwards = screenCursor.column < screenAnchor.column;                                                    // 16825
        if (xBackwards) {                                                                                              // 16826
            var startColumn = screenCursor.column;                                                                     // 16827
            var endColumn = screenAnchor.column;                                                                       // 16828
        } else {                                                                                                       // 16829
            var startColumn = screenAnchor.column;                                                                     // 16830
            var endColumn = screenCursor.column;                                                                       // 16831
        }                                                                                                              // 16832
                                                                                                                       // 16833
        var yBackwards = screenCursor.row < screenAnchor.row;                                                          // 16834
        if (yBackwards) {                                                                                              // 16835
            var startRow = screenCursor.row;                                                                           // 16836
            var endRow = screenAnchor.row;                                                                             // 16837
        } else {                                                                                                       // 16838
            var startRow = screenAnchor.row;                                                                           // 16839
            var endRow = screenCursor.row;                                                                             // 16840
        }                                                                                                              // 16841
                                                                                                                       // 16842
        if (startColumn < 0)                                                                                           // 16843
            startColumn = 0;                                                                                           // 16844
        if (startRow < 0)                                                                                              // 16845
            startRow = 0;                                                                                              // 16846
                                                                                                                       // 16847
        if (startRow == endRow)                                                                                        // 16848
            includeEmptyLines = true;                                                                                  // 16849
                                                                                                                       // 16850
        for (var row = startRow; row <= endRow; row++) {                                                               // 16851
            var range = Range.fromPoints(                                                                              // 16852
                this.session.screenToDocumentPosition(row, startColumn),                                               // 16853
                this.session.screenToDocumentPosition(row, endColumn)                                                  // 16854
            );                                                                                                         // 16855
            if (range.isEmpty()) {                                                                                     // 16856
                if (docEnd && isSamePoint(range.end, docEnd))                                                          // 16857
                    break;                                                                                             // 16858
                var docEnd = range.end;                                                                                // 16859
            }                                                                                                          // 16860
            range.cursor = xBackwards ? range.start : range.end;                                                       // 16861
            rectSel.push(range);                                                                                       // 16862
        }                                                                                                              // 16863
                                                                                                                       // 16864
        if (yBackwards)                                                                                                // 16865
            rectSel.reverse();                                                                                         // 16866
                                                                                                                       // 16867
        if (!includeEmptyLines) {                                                                                      // 16868
            var end = rectSel.length - 1;                                                                              // 16869
            while (rectSel[end].isEmpty() && end > 0)                                                                  // 16870
                end--;                                                                                                 // 16871
            if (end > 0) {                                                                                             // 16872
                var start = 0;                                                                                         // 16873
                while (rectSel[start].isEmpty())                                                                       // 16874
                    start++;                                                                                           // 16875
            }                                                                                                          // 16876
            for (var i = end; i >= start; i--) {                                                                       // 16877
                if (rectSel[i].isEmpty())                                                                              // 16878
                    rectSel.splice(i, 1);                                                                              // 16879
            }                                                                                                          // 16880
        }                                                                                                              // 16881
                                                                                                                       // 16882
        return rectSel;                                                                                                // 16883
    };                                                                                                                 // 16884
}).call(Selection.prototype);                                                                                          // 16885
var Editor = require("./editor").Editor;                                                                               // 16886
(function() {                                                                                                          // 16887
    this.updateSelectionMarkers = function() {                                                                         // 16888
        this.renderer.updateCursor();                                                                                  // 16889
        this.renderer.updateBackMarkers();                                                                             // 16890
    };                                                                                                                 // 16891
    this.addSelectionMarker = function(orientedRange) {                                                                // 16892
        if (!orientedRange.cursor)                                                                                     // 16893
            orientedRange.cursor = orientedRange.end;                                                                  // 16894
                                                                                                                       // 16895
        var style = this.getSelectionStyle();                                                                          // 16896
        orientedRange.marker = this.session.addMarker(orientedRange, "ace_selection", style);                          // 16897
                                                                                                                       // 16898
        this.session.$selectionMarkers.push(orientedRange);                                                            // 16899
        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;                                     // 16900
        return orientedRange;                                                                                          // 16901
    };                                                                                                                 // 16902
    this.removeSelectionMarker = function(range) {                                                                     // 16903
        if (!range.marker)                                                                                             // 16904
            return;                                                                                                    // 16905
        this.session.removeMarker(range.marker);                                                                       // 16906
        var index = this.session.$selectionMarkers.indexOf(range);                                                     // 16907
        if (index != -1)                                                                                               // 16908
            this.session.$selectionMarkers.splice(index, 1);                                                           // 16909
        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;                                     // 16910
    };                                                                                                                 // 16911
                                                                                                                       // 16912
    this.removeSelectionMarkers = function(ranges) {                                                                   // 16913
        var markerList = this.session.$selectionMarkers;                                                               // 16914
        for (var i = ranges.length; i--; ) {                                                                           // 16915
            var range = ranges[i];                                                                                     // 16916
            if (!range.marker)                                                                                         // 16917
                continue;                                                                                              // 16918
            this.session.removeMarker(range.marker);                                                                   // 16919
            var index = markerList.indexOf(range);                                                                     // 16920
            if (index != -1)                                                                                           // 16921
                markerList.splice(index, 1);                                                                           // 16922
        }                                                                                                              // 16923
        this.session.selectionMarkerCount = markerList.length;                                                         // 16924
    };                                                                                                                 // 16925
                                                                                                                       // 16926
    this.$onAddRange = function(e) {                                                                                   // 16927
        this.addSelectionMarker(e.range);                                                                              // 16928
        this.renderer.updateCursor();                                                                                  // 16929
        this.renderer.updateBackMarkers();                                                                             // 16930
    };                                                                                                                 // 16931
                                                                                                                       // 16932
    this.$onRemoveRange = function(e) {                                                                                // 16933
        this.removeSelectionMarkers(e.ranges);                                                                         // 16934
        this.renderer.updateCursor();                                                                                  // 16935
        this.renderer.updateBackMarkers();                                                                             // 16936
    };                                                                                                                 // 16937
                                                                                                                       // 16938
    this.$onMultiSelect = function(e) {                                                                                // 16939
        if (this.inMultiSelectMode)                                                                                    // 16940
            return;                                                                                                    // 16941
        this.inMultiSelectMode = true;                                                                                 // 16942
                                                                                                                       // 16943
        this.setStyle("ace_multiselect");                                                                              // 16944
        this.keyBinding.addKeyboardHandler(commands.keyboardHandler);                                                  // 16945
        this.commands.setDefaultHandler("exec", this.$onMultiSelectExec);                                              // 16946
                                                                                                                       // 16947
        this.renderer.updateCursor();                                                                                  // 16948
        this.renderer.updateBackMarkers();                                                                             // 16949
    };                                                                                                                 // 16950
                                                                                                                       // 16951
    this.$onSingleSelect = function(e) {                                                                               // 16952
        if (this.session.multiSelect.inVirtualMode)                                                                    // 16953
            return;                                                                                                    // 16954
        this.inMultiSelectMode = false;                                                                                // 16955
                                                                                                                       // 16956
        this.unsetStyle("ace_multiselect");                                                                            // 16957
        this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);                                               // 16958
                                                                                                                       // 16959
        this.commands.removeDefaultHandler("exec", this.$onMultiSelectExec);                                           // 16960
        this.renderer.updateCursor();                                                                                  // 16961
        this.renderer.updateBackMarkers();                                                                             // 16962
        this._emit("changeSelection");                                                                                 // 16963
    };                                                                                                                 // 16964
                                                                                                                       // 16965
    this.$onMultiSelectExec = function(e) {                                                                            // 16966
        var command = e.command;                                                                                       // 16967
        var editor = e.editor;                                                                                         // 16968
        if (!editor.multiSelect)                                                                                       // 16969
            return;                                                                                                    // 16970
        if (!command.multiSelectAction) {                                                                              // 16971
            var result = command.exec(editor, e.args || {});                                                           // 16972
            editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());                                         // 16973
            editor.multiSelect.mergeOverlappingRanges();                                                               // 16974
        } else if (command.multiSelectAction == "forEach") {                                                           // 16975
            result = editor.forEachSelection(command, e.args);                                                         // 16976
        } else if (command.multiSelectAction == "forEachLine") {                                                       // 16977
            result = editor.forEachSelection(command, e.args, true);                                                   // 16978
        } else if (command.multiSelectAction == "single") {                                                            // 16979
            editor.exitMultiSelectMode();                                                                              // 16980
            result = command.exec(editor, e.args || {});                                                               // 16981
        } else {                                                                                                       // 16982
            result = command.multiSelectAction(editor, e.args || {});                                                  // 16983
        }                                                                                                              // 16984
        return result;                                                                                                 // 16985
    };                                                                                                                 // 16986
    this.forEachSelection = function(cmd, args, options) {                                                             // 16987
        if (this.inVirtualSelectionMode)                                                                               // 16988
            return;                                                                                                    // 16989
        var keepOrder = options && options.keepOrder;                                                                  // 16990
        var $byLines = options == true || options && options.$byLines                                                  // 16991
        var session = this.session;                                                                                    // 16992
        var selection = this.selection;                                                                                // 16993
        var rangeList = selection.rangeList;                                                                           // 16994
        var ranges = (keepOrder ? selection : rangeList).ranges;                                                       // 16995
        var result;                                                                                                    // 16996
                                                                                                                       // 16997
        if (!ranges.length)                                                                                            // 16998
            return cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});                                      // 16999
                                                                                                                       // 17000
        var reg = selection._eventRegistry;                                                                            // 17001
        selection._eventRegistry = {};                                                                                 // 17002
                                                                                                                       // 17003
        var tmpSel = new Selection(session);                                                                           // 17004
        this.inVirtualSelectionMode = true;                                                                            // 17005
        for (var i = ranges.length; i--;) {                                                                            // 17006
            if ($byLines) {                                                                                            // 17007
                while (i > 0 && ranges[i].start.row == ranges[i - 1].end.row)                                          // 17008
                    i--;                                                                                               // 17009
            }                                                                                                          // 17010
            tmpSel.fromOrientedRange(ranges[i]);                                                                       // 17011
            tmpSel.index = i;                                                                                          // 17012
            this.selection = session.selection = tmpSel;                                                               // 17013
            var cmdResult = cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});                             // 17014
            if (!result && cmdResult !== undefined)                                                                    // 17015
                result = cmdResult;                                                                                    // 17016
            tmpSel.toOrientedRange(ranges[i]);                                                                         // 17017
        }                                                                                                              // 17018
        tmpSel.detach();                                                                                               // 17019
                                                                                                                       // 17020
        this.selection = session.selection = selection;                                                                // 17021
        this.inVirtualSelectionMode = false;                                                                           // 17022
        selection._eventRegistry = reg;                                                                                // 17023
        selection.mergeOverlappingRanges();                                                                            // 17024
                                                                                                                       // 17025
        var anim = this.renderer.$scrollAnimation;                                                                     // 17026
        this.onCursorChange();                                                                                         // 17027
        this.onSelectionChange();                                                                                      // 17028
        if (anim && anim.from == anim.to)                                                                              // 17029
            this.renderer.animateScrolling(anim.from);                                                                 // 17030
                                                                                                                       // 17031
        return result;                                                                                                 // 17032
    };                                                                                                                 // 17033
    this.exitMultiSelectMode = function() {                                                                            // 17034
        if (!this.inMultiSelectMode || this.inVirtualSelectionMode)                                                    // 17035
            return;                                                                                                    // 17036
        this.multiSelect.toSingleRange();                                                                              // 17037
    };                                                                                                                 // 17038
                                                                                                                       // 17039
    this.getSelectedText = function() {                                                                                // 17040
        var text = "";                                                                                                 // 17041
        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {                                                  // 17042
            var ranges = this.multiSelect.rangeList.ranges;                                                            // 17043
            var buf = [];                                                                                              // 17044
            for (var i = 0; i < ranges.length; i++) {                                                                  // 17045
                buf.push(this.session.getTextRange(ranges[i]));                                                        // 17046
            }                                                                                                          // 17047
            var nl = this.session.getDocument().getNewLineCharacter();                                                 // 17048
            text = buf.join(nl);                                                                                       // 17049
            if (text.length == (buf.length - 1) * nl.length)                                                           // 17050
                text = "";                                                                                             // 17051
        } else if (!this.selection.isEmpty()) {                                                                        // 17052
            text = this.session.getTextRange(this.getSelectionRange());                                                // 17053
        }                                                                                                              // 17054
        return text;                                                                                                   // 17055
    };                                                                                                                 // 17056
                                                                                                                       // 17057
    this.$checkMultiselectChange = function(e, anchor) {                                                               // 17058
        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {                                                  // 17059
            var range = this.multiSelect.ranges[0];                                                                    // 17060
            if (this.multiSelect.isEmpty() && anchor == this.multiSelect.anchor)                                       // 17061
                return;                                                                                                // 17062
            var pos = anchor == this.multiSelect.anchor                                                                // 17063
                ? range.cursor == range.start ? range.end : range.start                                                // 17064
                : range.cursor;                                                                                        // 17065
            if (!isSamePoint(pos, anchor))                                                                             // 17066
                this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());                                    // 17067
        }                                                                                                              // 17068
    };                                                                                                                 // 17069
    this.onPaste = function(text) {                                                                                    // 17070
        if (this.$readOnly)                                                                                            // 17071
            return;                                                                                                    // 17072
                                                                                                                       // 17073
                                                                                                                       // 17074
        var e = {text: text};                                                                                          // 17075
        this._signal("paste", e);                                                                                      // 17076
        text = e.text;                                                                                                 // 17077
        if (!this.inMultiSelectMode || this.inVirtualSelectionMode)                                                    // 17078
            return this.insert(text);                                                                                  // 17079
                                                                                                                       // 17080
        var lines = text.split(/\r\n|\r|\n/);                                                                          // 17081
        var ranges = this.selection.rangeList.ranges;                                                                  // 17082
                                                                                                                       // 17083
        if (lines.length > ranges.length || lines.length < 2 || !lines[1])                                             // 17084
            return this.commands.exec("insertstring", this, text);                                                     // 17085
                                                                                                                       // 17086
        for (var i = ranges.length; i--;) {                                                                            // 17087
            var range = ranges[i];                                                                                     // 17088
            if (!range.isEmpty())                                                                                      // 17089
                this.session.remove(range);                                                                            // 17090
                                                                                                                       // 17091
            this.session.insert(range.start, lines[i]);                                                                // 17092
        }                                                                                                              // 17093
    };                                                                                                                 // 17094
    this.findAll = function(needle, options, additive) {                                                               // 17095
        options = options || {};                                                                                       // 17096
        options.needle = needle || options.needle;                                                                     // 17097
        if (options.needle == undefined) {                                                                             // 17098
            var range = this.selection.isEmpty()                                                                       // 17099
                ? this.selection.getWordRange()                                                                        // 17100
                : this.selection.getRange();                                                                           // 17101
            options.needle = this.session.getTextRange(range);                                                         // 17102
        }                                                                                                              // 17103
        this.$search.set(options);                                                                                     // 17104
                                                                                                                       // 17105
        var ranges = this.$search.findAll(this.session);                                                               // 17106
        if (!ranges.length)                                                                                            // 17107
            return 0;                                                                                                  // 17108
                                                                                                                       // 17109
        this.$blockScrolling += 1;                                                                                     // 17110
        var selection = this.multiSelect;                                                                              // 17111
                                                                                                                       // 17112
        if (!additive)                                                                                                 // 17113
            selection.toSingleRange(ranges[0]);                                                                        // 17114
                                                                                                                       // 17115
        for (var i = ranges.length; i--; )                                                                             // 17116
            selection.addRange(ranges[i], true);                                                                       // 17117
        if (range && selection.rangeList.rangeAtPoint(range.start))                                                    // 17118
            selection.addRange(range, true);                                                                           // 17119
                                                                                                                       // 17120
        this.$blockScrolling -= 1;                                                                                     // 17121
                                                                                                                       // 17122
        return ranges.length;                                                                                          // 17123
    };                                                                                                                 // 17124
    this.selectMoreLines = function(dir, skip) {                                                                       // 17125
        var range = this.selection.toOrientedRange();                                                                  // 17126
        var isBackwards = range.cursor == range.end;                                                                   // 17127
                                                                                                                       // 17128
        var screenLead = this.session.documentToScreenPosition(range.cursor);                                          // 17129
        if (this.selection.$desiredColumn)                                                                             // 17130
            screenLead.column = this.selection.$desiredColumn;                                                         // 17131
                                                                                                                       // 17132
        var lead = this.session.screenToDocumentPosition(screenLead.row + dir, screenLead.column);                     // 17133
                                                                                                                       // 17134
        if (!range.isEmpty()) {                                                                                        // 17135
            var screenAnchor = this.session.documentToScreenPosition(isBackwards ? range.end : range.start);           // 17136
            var anchor = this.session.screenToDocumentPosition(screenAnchor.row + dir, screenAnchor.column);           // 17137
        } else {                                                                                                       // 17138
            var anchor = lead;                                                                                         // 17139
        }                                                                                                              // 17140
                                                                                                                       // 17141
        if (isBackwards) {                                                                                             // 17142
            var newRange = Range.fromPoints(lead, anchor);                                                             // 17143
            newRange.cursor = newRange.start;                                                                          // 17144
        } else {                                                                                                       // 17145
            var newRange = Range.fromPoints(anchor, lead);                                                             // 17146
            newRange.cursor = newRange.end;                                                                            // 17147
        }                                                                                                              // 17148
                                                                                                                       // 17149
        newRange.desiredColumn = screenLead.column;                                                                    // 17150
        if (!this.selection.inMultiSelectMode) {                                                                       // 17151
            this.selection.addRange(range);                                                                            // 17152
        } else {                                                                                                       // 17153
            if (skip)                                                                                                  // 17154
                var toRemove = range.cursor;                                                                           // 17155
        }                                                                                                              // 17156
                                                                                                                       // 17157
        this.selection.addRange(newRange);                                                                             // 17158
        if (toRemove)                                                                                                  // 17159
            this.selection.substractPoint(toRemove);                                                                   // 17160
    };                                                                                                                 // 17161
    this.transposeSelections = function(dir) {                                                                         // 17162
        var session = this.session;                                                                                    // 17163
        var sel = session.multiSelect;                                                                                 // 17164
        var all = sel.ranges;                                                                                          // 17165
                                                                                                                       // 17166
        for (var i = all.length; i--; ) {                                                                              // 17167
            var range = all[i];                                                                                        // 17168
            if (range.isEmpty()) {                                                                                     // 17169
                var tmp = session.getWordRange(range.start.row, range.start.column);                                   // 17170
                range.start.row = tmp.start.row;                                                                       // 17171
                range.start.column = tmp.start.column;                                                                 // 17172
                range.end.row = tmp.end.row;                                                                           // 17173
                range.end.column = tmp.end.column;                                                                     // 17174
            }                                                                                                          // 17175
        }                                                                                                              // 17176
        sel.mergeOverlappingRanges();                                                                                  // 17177
                                                                                                                       // 17178
        var words = [];                                                                                                // 17179
        for (var i = all.length; i--; ) {                                                                              // 17180
            var range = all[i];                                                                                        // 17181
            words.unshift(session.getTextRange(range));                                                                // 17182
        }                                                                                                              // 17183
                                                                                                                       // 17184
        if (dir < 0)                                                                                                   // 17185
            words.unshift(words.pop());                                                                                // 17186
        else                                                                                                           // 17187
            words.push(words.shift());                                                                                 // 17188
                                                                                                                       // 17189
        for (var i = all.length; i--; ) {                                                                              // 17190
            var range = all[i];                                                                                        // 17191
            var tmp = range.clone();                                                                                   // 17192
            session.replace(range, words[i]);                                                                          // 17193
            range.start.row = tmp.start.row;                                                                           // 17194
            range.start.column = tmp.start.column;                                                                     // 17195
        }                                                                                                              // 17196
    };                                                                                                                 // 17197
    this.selectMore = function(dir, skip, stopAtFirst) {                                                               // 17198
        var session = this.session;                                                                                    // 17199
        var sel = session.multiSelect;                                                                                 // 17200
                                                                                                                       // 17201
        var range = sel.toOrientedRange();                                                                             // 17202
        if (range.isEmpty()) {                                                                                         // 17203
            range = session.getWordRange(range.start.row, range.start.column);                                         // 17204
            range.cursor = dir == -1 ? range.start : range.end;                                                        // 17205
            this.multiSelect.addRange(range);                                                                          // 17206
            if (stopAtFirst)                                                                                           // 17207
                return;                                                                                                // 17208
        }                                                                                                              // 17209
        var needle = session.getTextRange(range);                                                                      // 17210
                                                                                                                       // 17211
        var newRange = find(session, needle, dir);                                                                     // 17212
        if (newRange) {                                                                                                // 17213
            newRange.cursor = dir == -1 ? newRange.start : newRange.end;                                               // 17214
            this.$blockScrolling += 1;                                                                                 // 17215
            this.session.unfold(newRange);                                                                             // 17216
            this.multiSelect.addRange(newRange);                                                                       // 17217
            this.$blockScrolling -= 1;                                                                                 // 17218
            this.renderer.scrollCursorIntoView(null, 0.5);                                                             // 17219
        }                                                                                                              // 17220
        if (skip)                                                                                                      // 17221
            this.multiSelect.substractPoint(range.cursor);                                                             // 17222
    };                                                                                                                 // 17223
    this.alignCursors = function() {                                                                                   // 17224
        var session = this.session;                                                                                    // 17225
        var sel = session.multiSelect;                                                                                 // 17226
        var ranges = sel.ranges;                                                                                       // 17227
        var row = -1;                                                                                                  // 17228
        var sameRowRanges = ranges.filter(function(r) {                                                                // 17229
            if (r.cursor.row == row)                                                                                   // 17230
                return true;                                                                                           // 17231
            row = r.cursor.row;                                                                                        // 17232
        });                                                                                                            // 17233
                                                                                                                       // 17234
        if (!ranges.length || sameRowRanges.length == ranges.length - 1) {                                             // 17235
            var range = this.selection.getRange();                                                                     // 17236
            var fr = range.start.row, lr = range.end.row;                                                              // 17237
            var guessRange = fr == lr;                                                                                 // 17238
            if (guessRange) {                                                                                          // 17239
                var max = this.session.getLength();                                                                    // 17240
                var line;                                                                                              // 17241
                do {                                                                                                   // 17242
                    line = this.session.getLine(lr);                                                                   // 17243
                } while (/[=:]/.test(line) && ++lr < max);                                                             // 17244
                do {                                                                                                   // 17245
                    line = this.session.getLine(fr);                                                                   // 17246
                } while (/[=:]/.test(line) && --fr > 0);                                                               // 17247
                                                                                                                       // 17248
                if (fr < 0) fr = 0;                                                                                    // 17249
                if (lr >= max) lr = max - 1;                                                                           // 17250
            }                                                                                                          // 17251
            var lines = this.session.doc.removeLines(fr, lr);                                                          // 17252
            lines = this.$reAlignText(lines, guessRange);                                                              // 17253
            this.session.doc.insert({row: fr, column: 0}, lines.join("\n") + "\n");                                    // 17254
            if (!guessRange) {                                                                                         // 17255
                range.start.column = 0;                                                                                // 17256
                range.end.column = lines[lines.length - 1].length;                                                     // 17257
            }                                                                                                          // 17258
            this.selection.setRange(range);                                                                            // 17259
        } else {                                                                                                       // 17260
            sameRowRanges.forEach(function(r) {                                                                        // 17261
                sel.substractPoint(r.cursor);                                                                          // 17262
            });                                                                                                        // 17263
                                                                                                                       // 17264
            var maxCol = 0;                                                                                            // 17265
            var minSpace = Infinity;                                                                                   // 17266
            var spaceOffsets = ranges.map(function(r) {                                                                // 17267
                var p = r.cursor;                                                                                      // 17268
                var line = session.getLine(p.row);                                                                     // 17269
                var spaceOffset = line.substr(p.column).search(/\S/g);                                                 // 17270
                if (spaceOffset == -1)                                                                                 // 17271
                    spaceOffset = 0;                                                                                   // 17272
                                                                                                                       // 17273
                if (p.column > maxCol)                                                                                 // 17274
                    maxCol = p.column;                                                                                 // 17275
                if (spaceOffset < minSpace)                                                                            // 17276
                    minSpace = spaceOffset;                                                                            // 17277
                return spaceOffset;                                                                                    // 17278
            });                                                                                                        // 17279
            ranges.forEach(function(r, i) {                                                                            // 17280
                var p = r.cursor;                                                                                      // 17281
                var l = maxCol - p.column;                                                                             // 17282
                var d = spaceOffsets[i] - minSpace;                                                                    // 17283
                if (l > d)                                                                                             // 17284
                    session.insert(p, lang.stringRepeat(" ", l - d));                                                  // 17285
                else                                                                                                   // 17286
                    session.remove(new Range(p.row, p.column, p.row, p.column - l + d));                               // 17287
                                                                                                                       // 17288
                r.start.column = r.end.column = maxCol;                                                                // 17289
                r.start.row = r.end.row = p.row;                                                                       // 17290
                r.cursor = r.end;                                                                                      // 17291
            });                                                                                                        // 17292
            sel.fromOrientedRange(ranges[0]);                                                                          // 17293
            this.renderer.updateCursor();                                                                              // 17294
            this.renderer.updateBackMarkers();                                                                         // 17295
        }                                                                                                              // 17296
    };                                                                                                                 // 17297
                                                                                                                       // 17298
    this.$reAlignText = function(lines, forceLeft) {                                                                   // 17299
        var isLeftAligned = true, isRightAligned = true;                                                               // 17300
        var startW, textW, endW;                                                                                       // 17301
                                                                                                                       // 17302
        return lines.map(function(line) {                                                                              // 17303
            var m = line.match(/(\s*)(.*?)(\s*)([=:].*)/);                                                             // 17304
            if (!m)                                                                                                    // 17305
                return [line];                                                                                         // 17306
                                                                                                                       // 17307
            if (startW == null) {                                                                                      // 17308
                startW = m[1].length;                                                                                  // 17309
                textW = m[2].length;                                                                                   // 17310
                endW = m[3].length;                                                                                    // 17311
                return m;                                                                                              // 17312
            }                                                                                                          // 17313
                                                                                                                       // 17314
            if (startW + textW + endW != m[1].length + m[2].length + m[3].length)                                      // 17315
                isRightAligned = false;                                                                                // 17316
            if (startW != m[1].length)                                                                                 // 17317
                isLeftAligned = false;                                                                                 // 17318
                                                                                                                       // 17319
            if (startW > m[1].length)                                                                                  // 17320
                startW = m[1].length;                                                                                  // 17321
            if (textW < m[2].length)                                                                                   // 17322
                textW = m[2].length;                                                                                   // 17323
            if (endW > m[3].length)                                                                                    // 17324
                endW = m[3].length;                                                                                    // 17325
                                                                                                                       // 17326
            return m;                                                                                                  // 17327
        }).map(forceLeft ? alignLeft :                                                                                 // 17328
            isLeftAligned ? isRightAligned ? alignRight : alignLeft : unAlign);                                        // 17329
                                                                                                                       // 17330
        function spaces(n) {                                                                                           // 17331
            return lang.stringRepeat(" ", n);                                                                          // 17332
        }                                                                                                              // 17333
                                                                                                                       // 17334
        function alignLeft(m) {                                                                                        // 17335
            return !m[2] ? m[0] : spaces(startW) + m[2]                                                                // 17336
                + spaces(textW - m[2].length + endW)                                                                   // 17337
                + m[4].replace(/^([=:])\s+/, "$1 ");                                                                   // 17338
        }                                                                                                              // 17339
        function alignRight(m) {                                                                                       // 17340
            return !m[2] ? m[0] : spaces(startW + textW - m[2].length) + m[2]                                          // 17341
                + spaces(endW, " ")                                                                                    // 17342
                + m[4].replace(/^([=:])\s+/, "$1 ");                                                                   // 17343
        }                                                                                                              // 17344
        function unAlign(m) {                                                                                          // 17345
            return !m[2] ? m[0] : spaces(startW) + m[2]                                                                // 17346
                + spaces(endW)                                                                                         // 17347
                + m[4].replace(/^([=:])\s+/, "$1 ");                                                                   // 17348
        }                                                                                                              // 17349
    };                                                                                                                 // 17350
}).call(Editor.prototype);                                                                                             // 17351
                                                                                                                       // 17352
                                                                                                                       // 17353
function isSamePoint(p1, p2) {                                                                                         // 17354
    return p1.row == p2.row && p1.column == p2.column;                                                                 // 17355
}                                                                                                                      // 17356
exports.onSessionChange = function(e) {                                                                                // 17357
    var session = e.session;                                                                                           // 17358
    if (session && !session.multiSelect) {                                                                             // 17359
        session.$selectionMarkers = [];                                                                                // 17360
        session.selection.$initRangeList();                                                                            // 17361
        session.multiSelect = session.selection;                                                                       // 17362
    }                                                                                                                  // 17363
    this.multiSelect = session && session.multiSelect;                                                                 // 17364
                                                                                                                       // 17365
    var oldSession = e.oldSession;                                                                                     // 17366
    if (oldSession) {                                                                                                  // 17367
        oldSession.multiSelect.off("addRange", this.$onAddRange);                                                      // 17368
        oldSession.multiSelect.off("removeRange", this.$onRemoveRange);                                                // 17369
        oldSession.multiSelect.off("multiSelect", this.$onMultiSelect);                                                // 17370
        oldSession.multiSelect.off("singleSelect", this.$onSingleSelect);                                              // 17371
        oldSession.multiSelect.lead.off("change",  this.$checkMultiselectChange);                                      // 17372
        oldSession.multiSelect.anchor.off("change",  this.$checkMultiselectChange);                                    // 17373
    }                                                                                                                  // 17374
                                                                                                                       // 17375
    if (session) {                                                                                                     // 17376
        session.multiSelect.on("addRange", this.$onAddRange);                                                          // 17377
        session.multiSelect.on("removeRange", this.$onRemoveRange);                                                    // 17378
        session.multiSelect.on("multiSelect", this.$onMultiSelect);                                                    // 17379
        session.multiSelect.on("singleSelect", this.$onSingleSelect);                                                  // 17380
        session.multiSelect.lead.on("change",  this.$checkMultiselectChange);                                          // 17381
        session.multiSelect.anchor.on("change",  this.$checkMultiselectChange);                                        // 17382
    }                                                                                                                  // 17383
                                                                                                                       // 17384
    if (session && this.inMultiSelectMode != session.selection.inMultiSelectMode) {                                    // 17385
        if (session.selection.inMultiSelectMode)                                                                       // 17386
            this.$onMultiSelect();                                                                                     // 17387
        else                                                                                                           // 17388
            this.$onSingleSelect();                                                                                    // 17389
    }                                                                                                                  // 17390
};                                                                                                                     // 17391
function MultiSelect(editor) {                                                                                         // 17392
    if (editor.$multiselectOnSessionChange)                                                                            // 17393
        return;                                                                                                        // 17394
    editor.$onAddRange = editor.$onAddRange.bind(editor);                                                              // 17395
    editor.$onRemoveRange = editor.$onRemoveRange.bind(editor);                                                        // 17396
    editor.$onMultiSelect = editor.$onMultiSelect.bind(editor);                                                        // 17397
    editor.$onSingleSelect = editor.$onSingleSelect.bind(editor);                                                      // 17398
    editor.$multiselectOnSessionChange = exports.onSessionChange.bind(editor);                                         // 17399
    editor.$checkMultiselectChange = editor.$checkMultiselectChange.bind(editor);                                      // 17400
                                                                                                                       // 17401
    editor.$multiselectOnSessionChange(editor);                                                                        // 17402
    editor.on("changeSession", editor.$multiselectOnSessionChange);                                                    // 17403
                                                                                                                       // 17404
    editor.on("mousedown", onMouseDown);                                                                               // 17405
    editor.commands.addCommands(commands.defaultCommands);                                                             // 17406
                                                                                                                       // 17407
    addAltCursorListeners(editor);                                                                                     // 17408
}                                                                                                                      // 17409
                                                                                                                       // 17410
function addAltCursorListeners(editor){                                                                                // 17411
    var el = editor.textInput.getElement();                                                                            // 17412
    var altCursor = false;                                                                                             // 17413
    event.addListener(el, "keydown", function(e) {                                                                     // 17414
        if (e.keyCode == 18 && !(e.ctrlKey || e.shiftKey || e.metaKey)) {                                              // 17415
            if (!altCursor) {                                                                                          // 17416
                editor.renderer.setMouseCursor("crosshair");                                                           // 17417
                altCursor = true;                                                                                      // 17418
            }                                                                                                          // 17419
        } else if (altCursor) {                                                                                        // 17420
            reset();                                                                                                   // 17421
        }                                                                                                              // 17422
    });                                                                                                                // 17423
                                                                                                                       // 17424
    event.addListener(el, "keyup", reset);                                                                             // 17425
    event.addListener(el, "blur", reset);                                                                              // 17426
    function reset(e) {                                                                                                // 17427
        if (altCursor) {                                                                                               // 17428
            editor.renderer.setMouseCursor("");                                                                        // 17429
            altCursor = false;                                                                                         // 17430
        }                                                                                                              // 17431
    }                                                                                                                  // 17432
}                                                                                                                      // 17433
                                                                                                                       // 17434
exports.MultiSelect = MultiSelect;                                                                                     // 17435
                                                                                                                       // 17436
                                                                                                                       // 17437
require("./config").defineOptions(Editor.prototype, "editor", {                                                        // 17438
    enableMultiselect: {                                                                                               // 17439
        set: function(val) {                                                                                           // 17440
            MultiSelect(this);                                                                                         // 17441
            if (val) {                                                                                                 // 17442
                this.on("changeSession", this.$multiselectOnSessionChange);                                            // 17443
                this.on("mousedown", onMouseDown);                                                                     // 17444
            } else {                                                                                                   // 17445
                this.off("changeSession", this.$multiselectOnSessionChange);                                           // 17446
                this.off("mousedown", onMouseDown);                                                                    // 17447
            }                                                                                                          // 17448
        },                                                                                                             // 17449
        value: true                                                                                                    // 17450
    }                                                                                                                  // 17451
});                                                                                                                    // 17452
                                                                                                                       // 17453
                                                                                                                       // 17454
                                                                                                                       // 17455
});                                                                                                                    // 17456
                                                                                                                       // 17457
define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"], function(require, exports, module) {   // 17458
"use strict";                                                                                                          // 17459
                                                                                                                       // 17460
var Range = require("../../range").Range;                                                                              // 17461
                                                                                                                       // 17462
var FoldMode = exports.FoldMode = function() {};                                                                       // 17463
                                                                                                                       // 17464
(function() {                                                                                                          // 17465
                                                                                                                       // 17466
    this.foldingStartMarker = null;                                                                                    // 17467
    this.foldingStopMarker = null;                                                                                     // 17468
    this.getFoldWidget = function(session, foldStyle, row) {                                                           // 17469
        var line = session.getLine(row);                                                                               // 17470
        if (this.foldingStartMarker.test(line))                                                                        // 17471
            return "start";                                                                                            // 17472
        if (foldStyle == "markbeginend"                                                                                // 17473
                && this.foldingStopMarker                                                                              // 17474
                && this.foldingStopMarker.test(line))                                                                  // 17475
            return "end";                                                                                              // 17476
        return "";                                                                                                     // 17477
    };                                                                                                                 // 17478
                                                                                                                       // 17479
    this.getFoldWidgetRange = function(session, foldStyle, row) {                                                      // 17480
        return null;                                                                                                   // 17481
    };                                                                                                                 // 17482
                                                                                                                       // 17483
    this.indentationBlock = function(session, row, column) {                                                           // 17484
        var re = /\S/;                                                                                                 // 17485
        var line = session.getLine(row);                                                                               // 17486
        var startLevel = line.search(re);                                                                              // 17487
        if (startLevel == -1)                                                                                          // 17488
            return;                                                                                                    // 17489
                                                                                                                       // 17490
        var startColumn = column || line.length;                                                                       // 17491
        var maxRow = session.getLength();                                                                              // 17492
        var startRow = row;                                                                                            // 17493
        var endRow = row;                                                                                              // 17494
                                                                                                                       // 17495
        while (++row < maxRow) {                                                                                       // 17496
            var level = session.getLine(row).search(re);                                                               // 17497
                                                                                                                       // 17498
            if (level == -1)                                                                                           // 17499
                continue;                                                                                              // 17500
                                                                                                                       // 17501
            if (level <= startLevel)                                                                                   // 17502
                break;                                                                                                 // 17503
                                                                                                                       // 17504
            endRow = row;                                                                                              // 17505
        }                                                                                                              // 17506
                                                                                                                       // 17507
        if (endRow > startRow) {                                                                                       // 17508
            var endColumn = session.getLine(endRow).length;                                                            // 17509
            return new Range(startRow, startColumn, endRow, endColumn);                                                // 17510
        }                                                                                                              // 17511
    };                                                                                                                 // 17512
                                                                                                                       // 17513
    this.openingBracketBlock = function(session, bracket, row, column, typeRe) {                                       // 17514
        var start = {row: row, column: column + 1};                                                                    // 17515
        var end = session.$findClosingBracket(bracket, start, typeRe);                                                 // 17516
        if (!end)                                                                                                      // 17517
            return;                                                                                                    // 17518
                                                                                                                       // 17519
        var fw = session.foldWidgets[end.row];                                                                         // 17520
        if (fw == null)                                                                                                // 17521
            fw = session.getFoldWidget(end.row);                                                                       // 17522
                                                                                                                       // 17523
        if (fw == "start" && end.row > start.row) {                                                                    // 17524
            end.row --;                                                                                                // 17525
            end.column = session.getLine(end.row).length;                                                              // 17526
        }                                                                                                              // 17527
        return Range.fromPoints(start, end);                                                                           // 17528
    };                                                                                                                 // 17529
                                                                                                                       // 17530
    this.closingBracketBlock = function(session, bracket, row, column, typeRe) {                                       // 17531
        var end = {row: row, column: column};                                                                          // 17532
        var start = session.$findOpeningBracket(bracket, end);                                                         // 17533
                                                                                                                       // 17534
        if (!start)                                                                                                    // 17535
            return;                                                                                                    // 17536
                                                                                                                       // 17537
        start.column++;                                                                                                // 17538
        end.column--;                                                                                                  // 17539
                                                                                                                       // 17540
        return  Range.fromPoints(start, end);                                                                          // 17541
    };                                                                                                                 // 17542
}).call(FoldMode.prototype);                                                                                           // 17543
                                                                                                                       // 17544
});                                                                                                                    // 17545
                                                                                                                       // 17546
define("ace/theme/textmate",["require","exports","module","ace/lib/dom"], function(require, exports, module) {         // 17547
"use strict";                                                                                                          // 17548
                                                                                                                       // 17549
exports.isDark = false;                                                                                                // 17550
exports.cssClass = "ace-tm";                                                                                           // 17551
exports.cssText = ".ace-tm .ace_gutter {\
background: #f0f0f0;\
color: #333;\
}\
.ace-tm .ace_print-margin {\
width: 1px;\
background: #e8e8e8;\
}\
.ace-tm .ace_fold {\
background-color: #6B72E6;\
}\
.ace-tm {\
background-color: #FFFFFF;\
color: black;\
}\
.ace-tm .ace_cursor {\
color: black;\
}\
.ace-tm .ace_invisible {\
color: rgb(191, 191, 191);\
}\
.ace-tm .ace_storage,\
.ace-tm .ace_keyword {\
color: blue;\
}\
.ace-tm .ace_constant {\
color: rgb(197, 6, 11);\
}\
.ace-tm .ace_constant.ace_buildin {\
color: rgb(88, 72, 246);\
}\
.ace-tm .ace_constant.ace_language {\
color: rgb(88, 92, 246);\
}\
.ace-tm .ace_constant.ace_library {\
color: rgb(6, 150, 14);\
}\
.ace-tm .ace_invalid {\
background-color: rgba(255, 0, 0, 0.1);\
color: red;\
}\
.ace-tm .ace_support.ace_function {\
color: rgb(60, 76, 114);\
}\
.ace-tm .ace_support.ace_constant {\
color: rgb(6, 150, 14);\
}\
.ace-tm .ace_support.ace_type,\
.ace-tm .ace_support.ace_class {\
color: rgb(109, 121, 222);\
}\
.ace-tm .ace_keyword.ace_operator {\
color: rgb(104, 118, 135);\
}\
.ace-tm .ace_string {\
color: rgb(3, 106, 7);\
}\
.ace-tm .ace_comment {\
color: rgb(76, 136, 107);\
}\
.ace-tm .ace_comment.ace_doc {\
color: rgb(0, 102, 255);\
}\
.ace-tm .ace_comment.ace_doc.ace_tag {\
color: rgb(128, 159, 191);\
}\
.ace-tm .ace_constant.ace_numeric {\
color: rgb(0, 0, 205);\
}\
.ace-tm .ace_variable {\
color: rgb(49, 132, 149);\
}\
.ace-tm .ace_xml-pe {\
color: rgb(104, 104, 91);\
}\
.ace-tm .ace_entity.ace_name.ace_function {\
color: #0000A2;\
}\
.ace-tm .ace_heading {\
color: rgb(12, 7, 255);\
}\
.ace-tm .ace_list {\
color:rgb(185, 6, 144);\
}\
.ace-tm .ace_meta.ace_tag {\
color:rgb(0, 22, 142);\
}\
.ace-tm .ace_string.ace_regex {\
color: rgb(255, 0, 0)\
}\
.ace-tm .ace_marker-layer .ace_selection {\
background: rgb(181, 213, 255);\
}\
.ace-tm.ace_multiselect .ace_selection.ace_start {\
box-shadow: 0 0 3px 0px white;\
border-radius: 2px;\
}\
.ace-tm .ace_marker-layer .ace_step {\
background: rgb(252, 255, 0);\
}\
.ace-tm .ace_marker-layer .ace_stack {\
background: rgb(164, 229, 101);\
}\
.ace-tm .ace_marker-layer .ace_bracket {\
margin: -1px 0 0 -1px;\
border: 1px solid rgb(192, 192, 192);\
}\
.ace-tm .ace_marker-layer .ace_active-line {\
background: rgba(0, 0, 0, 0.07);\
}\
.ace-tm .ace_gutter-active-line {\
background-color : #dcdcdc;\
}\
.ace-tm .ace_marker-layer .ace_selected-word {\
background: rgb(250, 250, 255);\
border: 1px solid rgb(200, 200, 250);\
}\
.ace-tm .ace_indent-guide {\
background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\
}\
";                                                                                                                     // 17672
                                                                                                                       // 17673
var dom = require("../lib/dom");                                                                                       // 17674
dom.importCssString(exports.cssText, exports.cssClass);                                                                // 17675
});                                                                                                                    // 17676
                                                                                                                       // 17677
define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 17679
                                                                                                                       // 17680
var oop = require("./lib/oop");                                                                                        // 17681
var dom = require("./lib/dom");                                                                                        // 17682
var Range = require("./range").Range;                                                                                  // 17683
                                                                                                                       // 17684
                                                                                                                       // 17685
function LineWidgets(session) {                                                                                        // 17686
    this.session = session;                                                                                            // 17687
    this.session.widgetManager = this;                                                                                 // 17688
    this.session.getRowLength = this.getRowLength;                                                                     // 17689
    this.session.$getWidgetScreenLength = this.$getWidgetScreenLength;                                                 // 17690
    this.updateOnChange = this.updateOnChange.bind(this);                                                              // 17691
    this.renderWidgets = this.renderWidgets.bind(this);                                                                // 17692
    this.measureWidgets = this.measureWidgets.bind(this);                                                              // 17693
    this.session._changedWidgets = [];                                                                                 // 17694
    this.$onChangeEditor = this.$onChangeEditor.bind(this);                                                            // 17695
                                                                                                                       // 17696
    this.session.on("change", this.updateOnChange);                                                                    // 17697
    this.session.on("changeEditor", this.$onChangeEditor);                                                             // 17698
}                                                                                                                      // 17699
                                                                                                                       // 17700
(function() {                                                                                                          // 17701
    this.getRowLength = function(row) {                                                                                // 17702
        var h;                                                                                                         // 17703
        if (this.lineWidgets)                                                                                          // 17704
            h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;                                          // 17705
        else                                                                                                           // 17706
            h = 0;                                                                                                     // 17707
        if (!this.$useWrapMode || !this.$wrapData[row]) {                                                              // 17708
            return 1 + h;                                                                                              // 17709
        } else {                                                                                                       // 17710
            return this.$wrapData[row].length + 1 + h;                                                                 // 17711
        }                                                                                                              // 17712
    };                                                                                                                 // 17713
                                                                                                                       // 17714
    this.$getWidgetScreenLength = function() {                                                                         // 17715
        var screenRows = 0;                                                                                            // 17716
        this.lineWidgets.forEach(function(w){                                                                          // 17717
            if (w && w.rowCount)                                                                                       // 17718
                screenRows +=w.rowCount;                                                                               // 17719
        });                                                                                                            // 17720
        return screenRows;                                                                                             // 17721
    };                                                                                                                 // 17722
                                                                                                                       // 17723
    this.$onChangeEditor = function(e) {                                                                               // 17724
        this.attach(e.editor);                                                                                         // 17725
    };                                                                                                                 // 17726
                                                                                                                       // 17727
    this.attach = function(editor) {                                                                                   // 17728
        if (editor  && editor.widgetManager && editor.widgetManager != this)                                           // 17729
            editor.widgetManager.detach();                                                                             // 17730
                                                                                                                       // 17731
        if (this.editor == editor)                                                                                     // 17732
            return;                                                                                                    // 17733
                                                                                                                       // 17734
        this.detach();                                                                                                 // 17735
        this.editor = editor;                                                                                          // 17736
                                                                                                                       // 17737
        if (editor) {                                                                                                  // 17738
            editor.widgetManager = this;                                                                               // 17739
            editor.renderer.on("beforeRender", this.measureWidgets);                                                   // 17740
            editor.renderer.on("afterRender", this.renderWidgets);                                                     // 17741
        }                                                                                                              // 17742
    };                                                                                                                 // 17743
    this.detach = function(e) {                                                                                        // 17744
        var editor = this.editor;                                                                                      // 17745
        if (!editor)                                                                                                   // 17746
            return;                                                                                                    // 17747
                                                                                                                       // 17748
        this.editor = null;                                                                                            // 17749
        editor.widgetManager = null;                                                                                   // 17750
                                                                                                                       // 17751
        editor.renderer.off("beforeRender", this.measureWidgets);                                                      // 17752
        editor.renderer.off("afterRender", this.renderWidgets);                                                        // 17753
        var lineWidgets = this.session.lineWidgets;                                                                    // 17754
        lineWidgets && lineWidgets.forEach(function(w) {                                                               // 17755
            if (w && w.el && w.el.parentNode) {                                                                        // 17756
                w._inDocument = false;                                                                                 // 17757
                w.el.parentNode.removeChild(w.el);                                                                     // 17758
            }                                                                                                          // 17759
        });                                                                                                            // 17760
    };                                                                                                                 // 17761
                                                                                                                       // 17762
    this.updateOnChange = function(e) {                                                                                // 17763
        var lineWidgets = this.session.lineWidgets;                                                                    // 17764
        if (!lineWidgets) return;                                                                                      // 17765
                                                                                                                       // 17766
        var delta = e.data;                                                                                            // 17767
        var range = delta.range;                                                                                       // 17768
        var startRow = range.start.row;                                                                                // 17769
        var len = range.end.row - startRow;                                                                            // 17770
                                                                                                                       // 17771
        if (len === 0) {                                                                                               // 17772
        } else if (delta.action == "removeText" || delta.action == "removeLines") {                                    // 17773
            var removed = lineWidgets.splice(startRow + 1, len);                                                       // 17774
            removed.forEach(function(w) {                                                                              // 17775
                w && this.removeLineWidget(w);                                                                         // 17776
            }, this);                                                                                                  // 17777
            this.$updateRows();                                                                                        // 17778
        } else {                                                                                                       // 17779
            var args = new Array(len);                                                                                 // 17780
            args.unshift(startRow, 0);                                                                                 // 17781
            lineWidgets.splice.apply(lineWidgets, args);                                                               // 17782
            this.$updateRows();                                                                                        // 17783
        }                                                                                                              // 17784
    };                                                                                                                 // 17785
                                                                                                                       // 17786
    this.$updateRows = function() {                                                                                    // 17787
        var lineWidgets = this.session.lineWidgets;                                                                    // 17788
        if (!lineWidgets) return;                                                                                      // 17789
        var noWidgets = true;                                                                                          // 17790
        lineWidgets.forEach(function(w, i) {                                                                           // 17791
            if (w) {                                                                                                   // 17792
                noWidgets = false;                                                                                     // 17793
                w.row = i;                                                                                             // 17794
            }                                                                                                          // 17795
        });                                                                                                            // 17796
        if (noWidgets)                                                                                                 // 17797
            this.session.lineWidgets = null;                                                                           // 17798
    };                                                                                                                 // 17799
                                                                                                                       // 17800
    this.addLineWidget = function(w) {                                                                                 // 17801
        if (!this.session.lineWidgets)                                                                                 // 17802
            this.session.lineWidgets = new Array(this.session.getLength());                                            // 17803
                                                                                                                       // 17804
        this.session.lineWidgets[w.row] = w;                                                                           // 17805
                                                                                                                       // 17806
        var renderer = this.editor.renderer;                                                                           // 17807
        if (w.html && !w.el) {                                                                                         // 17808
            w.el = dom.createElement("div");                                                                           // 17809
            w.el.innerHTML = w.html;                                                                                   // 17810
        }                                                                                                              // 17811
        if (w.el) {                                                                                                    // 17812
            dom.addCssClass(w.el, "ace_lineWidgetContainer");                                                          // 17813
            w.el.style.position = "absolute";                                                                          // 17814
            w.el.style.zIndex = 5;                                                                                     // 17815
            renderer.container.appendChild(w.el);                                                                      // 17816
            w._inDocument = true;                                                                                      // 17817
        }                                                                                                              // 17818
                                                                                                                       // 17819
        if (!w.coverGutter) {                                                                                          // 17820
            w.el.style.zIndex = 3;                                                                                     // 17821
        }                                                                                                              // 17822
        if (!w.pixelHeight) {                                                                                          // 17823
            w.pixelHeight = w.el.offsetHeight;                                                                         // 17824
        }                                                                                                              // 17825
        if (w.rowCount == null)                                                                                        // 17826
            w.rowCount = w.pixelHeight / renderer.layerConfig.lineHeight;                                              // 17827
                                                                                                                       // 17828
        this.session._emit("changeFold", {data:{start:{row: w.row}}});                                                 // 17829
                                                                                                                       // 17830
        this.$updateRows();                                                                                            // 17831
        this.renderWidgets(null, renderer);                                                                            // 17832
        return w;                                                                                                      // 17833
    };                                                                                                                 // 17834
                                                                                                                       // 17835
    this.removeLineWidget = function(w) {                                                                              // 17836
        w._inDocument = false;                                                                                         // 17837
        if (w.el && w.el.parentNode)                                                                                   // 17838
            w.el.parentNode.removeChild(w.el);                                                                         // 17839
        if (w.editor && w.editor.destroy) try {                                                                        // 17840
            w.editor.destroy();                                                                                        // 17841
        } catch(e){}                                                                                                   // 17842
        if (this.session.lineWidgets)                                                                                  // 17843
            this.session.lineWidgets[w.row] = undefined;                                                               // 17844
        this.session._emit("changeFold", {data:{start:{row: w.row}}});                                                 // 17845
        this.$updateRows();                                                                                            // 17846
    };                                                                                                                 // 17847
                                                                                                                       // 17848
    this.onWidgetChanged = function(w) {                                                                               // 17849
        this.session._changedWidgets.push(w);                                                                          // 17850
        this.editor && this.editor.renderer.updateFull();                                                              // 17851
    };                                                                                                                 // 17852
                                                                                                                       // 17853
    this.measureWidgets = function(e, renderer) {                                                                      // 17854
        var changedWidgets = this.session._changedWidgets;                                                             // 17855
        var config = renderer.layerConfig;                                                                             // 17856
                                                                                                                       // 17857
        if (!changedWidgets || !changedWidgets.length) return;                                                         // 17858
        var min = Infinity;                                                                                            // 17859
        for (var i = 0; i < changedWidgets.length; i++) {                                                              // 17860
            var w = changedWidgets[i];                                                                                 // 17861
            if (!w._inDocument) {                                                                                      // 17862
                w._inDocument = true;                                                                                  // 17863
                renderer.container.appendChild(w.el);                                                                  // 17864
            }                                                                                                          // 17865
                                                                                                                       // 17866
            w.h = w.el.offsetHeight;                                                                                   // 17867
                                                                                                                       // 17868
            if (!w.fixedWidth) {                                                                                       // 17869
                w.w = w.el.offsetWidth;                                                                                // 17870
                w.screenWidth = Math.ceil(w.w / config.characterWidth);                                                // 17871
            }                                                                                                          // 17872
                                                                                                                       // 17873
            var rowCount = w.h / config.lineHeight;                                                                    // 17874
            if (w.coverLine) {                                                                                         // 17875
                rowCount -= this.session.getRowLineCount(w.row);                                                       // 17876
                if (rowCount < 0)                                                                                      // 17877
                    rowCount = 0;                                                                                      // 17878
            }                                                                                                          // 17879
            if (w.rowCount != rowCount) {                                                                              // 17880
                w.rowCount = rowCount;                                                                                 // 17881
                if (w.row < min)                                                                                       // 17882
                    min = w.row;                                                                                       // 17883
            }                                                                                                          // 17884
        }                                                                                                              // 17885
        if (min != Infinity) {                                                                                         // 17886
            this.session._emit("changeFold", {data:{start:{row: min}}});                                               // 17887
            this.session.lineWidgetWidth = null;                                                                       // 17888
        }                                                                                                              // 17889
        this.session._changedWidgets = [];                                                                             // 17890
    };                                                                                                                 // 17891
                                                                                                                       // 17892
    this.renderWidgets = function(e, renderer) {                                                                       // 17893
        var config = renderer.layerConfig;                                                                             // 17894
        var lineWidgets = this.session.lineWidgets;                                                                    // 17895
        if (!lineWidgets)                                                                                              // 17896
            return;                                                                                                    // 17897
        var first = Math.min(this.firstRow, config.firstRow);                                                          // 17898
        var last = Math.max(this.lastRow, config.lastRow, lineWidgets.length);                                         // 17899
                                                                                                                       // 17900
        while (first > 0 && !lineWidgets[first])                                                                       // 17901
            first--;                                                                                                   // 17902
                                                                                                                       // 17903
        this.firstRow = config.firstRow;                                                                               // 17904
        this.lastRow = config.lastRow;                                                                                 // 17905
                                                                                                                       // 17906
        renderer.$cursorLayer.config = config;                                                                         // 17907
        for (var i = first; i <= last; i++) {                                                                          // 17908
            var w = lineWidgets[i];                                                                                    // 17909
            if (!w || !w.el) continue;                                                                                 // 17910
                                                                                                                       // 17911
            if (!w._inDocument) {                                                                                      // 17912
                w._inDocument = true;                                                                                  // 17913
                renderer.container.appendChild(w.el);                                                                  // 17914
            }                                                                                                          // 17915
            var top = renderer.$cursorLayer.getPixelPosition({row: i, column:0}, true).top;                            // 17916
            if (!w.coverLine)                                                                                          // 17917
                top += config.lineHeight * this.session.getRowLineCount(w.row);                                        // 17918
            w.el.style.top = top - config.offset + "px";                                                               // 17919
                                                                                                                       // 17920
            var left = w.coverGutter ? 0 : renderer.gutterWidth;                                                       // 17921
            if (!w.fixedWidth)                                                                                         // 17922
                left -= renderer.scrollLeft;                                                                           // 17923
            w.el.style.left = left + "px";                                                                             // 17924
                                                                                                                       // 17925
            if (w.fixedWidth) {                                                                                        // 17926
                w.el.style.right = renderer.scrollBar.getWidth() + "px";                                               // 17927
            } else {                                                                                                   // 17928
                w.el.style.right = "";                                                                                 // 17929
            }                                                                                                          // 17930
        }                                                                                                              // 17931
    };                                                                                                                 // 17932
                                                                                                                       // 17933
}).call(LineWidgets.prototype);                                                                                        // 17934
                                                                                                                       // 17935
                                                                                                                       // 17936
exports.LineWidgets = LineWidgets;                                                                                     // 17937
                                                                                                                       // 17938
});                                                                                                                    // 17939
                                                                                                                       // 17940
define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"], function(require, exports, module) {
"use strict";                                                                                                          // 17942
var LineWidgets = require("../line_widgets").LineWidgets;                                                              // 17943
var dom = require("../lib/dom");                                                                                       // 17944
var Range = require("../range").Range;                                                                                 // 17945
                                                                                                                       // 17946
function binarySearch(array, needle, comparator) {                                                                     // 17947
    var first = 0;                                                                                                     // 17948
    var last = array.length - 1;                                                                                       // 17949
                                                                                                                       // 17950
    while (first <= last) {                                                                                            // 17951
        var mid = (first + last) >> 1;                                                                                 // 17952
        var c = comparator(needle, array[mid]);                                                                        // 17953
        if (c > 0)                                                                                                     // 17954
            first = mid + 1;                                                                                           // 17955
        else if (c < 0)                                                                                                // 17956
            last = mid - 1;                                                                                            // 17957
        else                                                                                                           // 17958
            return mid;                                                                                                // 17959
    }                                                                                                                  // 17960
    return -(first + 1);                                                                                               // 17961
}                                                                                                                      // 17962
                                                                                                                       // 17963
function findAnnotations(session, row, dir) {                                                                          // 17964
    var annotations = session.getAnnotations().sort(Range.comparePoints);                                              // 17965
    if (!annotations.length)                                                                                           // 17966
        return;                                                                                                        // 17967
                                                                                                                       // 17968
    var i = binarySearch(annotations, {row: row, column: -1}, Range.comparePoints);                                    // 17969
    if (i < 0)                                                                                                         // 17970
        i = -i - 1;                                                                                                    // 17971
                                                                                                                       // 17972
    if (i >= annotations.length - 1)                                                                                   // 17973
        i = dir > 0 ? 0 : annotations.length - 1;                                                                      // 17974
    else if (i === 0 && dir < 0)                                                                                       // 17975
        i = annotations.length - 1;                                                                                    // 17976
                                                                                                                       // 17977
    var annotation = annotations[i];                                                                                   // 17978
    if (!annotation || !dir)                                                                                           // 17979
        return;                                                                                                        // 17980
                                                                                                                       // 17981
    if (annotation.row === row) {                                                                                      // 17982
        do {                                                                                                           // 17983
            annotation = annotations[i += dir];                                                                        // 17984
        } while (annotation && annotation.row === row);                                                                // 17985
        if (!annotation)                                                                                               // 17986
            return annotations.slice();                                                                                // 17987
    }                                                                                                                  // 17988
                                                                                                                       // 17989
                                                                                                                       // 17990
    var matched = [];                                                                                                  // 17991
    row = annotation.row;                                                                                              // 17992
    do {                                                                                                               // 17993
        matched[dir < 0 ? "unshift" : "push"](annotation);                                                             // 17994
        annotation = annotations[i += dir];                                                                            // 17995
    } while (annotation && annotation.row == row);                                                                     // 17996
    return matched.length && matched;                                                                                  // 17997
}                                                                                                                      // 17998
                                                                                                                       // 17999
exports.showErrorMarker = function(editor, dir) {                                                                      // 18000
    var session = editor.session;                                                                                      // 18001
    if (!session.widgetManager) {                                                                                      // 18002
        session.widgetManager = new LineWidgets(session);                                                              // 18003
        session.widgetManager.attach(editor);                                                                          // 18004
    }                                                                                                                  // 18005
                                                                                                                       // 18006
    var pos = editor.getCursorPosition();                                                                              // 18007
    var row = pos.row;                                                                                                 // 18008
    var oldWidget = session.lineWidgets && session.lineWidgets[row];                                                   // 18009
    if (oldWidget) {                                                                                                   // 18010
        oldWidget.destroy();                                                                                           // 18011
    } else {                                                                                                           // 18012
        row -= dir;                                                                                                    // 18013
    }                                                                                                                  // 18014
    var annotations = findAnnotations(session, row, dir);                                                              // 18015
    var gutterAnno;                                                                                                    // 18016
    if (annotations) {                                                                                                 // 18017
        var annotation = annotations[0];                                                                               // 18018
        pos.column = (annotation.pos && typeof annotation.column != "number"                                           // 18019
            ? annotation.pos.sc                                                                                        // 18020
            : annotation.column) || 0;                                                                                 // 18021
        pos.row = annotation.row;                                                                                      // 18022
        gutterAnno = editor.renderer.$gutterLayer.$annotations[pos.row];                                               // 18023
    } else if (oldWidget) {                                                                                            // 18024
        return;                                                                                                        // 18025
    } else {                                                                                                           // 18026
        gutterAnno = {                                                                                                 // 18027
            text: ["Looks good!"],                                                                                     // 18028
            className: "ace_ok"                                                                                        // 18029
        };                                                                                                             // 18030
    }                                                                                                                  // 18031
    editor.session.unfold(pos.row);                                                                                    // 18032
    editor.selection.moveToPosition(pos);                                                                              // 18033
                                                                                                                       // 18034
    var w = {                                                                                                          // 18035
        row: pos.row,                                                                                                  // 18036
        fixedWidth: true,                                                                                              // 18037
        coverGutter: true,                                                                                             // 18038
        el: dom.createElement("div")                                                                                   // 18039
    };                                                                                                                 // 18040
    var el = w.el.appendChild(dom.createElement("div"));                                                               // 18041
    var arrow = w.el.appendChild(dom.createElement("div"));                                                            // 18042
    arrow.className = "error_widget_arrow " + gutterAnno.className;                                                    // 18043
                                                                                                                       // 18044
    var left = editor.renderer.$cursorLayer                                                                            // 18045
        .getPixelPosition(pos).left;                                                                                   // 18046
    arrow.style.left = left + editor.renderer.gutterWidth - 5 + "px";                                                  // 18047
                                                                                                                       // 18048
    w.el.className = "error_widget_wrapper";                                                                           // 18049
    el.className = "error_widget " + gutterAnno.className;                                                             // 18050
    el.innerHTML = gutterAnno.text.join("<br>");                                                                       // 18051
                                                                                                                       // 18052
    el.appendChild(dom.createElement("div"));                                                                          // 18053
                                                                                                                       // 18054
    var kb = function(_, hashId, keyString) {                                                                          // 18055
        if (hashId === 0 && (keyString === "esc" || keyString === "return")) {                                         // 18056
            w.destroy();                                                                                               // 18057
            return {command: "null"};                                                                                  // 18058
        }                                                                                                              // 18059
    };                                                                                                                 // 18060
                                                                                                                       // 18061
    w.destroy = function() {                                                                                           // 18062
        if (editor.$mouseHandler.isMousePressed)                                                                       // 18063
            return;                                                                                                    // 18064
        editor.keyBinding.removeKeyboardHandler(kb);                                                                   // 18065
        session.widgetManager.removeLineWidget(w);                                                                     // 18066
        editor.off("changeSelection", w.destroy);                                                                      // 18067
        editor.off("changeSession", w.destroy);                                                                        // 18068
        editor.off("mouseup", w.destroy);                                                                              // 18069
        editor.off("change", w.destroy);                                                                               // 18070
    };                                                                                                                 // 18071
                                                                                                                       // 18072
    editor.keyBinding.addKeyboardHandler(kb);                                                                          // 18073
    editor.on("changeSelection", w.destroy);                                                                           // 18074
    editor.on("changeSession", w.destroy);                                                                             // 18075
    editor.on("mouseup", w.destroy);                                                                                   // 18076
    editor.on("change", w.destroy);                                                                                    // 18077
                                                                                                                       // 18078
    editor.session.widgetManager.addLineWidget(w);                                                                     // 18079
                                                                                                                       // 18080
    w.el.onmousedown = editor.focus.bind(editor);                                                                      // 18081
                                                                                                                       // 18082
    editor.renderer.scrollCursorIntoView(null, 0.5, {bottom: w.el.offsetHeight});                                      // 18083
};                                                                                                                     // 18084
                                                                                                                       // 18085
                                                                                                                       // 18086
dom.importCssString("\
    .error_widget_wrapper {\
        background: inherit;\
        color: inherit;\
        border:none\
    }\
    .error_widget {\
        border-top: solid 2px;\
        border-bottom: solid 2px;\
        margin: 5px 0;\
        padding: 10px 40px;\
        white-space: pre-wrap;\
    }\
    .error_widget.ace_error, .error_widget_arrow.ace_error{\
        border-color: #ff5a5a\
    }\
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\
        border-color: #F1D817\
    }\
    .error_widget.ace_info, .error_widget_arrow.ace_info{\
        border-color: #5a5a5a\
    }\
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\
        border-color: #5aaa5a\
    }\
    .error_widget_arrow {\
        position: absolute;\
        border: solid 5px;\
        border-top-color: transparent!important;\
        border-right-color: transparent!important;\
        border-left-color: transparent!important;\
        top: -5px;\
    }\
", "");                                                                                                                // 18120
                                                                                                                       // 18121
});                                                                                                                    // 18122
                                                                                                                       // 18123
define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"], function(require, exports, module) {
"use strict";                                                                                                          // 18125
                                                                                                                       // 18126
require("./lib/fixoldbrowsers");                                                                                       // 18127
                                                                                                                       // 18128
var dom = require("./lib/dom");                                                                                        // 18129
var event = require("./lib/event");                                                                                    // 18130
                                                                                                                       // 18131
var Editor = require("./editor").Editor;                                                                               // 18132
var EditSession = require("./edit_session").EditSession;                                                               // 18133
var UndoManager = require("./undomanager").UndoManager;                                                                // 18134
var Renderer = require("./virtual_renderer").VirtualRenderer;                                                          // 18135
require("./worker/worker_client");                                                                                     // 18136
require("./keyboard/hash_handler");                                                                                    // 18137
require("./placeholder");                                                                                              // 18138
require("./multi_select");                                                                                             // 18139
require("./mode/folding/fold_mode");                                                                                   // 18140
require("./theme/textmate");                                                                                           // 18141
require("./ext/error_marker");                                                                                         // 18142
                                                                                                                       // 18143
exports.config = require("./config");                                                                                  // 18144
exports.require = require;                                                                                             // 18145
exports.edit = function(el) {                                                                                          // 18146
    if (typeof(el) == "string") {                                                                                      // 18147
        var _id = el;                                                                                                  // 18148
        el = document.getElementById(_id);                                                                             // 18149
        if (!el)                                                                                                       // 18150
            throw new Error("ace.edit can't find div #" + _id);                                                        // 18151
    }                                                                                                                  // 18152
                                                                                                                       // 18153
    if (el && el.env && el.env.editor instanceof Editor)                                                               // 18154
        return el.env.editor;                                                                                          // 18155
                                                                                                                       // 18156
    var value = "";                                                                                                    // 18157
    if (el && /input|textarea/i.test(el.tagName)) {                                                                    // 18158
        var oldNode = el;                                                                                              // 18159
        value = oldNode.value;                                                                                         // 18160
        el = dom.createElement("pre");                                                                                 // 18161
        oldNode.parentNode.replaceChild(el, oldNode);                                                                  // 18162
    } else {                                                                                                           // 18163
        value = dom.getInnerText(el);                                                                                  // 18164
        el.innerHTML = '';                                                                                             // 18165
    }                                                                                                                  // 18166
                                                                                                                       // 18167
    var doc = exports.createEditSession(value);                                                                        // 18168
                                                                                                                       // 18169
    var editor = new Editor(new Renderer(el));                                                                         // 18170
    editor.setSession(doc);                                                                                            // 18171
                                                                                                                       // 18172
    var env = {                                                                                                        // 18173
        document: doc,                                                                                                 // 18174
        editor: editor,                                                                                                // 18175
        onResize: editor.resize.bind(editor, null)                                                                     // 18176
    };                                                                                                                 // 18177
    if (oldNode) env.textarea = oldNode;                                                                               // 18178
    event.addListener(window, "resize", env.onResize);                                                                 // 18179
    editor.on("destroy", function() {                                                                                  // 18180
        event.removeListener(window, "resize", env.onResize);                                                          // 18181
        env.editor.container.env = null; // prevent memory leak on old ie                                              // 18182
    });                                                                                                                // 18183
    editor.container.env = editor.env = env;                                                                           // 18184
    return editor;                                                                                                     // 18185
};                                                                                                                     // 18186
exports.createEditSession = function(text, mode) {                                                                     // 18187
    var doc = new EditSession(text, mode);                                                                             // 18188
    doc.setUndoManager(new UndoManager());                                                                             // 18189
    return doc;                                                                                                        // 18190
}                                                                                                                      // 18191
exports.EditSession = EditSession;                                                                                     // 18192
exports.UndoManager = UndoManager;                                                                                     // 18193
});                                                                                                                    // 18194
            (function() {                                                                                              // 18195
                window.require(["ace/ace"], function(a) {                                                              // 18196
                    a && a.config.init(true);                                                                          // 18197
                    if (!window.ace)                                                                                   // 18198
                        window.ace = a;                                                                                // 18199
                    for (var key in a) if (a.hasOwnProperty(key))                                                      // 18200
                        window.ace[key] = a[key];                                                                      // 18201
                });                                                                                                    // 18202
            })();                                                                                                      // 18203
                                                                                                                       // 18204






(function () {

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/mizzao:sharejs-ace/template.templates.js                                                                   //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
                                                                                                                       // 1
Template.__checkName("_sharejsAce");                                                                                   // 2
Template["_sharejsAce"] = new Template("Template._sharejsAce", (function() {                                           // 3
  var view = this;                                                                                                     // 4
  return HTML.DIV({                                                                                                    // 5
    id: function() {                                                                                                   // 6
      return Spacebars.mustache(view.lookup("id"));                                                                    // 7
    },                                                                                                                 // 8
    "data-docid": function() {                                                                                         // 9
      return Spacebars.mustache(view.lookup("docid"));                                                                 // 10
    },                                                                                                                 // 11
    "class": "shareJSAce"                                                                                              // 12
  });                                                                                                                  // 13
}));                                                                                                                   // 14
                                                                                                                       // 15
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);






(function () {

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                                                                     //
// packages/mizzao:sharejs-ace/client.coffee.js                                                                        //
//                                                                                                                     //
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                                                                                                                       //
__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;
var ShareJSAceConnector, UndoManager,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

require('ace/config').set('basePath', '/packages/mizzao_sharejs-ace/ace-builds/src');

UndoManager = require('ace/undomanager').UndoManager;

ShareJSAceConnector = (function(_super) {
  __extends(ShareJSAceConnector, _super);

  function ShareJSAceConnector() {
    return ShareJSAceConnector.__super__.constructor.apply(this, arguments);
  }

  ShareJSAceConnector.prototype.createView = function() {
    return Blaze.With(Blaze.getData, function() {
      return Template._sharejsAce;
    });
  };

  ShareJSAceConnector.prototype.rendered = function(element) {
    ShareJSAceConnector.__super__.rendered.apply(this, arguments);
    this.ace = ace.edit(element);
    return typeof this.configCallback === "function" ? this.configCallback(this.ace) : void 0;
  };

  ShareJSAceConnector.prototype.connect = function() {
    this.ace.setReadOnly(true);
    return ShareJSAceConnector.__super__.connect.apply(this, arguments);
  };

  ShareJSAceConnector.prototype.attach = function(doc) {
    ShareJSAceConnector.__super__.attach.apply(this, arguments);
    doc.attach_ace(this.ace);
    this.ace.getSession().setUndoManager(new UndoManager);
    this.ace.setReadOnly(false);
    return typeof this.connectCallback === "function" ? this.connectCallback(this.ace) : void 0;
  };

  ShareJSAceConnector.prototype.disconnect = function() {
    var _ref;
    if ((_ref = this.doc) != null) {
      if (typeof _ref.detach_ace === "function") {
        _ref.detach_ace();
      }
    }
    return ShareJSAceConnector.__super__.disconnect.apply(this, arguments);
  };

  ShareJSAceConnector.prototype.destroy = function() {
    var _ref;
    ShareJSAceConnector.__super__.destroy.apply(this, arguments);
    if ((_ref = this.ace) != null) {
      _ref.destroy();
    }
    return this.ace = null;
  };

  return ShareJSAceConnector;

})(ShareJSConnector);

UI.registerHelper("sharejsAce", new Template('sharejsAce', function() {
  return new ShareJSAceConnector(this).create();
}));
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}).call(this);


/* Exports */
if (typeof Package === 'undefined') Package = {};
Package['mizzao:sharejs-ace'] = {};

})();
